import{a as getAugmentedNamespace,g as getDefaultExportFromCjs}from"./relativeTime-D_37-vL5.js";function _mergeNamespaces(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const u in i)if(u!=="default"&&!(u in t)){const l=Object.getOwnPropertyDescriptor(i,u);l&&Object.defineProperty(t,u,l.get?l:{enumerable:!0,get:()=>i[u]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}/*!
 * jQuery serializeObject - v0.2 - 1/20/2010
 * http://benalman.com/projects/jquery-misc-plugins/
 *
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */(function(t,e){"$:nomunge";t.fn.serializeObject=function(){var I={};return t.each(this.serializeArray(),function(v,T){var S=T.name,P=T.value;I[S]=I[S]===e?P:t.isArray(I[S])?I[S].concat(P):[I[S],P]}),I};var n,i,u,l,d,g,_,b,$,w,p;n=void 0,_=void 0,g=void 0,u=0,l=350,w=void 0,p=void 0,$=function(I,v){return n=t(I.data.el),n.addClass("clear-transitions"),n.blur(),u=d(I).y,_=u,g=n.height(),p=(function(){return function(T){return b(T,v)}})(),w=(function(){return function(T){return i(T,v)}})(),t(document).mousemove(p).mouseup(w),!1},b=function(I,v){t(n).trigger("div-resizing");var T,S,P;P=d(I).y,T=g+(_-P),u=P;var R=t(window).height();return v.maxHeight&&(R=v.maxHeight(R)),T=Math.min(T,R),T=Math.max(l,T),S=T+"px",typeof v.onDrag=="function"&&v.onDrag(S),n.height(S),T<l&&i(I,v),!1},i=function(I,v){t(document).unbind("mousemove",p).unbind("mouseup",w),n.removeClass("clear-transitions"),n.focus(),typeof v.resize=="function"&&v.resize(),t(n).trigger("div-resized"),n=null},d=function(I){return{x:I.clientX+document.documentElement.scrollLeft,y:I.clientY+document.documentElement.scrollTop}},t.fn.DivResizer=function(I){return this.each(function(){var v;n=t(this),!n.hasClass("processed")&&(n.addClass("processed"),v=function(){return function(T){return $(T,I)}},n.prepend("<div class='grippie'></div>").find(".grippie").bind("mousedown",{el:this},v()))})}})(jQuery);typeof JSON!="object"&&(JSON={}),(function(){function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(e){var n=meta[e];return typeof n=="string"?n:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,u,l,d=gap,g,_=e[t];switch(_&&typeof _=="object"&&typeof _.toJSON=="function"&&(_=_.toJSON(t)),typeof rep=="function"&&(_=rep.call(e,t,_)),typeof _){case"string":return quote(_);case"number":return isFinite(_)?String(_):"null";case"boolean":case"null":return String(_);case"object":if(!_)return"null";if(gap+=indent,g=[],Object.prototype.toString.apply(_)==="[object Array]"){for(l=_.length,n=0;n<l;n+=1)g[n]=str(n,_)||"null";return u=g.length===0?"[]":gap?`[
`+gap+g.join(`,
`+gap)+`
`+d+"]":"["+g.join(",")+"]",gap=d,u}if(rep&&typeof rep=="object")for(l=rep.length,n=0;n<l;n+=1)typeof rep[n]=="string"&&(i=rep[n],u=str(i,_),u&&g.push(quote(i)+(gap?": ":":")+u));else for(i in _)Object.prototype.hasOwnProperty.call(_,i)&&(u=str(i,_),u&&g.push(quote(i)+(gap?": ":":")+u));return u=g.length===0?"{}":gap?`{
`+gap+g.join(`,
`+gap)+`
`+d+"}":"{"+g.join(",")+"}",gap=d,u}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(t){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;typeof JSON.stringify!="function"&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="",typeof n=="number")for(i=0;i<n;i+=1)indent+=" ";else typeof n=="string"&&(indent=n);if(rep=e,!e||typeof e=="function"||typeof e=="object"&&typeof e.length=="number")return str("",{"":t});throw new Error("JSON.stringify")}),typeof JSON.parse!="function"&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,u=t[e];if(u&&typeof u=="object")for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(i=walk(u,n),i!==void 0?u[n]=i:delete u[n]);return reviver.call(t,e,u)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),typeof reviver=="function"?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})})(),(function(t,e){var n=t.History=t.History||{},i=t.jQuery;if(typeof n.Adapter!="undefined")throw new Error("History.js Adapter has already been loaded...");n.Adapter={bind:function(u,l,d){i(u).bind(l,d)},trigger:function(u,l,d){i(u).trigger(l,d)},extractEventData:function(u,l,d){var g=l&&l.originalEvent&&l.originalEvent[u]||d&&d[u]||e;return g},onDomLoad:function(u){i(u)}},typeof n.init!="undefined"&&n.init()})(window),(function(t,e){var n=t.document,i=t.setInterval||i,u=t.History=t.History||{};if(typeof u.initHtml4!="undefined")throw new Error("History.js HTML4 Support has already been loaded...");u.initHtml4=function(){if(typeof u.initHtml4.initialized!="undefined")return!1;u.initHtml4.initialized=!0,u.enabled=!0,u.savedHashes=[],u.isLastHash=function(l){var d=u.getHashByIndex(),g;return g=l===d,g},u.isHashEqual=function(l,d){return l=encodeURIComponent(l).replace(/%25/g,"%"),d=encodeURIComponent(d).replace(/%25/g,"%"),l===d},u.saveHash=function(l){return u.isLastHash(l)?!1:(u.savedHashes.push(l),!0)},u.getHashByIndex=function(l){var d=null;return typeof l=="undefined"?d=u.savedHashes[u.savedHashes.length-1]:l<0?d=u.savedHashes[u.savedHashes.length+l]:d=u.savedHashes[l],d},u.discardedHashes={},u.discardedStates={},u.discardState=function(l,d,g){var _=u.getHashByState(l),b;return b={discardedState:l,backState:g,forwardState:d},u.discardedStates[_]=b,!0},u.discardHash=function(l,d,g){var _={discardedHash:l,backState:g,forwardState:d};return u.discardedHashes[l]=_,!0},u.discardedState=function(l){var d=u.getHashByState(l),g;return g=u.discardedStates[d]||!1,g},u.discardedHash=function(l){var d=u.discardedHashes[l]||!1;return d},u.recycleState=function(l){var d=u.getHashByState(l);return u.discardedState(l)&&delete u.discardedStates[d],!0},u.emulated.hashChange&&(u.hashChangeInit=function(){u.checkerFunction=null;var l="",d,g,_,b,$=!!u.getHash();return u.isInternetExplorer()?(d="historyjs-iframe",g=n.createElement("iframe"),g.setAttribute("id",d),g.setAttribute("src","#"),g.style.display="none",n.body.appendChild(g),g.contentWindow.document.open(),g.contentWindow.document.close(),_="",b=!1,u.checkerFunction=function(){if(b)return!1;b=!0;var w=u.getHash(),p=u.getHash(g.contentWindow.document);return w!==l?(l=w,p!==w&&(_=p=w,g.contentWindow.document.open(),g.contentWindow.document.close(),g.contentWindow.document.location.hash=u.escapeHash(w)),u.Adapter.trigger(t,"hashchange")):p!==_&&(_=p,$&&p===""?u.back():u.setHash(p,!1)),b=!1,!0}):u.checkerFunction=function(){var w=u.getHash()||"";return w!==l&&(l=w,u.Adapter.trigger(t,"hashchange")),!0},u.intervalList.push(i(u.checkerFunction,u.options.hashChangeInterval)),!0},u.Adapter.onDomLoad(u.hashChangeInit)),u.emulated.pushState&&(u.onHashChange=function(l){var d=l&&l.newURL||u.getLocationHref(),g=u.getHashByUrl(d),_=null,b;return u.isLastHash(g)?(u.busy(!1),!1):(u.doubleCheckComplete(),u.saveHash(g),g&&u.isTraditionalAnchor(g)?(u.Adapter.trigger(t,"anchorchange"),u.busy(!1),!1):(_=u.extractState(u.getFullUrl(g||u.getLocationHref()),!0),u.isLastSavedState(_)?(u.busy(!1),!1):(u.getHashByState(_),b=u.discardedState(_),b?(u.getHashByIndex(-2)===u.getHashByState(b.forwardState)?u.back(!1):u.forward(!1),!1):(u.pushState(_.data,_.title,encodeURI(_.url),!1),!0))))},u.Adapter.bind(t,"hashchange",u.onHashChange),u.pushState=function(l,d,g,_){if(g=encodeURI(g).replace(/%25/g,"%"),u.getHashByUrl(g))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(_!==!1&&u.busy())return u.pushQueue({scope:u,callback:u.pushState,args:arguments,queue:_}),!1;u.busy(!0);var b=u.createStateObject(l,d,g),$=u.getHashByState(b),w=u.getState(!1),p=u.getHashByState(w),I=u.getHash(),v=u.expectedStateId==b.id;return u.storeState(b),u.expectedStateId=b.id,u.recycleState(b),u.setTitle(b),$===p?(u.busy(!1),!1):(u.saveState(b),v||u.Adapter.trigger(t,"statechange"),!u.isHashEqual($,I)&&!u.isHashEqual($,u.getShortUrl(u.getLocationHref()))&&u.setHash($,!1),u.busy(!1),!0)},u.replaceState=function(l,d,g,_){if(g=encodeURI(g).replace(/%25/g,"%"),u.getHashByUrl(g))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(_!==!1&&u.busy())return u.pushQueue({scope:u,callback:u.replaceState,args:arguments,queue:_}),!1;u.busy(!0);var b=u.createStateObject(l,d,g),$=u.getHashByState(b),w=u.getState(!1),p=u.getHashByState(w),I=u.getStateByIndex(-2);return u.discardState(w,b,I),$===p?(u.storeState(b),u.expectedStateId=b.id,u.recycleState(b),u.setTitle(b),u.saveState(b),u.Adapter.trigger(t,"statechange"),u.busy(!1)):u.pushState(b.data,b.title,b.url,!1),!0}),u.emulated.pushState&&u.getHash()&&!u.emulated.hashChange&&u.Adapter.onDomLoad(function(){u.Adapter.trigger(t,"hashchange")})},typeof u.init!="undefined"&&u.init()})(window),(function(t,e){var n=t.console||e,i=t.document,u=t.navigator,l=!1,d=t.setTimeout,g=t.clearTimeout,_=t.setInterval,b=t.clearInterval,$=t.JSON,w=t.alert,p=t.History=t.History||{},I=t.history;try{l=t.sessionStorage,l.setItem("TEST","1"),l.removeItem("TEST")}catch(v){l=!1}if($.stringify=$.stringify||$.encode,$.parse=$.parse||$.decode,typeof p.init!="undefined")throw new Error("History.js Core has already been loaded...");p.init=function(v){return typeof p.Adapter=="undefined"?!1:(typeof p.initCore!="undefined"&&p.initCore(),typeof p.initHtml4!="undefined"&&p.initHtml4(),!0)},p.initCore=function(v){if(typeof p.initCore.initialized!="undefined")return!1;if(p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.disableSuid=p.options.disableSuid||!1,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||i.title,p.options.html4Mode=p.options.html4Mode||!1,p.options.delayInit=p.options.delayInit||!1,p.intervalList=[],p.clearAllIntervals=function(){var S,P=p.intervalList;if(typeof P!="undefined"&&P!==null){for(S=0;S<P.length;S++)b(P[S]);p.intervalList=null}},p.debug=function(){p.options.debug&&p.log.apply(p,arguments)},p.log=function(){var S=typeof n!="undefined"&&typeof n.log!="undefined"&&typeof n.log.apply!="undefined",P=i.getElementById("log"),R,O,V,q,et;for(S?(q=Array.prototype.slice.call(arguments),R=q.shift(),typeof n.debug!="undefined"?n.debug.apply(n,[R,q]):n.log.apply(n,[R,q])):R=`
`+arguments[0]+`
`,O=1,V=arguments.length;O<V;++O){if(et=arguments[O],typeof et=="object"&&typeof $!="undefined")try{et=$.stringify(et)}catch(nt){}R+=`
`+et+`
`}return P?(P.value+=R+`
-----
`,P.scrollTop=P.scrollHeight-P.clientHeight):S||w(R),!0},p.getInternetExplorerMajorVersion=function(){var S=p.getInternetExplorerMajorVersion.cached=typeof p.getInternetExplorerMajorVersion.cached!="undefined"?p.getInternetExplorerMajorVersion.cached:(function(){for(var P=3,R=i.createElement("div"),O=R.getElementsByTagName("i");(R.innerHTML="<!--[if gt IE "+ ++P+"]><i></i><![endif]-->")&&O[0];);return P>4?P:!1})();return S},p.isInternetExplorer=function(){var S=p.isInternetExplorer.cached=typeof p.isInternetExplorer.cached!="undefined"?p.isInternetExplorer.cached:!!p.getInternetExplorerMajorVersion();return S},p.options.html4Mode?p.emulated={pushState:!0,hashChange:!0}:p.emulated={pushState:!(t.history&&t.history.pushState&&t.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(u.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(u.userAgent)),hashChange:!!(!("onhashchange"in t||"onhashchange"in i)||p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8)},p.enabled=!p.emulated.pushState,p.bugs={setHash:!!(!p.emulated.pushState&&u.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(u.userAgent)),safariPoll:!!(!p.emulated.pushState&&u.vendor==="Apple Computer, Inc."&&/AppleWebKit\/5([0-2]|3[0-3])/.test(u.userAgent)),ieDoubleCheck:!!(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8),hashEscape:!!(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<7)},p.isEmptyObject=function(S){for(var P in S)if(S.hasOwnProperty(P))return!1;return!0},p.cloneObject=function(S){var P,R;return S?(P=$.stringify(S),R=$.parse(P)):R={},R},p.getRootUrl=function(){var S=i.location.protocol+"//"+(i.location.hostname||i.location.host);return i.location.port&&(S+=":"+i.location.port),S+="/",S},p.getBaseHref=function(){var S=i.getElementsByTagName("base"),P=null,R="";return S.length===1&&(P=S[0],R=P.href.replace(/[^\/]+$/,"")),R=R.replace(/\/+$/,""),R&&(R+="/"),R},p.getBaseUrl=function(){var S=p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl();return S},p.getPageUrl=function(){var S=p.getState(!1,!1),P=(S||{}).url||p.getLocationHref(),R;return R=P.replace(/\/+$/,"").replace(/[^\/]+$/,function(O,V,q){return/\./.test(O)?O:O+"/"}),R},p.getBasePageUrl=function(){var S=p.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(P,R,O){return/[^\/]$/.test(P)?"":P}).replace(/\/+$/,"")+"/";return S},p.getFullUrl=function(S,P){var R=S,O=S.substring(0,1);return P=typeof P=="undefined"?!0:P,/[a-z]+\:\/\//.test(S)||(O==="/"?R=p.getRootUrl()+S.replace(/^\/+/,""):O==="#"?R=p.getPageUrl().replace(/#.*/,"")+S:O==="?"?R=p.getPageUrl().replace(/[\?#].*/,"")+S:P?R=p.getBaseUrl()+S.replace(/^(\.\/)+/,""):R=p.getBasePageUrl()+S.replace(/^(\.\/)+/,"")),R.replace(/\#$/,"")},p.getShortUrl=function(S){var P=S,R=p.getBaseUrl(),O=p.getRootUrl();return p.emulated.pushState&&(P=P.replace(R,"")),P=P.replace(O,"/"),p.isTraditionalAnchor(P)&&(P="./"+P),P=P.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),P},p.getLocationHref=function(S){return S=S||i,S.URL===S.location.href?S.location.href:S.location.href===decodeURIComponent(S.URL)?S.URL:S.location.hash&&decodeURIComponent(S.location.href.replace(/^[^#]+/,""))===S.location.hash||S.URL.indexOf("#")==-1&&S.location.href.indexOf("#")!=-1?S.location.href:S.URL||S.location.href},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}},p.getState=function(S,P){typeof S=="undefined"&&(S=!0),typeof P=="undefined"&&(P=!0);var R=p.getLastSavedState();return!R&&P&&(R=p.createStateObject()),S&&(R=p.cloneObject(R),R.url=R.cleanUrl||R.url),R},p.getIdByState=function(S){var P=p.extractId(S.url),R;if(!P)if(R=p.getStateString(S),typeof p.stateToId[R]!="undefined")P=p.stateToId[R];else if(typeof p.store.stateToId[R]!="undefined")P=p.store.stateToId[R];else{for(;P=new Date().getTime()+String(Math.random()).replace(/\D/g,""),!(typeof p.idToState[P]=="undefined"&&typeof p.store.idToState[P]=="undefined"););p.stateToId[R]=P,p.idToState[P]=S}return P},p.normalizeState=function(S){var P,R;return(!S||typeof S!="object")&&(S={}),typeof S.normalized!="undefined"?S:((!S.data||typeof S.data!="object")&&(S.data={}),P={},P.normalized=!0,P.title=S.title||"",P.url=p.getFullUrl(S.url?S.url:p.getLocationHref()),P.hash=p.getShortUrl(P.url),P.data=p.cloneObject(S.data),P.id=p.getIdByState(P),P.cleanUrl=P.url.replace(/\??\&_suid.*/,""),P.url=P.cleanUrl,R=!p.isEmptyObject(P.data),(P.title||R)&&p.options.disableSuid!==!0&&(P.hash=p.getShortUrl(P.url).replace(/\??\&_suid.*/,""),/\?/.test(P.hash)||(P.hash+="?"),P.hash+="&_suid="+P.id),P.hashedUrl=p.getFullUrl(P.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(P)&&(P.url=P.hashedUrl),P)},p.createStateObject=function(S,P,R){var O={data:S,title:P,url:R};return O=p.normalizeState(O),O},p.getStateById=function(S){S=String(S);var P=p.idToState[S]||p.store.idToState[S]||e;return P},p.getStateString=function(S){var P,R,O;return P=p.normalizeState(S),R={data:P.data,title:S.title,url:S.url},O=$.stringify(R),O},p.getStateId=function(S){var P,R;return P=p.normalizeState(S),R=P.id,R},p.getHashByState=function(S){var P,R;return P=p.normalizeState(S),R=P.hash,R},p.extractId=function(S){var P,R,O;return S.indexOf("#")!=-1?O=S.split("#")[0]:O=S,R=/(.*)\&_suid=([0-9]+)$/.exec(O),R&&R[1],P=R?String(R[2]||""):"",P||!1},p.isTraditionalAnchor=function(S){var P=!/[\/\?\.]/.test(S);return P},p.extractState=function(S,P){var R=null,O,V;return P=P||!1,O=p.extractId(S),O&&(R=p.getStateById(O)),R||(V=p.getFullUrl(S),O=p.getIdByUrl(V)||!1,O&&(R=p.getStateById(O)),!R&&P&&!p.isTraditionalAnchor(S)&&(R=p.createStateObject(null,null,V))),R},p.getIdByUrl=function(S){var P=p.urlToId[S]||p.store.urlToId[S]||e;return P},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||e},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||e},p.hasUrlDuplicate=function(S){var P=!1,R;return R=p.extractState(S.url),P=R&&R.id!==S.id,P},p.storeState=function(S){return p.urlToId[S.url]=S.id,p.storedStates.push(p.cloneObject(S)),S},p.isLastSavedState=function(S){var P=!1,R,O,V;return p.savedStates.length&&(R=S.id,O=p.getLastSavedState(),V=O.id,P=R===V),P},p.saveState=function(S){return p.isLastSavedState(S)?!1:(p.savedStates.push(p.cloneObject(S)),!0)},p.getStateByIndex=function(S){var P=null;return typeof S=="undefined"?P=p.savedStates[p.savedStates.length-1]:S<0?P=p.savedStates[p.savedStates.length+S]:P=p.savedStates[S],P},p.getCurrentIndex=function(){var S=null;return p.savedStates.length<1?S=0:S=p.savedStates.length-1,S},p.getHash=function(S){var P=p.getLocationHref(S),R;return R=p.getHashByUrl(P),R},p.unescapeHash=function(S){var P=p.normalizeHash(S);return P=decodeURIComponent(P),P},p.normalizeHash=function(S){var P=S.replace(/[^#]*#/,"").replace(/#.*/,"");return P},p.setHash=function(S,P){var R,O;return P!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:P}),!1):(p.busy(!0),R=p.extractState(S,!0),R&&!p.emulated.pushState?p.pushState(R.data,R.title,R.url,!1):p.getHash()!==S&&(p.bugs.setHash?(O=p.getPageUrl(),p.pushState(null,null,O+"#"+S,!1)):i.location.hash=S),p)},p.escapeHash=function(S){var P=p.normalizeHash(S);return P=t.encodeURIComponent(P),p.bugs.hashEscape||(P=P.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),P},p.getHashByUrl=function(S){var P=String(S).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return P=p.unescapeHash(P),P},p.setTitle=function(S){var P=S.title,R;P||(R=p.getStateByIndex(0),R&&R.url===S.url&&(P=R.title||p.options.initialTitle));try{i.getElementsByTagName("title")[0].innerHTML=P.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(O){}return i.title=P,p},p.queues=[],p.busy=function(S){if(typeof S!="undefined"?p.busy.flag=S:typeof p.busy.flag=="undefined"&&(p.busy.flag=!1),!p.busy.flag){g(p.busy.timeout);var P=function(){var R,O,V;if(!p.busy.flag)for(R=p.queues.length-1;R>=0;--R)O=p.queues[R],O.length!==0&&(V=O.shift(),p.fireQueueItem(V),p.busy.timeout=d(P,p.options.busyDelay))};p.busy.timeout=d(P,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(S){return S.callback.apply(S.scope||p,S.args||[])},p.pushQueue=function(S){return p.queues[S.queue||0]=p.queues[S.queue||0]||[],p.queues[S.queue||0].push(S),p},p.queue=function(S,P){return typeof S=="function"&&(S={callback:S}),typeof P!="undefined"&&(S.queue=P),p.busy()?p.pushQueue(S):p.fireQueueItem(S),p},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p},p.doubleCheckClear=function(){return p.doubleChecker&&(g(p.doubleChecker),p.doubleChecker=!1),p},p.doubleCheck=function(S){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=d(function(){return p.doubleCheckClear(),p.stateChanged||S(),!0},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var S=p.extractState(p.getLocationHref()),P;if(!p.isLastSavedState(S))return P=S,P||(P=p.createStateObject()),p.Adapter.trigger(t,"popstate"),p},p.back=function(S){return S!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.back,args:arguments,queue:S}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)}),I.go(-1),!0)},p.forward=function(S){return S!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:S}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)}),I.go(1),!0)},p.go=function(S,P){var R;if(S>0)for(R=1;R<=S;++R)p.forward(P);else{if(!(S<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(R=-1;R>=S;--R)p.back(P)}return p},p.emulated.pushState){var T=function(){};p.pushState=p.pushState||T,p.replaceState=p.replaceState||T}else p.onPopState=function(S,P){var R=!1,O=!1,V,q;return p.doubleCheckComplete(),V=p.getHash(),V?(q=p.extractState(V||p.getLocationHref(),!0),q?p.replaceState(q.data,q.title,q.url,!1):(p.Adapter.trigger(t,"anchorchange"),p.busy(!1)),p.expectedStateId=!1,!1):(R=p.Adapter.extractEventData("state",S,P)||!1,R?O=p.getStateById(R):p.expectedStateId?O=p.getStateById(p.expectedStateId):O=p.extractState(p.getLocationHref()),O||(O=p.createStateObject(null,null,p.getLocationHref())),p.expectedStateId=!1,p.isLastSavedState(O)?(p.busy(!1),!1):(p.storeState(O),p.saveState(O),p.setTitle(O),p.Adapter.trigger(t,"statechange"),p.busy(!1),!0))},p.Adapter.bind(t,"popstate",p.onPopState),p.pushState=function(S,P,R,O){if(p.getHashByUrl(R)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(O!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:O}),!1;p.busy(!0);var V=p.createStateObject(S,P,R);return p.isLastSavedState(V)?p.busy(!1):(p.storeState(V),p.expectedStateId=V.id,I.pushState(V.id,V.title,V.url),p.Adapter.trigger(t,"popstate")),!0},p.replaceState=function(S,P,R,O){if(p.getHashByUrl(R)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(O!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:O}),!1;p.busy(!0);var V=p.createStateObject(S,P,R);return p.isLastSavedState(V)?p.busy(!1):(p.storeState(V),p.expectedStateId=V.id,I.replaceState(V.id,V.title,V.url),p.Adapter.trigger(t,"popstate")),!0};if(l){try{p.store=$.parse(l.getItem("History.store"))||{}}catch(S){p.store={}}p.normalizeStore()}else p.store={},p.normalizeStore();p.Adapter.bind(t,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(p.getLocationHref(),!0))),l&&(p.onUnload=function(){var S,P,R;try{S=$.parse(l.getItem("History.store"))||{}}catch(O){S={}}S.idToState=S.idToState||{},S.urlToId=S.urlToId||{},S.stateToId=S.stateToId||{};for(P in p.idToState)p.idToState.hasOwnProperty(P)&&(S.idToState[P]=p.idToState[P]);for(P in p.urlToId)p.urlToId.hasOwnProperty(P)&&(S.urlToId[P]=p.urlToId[P]);for(P in p.stateToId)p.stateToId.hasOwnProperty(P)&&(S.stateToId[P]=p.stateToId[P]);p.store=S,p.normalizeStore(),R=$.stringify(S);try{l.setItem("History.store",R)}catch(O){if(O.code!==DOMException.QUOTA_EXCEEDED_ERR)throw O;l.length&&(l.removeItem("History.store"),l.setItem("History.store",R))}},p.intervalList.push(_(p.onUnload,p.options.storeInterval)),p.Adapter.bind(t,"beforeunload",p.onUnload),p.Adapter.bind(t,"unload",p.onUnload)),p.emulated.pushState||(p.bugs.safariPoll&&p.intervalList.push(_(p.safariStatePoll,p.options.safariPollInterval)),(u.vendor==="Apple Computer, Inc."||(u.appCodeName||"")==="Mozilla")&&(p.Adapter.bind(t,"hashchange",function(){p.Adapter.trigger(t,"popstate")}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(t,"hashchange")})))},(!p.options||!p.options.delayInit)&&p.init()})(window);var noop$4={value:()=>{}};function dispatch$1(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Dispatch$1(n)}function Dispatch$1(t){this._=t}function parseTypenames$3(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",u=n.indexOf(".");if(u>=0&&(i=n.slice(u+1),n=n.slice(0,u)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Dispatch$1.prototype=dispatch$1.prototype={constructor:Dispatch$1,on:function(t,e){var n=this._,i=parseTypenames$3(t+"",n),u,l=-1,d=i.length;if(arguments.length<2){for(;++l<d;)if((u=(t=i[l]).type)&&(u=get$3(n[u],t.name)))return u;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<d;)if(u=(t=i[l]).type)n[u]=set$4(n[u],t.name,e);else if(e==null)for(u in n)n[u]=set$4(n[u],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Dispatch$1(t)},call:function(t,e){if((u=arguments.length-2)>0)for(var n=new Array(u),i=0,u,l;i<u;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,u=l.length;i<u;++i)l[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],u=0,l=i.length;u<l;++u)i[u].value.apply(e,n)}};function get$3(t,e){for(var n=0,i=t.length,u;n<i;++n)if((u=t[n]).name===e)return u.value}function set$4(t,e,n){for(var i=0,u=t.length;i<u;++i)if(t[i].name===e){t[i]=noop$4,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var xhtml$1="http://www.w3.org/1999/xhtml";const namespaces$1={svg:"http://www.w3.org/2000/svg",xhtml:xhtml$1,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace$1(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),namespaces$1.hasOwnProperty(e)?{space:namespaces$1[e],local:t}:t}function creatorInherit$1(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===xhtml$1&&e.documentElement.namespaceURI===xhtml$1?e.createElement(t):e.createElementNS(n,t)}}function creatorFixed$1(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function creator$1(t){var e=namespace$1(t);return(e.local?creatorFixed$1:creatorInherit$1)(e)}function none$3(){}function selector$1(t){return t==null?none$3:function(){return this.querySelector(t)}}function selection_select$1(t){typeof t!="function"&&(t=selector$1(t));for(var e=this._groups,n=e.length,i=new Array(n),u=0;u<n;++u)for(var l=e[u],d=l.length,g=i[u]=new Array(d),_,b,$=0;$<d;++$)(_=l[$])&&(b=t.call(_,_.__data__,$,l))&&("__data__"in _&&(b.__data__=_.__data__),g[$]=b);return new Selection$3(i,this._parents)}function array$4(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function empty$2(){return[]}function selectorAll$1(t){return t==null?empty$2:function(){return this.querySelectorAll(t)}}function arrayAll(t){return function(){return array$4(t.apply(this,arguments))}}function selection_selectAll$1(t){typeof t=="function"?t=arrayAll(t):t=selectorAll$1(t);for(var e=this._groups,n=e.length,i=[],u=[],l=0;l<n;++l)for(var d=e[l],g=d.length,_,b=0;b<g;++b)(_=d[b])&&(i.push(t.call(_,_.__data__,b,d)),u.push(_));return new Selection$3(i,u)}function matcher$1(t){return function(){return this.matches(t)}}function childMatcher(t){return function(e){return e.matches(t)}}var find$1=Array.prototype.find;function childFind(t){return function(){return find$1.call(this.children,t)}}function childFirst(){return this.firstElementChild}function selection_selectChild(t){return this.select(t==null?childFirst:childFind(typeof t=="function"?t:childMatcher(t)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(t){return function(){return filter.call(this.children,t)}}function selection_selectChildren(t){return this.selectAll(t==null?children:childrenFilter(typeof t=="function"?t:childMatcher(t)))}function selection_filter$1(t){typeof t!="function"&&(t=matcher$1(t));for(var e=this._groups,n=e.length,i=new Array(n),u=0;u<n;++u)for(var l=e[u],d=l.length,g=i[u]=[],_,b=0;b<d;++b)(_=l[b])&&t.call(_,_.__data__,b,l)&&g.push(_);return new Selection$3(i,this._parents)}function sparse$1(t){return new Array(t.length)}function selection_enter$1(){return new Selection$3(this._enter||this._groups.map(sparse$1),this._parents)}function EnterNode$1(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}EnterNode$1.prototype={constructor:EnterNode$1,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function constant$f(t){return function(){return t}}function bindIndex$1(t,e,n,i,u,l){for(var d=0,g,_=e.length,b=l.length;d<b;++d)(g=e[d])?(g.__data__=l[d],i[d]=g):n[d]=new EnterNode$1(t,l[d]);for(;d<_;++d)(g=e[d])&&(u[d]=g)}function bindKey$1(t,e,n,i,u,l,d){var g,_,b=new Map,$=e.length,w=l.length,p=new Array($),I;for(g=0;g<$;++g)(_=e[g])&&(p[g]=I=d.call(_,_.__data__,g,e)+"",b.has(I)?u[g]=_:b.set(I,_));for(g=0;g<w;++g)I=d.call(t,l[g],g,l)+"",(_=b.get(I))?(i[g]=_,_.__data__=l[g],b.delete(I)):n[g]=new EnterNode$1(t,l[g]);for(g=0;g<$;++g)(_=e[g])&&b.get(p[g])===_&&(u[g]=_)}function datum(t){return t.__data__}function selection_data$1(t,e){if(!arguments.length)return Array.from(this,datum);var n=e?bindKey$1:bindIndex$1,i=this._parents,u=this._groups;typeof t!="function"&&(t=constant$f(t));for(var l=u.length,d=new Array(l),g=new Array(l),_=new Array(l),b=0;b<l;++b){var $=i[b],w=u[b],p=w.length,I=arraylike(t.call($,$&&$.__data__,b,i)),v=I.length,T=g[b]=new Array(v),S=d[b]=new Array(v),P=_[b]=new Array(p);n($,w,T,S,P,I,e);for(var R=0,O=0,V,q;R<v;++R)if(V=T[R]){for(R>=O&&(O=R+1);!(q=S[O])&&++O<v;);V._next=q||null}}return d=new Selection$3(d,i),d._enter=g,d._exit=_,d}function arraylike(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function selection_exit$1(){return new Selection$3(this._exit||this._groups.map(sparse$1),this._parents)}function selection_join$1(t,e,n){var i=this.enter(),u=this,l=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(u=e(u),u&&(u=u.selection())),n==null?l.remove():n(l),i&&u?i.merge(u).order():u}function selection_merge$1(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,u=n.length,l=i.length,d=Math.min(u,l),g=new Array(u),_=0;_<d;++_)for(var b=n[_],$=i[_],w=b.length,p=g[_]=new Array(w),I,v=0;v<w;++v)(I=b[v]||$[v])&&(p[v]=I);for(;_<u;++_)g[_]=n[_];return new Selection$3(g,this._parents)}function selection_order$1(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],u=i.length-1,l=i[u],d;--u>=0;)(d=i[u])&&(l&&d.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(d,l),l=d);return this}function selection_sort$1(t){t||(t=ascending$4);function e(w,p){return w&&p?t(w.__data__,p.__data__):!w-!p}for(var n=this._groups,i=n.length,u=new Array(i),l=0;l<i;++l){for(var d=n[l],g=d.length,_=u[l]=new Array(g),b,$=0;$<g;++$)(b=d[$])&&(_[$]=b);_.sort(e)}return new Selection$3(u,this._parents).order()}function ascending$4(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function selection_call$1(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function selection_nodes$1(){return Array.from(this)}function selection_node$1(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],u=0,l=i.length;u<l;++u){var d=i[u];if(d)return d}return null}function selection_size$1(){let t=0;for(const e of this)++t;return t}function selection_empty$1(){return!this.node()}function selection_each$1(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var u=e[n],l=0,d=u.length,g;l<d;++l)(g=u[l])&&t.call(g,g.__data__,l,u);return this}function attrRemove$3(t){return function(){this.removeAttribute(t)}}function attrRemoveNS$3(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant$3(t,e){return function(){this.setAttribute(t,e)}}function attrConstantNS$3(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function attrFunction$3(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function attrFunctionNS$3(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function selection_attr$1(t,e){var n=namespace$1(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?attrRemoveNS$3:attrRemove$3:typeof e=="function"?n.local?attrFunctionNS$3:attrFunction$3:n.local?attrConstantNS$3:attrConstant$3)(n,e))}function defaultView$1(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function styleRemove$3(t){return function(){this.style.removeProperty(t)}}function styleConstant$3(t,e,n){return function(){this.style.setProperty(t,e,n)}}function styleFunction$3(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function selection_style$1(t,e,n){return arguments.length>1?this.each((e==null?styleRemove$3:typeof e=="function"?styleFunction$3:styleConstant$3)(t,e,n==null?"":n)):styleValue$1(this.node(),t)}function styleValue$1(t,e){return t.style.getPropertyValue(e)||defaultView$1(t).getComputedStyle(t,null).getPropertyValue(e)}function propertyRemove$1(t){return function(){delete this[t]}}function propertyConstant$1(t,e){return function(){this[t]=e}}function propertyFunction$1(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function selection_property$1(t,e){return arguments.length>1?this.each((e==null?propertyRemove$1:typeof e=="function"?propertyFunction$1:propertyConstant$1)(t,e)):this.node()[t]}function classArray$1(t){return t.trim().split(/^|\s+/)}function classList$1(t){return t.classList||new ClassList$1(t)}function ClassList$1(t){this._node=t,this._names=classArray$1(t.getAttribute("class")||"")}ClassList$1.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function classedAdd$1(t,e){for(var n=classList$1(t),i=-1,u=e.length;++i<u;)n.add(e[i])}function classedRemove$1(t,e){for(var n=classList$1(t),i=-1,u=e.length;++i<u;)n.remove(e[i])}function classedTrue$1(t){return function(){classedAdd$1(this,t)}}function classedFalse$1(t){return function(){classedRemove$1(this,t)}}function classedFunction$1(t,e){return function(){(e.apply(this,arguments)?classedAdd$1:classedRemove$1)(this,t)}}function selection_classed$1(t,e){var n=classArray$1(t+"");if(arguments.length<2){for(var i=classList$1(this.node()),u=-1,l=n.length;++u<l;)if(!i.contains(n[u]))return!1;return!0}return this.each((typeof e=="function"?classedFunction$1:e?classedTrue$1:classedFalse$1)(n,e))}function textRemove$1(){this.textContent=""}function textConstant$3(t){return function(){this.textContent=t}}function textFunction$3(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function selection_text$1(t){return arguments.length?this.each(t==null?textRemove$1:(typeof t=="function"?textFunction$3:textConstant$3)(t)):this.node().textContent}function htmlRemove$1(){this.innerHTML=""}function htmlConstant$1(t){return function(){this.innerHTML=t}}function htmlFunction$1(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function selection_html$1(t){return arguments.length?this.each(t==null?htmlRemove$1:(typeof t=="function"?htmlFunction$1:htmlConstant$1)(t)):this.node().innerHTML}function raise$1(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise$1(){return this.each(raise$1)}function lower$1(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower$1(){return this.each(lower$1)}function selection_append$1(t){var e=typeof t=="function"?t:creator$1(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function constantNull$1(){return null}function selection_insert$1(t,e){var n=typeof t=="function"?t:creator$1(t),i=e==null?constantNull$1:typeof e=="function"?e:selector$1(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function remove$1(){var t=this.parentNode;t&&t.removeChild(this)}function selection_remove$1(){return this.each(remove$1)}function selection_cloneShallow$1(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_cloneDeep$1(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_clone$1(t){return this.select(t?selection_cloneDeep$1:selection_cloneShallow$1)}function selection_datum$1(t){return arguments.length?this.property("__data__",t):this.node().__data__}function contextListener$1(t){return function(e){t.call(this,e,this.__data__)}}function parseTypenames$2(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function onRemove$1(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,u=e.length,l;n<u;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.options):e[++i]=l;++i?e.length=i:delete this.__on}}}function onAdd$1(t,e,n){return function(){var i=this.__on,u,l=contextListener$1(e);if(i){for(var d=0,g=i.length;d<g;++d)if((u=i[d]).type===t.type&&u.name===t.name){this.removeEventListener(u.type,u.listener,u.options),this.addEventListener(u.type,u.listener=l,u.options=n),u.value=e;return}}this.addEventListener(t.type,l,n),u={type:t.type,name:t.name,value:e,listener:l,options:n},i?i.push(u):this.__on=[u]}}function selection_on$1(t,e,n){var i=parseTypenames$2(t+""),u,l=i.length,d;if(arguments.length<2){var g=this.node().__on;if(g){for(var _=0,b=g.length,$;_<b;++_)for(u=0,$=g[_];u<l;++u)if((d=i[u]).type===$.type&&d.name===$.name)return $.value}return}for(g=e?onAdd$1:onRemove$1,u=0;u<l;++u)this.each(g(i[u],e,n));return this}function dispatchEvent$1(t,e,n){var i=defaultView$1(t),u=i.CustomEvent;typeof u=="function"?u=new u(e,n):(u=i.document.createEvent("Event"),n?(u.initEvent(e,n.bubbles,n.cancelable),u.detail=n.detail):u.initEvent(e,!1,!1)),t.dispatchEvent(u)}function dispatchConstant$1(t,e){return function(){return dispatchEvent$1(this,t,e)}}function dispatchFunction$1(t,e){return function(){return dispatchEvent$1(this,t,e.apply(this,arguments))}}function selection_dispatch$1(t,e){return this.each((typeof e=="function"?dispatchFunction$1:dispatchConstant$1)(t,e))}function*selection_iterator(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],u=0,l=i.length,d;u<l;++u)(d=i[u])&&(yield d)}var root$2=[null];function Selection$3(t,e){this._groups=t,this._parents=e}function selection$1(){return new Selection$3([[document.documentElement]],root$2)}function selection_selection(){return this}Selection$3.prototype=selection$1.prototype={constructor:Selection$3,select:selection_select$1,selectAll:selection_selectAll$1,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter$1,data:selection_data$1,enter:selection_enter$1,exit:selection_exit$1,join:selection_join$1,merge:selection_merge$1,selection:selection_selection,order:selection_order$1,sort:selection_sort$1,call:selection_call$1,nodes:selection_nodes$1,node:selection_node$1,size:selection_size$1,empty:selection_empty$1,each:selection_each$1,attr:selection_attr$1,style:selection_style$1,property:selection_property$1,classed:selection_classed$1,text:selection_text$1,html:selection_html$1,raise:selection_raise$1,lower:selection_lower$1,append:selection_append$1,insert:selection_insert$1,remove:selection_remove$1,clone:selection_clone$1,datum:selection_datum$1,on:selection_on$1,dispatch:selection_dispatch$1,[Symbol.iterator]:selection_iterator};function select$1(t){return typeof t=="string"?new Selection$3([[document.querySelector(t)]],[document.documentElement]):new Selection$3([[t]],root$2)}function define$2(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function extend$1(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Color$1(){}var darker$1=.7,brighter$1=1/darker$1,reI$1="\\s*([+-]?\\d+)\\s*",reN$1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP$1="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex$1=/^#([0-9a-f]{3,8})$/,reRgbInteger$1=new RegExp(`^rgb\\(${reI$1},${reI$1},${reI$1}\\)$`),reRgbPercent$1=new RegExp(`^rgb\\(${reP$1},${reP$1},${reP$1}\\)$`),reRgbaInteger$1=new RegExp(`^rgba\\(${reI$1},${reI$1},${reI$1},${reN$1}\\)$`),reRgbaPercent$1=new RegExp(`^rgba\\(${reP$1},${reP$1},${reP$1},${reN$1}\\)$`),reHslPercent$1=new RegExp(`^hsl\\(${reN$1},${reP$1},${reP$1}\\)$`),reHslaPercent$1=new RegExp(`^hsla\\(${reN$1},${reP$1},${reP$1},${reN$1}\\)$`),named$1={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define$2(Color$1,color$1,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:color_formatHex$1,formatHex:color_formatHex$1,formatHex8:color_formatHex8,formatHsl:color_formatHsl$1,formatRgb:color_formatRgb$1,toString:color_formatRgb$1});function color_formatHex$1(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl$1(){return hslConvert$1(this).formatHsl()}function color_formatRgb$1(){return this.rgb().formatRgb()}function color$1(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=reHex$1.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rgbn$1(e):n===3?new Rgb$1(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?rgba$1(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?rgba$1(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger$1.exec(t))?new Rgb$1(e[1],e[2],e[3],1):(e=reRgbPercent$1.exec(t))?new Rgb$1(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger$1.exec(t))?rgba$1(e[1],e[2],e[3],e[4]):(e=reRgbaPercent$1.exec(t))?rgba$1(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent$1.exec(t))?hsla$1(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent$1.exec(t))?hsla$1(e[1],e[2]/100,e[3]/100,e[4]):named$1.hasOwnProperty(t)?rgbn$1(named$1[t]):t==="transparent"?new Rgb$1(NaN,NaN,NaN,0):null}function rgbn$1(t){return new Rgb$1(t>>16&255,t>>8&255,t&255,1)}function rgba$1(t,e,n,i){return i<=0&&(t=e=n=NaN),new Rgb$1(t,e,n,i)}function rgbConvert$1(t){return t instanceof Color$1||(t=color$1(t)),t?(t=t.rgb(),new Rgb$1(t.r,t.g,t.b,t.opacity)):new Rgb$1}function rgb$1(t,e,n,i){return arguments.length===1?rgbConvert$1(t):new Rgb$1(t,e,n,i==null?1:i)}function Rgb$1(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}define$2(Rgb$1,rgb$1,extend$1(Color$1,{brighter(t){return t=t==null?brighter$1:Math.pow(brighter$1,t),new Rgb$1(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?darker$1:Math.pow(darker$1,t),new Rgb$1(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Rgb$1(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex$1,formatHex:rgb_formatHex$1,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb$1,toString:rgb_formatRgb$1}));function rgb_formatHex$1(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}`}function rgb_formatHex8(){return`#${hex$1(this.r)}${hex$1(this.g)}${hex$1(this.b)}${hex$1((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb$1(){const t=clampa(this.opacity);return`${t===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${t===1?")":`, ${t})`}`}function clampa(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function clampi(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function hex$1(t){return t=clampi(t),(t<16?"0":"")+t.toString(16)}function hsla$1(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Hsl$1(t,e,n,i)}function hslConvert$1(t){if(t instanceof Hsl$1)return new Hsl$1(t.h,t.s,t.l,t.opacity);if(t instanceof Color$1||(t=color$1(t)),!t)return new Hsl$1;if(t instanceof Hsl$1)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,u=Math.min(e,n,i),l=Math.max(e,n,i),d=NaN,g=l-u,_=(l+u)/2;return g?(e===l?d=(n-i)/g+(n<i)*6:n===l?d=(i-e)/g+2:d=(e-n)/g+4,g/=_<.5?l+u:2-l-u,d*=60):g=_>0&&_<1?0:d,new Hsl$1(d,g,_,t.opacity)}function hsl$3(t,e,n,i){return arguments.length===1?hslConvert$1(t):new Hsl$1(t,e,n,i==null?1:i)}function Hsl$1(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}define$2(Hsl$1,hsl$3,extend$1(Color$1,{brighter(t){return t=t==null?brighter$1:Math.pow(brighter$1,t),new Hsl$1(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?darker$1:Math.pow(darker$1,t),new Hsl$1(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,u=2*n-i;return new Rgb$1(hsl2rgb$1(t>=240?t-240:t+120,u,i),hsl2rgb$1(t,u,i),hsl2rgb$1(t<120?t+240:t-120,u,i),this.opacity)},clamp(){return new Hsl$1(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=clampa(this.opacity);return`${t===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${t===1?")":`, ${t})`}`}}));function clamph(t){return t=(t||0)%360,t<0?t+360:t}function clampt(t){return Math.max(0,Math.min(1,t||0))}function hsl2rgb$1(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function basis$3(t,e,n,i,u){var l=t*t,d=l*t;return((1-3*t+3*l-d)*e+(4-6*l+3*d)*n+(1+3*t+3*l-3*d)*i+d*u)/6}function basis$4(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),u=t[i],l=t[i+1],d=i>0?t[i-1]:2*u-l,g=i<e-1?t[i+2]:2*l-u;return basis$3((n-i/e)*e,d,u,l,g)}}function basisClosed$2(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),u=t[(i+e-1)%e],l=t[i%e],d=t[(i+1)%e],g=t[(i+2)%e];return basis$3((n-i/e)*e,u,l,d,g)}}const constant$e=t=>()=>t;function linear$3(t,e){return function(n){return t+n*e}}function exponential$2(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function hue$2(t,e){var n=e-t;return n?linear$3(t,n>180||n<-180?n-360*Math.round(n/360):n):constant$e(isNaN(t)?e:t)}function gamma$1(t){return(t=+t)==1?nogamma$1:function(e,n){return n-e?exponential$2(e,n,t):constant$e(isNaN(e)?n:e)}}function nogamma$1(t,e){var n=e-t;return n?linear$3(t,n):constant$e(isNaN(t)?e:t)}const interpolateRgb$1=(function t(e){var n=gamma$1(e);function i(u,l){var d=n((u=rgb$1(u)).r,(l=rgb$1(l)).r),g=n(u.g,l.g),_=n(u.b,l.b),b=nogamma$1(u.opacity,l.opacity);return function($){return u.r=d($),u.g=g($),u.b=_($),u.opacity=b($),u+""}}return i.gamma=t,i})(1);function rgbSpline$1(t){return function(e){var n=e.length,i=new Array(n),u=new Array(n),l=new Array(n),d,g;for(d=0;d<n;++d)g=rgb$1(e[d]),i[d]=g.r||0,u[d]=g.g||0,l[d]=g.b||0;return i=t(i),u=t(u),l=t(l),g.opacity=1,function(_){return g.r=i(_),g.g=u(_),g.b=l(_),g+""}}}var rgbBasis$1=rgbSpline$1(basis$4),rgbBasisClosed$1=rgbSpline$1(basisClosed$2);function interpolateNumber$1(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var reA$1=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB$1=new RegExp(reA$1.source,"g");function zero$1(t){return function(){return t}}function one$1(t){return function(e){return t(e)+""}}function interpolateString$1(t,e){var n=reA$1.lastIndex=reB$1.lastIndex=0,i,u,l,d=-1,g=[],_=[];for(t=t+"",e=e+"";(i=reA$1.exec(t))&&(u=reB$1.exec(e));)(l=u.index)>n&&(l=e.slice(n,l),g[d]?g[d]+=l:g[++d]=l),(i=i[0])===(u=u[0])?g[d]?g[d]+=u:g[++d]=u:(g[++d]=null,_.push({i:d,x:interpolateNumber$1(i,u)})),n=reB$1.lastIndex;return n<e.length&&(l=e.slice(n),g[d]?g[d]+=l:g[++d]=l),g.length<2?_[0]?one$1(_[0].x):zero$1(e):(e=_.length,function(b){for(var $=0,w;$<e;++$)g[(w=_[$]).i]=w.x(b);return g.join("")})}var degrees$2=180/Math.PI,identity$b={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose$1(t,e,n,i,u,l){var d,g,_;return(d=Math.sqrt(t*t+e*e))&&(t/=d,e/=d),(_=t*n+e*i)&&(n-=t*_,i-=e*_),(g=Math.sqrt(n*n+i*i))&&(n/=g,i/=g,_/=g),t*i<e*n&&(t=-t,e=-e,_=-_,d=-d),{translateX:u,translateY:l,rotate:Math.atan2(e,t)*degrees$2,skewX:Math.atan(_)*degrees$2,scaleX:d,scaleY:g}}var svgNode$1;function parseCss$1(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?identity$b:decompose$1(e.a,e.b,e.c,e.d,e.e,e.f)}function parseSvg$1(t){return t==null||(svgNode$1||(svgNode$1=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode$1.setAttribute("transform",t),!(t=svgNode$1.transform.baseVal.consolidate()))?identity$b:(t=t.matrix,decompose$1(t.a,t.b,t.c,t.d,t.e,t.f))}function interpolateTransform$1(t,e,n,i){function u(b){return b.length?b.pop()+" ":""}function l(b,$,w,p,I,v){if(b!==w||$!==p){var T=I.push("translate(",null,e,null,n);v.push({i:T-4,x:interpolateNumber$1(b,w)},{i:T-2,x:interpolateNumber$1($,p)})}else(w||p)&&I.push("translate("+w+e+p+n)}function d(b,$,w,p){b!==$?(b-$>180?$+=360:$-b>180&&(b+=360),p.push({i:w.push(u(w)+"rotate(",null,i)-2,x:interpolateNumber$1(b,$)})):$&&w.push(u(w)+"rotate("+$+i)}function g(b,$,w,p){b!==$?p.push({i:w.push(u(w)+"skewX(",null,i)-2,x:interpolateNumber$1(b,$)}):$&&w.push(u(w)+"skewX("+$+i)}function _(b,$,w,p,I,v){if(b!==w||$!==p){var T=I.push(u(I)+"scale(",null,",",null,")");v.push({i:T-4,x:interpolateNumber$1(b,w)},{i:T-2,x:interpolateNumber$1($,p)})}else(w!==1||p!==1)&&I.push(u(I)+"scale("+w+","+p+")")}return function(b,$){var w=[],p=[];return b=t(b),$=t($),l(b.translateX,b.translateY,$.translateX,$.translateY,w,p),d(b.rotate,$.rotate,w,p),g(b.skewX,$.skewX,w,p),_(b.scaleX,b.scaleY,$.scaleX,$.scaleY,w,p),b=$=null,function(I){for(var v=-1,T=p.length,S;++v<T;)w[(S=p[v]).i]=S.x(I);return w.join("")}}}var interpolateTransformCss$1=interpolateTransform$1(parseCss$1,"px, ","px)","deg)"),interpolateTransformSvg$1=interpolateTransform$1(parseSvg$1,", ",")",")"),frame$1=0,timeout$3=0,interval$2=0,pokeDelay$1=1e3,taskHead$1,taskTail$1,clockLast$1=0,clockNow$1=0,clockSkew$1=0,clock$1=typeof performance=="object"&&performance.now?performance:Date,setFrame$1=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function now$1(){return clockNow$1||(setFrame$1(clearNow$1),clockNow$1=clock$1.now()+clockSkew$1)}function clearNow$1(){clockNow$1=0}function Timer$1(){this._call=this._time=this._next=null}Timer$1.prototype=timer$1.prototype={constructor:Timer$1,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?now$1():+n)+(e==null?0:+e),!this._next&&taskTail$1!==this&&(taskTail$1?taskTail$1._next=this:taskHead$1=this,taskTail$1=this),this._call=t,this._time=n,sleep$1()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep$1())}};function timer$1(t,e,n){var i=new Timer$1;return i.restart(t,e,n),i}function timerFlush$1(){now$1(),++frame$1;for(var t=taskHead$1,e;t;)(e=clockNow$1-t._time)>=0&&t._call.call(void 0,e),t=t._next;--frame$1}function wake$1(){clockNow$1=(clockLast$1=clock$1.now())+clockSkew$1,frame$1=timeout$3=0;try{timerFlush$1()}finally{frame$1=0,nap$1(),clockNow$1=0}}function poke$1(){var t=clock$1.now(),e=t-clockLast$1;e>pokeDelay$1&&(clockSkew$1-=e,clockLast$1=t)}function nap$1(){for(var t,e=taskHead$1,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:taskHead$1=n);taskTail$1=t,sleep$1(i)}function sleep$1(t){if(!frame$1){timeout$3&&(timeout$3=clearTimeout(timeout$3));var e=t-clockNow$1;e>24?(t<1/0&&(timeout$3=setTimeout(wake$1,t-clock$1.now()-clockSkew$1)),interval$2&&(interval$2=clearInterval(interval$2))):(interval$2||(clockLast$1=clock$1.now(),interval$2=setInterval(poke$1,pokeDelay$1)),frame$1=1,setFrame$1(wake$1))}}function timeout$2(t,e,n){var i=new Timer$1;return e=e==null?0:+e,i.restart(u=>{i.stop(),t(u+e)},e,n),i}var emptyOn$1=dispatch$1("start","end","cancel","interrupt"),emptyTween$1=[],CREATED$1=0,SCHEDULED$1=1,STARTING$1=2,STARTED$1=3,RUNNING$1=4,ENDING$1=5,ENDED$1=6;function schedule$1(t,e,n,i,u,l){var d=t.__transition;if(!d)t.__transition={};else if(n in d)return;create$2(t,n,{name:e,index:i,group:u,on:emptyOn$1,tween:emptyTween$1,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:CREATED$1})}function init$1(t,e){var n=get$2(t,e);if(n.state>CREATED$1)throw new Error("too late; already scheduled");return n}function set$3(t,e){var n=get$2(t,e);if(n.state>STARTED$1)throw new Error("too late; already running");return n}function get$2(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function create$2(t,e,n){var i=t.__transition,u;i[e]=n,n.timer=timer$1(l,0,n.time);function l(b){n.state=SCHEDULED$1,n.timer.restart(d,n.delay,n.time),n.delay<=b&&d(b-n.delay)}function d(b){var $,w,p,I;if(n.state!==SCHEDULED$1)return _();for($ in i)if(I=i[$],I.name===n.name){if(I.state===STARTED$1)return timeout$2(d);I.state===RUNNING$1?(I.state=ENDED$1,I.timer.stop(),I.on.call("interrupt",t,t.__data__,I.index,I.group),delete i[$]):+$<e&&(I.state=ENDED$1,I.timer.stop(),I.on.call("cancel",t,t.__data__,I.index,I.group),delete i[$])}if(timeout$2(function(){n.state===STARTED$1&&(n.state=RUNNING$1,n.timer.restart(g,n.delay,n.time),g(b))}),n.state=STARTING$1,n.on.call("start",t,t.__data__,n.index,n.group),n.state===STARTING$1){for(n.state=STARTED$1,u=new Array(p=n.tween.length),$=0,w=-1;$<p;++$)(I=n.tween[$].value.call(t,t.__data__,n.index,n.group))&&(u[++w]=I);u.length=w+1}}function g(b){for(var $=b<n.duration?n.ease.call(null,b/n.duration):(n.timer.restart(_),n.state=ENDING$1,1),w=-1,p=u.length;++w<p;)u[w].call(t,$);n.state===ENDING$1&&(n.on.call("end",t,t.__data__,n.index,n.group),_())}function _(){n.state=ENDED$1,n.timer.stop(),delete i[e];for(var b in i)return;delete t.__transition}}function interrupt$1(t,e){var n=t.__transition,i,u,l=!0,d;if(n){e=e==null?null:e+"";for(d in n){if((i=n[d]).name!==e){l=!1;continue}u=i.state>STARTING$1&&i.state<ENDING$1,i.state=ENDED$1,i.timer.stop(),i.on.call(u?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[d]}l&&delete t.__transition}}function selection_interrupt$1(t){return this.each(function(){interrupt$1(this,t)})}function tweenRemove$1(t,e){var n,i;return function(){var u=set$3(this,t),l=u.tween;if(l!==n){i=n=l;for(var d=0,g=i.length;d<g;++d)if(i[d].name===e){i=i.slice(),i.splice(d,1);break}}u.tween=i}}function tweenFunction$1(t,e,n){var i,u;if(typeof n!="function")throw new Error;return function(){var l=set$3(this,t),d=l.tween;if(d!==i){u=(i=d).slice();for(var g={name:e,value:n},_=0,b=u.length;_<b;++_)if(u[_].name===e){u[_]=g;break}_===b&&u.push(g)}l.tween=u}}function transition_tween$1(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=get$2(this.node(),n).tween,u=0,l=i.length,d;u<l;++u)if((d=i[u]).name===t)return d.value;return null}return this.each((e==null?tweenRemove$1:tweenFunction$1)(n,t,e))}function tweenValue$1(t,e,n){var i=t._id;return t.each(function(){var u=set$3(this,i);(u.value||(u.value={}))[e]=n.apply(this,arguments)}),function(u){return get$2(u,i).value[e]}}function interpolate$2(t,e){var n;return(typeof e=="number"?interpolateNumber$1:e instanceof color$1?interpolateRgb$1:(n=color$1(e))?(e=n,interpolateRgb$1):interpolateString$1)(t,e)}function attrRemove$2(t){return function(){this.removeAttribute(t)}}function attrRemoveNS$2(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant$2(t,e,n){var i,u=n+"",l;return function(){var d=this.getAttribute(t);return d===u?null:d===i?l:l=e(i=d,n)}}function attrConstantNS$2(t,e,n){var i,u=n+"",l;return function(){var d=this.getAttributeNS(t.space,t.local);return d===u?null:d===i?l:l=e(i=d,n)}}function attrFunction$2(t,e,n){var i,u,l;return function(){var d,g=n(this),_;return g==null?void this.removeAttribute(t):(d=this.getAttribute(t),_=g+"",d===_?null:d===i&&_===u?l:(u=_,l=e(i=d,g)))}}function attrFunctionNS$2(t,e,n){var i,u,l;return function(){var d,g=n(this),_;return g==null?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local),_=g+"",d===_?null:d===i&&_===u?l:(u=_,l=e(i=d,g)))}}function transition_attr$1(t,e){var n=namespace$1(t),i=n==="transform"?interpolateTransformSvg$1:interpolate$2;return this.attrTween(t,typeof e=="function"?(n.local?attrFunctionNS$2:attrFunction$2)(n,i,tweenValue$1(this,"attr."+t,e)):e==null?(n.local?attrRemoveNS$2:attrRemove$2)(n):(n.local?attrConstantNS$2:attrConstant$2)(n,i,e))}function attrInterpolate$1(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function attrInterpolateNS$1(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function attrTweenNS$1(t,e){var n,i;function u(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&attrInterpolateNS$1(t,l)),n}return u._value=e,u}function attrTween$1(t,e){var n,i;function u(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&attrInterpolate$1(t,l)),n}return u._value=e,u}function transition_attrTween$1(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=namespace$1(t);return this.tween(n,(i.local?attrTweenNS$1:attrTween$1)(i,e))}function delayFunction$1(t,e){return function(){init$1(this,t).delay=+e.apply(this,arguments)}}function delayConstant$1(t,e){return e=+e,function(){init$1(this,t).delay=e}}function transition_delay$1(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?delayFunction$1:delayConstant$1)(e,t)):get$2(this.node(),e).delay}function durationFunction$1(t,e){return function(){set$3(this,t).duration=+e.apply(this,arguments)}}function durationConstant$1(t,e){return e=+e,function(){set$3(this,t).duration=e}}function transition_duration$1(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?durationFunction$1:durationConstant$1)(e,t)):get$2(this.node(),e).duration}function easeConstant$1(t,e){if(typeof e!="function")throw new Error;return function(){set$3(this,t).ease=e}}function transition_ease$1(t){var e=this._id;return arguments.length?this.each(easeConstant$1(e,t)):get$2(this.node(),e).ease}function easeVarying(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;set$3(this,t).ease=n}}function transition_easeVarying(t){if(typeof t!="function")throw new Error;return this.each(easeVarying(this._id,t))}function transition_filter$1(t){typeof t!="function"&&(t=matcher$1(t));for(var e=this._groups,n=e.length,i=new Array(n),u=0;u<n;++u)for(var l=e[u],d=l.length,g=i[u]=[],_,b=0;b<d;++b)(_=l[b])&&t.call(_,_.__data__,b,l)&&g.push(_);return new Transition$1(i,this._parents,this._name,this._id)}function transition_merge$1(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,u=n.length,l=Math.min(i,u),d=new Array(i),g=0;g<l;++g)for(var _=e[g],b=n[g],$=_.length,w=d[g]=new Array($),p,I=0;I<$;++I)(p=_[I]||b[I])&&(w[I]=p);for(;g<i;++g)d[g]=e[g];return new Transition$1(d,this._parents,this._name,this._id)}function start$1(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function onFunction$1(t,e,n){var i,u,l=start$1(e)?init$1:set$3;return function(){var d=l(this,t),g=d.on;g!==i&&(u=(i=g).copy()).on(e,n),d.on=u}}function transition_on$1(t,e){var n=this._id;return arguments.length<2?get$2(this.node(),n).on.on(t):this.each(onFunction$1(n,t,e))}function removeFunction$1(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function transition_remove$1(){return this.on("end.remove",removeFunction$1(this._id))}function transition_select$1(t){var e=this._name,n=this._id;typeof t!="function"&&(t=selector$1(t));for(var i=this._groups,u=i.length,l=new Array(u),d=0;d<u;++d)for(var g=i[d],_=g.length,b=l[d]=new Array(_),$,w,p=0;p<_;++p)($=g[p])&&(w=t.call($,$.__data__,p,g))&&("__data__"in $&&(w.__data__=$.__data__),b[p]=w,schedule$1(b[p],e,n,p,b,get$2($,n)));return new Transition$1(l,this._parents,e,n)}function transition_selectAll$1(t){var e=this._name,n=this._id;typeof t!="function"&&(t=selectorAll$1(t));for(var i=this._groups,u=i.length,l=[],d=[],g=0;g<u;++g)for(var _=i[g],b=_.length,$,w=0;w<b;++w)if($=_[w]){for(var p=t.call($,$.__data__,w,_),I,v=get$2($,n),T=0,S=p.length;T<S;++T)(I=p[T])&&schedule$1(I,e,n,T,p,v);l.push(p),d.push($)}return new Transition$1(l,d,e,n)}var Selection$2=selection$1.prototype.constructor;function transition_selection$1(){return new Selection$2(this._groups,this._parents)}function styleNull$1(t,e){var n,i,u;return function(){var l=styleValue$1(this,t),d=(this.style.removeProperty(t),styleValue$1(this,t));return l===d?null:l===n&&d===i?u:u=e(n=l,i=d)}}function styleRemove$2(t){return function(){this.style.removeProperty(t)}}function styleConstant$2(t,e,n){var i,u=n+"",l;return function(){var d=styleValue$1(this,t);return d===u?null:d===i?l:l=e(i=d,n)}}function styleFunction$2(t,e,n){var i,u,l;return function(){var d=styleValue$1(this,t),g=n(this),_=g+"";return g==null&&(_=g=(this.style.removeProperty(t),styleValue$1(this,t))),d===_?null:d===i&&_===u?l:(u=_,l=e(i=d,g))}}function styleMaybeRemove$1(t,e){var n,i,u,l="style."+e,d="end."+l,g;return function(){var _=set$3(this,t),b=_.on,$=_.value[l]==null?g||(g=styleRemove$2(e)):void 0;(b!==n||u!==$)&&(i=(n=b).copy()).on(d,u=$),_.on=i}}function transition_style$1(t,e,n){var i=(t+="")=="transform"?interpolateTransformCss$1:interpolate$2;return e==null?this.styleTween(t,styleNull$1(t,i)).on("end.style."+t,styleRemove$2(t)):typeof e=="function"?this.styleTween(t,styleFunction$2(t,i,tweenValue$1(this,"style."+t,e))).each(styleMaybeRemove$1(this._id,t)):this.styleTween(t,styleConstant$2(t,i,e),n).on("end.style."+t,null)}function styleInterpolate$1(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function styleTween$1(t,e,n){var i,u;function l(){var d=e.apply(this,arguments);return d!==u&&(i=(u=d)&&styleInterpolate$1(t,d,n)),i}return l._value=e,l}function transition_styleTween$1(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,styleTween$1(t,e,n==null?"":n))}function textConstant$2(t){return function(){this.textContent=t}}function textFunction$2(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function transition_text$1(t){return this.tween("text",typeof t=="function"?textFunction$2(tweenValue$1(this,"text",t)):textConstant$2(t==null?"":t+""))}function textInterpolate$1(t){return function(e){this.textContent=t.call(this,e)}}function textTween$1(t){var e,n;function i(){var u=t.apply(this,arguments);return u!==n&&(e=(n=u)&&textInterpolate$1(u)),e}return i._value=t,i}function transition_textTween$1(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,textTween$1(t))}function transition_transition$1(){for(var t=this._name,e=this._id,n=newId$1(),i=this._groups,u=i.length,l=0;l<u;++l)for(var d=i[l],g=d.length,_,b=0;b<g;++b)if(_=d[b]){var $=get$2(_,e);schedule$1(_,t,n,b,d,{time:$.time+$.delay+$.duration,delay:0,duration:$.duration,ease:$.ease})}return new Transition$1(i,this._parents,t,n)}function transition_end$1(){var t,e,n=this,i=n._id,u=n.size();return new Promise(function(l,d){var g={value:d},_={value:function(){--u===0&&l()}};n.each(function(){var b=set$3(this,i),$=b.on;$!==t&&(e=(t=$).copy(),e._.cancel.push(g),e._.interrupt.push(g),e._.end.push(_)),b.on=e}),u===0&&l()})}var id$1=0;function Transition$1(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function transition$1(t){return selection$1().transition(t)}function newId$1(){return++id$1}var selection_prototype$1=selection$1.prototype;Transition$1.prototype=transition$1.prototype={constructor:Transition$1,select:transition_select$1,selectAll:transition_selectAll$1,selectChild:selection_prototype$1.selectChild,selectChildren:selection_prototype$1.selectChildren,filter:transition_filter$1,merge:transition_merge$1,selection:transition_selection$1,transition:transition_transition$1,call:selection_prototype$1.call,nodes:selection_prototype$1.nodes,node:selection_prototype$1.node,size:selection_prototype$1.size,empty:selection_prototype$1.empty,each:selection_prototype$1.each,on:transition_on$1,attr:transition_attr$1,attrTween:transition_attrTween$1,style:transition_style$1,styleTween:transition_styleTween$1,text:transition_text$1,textTween:transition_textTween$1,remove:transition_remove$1,tween:transition_tween$1,delay:transition_delay$1,duration:transition_duration$1,ease:transition_ease$1,easeVarying:transition_easeVarying,end:transition_end$1,[Symbol.iterator]:selection_prototype$1[Symbol.iterator]};function cubicIn$1(t){return t*t*t}function cubicOut$1(t){return--t*t*t+1}function cubicInOut$1(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var defaultTiming$1={time:null,delay:0,duration:250,ease:cubicInOut$1};function inherit$1(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function selection_transition$1(t){var e,n;t instanceof Transition$1?(e=t._id,t=t._name):(e=newId$1(),(n=defaultTiming$1).time=now$1(),t=t==null?null:t+"");for(var i=this._groups,u=i.length,l=0;l<u;++l)for(var d=i[l],g=d.length,_,b=0;b<g;++b)(_=d[b])&&schedule$1(_,t,e,b,d,n||inherit$1(_,e));return new Transition$1(i,this._parents,t,e)}selection$1.prototype.interrupt=selection_interrupt$1;selection$1.prototype.transition=selection_transition$1;function Transform$1(t,e,n){this.k=t,this.x=e,this.y=n}Transform$1.prototype={constructor:Transform$1,scale:function(t){return t===1?this:new Transform$1(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Transform$1(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity$a=new Transform$1(1,0,0);transform$2.prototype=Transform$1.prototype;function transform$2(t){for(;!t.__zoom;)if(!(t=t.parentNode))return identity$a;return t.__zoom}function commonjsRequire(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var c3$3={exports:{}},version="5.16.0";function ascending$3(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function bisector(t){return t.length===1&&(t=ascendingComparator(t)),{left:function(e,n,i,u){for(i==null&&(i=0),u==null&&(u=e.length);i<u;){var l=i+u>>>1;t(e[l],n)<0?i=l+1:u=l}return i},right:function(e,n,i,u){for(i==null&&(i=0),u==null&&(u=e.length);i<u;){var l=i+u>>>1;t(e[l],n)>0?u=l:i=l+1}return i}}}function ascendingComparator(t){return function(e,n){return ascending$3(t(e),n)}}var ascendingBisect=bisector(ascending$3),bisectRight=ascendingBisect.right,bisectLeft=ascendingBisect.left;function pairs(t,e){e==null&&(e=pair);for(var n=0,i=t.length-1,u=t[0],l=new Array(i<0?0:i);n<i;)l[n]=e(u,u=t[++n]);return l}function pair(t,e){return[t,e]}function cross$2(t,e,n){var i=t.length,u=e.length,l=new Array(i*u),d,g,_,b;for(n==null&&(n=pair),d=_=0;d<i;++d)for(b=t[d],g=0;g<u;++g,++_)l[_]=n(b,e[g]);return l}function descending$2(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function number$3(t){return t===null?NaN:+t}function variance(t,e){var n=t.length,i=0,u=-1,l=0,d,g,_=0;if(e==null)for(;++u<n;)isNaN(d=number$3(t[u]))||(g=d-l,l+=g/++i,_+=g*(d-l));else for(;++u<n;)isNaN(d=number$3(e(t[u],u,t)))||(g=d-l,l+=g/++i,_+=g*(d-l));if(i>1)return _/(i-1)}function deviation(t,e){var n=variance(t,e);return n&&Math.sqrt(n)}function extent$1(t,e){var n=t.length,i=-1,u,l,d;if(e==null){for(;++i<n;)if((u=t[i])!=null&&u>=u)for(l=d=u;++i<n;)(u=t[i])!=null&&(l>u&&(l=u),d<u&&(d=u))}else for(;++i<n;)if((u=e(t[i],i,t))!=null&&u>=u)for(l=d=u;++i<n;)(u=e(t[i],i,t))!=null&&(l>u&&(l=u),d<u&&(d=u));return[l,d]}var array$3=Array.prototype,slice$6=array$3.slice,map$3=array$3.map;function constant$d(t){return function(){return t}}function identity$9(t){return t}function sequence(t,e,n){t=+t,e=+e,n=(u=arguments.length)<2?(e=t,t=0,1):u<3?1:+n;for(var i=-1,u=Math.max(0,Math.ceil((e-t)/n))|0,l=new Array(u);++i<u;)l[i]=t+i*n;return l}var e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function ticks(t,e,n){var i,u=-1,l,d,g;if(e=+e,t=+t,n=+n,t===e&&n>0)return[t];if((i=e<t)&&(l=t,t=e,e=l),(g=tickIncrement(t,e,n))===0||!isFinite(g))return[];if(g>0)for(t=Math.ceil(t/g),e=Math.floor(e/g),d=new Array(l=Math.ceil(e-t+1));++u<l;)d[u]=(t+u)*g;else for(t=Math.floor(t*g),e=Math.ceil(e*g),d=new Array(l=Math.ceil(t-e+1));++u<l;)d[u]=(t-u)/g;return i&&d.reverse(),d}function tickIncrement(t,e,n){var i=(e-t)/Math.max(0,n),u=Math.floor(Math.log(i)/Math.LN10),l=i/Math.pow(10,u);return u>=0?(l>=e10?10:l>=e5?5:l>=e2?2:1)*Math.pow(10,u):-Math.pow(10,-u)/(l>=e10?10:l>=e5?5:l>=e2?2:1)}function tickStep(t,e,n){var i=Math.abs(e-t)/Math.max(0,n),u=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),l=i/u;return l>=e10?u*=10:l>=e5?u*=5:l>=e2&&(u*=2),e<t?-u:u}function thresholdSturges(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function histogram(){var t=identity$9,e=extent$1,n=thresholdSturges;function i(u){var l,d=u.length,g,_=new Array(d);for(l=0;l<d;++l)_[l]=t(u[l],l,u);var b=e(_),$=b[0],w=b[1],p=n(_,$,w);Array.isArray(p)||(p=tickStep($,w,p),p=sequence(Math.ceil($/p)*p,w,p));for(var I=p.length;p[0]<=$;)p.shift(),--I;for(;p[I-1]>w;)p.pop(),--I;var v=new Array(I+1),T;for(l=0;l<=I;++l)T=v[l]=[],T.x0=l>0?p[l-1]:$,T.x1=l<I?p[l]:w;for(l=0;l<d;++l)g=_[l],$<=g&&g<=w&&v[bisectRight(p,g,0,I)].push(u[l]);return v}return i.value=function(u){return arguments.length?(t=typeof u=="function"?u:constant$d(u),i):t},i.domain=function(u){return arguments.length?(e=typeof u=="function"?u:constant$d([u[0],u[1]]),i):e},i.thresholds=function(u){return arguments.length?(n=typeof u=="function"?u:Array.isArray(u)?constant$d(slice$6.call(u)):constant$d(u),i):n},i}function threshold$1(t,e,n){if(n==null&&(n=number$3),!!(i=t.length)){if((e=+e)<=0||i<2)return+n(t[0],0,t);if(e>=1)return+n(t[i-1],i-1,t);var i,u=(i-1)*e,l=Math.floor(u),d=+n(t[l],l,t),g=+n(t[l+1],l+1,t);return d+(g-d)*(u-l)}}function freedmanDiaconis(t,e,n){return t=map$3.call(t,number$3).sort(ascending$3),Math.ceil((n-e)/(2*(threshold$1(t,.75)-threshold$1(t,.25))*Math.pow(t.length,-1/3)))}function scott(t,e,n){return Math.ceil((n-e)/(3.5*deviation(t)*Math.pow(t.length,-1/3)))}function max$2(t,e){var n=t.length,i=-1,u,l;if(e==null){for(;++i<n;)if((u=t[i])!=null&&u>=u)for(l=u;++i<n;)(u=t[i])!=null&&u>l&&(l=u)}else for(;++i<n;)if((u=e(t[i],i,t))!=null&&u>=u)for(l=u;++i<n;)(u=e(t[i],i,t))!=null&&u>l&&(l=u);return l}function mean(t,e){var n=t.length,i=n,u=-1,l,d=0;if(e==null)for(;++u<n;)isNaN(l=number$3(t[u]))?--i:d+=l;else for(;++u<n;)isNaN(l=number$3(e(t[u],u,t)))?--i:d+=l;if(i)return d/i}function median(t,e){var n=t.length,i=-1,u,l=[];if(e==null)for(;++i<n;)isNaN(u=number$3(t[i]))||l.push(u);else for(;++i<n;)isNaN(u=number$3(e(t[i],i,t)))||l.push(u);return threshold$1(l.sort(ascending$3),.5)}function merge(t){for(var e=t.length,n,i=-1,u=0,l,d;++i<e;)u+=t[i].length;for(l=new Array(u);--e>=0;)for(d=t[e],n=d.length;--n>=0;)l[--u]=d[n];return l}function min$1(t,e){var n=t.length,i=-1,u,l;if(e==null){for(;++i<n;)if((u=t[i])!=null&&u>=u)for(l=u;++i<n;)(u=t[i])!=null&&l>u&&(l=u)}else for(;++i<n;)if((u=e(t[i],i,t))!=null&&u>=u)for(l=u;++i<n;)(u=e(t[i],i,t))!=null&&l>u&&(l=u);return l}function permute(t,e){for(var n=e.length,i=new Array(n);n--;)i[n]=t[e[n]];return i}function scan(t,e){if(n=t.length){var n,i=0,u=0,l,d=t[u];for(e==null&&(e=ascending$3);++i<n;)(e(l=t[i],d)<0||e(d,d)!==0)&&(d=l,u=i);if(e(d,d)===0)return u}}function shuffle$1(t,e,n){for(var i=(n==null?t.length:n)-(e=e==null?0:+e),u,l;i;)l=Math.random()*i--|0,u=t[i+e],t[i+e]=t[l+e],t[l+e]=u;return t}function sum$2(t,e){var n=t.length,i=-1,u,l=0;if(e==null)for(;++i<n;)(u=+t[i])&&(l+=u);else for(;++i<n;)(u=+e(t[i],i,t))&&(l+=u);return l}function transpose(t){if(!(l=t.length))return[];for(var e=-1,n=min$1(t,length$2),i=new Array(n);++e<n;)for(var u=-1,l,d=i[e]=new Array(l);++u<l;)d[u]=t[u][e];return i}function length$2(t){return t.length}function zip(){return transpose(arguments)}var slice$5=Array.prototype.slice;function identity$8(t){return t}var top=1,right=2,bottom=3,left=4,epsilon$4=1e-6;function translateX(t){return"translate("+(t+.5)+",0)"}function translateY(t){return"translate(0,"+(t+.5)+")"}function number$2(t){return function(e){return+t(e)}}function center$1(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(n){return+t(n)+e}}function entering(){return!this.__axis}function axis(t,e){var n=[],i=null,u=null,l=6,d=6,g=3,_=t===top||t===left?-1:1,b=t===left||t===right?"x":"y",$=t===top||t===bottom?translateX:translateY;function w(p){var I=i==null?e.ticks?e.ticks.apply(e,n):e.domain():i,v=u==null?e.tickFormat?e.tickFormat.apply(e,n):identity$8:u,T=Math.max(l,0)+g,S=e.range(),P=+S[0]+.5,R=+S[S.length-1]+.5,O=(e.bandwidth?center$1:number$2)(e.copy()),V=p.selection?p.selection():p,q=V.selectAll(".domain").data([null]),et=V.selectAll(".tick").data(I,e).order(),nt=et.exit(),lt=et.enter().append("g").attr("class","tick"),it=et.select("line"),F=et.select("text");q=q.merge(q.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),et=et.merge(lt),it=it.merge(lt.append("line").attr("stroke","currentColor").attr(b+"2",_*l)),F=F.merge(lt.append("text").attr("fill","currentColor").attr(b,_*T).attr("dy",t===top?"0em":t===bottom?"0.71em":"0.32em")),p!==V&&(q=q.transition(p),et=et.transition(p),it=it.transition(p),F=F.transition(p),nt=nt.transition(p).attr("opacity",epsilon$4).attr("transform",function(ct){return isFinite(ct=O(ct))?$(ct):this.getAttribute("transform")}),lt.attr("opacity",epsilon$4).attr("transform",function(ct){var U=this.parentNode.__axis;return $(U&&isFinite(U=U(ct))?U:O(ct))})),nt.remove(),q.attr("d",t===left||t==right?d?"M"+_*d+","+P+"H0.5V"+R+"H"+_*d:"M0.5,"+P+"V"+R:d?"M"+P+","+_*d+"V0.5H"+R+"V"+_*d:"M"+P+",0.5H"+R),et.attr("opacity",1).attr("transform",function(ct){return $(O(ct))}),it.attr(b+"2",_*l),F.attr(b,_*T).text(v),V.filter(entering).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===right?"start":t===left?"end":"middle"),V.each(function(){this.__axis=O})}return w.scale=function(p){return arguments.length?(e=p,w):e},w.ticks=function(){return n=slice$5.call(arguments),w},w.tickArguments=function(p){return arguments.length?(n=p==null?[]:slice$5.call(p),w):n.slice()},w.tickValues=function(p){return arguments.length?(i=p==null?null:slice$5.call(p),w):i&&i.slice()},w.tickFormat=function(p){return arguments.length?(u=p,w):u},w.tickSize=function(p){return arguments.length?(l=d=+p,w):l},w.tickSizeInner=function(p){return arguments.length?(l=+p,w):l},w.tickSizeOuter=function(p){return arguments.length?(d=+p,w):d},w.tickPadding=function(p){return arguments.length?(g=+p,w):g},w}function axisTop(t){return axis(top,t)}function axisRight(t){return axis(right,t)}function axisBottom(t){return axis(bottom,t)}function axisLeft(t){return axis(left,t)}var noop$3={value:function(){}};function dispatch(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Dispatch(n)}function Dispatch(t){this._=t}function parseTypenames$1(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",u=n.indexOf(".");if(u>=0&&(i=n.slice(u+1),n=n.slice(0,u)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(t,e){var n=this._,i=parseTypenames$1(t+"",n),u,l=-1,d=i.length;if(arguments.length<2){for(;++l<d;)if((u=(t=i[l]).type)&&(u=get$1(n[u],t.name)))return u;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++l<d;)if(u=(t=i[l]).type)n[u]=set$2(n[u],t.name,e);else if(e==null)for(u in n)n[u]=set$2(n[u],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Dispatch(t)},call:function(t,e){if((u=arguments.length-2)>0)for(var n=new Array(u),i=0,u,l;i<u;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(l=this._[t],i=0,u=l.length;i<u;++i)l[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],u=0,l=i.length;u<l;++u)i[u].value.apply(e,n)}};function get$1(t,e){for(var n=0,i=t.length,u;n<i;++n)if((u=t[n]).name===e)return u.value}function set$2(t,e,n){for(var i=0,u=t.length;i<u;++i)if(t[i].name===e){t[i]=noop$3,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),namespaces.hasOwnProperty(e)?{space:namespaces[e],local:t}:t}function creatorInherit(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===xhtml&&e.documentElement.namespaceURI===xhtml?e.createElement(t):e.createElementNS(n,t)}}function creatorFixed(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function creator(t){var e=namespace(t);return(e.local?creatorFixed:creatorInherit)(e)}function none$2(){}function selector(t){return t==null?none$2:function(){return this.querySelector(t)}}function selection_select(t){typeof t!="function"&&(t=selector(t));for(var e=this._groups,n=e.length,i=new Array(n),u=0;u<n;++u)for(var l=e[u],d=l.length,g=i[u]=new Array(d),_,b,$=0;$<d;++$)(_=l[$])&&(b=t.call(_,_.__data__,$,l))&&("__data__"in _&&(b.__data__=_.__data__),g[$]=b);return new Selection$1(i,this._parents)}function empty$1(){return[]}function selectorAll(t){return t==null?empty$1:function(){return this.querySelectorAll(t)}}function selection_selectAll(t){typeof t!="function"&&(t=selectorAll(t));for(var e=this._groups,n=e.length,i=[],u=[],l=0;l<n;++l)for(var d=e[l],g=d.length,_,b=0;b<g;++b)(_=d[b])&&(i.push(t.call(_,_.__data__,b,d)),u.push(_));return new Selection$1(i,u)}function matcher(t){return function(){return this.matches(t)}}function selection_filter(t){typeof t!="function"&&(t=matcher(t));for(var e=this._groups,n=e.length,i=new Array(n),u=0;u<n;++u)for(var l=e[u],d=l.length,g=i[u]=[],_,b=0;b<d;++b)(_=l[b])&&t.call(_,_.__data__,b,l)&&g.push(_);return new Selection$1(i,this._parents)}function sparse(t){return new Array(t.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}EnterNode.prototype={constructor:EnterNode,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function constant$c(t){return function(){return t}}var keyPrefix$1="$";function bindIndex(t,e,n,i,u,l){for(var d=0,g,_=e.length,b=l.length;d<b;++d)(g=e[d])?(g.__data__=l[d],i[d]=g):n[d]=new EnterNode(t,l[d]);for(;d<_;++d)(g=e[d])&&(u[d]=g)}function bindKey(t,e,n,i,u,l,d){var g,_,b={},$=e.length,w=l.length,p=new Array($),I;for(g=0;g<$;++g)(_=e[g])&&(p[g]=I=keyPrefix$1+d.call(_,_.__data__,g,e),I in b?u[g]=_:b[I]=_);for(g=0;g<w;++g)I=keyPrefix$1+d.call(t,l[g],g,l),(_=b[I])?(i[g]=_,_.__data__=l[g],b[I]=null):n[g]=new EnterNode(t,l[g]);for(g=0;g<$;++g)(_=e[g])&&b[p[g]]===_&&(u[g]=_)}function selection_data(t,e){if(!t)return I=new Array(this.size()),b=-1,this.each(function(et){I[++b]=et}),I;var n=e?bindKey:bindIndex,i=this._parents,u=this._groups;typeof t!="function"&&(t=constant$c(t));for(var l=u.length,d=new Array(l),g=new Array(l),_=new Array(l),b=0;b<l;++b){var $=i[b],w=u[b],p=w.length,I=t.call($,$&&$.__data__,b,i),v=I.length,T=g[b]=new Array(v),S=d[b]=new Array(v),P=_[b]=new Array(p);n($,w,T,S,P,I,e);for(var R=0,O=0,V,q;R<v;++R)if(V=T[R]){for(R>=O&&(O=R+1);!(q=S[O])&&++O<v;);V._next=q||null}}return d=new Selection$1(d,i),d._enter=g,d._exit=_,d}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(t,e,n){var i=this.enter(),u=this,l=this.exit();return i=typeof t=="function"?t(i):i.append(t+""),e!=null&&(u=e(u)),n==null?l.remove():n(l),i&&u?i.merge(u).order():u}function selection_merge(t){for(var e=this._groups,n=t._groups,i=e.length,u=n.length,l=Math.min(i,u),d=new Array(i),g=0;g<l;++g)for(var _=e[g],b=n[g],$=_.length,w=d[g]=new Array($),p,I=0;I<$;++I)(p=_[I]||b[I])&&(w[I]=p);for(;g<i;++g)d[g]=e[g];return new Selection$1(d,this._parents)}function selection_order(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i=t[e],u=i.length-1,l=i[u],d;--u>=0;)(d=i[u])&&(l&&d.compareDocumentPosition(l)^4&&l.parentNode.insertBefore(d,l),l=d);return this}function selection_sort(t){t||(t=ascending$2);function e(w,p){return w&&p?t(w.__data__,p.__data__):!w-!p}for(var n=this._groups,i=n.length,u=new Array(i),l=0;l<i;++l){for(var d=n[l],g=d.length,_=u[l]=new Array(g),b,$=0;$<g;++$)(b=d[$])&&(_[$]=b);_.sort(e)}return new Selection$1(u,this._parents).order()}function ascending$2(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function selection_call(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function selection_nodes(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t}function selection_node(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],u=0,l=i.length;u<l;++u){var d=i[u];if(d)return d}return null}function selection_size(){var t=0;return this.each(function(){++t}),t}function selection_empty(){return!this.node()}function selection_each(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var u=e[n],l=0,d=u.length,g;l<d;++l)(g=u[l])&&t.call(g,g.__data__,l,u);return this}function attrRemove$1(t){return function(){this.removeAttribute(t)}}function attrRemoveNS$1(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant$1(t,e){return function(){this.setAttribute(t,e)}}function attrConstantNS$1(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function attrFunction$1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function attrFunctionNS$1(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function selection_attr(t,e){var n=namespace(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((e==null?n.local?attrRemoveNS$1:attrRemove$1:typeof e=="function"?n.local?attrFunctionNS$1:attrFunction$1:n.local?attrConstantNS$1:attrConstant$1)(n,e))}function defaultView(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function styleRemove$1(t){return function(){this.style.removeProperty(t)}}function styleConstant$1(t,e,n){return function(){this.style.setProperty(t,e,n)}}function styleFunction$1(t,e,n){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function selection_style(t,e,n){return arguments.length>1?this.each((e==null?styleRemove$1:typeof e=="function"?styleFunction$1:styleConstant$1)(t,e,n==null?"":n)):styleValue(this.node(),t)}function styleValue(t,e){return t.style.getPropertyValue(e)||defaultView(t).getComputedStyle(t,null).getPropertyValue(e)}function propertyRemove(t){return function(){delete this[t]}}function propertyConstant(t,e){return function(){this[t]=e}}function propertyFunction(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function selection_property(t,e){return arguments.length>1?this.each((e==null?propertyRemove:typeof e=="function"?propertyFunction:propertyConstant)(t,e)):this.node()[t]}function classArray(t){return t.trim().split(/^|\s+/)}function classList(t){return t.classList||new ClassList(t)}function ClassList(t){this._node=t,this._names=classArray(t.getAttribute("class")||"")}ClassList.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function classedAdd(t,e){for(var n=classList(t),i=-1,u=e.length;++i<u;)n.add(e[i])}function classedRemove(t,e){for(var n=classList(t),i=-1,u=e.length;++i<u;)n.remove(e[i])}function classedTrue(t){return function(){classedAdd(this,t)}}function classedFalse(t){return function(){classedRemove(this,t)}}function classedFunction(t,e){return function(){(e.apply(this,arguments)?classedAdd:classedRemove)(this,t)}}function selection_classed(t,e){var n=classArray(t+"");if(arguments.length<2){for(var i=classList(this.node()),u=-1,l=n.length;++u<l;)if(!i.contains(n[u]))return!1;return!0}return this.each((typeof e=="function"?classedFunction:e?classedTrue:classedFalse)(n,e))}function textRemove(){this.textContent=""}function textConstant$1(t){return function(){this.textContent=t}}function textFunction$1(t){return function(){var e=t.apply(this,arguments);this.textContent=e==null?"":e}}function selection_text(t){return arguments.length?this.each(t==null?textRemove:(typeof t=="function"?textFunction$1:textConstant$1)(t)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(t){return function(){this.innerHTML=t}}function htmlFunction(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e==null?"":e}}function selection_html(t){return arguments.length?this.each(t==null?htmlRemove:(typeof t=="function"?htmlFunction:htmlConstant)(t)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(t){var e=typeof t=="function"?t:creator(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function constantNull(){return null}function selection_insert(t,e){var n=typeof t=="function"?t:creator(t),i=e==null?constantNull:typeof e=="function"?e:selector(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),i.apply(this,arguments)||null)})}function remove(){var t=this.parentNode;t&&t.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_cloneDeep(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function selection_clone(t){return this.select(t?selection_cloneDeep:selection_cloneShallow)}function selection_datum(t){return arguments.length?this.property("__data__",t):this.node().__data__}var filterEvents={},event=null;if(typeof document!="undefined"){var element=document.documentElement;"onmouseenter"in element||(filterEvents={mouseenter:"mouseover",mouseleave:"mouseout"})}function filterContextListener(t,e,n){return t=contextListener(t,e,n),function(i){var u=i.relatedTarget;(!u||u!==this&&!(u.compareDocumentPosition(this)&8))&&t.call(this,i)}}function contextListener(t,e,n){return function(i){var u=event;event=i;try{t.call(this,this.__data__,e,n)}finally{event=u}}}function parseTypenames(t){return t.trim().split(/^|\s+/).map(function(e){var n="",i=e.indexOf(".");return i>=0&&(n=e.slice(i+1),e=e.slice(0,i)),{type:e,name:n}})}function onRemove(t){return function(){var e=this.__on;if(e){for(var n=0,i=-1,u=e.length,l;n<u;++n)l=e[n],(!t.type||l.type===t.type)&&l.name===t.name?this.removeEventListener(l.type,l.listener,l.capture):e[++i]=l;++i?e.length=i:delete this.__on}}}function onAdd(t,e,n){var i=filterEvents.hasOwnProperty(t.type)?filterContextListener:contextListener;return function(u,l,d){var g=this.__on,_,b=i(e,l,d);if(g){for(var $=0,w=g.length;$<w;++$)if((_=g[$]).type===t.type&&_.name===t.name){this.removeEventListener(_.type,_.listener,_.capture),this.addEventListener(_.type,_.listener=b,_.capture=n),_.value=e;return}}this.addEventListener(t.type,b,n),_={type:t.type,name:t.name,value:e,listener:b,capture:n},g?g.push(_):this.__on=[_]}}function selection_on(t,e,n){var i=parseTypenames(t+""),u,l=i.length,d;if(arguments.length<2){var g=this.node().__on;if(g){for(var _=0,b=g.length,$;_<b;++_)for(u=0,$=g[_];u<l;++u)if((d=i[u]).type===$.type&&d.name===$.name)return $.value}return}for(g=e?onAdd:onRemove,n==null&&(n=!1),u=0;u<l;++u)this.each(g(i[u],e,n));return this}function customEvent(t,e,n,i){var u=event;t.sourceEvent=event,event=t;try{return e.apply(n,i)}finally{event=u}}function dispatchEvent(t,e,n){var i=defaultView(t),u=i.CustomEvent;typeof u=="function"?u=new u(e,n):(u=i.document.createEvent("Event"),n?(u.initEvent(e,n.bubbles,n.cancelable),u.detail=n.detail):u.initEvent(e,!1,!1)),t.dispatchEvent(u)}function dispatchConstant(t,e){return function(){return dispatchEvent(this,t,e)}}function dispatchFunction(t,e){return function(){return dispatchEvent(this,t,e.apply(this,arguments))}}function selection_dispatch(t,e){return this.each((typeof e=="function"?dispatchFunction:dispatchConstant)(t,e))}var root$1=[null];function Selection$1(t,e){this._groups=t,this._parents=e}function selection(){return new Selection$1([[document.documentElement]],root$1)}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch};function select(t){return typeof t=="string"?new Selection$1([[document.querySelector(t)]],[document.documentElement]):new Selection$1([[t]],root$1)}function create$1(t){return select(creator(t).call(document.documentElement))}var nextId=0;function local$1(){return new Local}function Local(){this._="@"+(++nextId).toString(36)}Local.prototype=local$1.prototype={constructor:Local,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};function sourceEvent(){for(var t=event,e;e=t.sourceEvent;)t=e;return t}function point$5(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var i=n.createSVGPoint();return i.x=e.clientX,i.y=e.clientY,i=i.matrixTransform(t.getScreenCTM().inverse()),[i.x,i.y]}var u=t.getBoundingClientRect();return[e.clientX-u.left-t.clientLeft,e.clientY-u.top-t.clientTop]}function mouse(t){var e=sourceEvent();return e.changedTouches&&(e=e.changedTouches[0]),point$5(t,e)}function selectAll(t){return typeof t=="string"?new Selection$1([document.querySelectorAll(t)],[document.documentElement]):new Selection$1([t==null?[]:t],root$1)}function touch(t,e,n){arguments.length<3&&(n=e,e=sourceEvent().changedTouches);for(var i=0,u=e?e.length:0,l;i<u;++i)if((l=e[i]).identifier===n)return point$5(t,l);return null}function touches(t,e){e==null&&(e=sourceEvent().touches);for(var n=0,i=e?e.length:0,u=new Array(i);n<i;++n)u[n]=point$5(t,e[n]);return u}function nopropagation$2(){event.stopImmediatePropagation()}function noevent$2(){event.preventDefault(),event.stopImmediatePropagation()}function dragDisable(t){var e=t.document.documentElement,n=select(t).on("dragstart.drag",noevent$2,!0);"onselectstart"in e?n.on("selectstart.drag",noevent$2,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yesdrag(t,e){var n=t.document.documentElement,i=select(t).on("dragstart.drag",null);e&&(i.on("click.drag",noevent$2,!0),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in n?i.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function constant$b(t){return function(){return t}}function DragEvent(t,e,n,i,u,l,d,g,_,b){this.target=t,this.type=e,this.subject=n,this.identifier=i,this.active=u,this.x=l,this.y=d,this.dx=g,this.dy=_,this._=b}DragEvent.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function defaultFilter$2(){return!event.ctrlKey&&!event.button}function defaultContainer(){return this.parentNode}function defaultSubject(t){return t==null?{x:event.x,y:event.y}:t}function defaultTouchable$2(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var t=defaultFilter$2,e=defaultContainer,n=defaultSubject,i=defaultTouchable$2,u={},l=dispatch("start","drag","end"),d=0,g,_,b,$,w=0;function p(V){V.on("mousedown.drag",I).filter(i).on("touchstart.drag",S).on("touchmove.drag",P).on("touchend.drag touchcancel.drag",R).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function I(){if(!($||!t.apply(this,arguments))){var V=O("mouse",e.apply(this,arguments),mouse,this,arguments);V&&(select(event.view).on("mousemove.drag",v,!0).on("mouseup.drag",T,!0),dragDisable(event.view),nopropagation$2(),b=!1,g=event.clientX,_=event.clientY,V("start"))}}function v(){if(noevent$2(),!b){var V=event.clientX-g,q=event.clientY-_;b=V*V+q*q>w}u.mouse("drag")}function T(){select(event.view).on("mousemove.drag mouseup.drag",null),yesdrag(event.view,b),noevent$2(),u.mouse("end")}function S(){if(t.apply(this,arguments)){var V=event.changedTouches,q=e.apply(this,arguments),et=V.length,nt,lt;for(nt=0;nt<et;++nt)(lt=O(V[nt].identifier,q,touch,this,arguments))&&(nopropagation$2(),lt("start"))}}function P(){var V=event.changedTouches,q=V.length,et,nt;for(et=0;et<q;++et)(nt=u[V[et].identifier])&&(noevent$2(),nt("drag"))}function R(){var V=event.changedTouches,q=V.length,et,nt;for($&&clearTimeout($),$=setTimeout(function(){$=null},500),et=0;et<q;++et)(nt=u[V[et].identifier])&&(nopropagation$2(),nt("end"))}function O(V,q,et,nt,lt){var it=et(q,V),F,ct,U,st=l.copy();if(customEvent(new DragEvent(p,"beforestart",F,V,d,it[0],it[1],0,0,st),function(){return(event.subject=F=n.apply(nt,lt))==null?!1:(ct=F.x-it[0]||0,U=F.y-it[1]||0,!0)}))return function yt(ut){var mt=it,$t;switch(ut){case"start":u[V]=yt,$t=d++;break;case"end":delete u[V],--d;case"drag":it=et(q,V),$t=d;break}customEvent(new DragEvent(p,ut,F,V,$t,it[0]+ct,it[1]+U,it[0]-mt[0],it[1]-mt[1],st),st.apply,st,[ut,nt,lt])}}return p.filter=function(V){return arguments.length?(t=typeof V=="function"?V:constant$b(!!V),p):t},p.container=function(V){return arguments.length?(e=typeof V=="function"?V:constant$b(V),p):e},p.subject=function(V){return arguments.length?(n=typeof V=="function"?V:constant$b(V),p):n},p.touchable=function(V){return arguments.length?(i=typeof V=="function"?V:constant$b(!!V),p):i},p.on=function(){var V=l.on.apply(l,arguments);return V===l?p:V},p.clickDistance=function(V){return arguments.length?(w=(V=+V)*V,p):Math.sqrt(w)},p}function define$1(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function extend(t,e){var n=Object.create(t.prototype);for(var i in e)n[i]=e[i];return n}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp("^rgb\\("+[reI,reI,reI]+"\\)$"),reRgbPercent=new RegExp("^rgb\\("+[reP,reP,reP]+"\\)$"),reRgbaInteger=new RegExp("^rgba\\("+[reI,reI,reI,reN]+"\\)$"),reRgbaPercent=new RegExp("^rgba\\("+[reP,reP,reP,reN]+"\\)$"),reHslPercent=new RegExp("^hsl\\("+[reN,reP,reP]+"\\)$"),reHslaPercent=new RegExp("^hsla\\("+[reN,reP,reP,reN]+"\\)$"),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define$1(Color,color,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=reHex.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?rgbn(e):n===3?new Rgb(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?rgba(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?rgba(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=reRgbInteger.exec(t))?new Rgb(e[1],e[2],e[3],1):(e=reRgbPercent.exec(t))?new Rgb(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=reRgbaInteger.exec(t))?rgba(e[1],e[2],e[3],e[4]):(e=reRgbaPercent.exec(t))?rgba(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=reHslPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,1):(e=reHslaPercent.exec(t))?hsla(e[1],e[2]/100,e[3]/100,e[4]):named.hasOwnProperty(t)?rgbn(named[t]):t==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(t){return new Rgb(t>>16&255,t>>8&255,t&255,1)}function rgba(t,e,n,i){return i<=0&&(t=e=n=NaN),new Rgb(t,e,n,i)}function rgbConvert(t){return t instanceof Color||(t=color(t)),t?(t=t.rgb(),new Rgb(t.r,t.g,t.b,t.opacity)):new Rgb}function rgb(t,e,n,i){return arguments.length===1?rgbConvert(t):new Rgb(t,e,n,i==null?1:i)}function Rgb(t,e,n,i){this.r=+t,this.g=+e,this.b=+n,this.opacity=+i}define$1(Rgb,rgb,extend(Color,{brighter:function(t){return t=t==null?brighter:Math.pow(brighter,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=t==null?darker:Math.pow(darker,t),new Rgb(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return"#"+hex(this.r)+hex(this.g)+hex(this.b)}function rgb_formatRgb(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(t===1?")":", "+t+")")}function hex(t){return t=Math.max(0,Math.min(255,Math.round(t)||0)),(t<16?"0":"")+t.toString(16)}function hsla(t,e,n,i){return i<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Hsl(t,e,n,i)}function hslConvert(t){if(t instanceof Hsl)return new Hsl(t.h,t.s,t.l,t.opacity);if(t instanceof Color||(t=color(t)),!t)return new Hsl;if(t instanceof Hsl)return t;t=t.rgb();var e=t.r/255,n=t.g/255,i=t.b/255,u=Math.min(e,n,i),l=Math.max(e,n,i),d=NaN,g=l-u,_=(l+u)/2;return g?(e===l?d=(n-i)/g+(n<i)*6:n===l?d=(i-e)/g+2:d=(e-n)/g+4,g/=_<.5?l+u:2-l-u,d*=60):g=_>0&&_<1?0:d,new Hsl(d,g,_,t.opacity)}function hsl$2(t,e,n,i){return arguments.length===1?hslConvert(t):new Hsl(t,e,n,i==null?1:i)}function Hsl(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}define$1(Hsl,hsl$2,extend(Color,{brighter:function(t){return t=t==null?brighter:Math.pow(brighter,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?darker:Math.pow(darker,t),new Hsl(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*e,u=2*n-i;return new Rgb(hsl2rgb(t>=240?t-240:t+120,u,i),hsl2rgb(t,u,i),hsl2rgb(t<120?t+240:t-120,u,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(t===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(t===1?")":", "+t+")")}}));function hsl2rgb(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}var deg2rad=Math.PI/180,rad2deg=180/Math.PI,K=18,Xn=.96422,Yn=1,Zn=.82521,t0$1=4/29,t1$1=6/29,t2=3*t1$1*t1$1,t3=t1$1*t1$1*t1$1;function labConvert(t){if(t instanceof Lab)return new Lab(t.l,t.a,t.b,t.opacity);if(t instanceof Hcl)return hcl2lab(t);t instanceof Rgb||(t=rgbConvert(t));var e=rgb2lrgb(t.r),n=rgb2lrgb(t.g),i=rgb2lrgb(t.b),u=xyz2lab((.2225045*e+.7168786*n+.0606169*i)/Yn),l,d;return e===n&&n===i?l=d=u:(l=xyz2lab((.4360747*e+.3850649*n+.1430804*i)/Xn),d=xyz2lab((.0139322*e+.0971045*n+.7141733*i)/Zn)),new Lab(116*u-16,500*(l-u),200*(u-d),t.opacity)}function gray(t,e){return new Lab(t,0,0,e==null?1:e)}function lab$1(t,e,n,i){return arguments.length===1?labConvert(t):new Lab(t,e,n,i==null?1:i)}function Lab(t,e,n,i){this.l=+t,this.a=+e,this.b=+n,this.opacity=+i}define$1(Lab,lab$1,extend(Color,{brighter:function(t){return new Lab(this.l+K*(t==null?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Lab(this.l-K*(t==null?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return e=Xn*lab2xyz(e),t=Yn*lab2xyz(t),n=Zn*lab2xyz(n),new Rgb(lrgb2rgb(3.1338561*e-1.6168667*t-.4906146*n),lrgb2rgb(-.9787684*e+1.9161415*t+.033454*n),lrgb2rgb(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}}));function xyz2lab(t){return t>t3?Math.pow(t,1/3):t/t2+t0$1}function lab2xyz(t){return t>t1$1?t*t*t:t2*(t-t0$1)}function lrgb2rgb(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function rgb2lrgb(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function hclConvert(t){if(t instanceof Hcl)return new Hcl(t.h,t.c,t.l,t.opacity);if(t instanceof Lab||(t=labConvert(t)),t.a===0&&t.b===0)return new Hcl(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*rad2deg;return new Hcl(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function lch(t,e,n,i){return arguments.length===1?hclConvert(t):new Hcl(n,e,t,i==null?1:i)}function hcl$2(t,e,n,i){return arguments.length===1?hclConvert(t):new Hcl(t,e,n,i==null?1:i)}function Hcl(t,e,n,i){this.h=+t,this.c=+e,this.l=+n,this.opacity=+i}function hcl2lab(t){if(isNaN(t.h))return new Lab(t.l,0,0,t.opacity);var e=t.h*deg2rad;return new Lab(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}define$1(Hcl,hcl$2,extend(Color,{brighter:function(t){return new Hcl(this.h,this.c,this.l+K*(t==null?1:t),this.opacity)},darker:function(t){return new Hcl(this.h,this.c,this.l-K*(t==null?1:t),this.opacity)},rgb:function(){return hcl2lab(this).rgb()}}));var A=-.14861,B=1.78277,C=-.29227,D=-.90649,E=1.97294,ED=E*D,EB=E*B,BC_DA=B*C-D*A;function cubehelixConvert(t){if(t instanceof Cubehelix)return new Cubehelix(t.h,t.s,t.l,t.opacity);t instanceof Rgb||(t=rgbConvert(t));var e=t.r/255,n=t.g/255,i=t.b/255,u=(BC_DA*i+ED*e-EB*n)/(BC_DA+ED-EB),l=i-u,d=(E*(n-u)-C*l)/D,g=Math.sqrt(d*d+l*l)/(E*u*(1-u)),_=g?Math.atan2(d,l)*rad2deg-120:NaN;return new Cubehelix(_<0?_+360:_,g,u,t.opacity)}function cubehelix$3(t,e,n,i){return arguments.length===1?cubehelixConvert(t):new Cubehelix(t,e,n,i==null?1:i)}function Cubehelix(t,e,n,i){this.h=+t,this.s=+e,this.l=+n,this.opacity=+i}define$1(Cubehelix,cubehelix$3,extend(Color,{brighter:function(t){return t=t==null?brighter:Math.pow(brighter,t),new Cubehelix(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=t==null?darker:Math.pow(darker,t),new Cubehelix(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*deg2rad,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),i=Math.cos(t),u=Math.sin(t);return new Rgb(255*(e+n*(A*i+B*u)),255*(e+n*(C*i+D*u)),255*(e+n*(E*i)),this.opacity)}}));function basis$1(t,e,n,i,u){var l=t*t,d=l*t;return((1-3*t+3*l-d)*e+(4-6*l+3*d)*n+(1+3*t+3*l-3*d)*i+d*u)/6}function basis$2(t){var e=t.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),u=t[i],l=t[i+1],d=i>0?t[i-1]:2*u-l,g=i<e-1?t[i+2]:2*l-u;return basis$1((n-i/e)*e,d,u,l,g)}}function basisClosed$1(t){var e=t.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*e),u=t[(i+e-1)%e],l=t[i%e],d=t[(i+1)%e],g=t[(i+2)%e];return basis$1((n-i/e)*e,u,l,d,g)}}function constant$a(t){return function(){return t}}function linear$2(t,e){return function(n){return t+n*e}}function exponential$1(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}function hue$1(t,e){var n=e-t;return n?linear$2(t,n>180||n<-180?n-360*Math.round(n/360):n):constant$a(isNaN(t)?e:t)}function gamma(t){return(t=+t)==1?nogamma:function(e,n){return n-e?exponential$1(e,n,t):constant$a(isNaN(e)?n:e)}}function nogamma(t,e){var n=e-t;return n?linear$2(t,n):constant$a(isNaN(t)?e:t)}const interpolateRgb=(function t(e){var n=gamma(e);function i(u,l){var d=n((u=rgb(u)).r,(l=rgb(l)).r),g=n(u.g,l.g),_=n(u.b,l.b),b=nogamma(u.opacity,l.opacity);return function($){return u.r=d($),u.g=g($),u.b=_($),u.opacity=b($),u+""}}return i.gamma=t,i})(1);function rgbSpline(t){return function(e){var n=e.length,i=new Array(n),u=new Array(n),l=new Array(n),d,g;for(d=0;d<n;++d)g=rgb(e[d]),i[d]=g.r||0,u[d]=g.g||0,l[d]=g.b||0;return i=t(i),u=t(u),l=t(l),g.opacity=1,function(_){return g.r=i(_),g.g=u(_),g.b=l(_),g+""}}}var rgbBasis=rgbSpline(basis$2),rgbBasisClosed=rgbSpline(basisClosed$1);function numberArray(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,i=e.slice(),u;return function(l){for(u=0;u<n;++u)i[u]=t[u]*(1-l)+e[u]*l;return i}}function isNumberArray(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function array$2(t,e){return(isNumberArray(e)?numberArray:genericArray)(t,e)}function genericArray(t,e){var n=e?e.length:0,i=t?Math.min(n,t.length):0,u=new Array(i),l=new Array(n),d;for(d=0;d<i;++d)u[d]=interpolateValue(t[d],e[d]);for(;d<n;++d)l[d]=e[d];return function(g){for(d=0;d<i;++d)l[d]=u[d](g);return l}}function date$1(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}function interpolateNumber(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function object$1(t,e){var n={},i={},u;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(u in e)u in t?n[u]=interpolateValue(t[u],e[u]):i[u]=e[u];return function(l){for(u in n)i[u]=n[u](l);return i}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(t){return function(){return t}}function one(t){return function(e){return t(e)+""}}function interpolateString(t,e){var n=reA.lastIndex=reB.lastIndex=0,i,u,l,d=-1,g=[],_=[];for(t=t+"",e=e+"";(i=reA.exec(t))&&(u=reB.exec(e));)(l=u.index)>n&&(l=e.slice(n,l),g[d]?g[d]+=l:g[++d]=l),(i=i[0])===(u=u[0])?g[d]?g[d]+=u:g[++d]=u:(g[++d]=null,_.push({i:d,x:interpolateNumber(i,u)})),n=reB.lastIndex;return n<e.length&&(l=e.slice(n),g[d]?g[d]+=l:g[++d]=l),g.length<2?_[0]?one(_[0].x):zero(e):(e=_.length,function(b){for(var $=0,w;$<e;++$)g[(w=_[$]).i]=w.x(b);return g.join("")})}function interpolateValue(t,e){var n=typeof e,i;return e==null||n==="boolean"?constant$a(e):(n==="number"?interpolateNumber:n==="string"?(i=color(e))?(e=i,interpolateRgb):interpolateString:e instanceof color?interpolateRgb:e instanceof Date?date$1:isNumberArray(e)?numberArray:Array.isArray(e)?genericArray:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?object$1:interpolateNumber)(t,e)}function discrete(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function hue(t,e){var n=hue$1(+t,+e);return function(i){var u=n(i);return u-360*Math.floor(u/360)}}function interpolateRound(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var degrees$1=180/Math.PI,identity$7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(t,e,n,i,u,l){var d,g,_;return(d=Math.sqrt(t*t+e*e))&&(t/=d,e/=d),(_=t*n+e*i)&&(n-=t*_,i-=e*_),(g=Math.sqrt(n*n+i*i))&&(n/=g,i/=g,_/=g),t*i<e*n&&(t=-t,e=-e,_=-_,d=-d),{translateX:u,translateY:l,rotate:Math.atan2(e,t)*degrees$1,skewX:Math.atan(_)*degrees$1,scaleX:d,scaleY:g}}var cssNode,cssRoot,cssView,svgNode;function parseCss(t){return t==="none"?identity$7:(cssNode||(cssNode=document.createElement("DIV"),cssRoot=document.documentElement,cssView=document.defaultView),cssNode.style.transform=t,t=cssView.getComputedStyle(cssRoot.appendChild(cssNode),null).getPropertyValue("transform"),cssRoot.removeChild(cssNode),t=t.slice(7,-1).split(","),decompose(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function parseSvg(t){return t==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",t),!(t=svgNode.transform.baseVal.consolidate()))?identity$7:(t=t.matrix,decompose(t.a,t.b,t.c,t.d,t.e,t.f))}function interpolateTransform(t,e,n,i){function u(b){return b.length?b.pop()+" ":""}function l(b,$,w,p,I,v){if(b!==w||$!==p){var T=I.push("translate(",null,e,null,n);v.push({i:T-4,x:interpolateNumber(b,w)},{i:T-2,x:interpolateNumber($,p)})}else(w||p)&&I.push("translate("+w+e+p+n)}function d(b,$,w,p){b!==$?(b-$>180?$+=360:$-b>180&&(b+=360),p.push({i:w.push(u(w)+"rotate(",null,i)-2,x:interpolateNumber(b,$)})):$&&w.push(u(w)+"rotate("+$+i)}function g(b,$,w,p){b!==$?p.push({i:w.push(u(w)+"skewX(",null,i)-2,x:interpolateNumber(b,$)}):$&&w.push(u(w)+"skewX("+$+i)}function _(b,$,w,p,I,v){if(b!==w||$!==p){var T=I.push(u(I)+"scale(",null,",",null,")");v.push({i:T-4,x:interpolateNumber(b,w)},{i:T-2,x:interpolateNumber($,p)})}else(w!==1||p!==1)&&I.push(u(I)+"scale("+w+","+p+")")}return function(b,$){var w=[],p=[];return b=t(b),$=t($),l(b.translateX,b.translateY,$.translateX,$.translateY,w,p),d(b.rotate,$.rotate,w,p),g(b.skewX,$.skewX,w,p),_(b.scaleX,b.scaleY,$.scaleX,$.scaleY,w,p),b=$=null,function(I){for(var v=-1,T=p.length,S;++v<T;)w[(S=p[v]).i]=S.x(I);return w.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),rho=Math.SQRT2,rho2=2,rho4=4,epsilon2$1=1e-12;function cosh(t){return((t=Math.exp(t))+1/t)/2}function sinh(t){return((t=Math.exp(t))-1/t)/2}function tanh(t){return((t=Math.exp(2*t))-1)/(t+1)}function interpolateZoom(t,e){var n=t[0],i=t[1],u=t[2],l=e[0],d=e[1],g=e[2],_=l-n,b=d-i,$=_*_+b*b,w,p;if($<epsilon2$1)p=Math.log(g/u)/rho,w=function(R){return[n+R*_,i+R*b,u*Math.exp(rho*R*p)]};else{var I=Math.sqrt($),v=(g*g-u*u+rho4*$)/(2*u*rho2*I),T=(g*g-u*u-rho4*$)/(2*g*rho2*I),S=Math.log(Math.sqrt(v*v+1)-v),P=Math.log(Math.sqrt(T*T+1)-T);p=(P-S)/rho,w=function(R){var O=R*p,V=cosh(S),q=u/(rho2*I)*(V*tanh(rho*O+S)-sinh(S));return[n+q*_,i+q*b,u*V/cosh(rho*O+S)]}}return w.duration=p*1e3,w}function hsl(t){return function(e,n){var i=t((e=hsl$2(e)).h,(n=hsl$2(n)).h),u=nogamma(e.s,n.s),l=nogamma(e.l,n.l),d=nogamma(e.opacity,n.opacity);return function(g){return e.h=i(g),e.s=u(g),e.l=l(g),e.opacity=d(g),e+""}}}const hsl$1=hsl(hue$1);var hslLong=hsl(nogamma);function lab(t,e){var n=nogamma((t=lab$1(t)).l,(e=lab$1(e)).l),i=nogamma(t.a,e.a),u=nogamma(t.b,e.b),l=nogamma(t.opacity,e.opacity);return function(d){return t.l=n(d),t.a=i(d),t.b=u(d),t.opacity=l(d),t+""}}function hcl(t){return function(e,n){var i=t((e=hcl$2(e)).h,(n=hcl$2(n)).h),u=nogamma(e.c,n.c),l=nogamma(e.l,n.l),d=nogamma(e.opacity,n.opacity);return function(g){return e.h=i(g),e.c=u(g),e.l=l(g),e.opacity=d(g),e+""}}}const hcl$1=hcl(hue$1);var hclLong=hcl(nogamma);function cubehelix$1(t){return(function e(n){n=+n;function i(u,l){var d=t((u=cubehelix$3(u)).h,(l=cubehelix$3(l)).h),g=nogamma(u.s,l.s),_=nogamma(u.l,l.l),b=nogamma(u.opacity,l.opacity);return function($){return u.h=d($),u.s=g($),u.l=_(Math.pow($,n)),u.opacity=b($),u+""}}return i.gamma=e,i})(1)}const cubehelix$2=cubehelix$1(hue$1);var cubehelixLong=cubehelix$1(nogamma);function piecewise(t,e){for(var n=0,i=e.length-1,u=e[0],l=new Array(i<0?0:i);n<i;)l[n]=t(u,u=e[++n]);return function(d){var g=Math.max(0,Math.min(i-1,Math.floor(d*=i)));return l[g](d-g)}}function quantize$1(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var frame=0,timeout$1=0,interval$1=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?now():+n)+(e==null?0:+e),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=t,this._time=n,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(t,e,n){var i=new Timer;return i.restart(t,e,n),i}function timerFlush(){now(),++frame;for(var t=taskHead,e;t;)(e=clockNow-t._time)>=0&&t._call.call(null,e),t=t._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var t=clock.now(),e=t-clockLast;e>pokeDelay&&(clockSkew-=e,clockLast=t)}function nap(){for(var t,e=taskHead,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:taskHead=n);taskTail=t,sleep(i)}function sleep(t){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var e=t-clockNow;e>24?(t<1/0&&(timeout$1=setTimeout(wake,t-clock.now()-clockSkew)),interval$1&&(interval$1=clearInterval(interval$1))):(interval$1||(clockLast=clock.now(),interval$1=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(t,e,n){var i=new Timer;return e=e==null?0:+e,i.restart(function(u){i.stop(),t(u+e)},e,n),i}function interval(t,e,n){var i=new Timer,u=e;return e==null?(i.restart(t,e,n),i):(e=+e,n=n==null?now():+n,i.restart(function l(d){d+=u,i.restart(l,u+=e,n),t(d)},e,n),i)}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(t,e,n,i,u,l){var d=t.__transition;if(!d)t.__transition={};else if(n in d)return;create(t,n,{name:e,index:i,group:u,on:emptyOn,tween:emptyTween,time:l.time,delay:l.delay,duration:l.duration,ease:l.ease,timer:null,state:CREATED})}function init(t,e){var n=get(t,e);if(n.state>CREATED)throw new Error("too late; already scheduled");return n}function set$1(t,e){var n=get(t,e);if(n.state>STARTED)throw new Error("too late; already running");return n}function get(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function create(t,e,n){var i=t.__transition,u;i[e]=n,n.timer=timer(l,0,n.time);function l(b){n.state=SCHEDULED,n.timer.restart(d,n.delay,n.time),n.delay<=b&&d(b-n.delay)}function d(b){var $,w,p,I;if(n.state!==SCHEDULED)return _();for($ in i)if(I=i[$],I.name===n.name){if(I.state===STARTED)return timeout(d);I.state===RUNNING?(I.state=ENDED,I.timer.stop(),I.on.call("interrupt",t,t.__data__,I.index,I.group),delete i[$]):+$<e&&(I.state=ENDED,I.timer.stop(),I.on.call("cancel",t,t.__data__,I.index,I.group),delete i[$])}if(timeout(function(){n.state===STARTED&&(n.state=RUNNING,n.timer.restart(g,n.delay,n.time),g(b))}),n.state=STARTING,n.on.call("start",t,t.__data__,n.index,n.group),n.state===STARTING){for(n.state=STARTED,u=new Array(p=n.tween.length),$=0,w=-1;$<p;++$)(I=n.tween[$].value.call(t,t.__data__,n.index,n.group))&&(u[++w]=I);u.length=w+1}}function g(b){for(var $=b<n.duration?n.ease.call(null,b/n.duration):(n.timer.restart(_),n.state=ENDING,1),w=-1,p=u.length;++w<p;)u[w].call(t,$);n.state===ENDING&&(n.on.call("end",t,t.__data__,n.index,n.group),_())}function _(){n.state=ENDED,n.timer.stop(),delete i[e];for(var b in i)return;delete t.__transition}}function interrupt(t,e){var n=t.__transition,i,u,l=!0,d;if(n){e=e==null?null:e+"";for(d in n){if((i=n[d]).name!==e){l=!1;continue}u=i.state>STARTING&&i.state<ENDING,i.state=ENDED,i.timer.stop(),i.on.call(u?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete n[d]}l&&delete t.__transition}}function selection_interrupt(t){return this.each(function(){interrupt(this,t)})}function tweenRemove(t,e){var n,i;return function(){var u=set$1(this,t),l=u.tween;if(l!==n){i=n=l;for(var d=0,g=i.length;d<g;++d)if(i[d].name===e){i=i.slice(),i.splice(d,1);break}}u.tween=i}}function tweenFunction(t,e,n){var i,u;if(typeof n!="function")throw new Error;return function(){var l=set$1(this,t),d=l.tween;if(d!==i){u=(i=d).slice();for(var g={name:e,value:n},_=0,b=u.length;_<b;++_)if(u[_].name===e){u[_]=g;break}_===b&&u.push(g)}l.tween=u}}function transition_tween(t,e){var n=this._id;if(t+="",arguments.length<2){for(var i=get(this.node(),n).tween,u=0,l=i.length,d;u<l;++u)if((d=i[u]).name===t)return d.value;return null}return this.each((e==null?tweenRemove:tweenFunction)(n,t,e))}function tweenValue(t,e,n){var i=t._id;return t.each(function(){var u=set$1(this,i);(u.value||(u.value={}))[e]=n.apply(this,arguments)}),function(u){return get(u,i).value[e]}}function interpolate$1(t,e){var n;return(typeof e=="number"?interpolateNumber:e instanceof color?interpolateRgb:(n=color(e))?(e=n,interpolateRgb):interpolateString)(t,e)}function attrRemove(t){return function(){this.removeAttribute(t)}}function attrRemoveNS(t){return function(){this.removeAttributeNS(t.space,t.local)}}function attrConstant(t,e,n){var i,u=n+"",l;return function(){var d=this.getAttribute(t);return d===u?null:d===i?l:l=e(i=d,n)}}function attrConstantNS(t,e,n){var i,u=n+"",l;return function(){var d=this.getAttributeNS(t.space,t.local);return d===u?null:d===i?l:l=e(i=d,n)}}function attrFunction(t,e,n){var i,u,l;return function(){var d,g=n(this),_;return g==null?void this.removeAttribute(t):(d=this.getAttribute(t),_=g+"",d===_?null:d===i&&_===u?l:(u=_,l=e(i=d,g)))}}function attrFunctionNS(t,e,n){var i,u,l;return function(){var d,g=n(this),_;return g==null?void this.removeAttributeNS(t.space,t.local):(d=this.getAttributeNS(t.space,t.local),_=g+"",d===_?null:d===i&&_===u?l:(u=_,l=e(i=d,g)))}}function transition_attr(t,e){var n=namespace(t),i=n==="transform"?interpolateTransformSvg:interpolate$1;return this.attrTween(t,typeof e=="function"?(n.local?attrFunctionNS:attrFunction)(n,i,tweenValue(this,"attr."+t,e)):e==null?(n.local?attrRemoveNS:attrRemove)(n):(n.local?attrConstantNS:attrConstant)(n,i,e))}function attrInterpolate(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function attrInterpolateNS(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function attrTweenNS(t,e){var n,i;function u(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&attrInterpolateNS(t,l)),n}return u._value=e,u}function attrTween(t,e){var n,i;function u(){var l=e.apply(this,arguments);return l!==i&&(n=(i=l)&&attrInterpolate(t,l)),n}return u._value=e,u}function transition_attrTween(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var i=namespace(t);return this.tween(n,(i.local?attrTweenNS:attrTween)(i,e))}function delayFunction(t,e){return function(){init(this,t).delay=+e.apply(this,arguments)}}function delayConstant(t,e){return e=+e,function(){init(this,t).delay=e}}function transition_delay(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?delayFunction:delayConstant)(e,t)):get(this.node(),e).delay}function durationFunction(t,e){return function(){set$1(this,t).duration=+e.apply(this,arguments)}}function durationConstant(t,e){return e=+e,function(){set$1(this,t).duration=e}}function transition_duration(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?durationFunction:durationConstant)(e,t)):get(this.node(),e).duration}function easeConstant(t,e){if(typeof e!="function")throw new Error;return function(){set$1(this,t).ease=e}}function transition_ease(t){var e=this._id;return arguments.length?this.each(easeConstant(e,t)):get(this.node(),e).ease}function transition_filter(t){typeof t!="function"&&(t=matcher(t));for(var e=this._groups,n=e.length,i=new Array(n),u=0;u<n;++u)for(var l=e[u],d=l.length,g=i[u]=[],_,b=0;b<d;++b)(_=l[b])&&t.call(_,_.__data__,b,l)&&g.push(_);return new Transition(i,this._parents,this._name,this._id)}function transition_merge(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,i=e.length,u=n.length,l=Math.min(i,u),d=new Array(i),g=0;g<l;++g)for(var _=e[g],b=n[g],$=_.length,w=d[g]=new Array($),p,I=0;I<$;++I)(p=_[I]||b[I])&&(w[I]=p);for(;g<i;++g)d[g]=e[g];return new Transition(d,this._parents,this._name,this._id)}function start(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function onFunction(t,e,n){var i,u,l=start(e)?init:set$1;return function(){var d=l(this,t),g=d.on;g!==i&&(u=(i=g).copy()).on(e,n),d.on=u}}function transition_on(t,e){var n=this._id;return arguments.length<2?get(this.node(),n).on.on(t):this.each(onFunction(n,t,e))}function removeFunction(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(t){var e=this._name,n=this._id;typeof t!="function"&&(t=selector(t));for(var i=this._groups,u=i.length,l=new Array(u),d=0;d<u;++d)for(var g=i[d],_=g.length,b=l[d]=new Array(_),$,w,p=0;p<_;++p)($=g[p])&&(w=t.call($,$.__data__,p,g))&&("__data__"in $&&(w.__data__=$.__data__),b[p]=w,schedule(b[p],e,n,p,b,get($,n)));return new Transition(l,this._parents,e,n)}function transition_selectAll(t){var e=this._name,n=this._id;typeof t!="function"&&(t=selectorAll(t));for(var i=this._groups,u=i.length,l=[],d=[],g=0;g<u;++g)for(var _=i[g],b=_.length,$,w=0;w<b;++w)if($=_[w]){for(var p=t.call($,$.__data__,w,_),I,v=get($,n),T=0,S=p.length;T<S;++T)(I=p[T])&&schedule(I,e,n,T,p,v);l.push(p),d.push($)}return new Transition(l,d,e,n)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(t,e){var n,i,u;return function(){var l=styleValue(this,t),d=(this.style.removeProperty(t),styleValue(this,t));return l===d?null:l===n&&d===i?u:u=e(n=l,i=d)}}function styleRemove(t){return function(){this.style.removeProperty(t)}}function styleConstant(t,e,n){var i,u=n+"",l;return function(){var d=styleValue(this,t);return d===u?null:d===i?l:l=e(i=d,n)}}function styleFunction(t,e,n){var i,u,l;return function(){var d=styleValue(this,t),g=n(this),_=g+"";return g==null&&(_=g=(this.style.removeProperty(t),styleValue(this,t))),d===_?null:d===i&&_===u?l:(u=_,l=e(i=d,g))}}function styleMaybeRemove(t,e){var n,i,u,l="style."+e,d="end."+l,g;return function(){var _=set$1(this,t),b=_.on,$=_.value[l]==null?g||(g=styleRemove(e)):void 0;(b!==n||u!==$)&&(i=(n=b).copy()).on(d,u=$),_.on=i}}function transition_style(t,e,n){var i=(t+="")=="transform"?interpolateTransformCss:interpolate$1;return e==null?this.styleTween(t,styleNull(t,i)).on("end.style."+t,styleRemove(t)):typeof e=="function"?this.styleTween(t,styleFunction(t,i,tweenValue(this,"style."+t,e))).each(styleMaybeRemove(this._id,t)):this.styleTween(t,styleConstant(t,i,e),n).on("end.style."+t,null)}function styleInterpolate(t,e,n){return function(i){this.style.setProperty(t,e.call(this,i),n)}}function styleTween(t,e,n){var i,u;function l(){var d=e.apply(this,arguments);return d!==u&&(i=(u=d)&&styleInterpolate(t,d,n)),i}return l._value=e,l}function transition_styleTween(t,e,n){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,styleTween(t,e,n==null?"":n))}function textConstant(t){return function(){this.textContent=t}}function textFunction(t){return function(){var e=t(this);this.textContent=e==null?"":e}}function transition_text(t){return this.tween("text",typeof t=="function"?textFunction(tweenValue(this,"text",t)):textConstant(t==null?"":t+""))}function textInterpolate(t){return function(e){this.textContent=t.call(this,e)}}function textTween(t){var e,n;function i(){var u=t.apply(this,arguments);return u!==n&&(e=(n=u)&&textInterpolate(u)),e}return i._value=t,i}function transition_textTween(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,textTween(t))}function transition_transition(){for(var t=this._name,e=this._id,n=newId(),i=this._groups,u=i.length,l=0;l<u;++l)for(var d=i[l],g=d.length,_,b=0;b<g;++b)if(_=d[b]){var $=get(_,e);schedule(_,t,n,b,d,{time:$.time+$.delay+$.duration,delay:0,duration:$.duration,ease:$.ease})}return new Transition(i,this._parents,t,n)}function transition_end(){var t,e,n=this,i=n._id,u=n.size();return new Promise(function(l,d){var g={value:d},_={value:function(){--u===0&&l()}};n.each(function(){var b=set$1(this,i),$=b.on;$!==t&&(e=(t=$).copy(),e._.cancel.push(g),e._.interrupt.push(g),e._.end.push(_)),b.on=e})})}var id=0;function Transition(t,e,n,i){this._groups=t,this._parents=e,this._name=n,this._id=i}function transition(t){return selection().transition(t)}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype=transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,end:transition_end};function linear$1(t){return+t}function quadIn(t){return t*t}function quadOut(t){return t*(2-t)}function quadInOut(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function cubicIn(t){return t*t*t}function cubicOut(t){return--t*t*t+1}function cubicInOut(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var exponent$1=3,polyIn=(function t(e){e=+e;function n(i){return Math.pow(i,e)}return n.exponent=t,n})(exponent$1),polyOut=(function t(e){e=+e;function n(i){return 1-Math.pow(1-i,e)}return n.exponent=t,n})(exponent$1),polyInOut=(function t(e){e=+e;function n(i){return((i*=2)<=1?Math.pow(i,e):2-Math.pow(2-i,e))/2}return n.exponent=t,n})(exponent$1),pi$4=Math.PI,halfPi$3=pi$4/2;function sinIn(t){return+t==1?1:1-Math.cos(t*halfPi$3)}function sinOut(t){return Math.sin(t*halfPi$3)}function sinInOut(t){return(1-Math.cos(pi$4*t))/2}function tpmt(t){return(Math.pow(2,-10*t)-.0009765625)*1.0009775171065494}function expIn(t){return tpmt(1-+t)}function expOut(t){return 1-tpmt(t)}function expInOut(t){return((t*=2)<=1?tpmt(1-t):2-tpmt(t-1))/2}function circleIn(t){return 1-Math.sqrt(1-t*t)}function circleOut(t){return Math.sqrt(1- --t*t)}function circleInOut(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var b1=4/11,b2=6/11,b3=8/11,b4=3/4,b5=9/11,b6=10/11,b7=15/16,b8=21/22,b9=63/64,b0=1/b1/b1;function bounceIn(t){return 1-bounceOut(1-t)}function bounceOut(t){return(t=+t)<b1?b0*t*t:t<b3?b0*(t-=b2)*t+b4:t<b6?b0*(t-=b5)*t+b7:b0*(t-=b8)*t+b9}function bounceInOut(t){return((t*=2)<=1?1-bounceOut(1-t):bounceOut(t-1)+1)/2}var overshoot=1.70158,backIn=(function t(e){e=+e;function n(i){return(i=+i)*i*(e*(i-1)+i)}return n.overshoot=t,n})(overshoot),backOut=(function t(e){e=+e;function n(i){return--i*i*((i+1)*e+i)+1}return n.overshoot=t,n})(overshoot),backInOut=(function t(e){e=+e;function n(i){return((i*=2)<1?i*i*((e+1)*i-e):(i-=2)*i*((e+1)*i+e)+2)/2}return n.overshoot=t,n})(overshoot),tau$4=2*Math.PI,amplitude=1,period=.3,elasticIn=(function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=tau$4);function u(l){return e*tpmt(- --l)*Math.sin((i-l)/n)}return u.amplitude=function(l){return t(l,n*tau$4)},u.period=function(l){return t(e,l)},u})(amplitude,period),elasticOut=(function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=tau$4);function u(l){return 1-e*tpmt(l=+l)*Math.sin((l+i)/n)}return u.amplitude=function(l){return t(l,n*tau$4)},u.period=function(l){return t(e,l)},u})(amplitude,period),elasticInOut=(function t(e,n){var i=Math.asin(1/(e=Math.max(1,e)))*(n/=tau$4);function u(l){return((l=l*2-1)<0?e*tpmt(-l)*Math.sin((i-l)/n):2-e*tpmt(l)*Math.sin((i+l)/n))/2}return u.amplitude=function(l){return t(l,n*tau$4)},u.period=function(l){return t(e,l)},u})(amplitude,period),defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))return defaultTiming.time=now(),defaultTiming;return n}function selection_transition(t){var e,n;t instanceof Transition?(e=t._id,t=t._name):(e=newId(),(n=defaultTiming).time=now(),t=t==null?null:t+"");for(var i=this._groups,u=i.length,l=0;l<u;++l)for(var d=i[l],g=d.length,_,b=0;b<g;++b)(_=d[b])&&schedule(_,t,e,b,d,n||inherit(_,e));return new Transition(i,this._parents,t,e)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;var root=[null];function active(t,e){var n=t.__transition,i,u;if(n){e=e==null?null:e+"";for(u in n)if((i=n[u]).state>SCHEDULED&&i.name===e)return new Transition([[t]],root,e,+u)}return null}function constant$9(t){return function(){return t}}function BrushEvent(t,e,n){this.target=t,this.type=e,this.selection=n}function nopropagation$1(){event.stopImmediatePropagation()}function noevent$1(){event.preventDefault(),event.stopImmediatePropagation()}var MODE_DRAG={},MODE_SPACE={name:"space"},MODE_HANDLE={name:"handle"},MODE_CENTER={name:"center"};function number1(t){return[+t[0],+t[1]]}function number2(t){return[number1(t[0]),number1(t[1])]}function toucher(t){return function(e){return touch(e,event.touches,t)}}var X={name:"x",handles:["w","e"].map(type),input:function(t,e){return t==null?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},Y={name:"y",handles:["n","s"].map(type),input:function(t,e){return t==null?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},XY={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(type),input:function(t){return t==null?null:number2(t)},output:function(t){return t}},cursors={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},flipX={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},flipY={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},signsX={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},signsY={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function type(t){return{type:t}}function defaultFilter$1(){return!event.ctrlKey&&!event.button}function defaultExtent$1(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function local(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function empty(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function brushSelection(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function brushX(){return brush$1(X)}function brushY(){return brush$1(Y)}function brush(){return brush$1(XY)}function brush$1(t){var e=defaultExtent$1,n=defaultFilter$1,i=defaultTouchable$1,u=!0,l=dispatch("start","brush","end"),d=6,g;function _(S){var P=S.property("__brush",T).selectAll(".overlay").data([type("overlay")]);P.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",cursors.overlay).merge(P).each(function(){var O=local(this).extent;select(this).attr("x",O[0][0]).attr("y",O[0][1]).attr("width",O[1][0]-O[0][0]).attr("height",O[1][1]-O[0][1])}),S.selectAll(".selection").data([type("selection")]).enter().append("rect").attr("class","selection").attr("cursor",cursors.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var R=S.selectAll(".handle").data(t.handles,function(O){return O.type});R.exit().remove(),R.enter().append("rect").attr("class",function(O){return"handle handle--"+O.type}).attr("cursor",function(O){return cursors[O.type]}),S.each(b).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",p).filter(i).on("touchstart.brush",p).on("touchmove.brush",I).on("touchend.brush touchcancel.brush",v).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.move=function(S,P){S.selection?S.on("start.brush",function(){$(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){$(this,arguments).end()}).tween("brush",function(){var R=this,O=R.__brush,V=$(R,arguments),q=O.selection,et=t.input(typeof P=="function"?P.apply(this,arguments):P,O.extent),nt=interpolateValue(q,et);function lt(it){O.selection=it===1&&et===null?null:nt(it),b.call(R),V.brush()}return q!==null&&et!==null?lt:lt(1)}):S.each(function(){var R=this,O=arguments,V=R.__brush,q=t.input(typeof P=="function"?P.apply(R,O):P,V.extent),et=$(R,O).beforestart();interrupt(R),V.selection=q===null?null:q,b.call(R),et.start().brush().end()})},_.clear=function(S){_.move(S,null)};function b(){var S=select(this),P=local(this).selection;P?(S.selectAll(".selection").style("display",null).attr("x",P[0][0]).attr("y",P[0][1]).attr("width",P[1][0]-P[0][0]).attr("height",P[1][1]-P[0][1]),S.selectAll(".handle").style("display",null).attr("x",function(R){return R.type[R.type.length-1]==="e"?P[1][0]-d/2:P[0][0]-d/2}).attr("y",function(R){return R.type[0]==="s"?P[1][1]-d/2:P[0][1]-d/2}).attr("width",function(R){return R.type==="n"||R.type==="s"?P[1][0]-P[0][0]+d:d}).attr("height",function(R){return R.type==="e"||R.type==="w"?P[1][1]-P[0][1]+d:d})):S.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function $(S,P,R){var O=S.__brush.emitter;return O&&(!R||!O.clean)?O:new w(S,P,R)}function w(S,P,R){this.that=S,this.args=P,this.state=S.__brush,this.active=0,this.clean=R}w.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return--this.active===0&&(delete this.state.emitter,this.emit("end")),this},emit:function(S){customEvent(new BrushEvent(_,S,t.output(this.state.selection)),l.apply,l,[S,this.that,this.args])}};function p(){if(g&&!event.touches||!n.apply(this,arguments))return;var S=this,P=event.target.__data__.type,R=(u&&event.metaKey?P="overlay":P)==="selection"?MODE_DRAG:u&&event.altKey?MODE_CENTER:MODE_HANDLE,O=t===Y?null:signsX[P],V=t===X?null:signsY[P],q=local(S),et=q.extent,nt=q.selection,lt=et[0][0],it,F,ct=et[0][1],U,st,yt=et[1][0],ut,mt,$t=et[1][1],wt,r,o=0,h=0,m,L=O&&V&&u&&event.shiftKey,N,G,H=event.touches?toucher(event.changedTouches[0].identifier):mouse,W=H(S),z=W,Q=$(S,arguments,!0).beforestart();P==="overlay"?(nt&&(m=!0),q.selection=nt=[[it=t===Y?lt:W[0],U=t===X?ct:W[1]],[ut=t===Y?yt:it,wt=t===X?$t:U]]):(it=nt[0][0],U=nt[0][1],ut=nt[1][0],wt=nt[1][1]),F=it,st=U,mt=ut,r=wt;var Z=select(S).attr("pointer-events","none"),ot=Z.selectAll(".overlay").attr("cursor",cursors[P]);if(event.touches)Q.moved=ht,Q.ended=vt;else{var J=select(event.view).on("mousemove.brush",ht,!0).on("mouseup.brush",vt,!0);u&&J.on("keydown.brush",xt,!0).on("keyup.brush",Tt,!0),dragDisable(event.view)}nopropagation$1(),interrupt(S),b.call(S),Q.start();function ht(){var St=H(S);L&&!N&&!G&&(Math.abs(St[0]-z[0])>Math.abs(St[1]-z[1])?G=!0:N=!0),z=St,m=!0,noevent$1(),ft()}function ft(){var St;switch(o=z[0]-W[0],h=z[1]-W[1],R){case MODE_SPACE:case MODE_DRAG:{O&&(o=Math.max(lt-it,Math.min(yt-ut,o)),F=it+o,mt=ut+o),V&&(h=Math.max(ct-U,Math.min($t-wt,h)),st=U+h,r=wt+h);break}case MODE_HANDLE:{O<0?(o=Math.max(lt-it,Math.min(yt-it,o)),F=it+o,mt=ut):O>0&&(o=Math.max(lt-ut,Math.min(yt-ut,o)),F=it,mt=ut+o),V<0?(h=Math.max(ct-U,Math.min($t-U,h)),st=U+h,r=wt):V>0&&(h=Math.max(ct-wt,Math.min($t-wt,h)),st=U,r=wt+h);break}case MODE_CENTER:{O&&(F=Math.max(lt,Math.min(yt,it-o*O)),mt=Math.max(lt,Math.min(yt,ut+o*O))),V&&(st=Math.max(ct,Math.min($t,U-h*V)),r=Math.max(ct,Math.min($t,wt+h*V)));break}}mt<F&&(O*=-1,St=it,it=ut,ut=St,St=F,F=mt,mt=St,P in flipX&&ot.attr("cursor",cursors[P=flipX[P]])),r<st&&(V*=-1,St=U,U=wt,wt=St,St=st,st=r,r=St,P in flipY&&ot.attr("cursor",cursors[P=flipY[P]])),q.selection&&(nt=q.selection),N&&(F=nt[0][0],mt=nt[1][0]),G&&(st=nt[0][1],r=nt[1][1]),(nt[0][0]!==F||nt[0][1]!==st||nt[1][0]!==mt||nt[1][1]!==r)&&(q.selection=[[F,st],[mt,r]],b.call(S),Q.brush())}function vt(){if(nopropagation$1(),event.touches){if(event.touches.length)return;g&&clearTimeout(g),g=setTimeout(function(){g=null},500)}else yesdrag(event.view,m),J.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Z.attr("pointer-events","all"),ot.attr("cursor",cursors.overlay),q.selection&&(nt=q.selection),empty(nt)&&(q.selection=null,b.call(S)),Q.end()}function xt(){switch(event.keyCode){case 16:{L=O&&V;break}case 18:{R===MODE_HANDLE&&(O&&(ut=mt-o*O,it=F+o*O),V&&(wt=r-h*V,U=st+h*V),R=MODE_CENTER,ft());break}case 32:{(R===MODE_HANDLE||R===MODE_CENTER)&&(O<0?ut=mt-o:O>0&&(it=F-o),V<0?wt=r-h:V>0&&(U=st-h),R=MODE_SPACE,ot.attr("cursor",cursors.selection),ft());break}default:return}noevent$1()}function Tt(){switch(event.keyCode){case 16:{L&&(N=G=L=!1,ft());break}case 18:{R===MODE_CENTER&&(O<0?ut=mt:O>0&&(it=F),V<0?wt=r:V>0&&(U=st),R=MODE_HANDLE,ft());break}case 32:{R===MODE_SPACE&&(event.altKey?(O&&(ut=mt-o*O,it=F+o*O),V&&(wt=r-h*V,U=st+h*V),R=MODE_CENTER):(O<0?ut=mt:O>0&&(it=F),V<0?wt=r:V>0&&(U=st),R=MODE_HANDLE),ot.attr("cursor",cursors[P]),ft());break}default:return}noevent$1()}}function I(){$(this,arguments).moved()}function v(){$(this,arguments).ended()}function T(){var S=this.__brush||{selection:null};return S.extent=number2(e.apply(this,arguments)),S.dim=t,S}return _.extent=function(S){return arguments.length?(e=typeof S=="function"?S:constant$9(number2(S)),_):e},_.filter=function(S){return arguments.length?(n=typeof S=="function"?S:constant$9(!!S),_):n},_.touchable=function(S){return arguments.length?(i=typeof S=="function"?S:constant$9(!!S),_):i},_.handleSize=function(S){return arguments.length?(d=+S,_):d},_.keyModifiers=function(S){return arguments.length?(u=!!S,_):u},_.on=function(){var S=l.on.apply(l,arguments);return S===l?_:S},_}var cos$2=Math.cos,sin$2=Math.sin,pi$3=Math.PI,halfPi$2=pi$3/2,tau$3=pi$3*2,max$1=Math.max;function compareValue(t){return function(e,n){return t(e.source.value+e.target.value,n.source.value+n.target.value)}}function chord(){var t=0,e=null,n=null,i=null;function u(l){var d=l.length,g=[],_=sequence(d),b=[],$=[],w=$.groups=new Array(d),p=new Array(d*d),I,v,T,S,P,R;for(I=0,P=-1;++P<d;){for(v=0,R=-1;++R<d;)v+=l[P][R];g.push(v),b.push(sequence(d)),I+=v}for(e&&_.sort(function(F,ct){return e(g[F],g[ct])}),n&&b.forEach(function(F,ct){F.sort(function(U,st){return n(l[ct][U],l[ct][st])})}),I=max$1(0,tau$3-t*d)/I,S=I?t:tau$3/d,v=0,P=-1;++P<d;){for(T=v,R=-1;++R<d;){var O=_[P],V=b[O][R],q=l[O][V],et=v,nt=v+=q*I;p[V*d+O]={index:O,subindex:V,startAngle:et,endAngle:nt,value:q}}w[O]={index:O,startAngle:T,endAngle:v,value:g[O]},v+=S}for(P=-1;++P<d;)for(R=P-1;++R<d;){var lt=p[R*d+P],it=p[P*d+R];(lt.value||it.value)&&$.push(lt.value<it.value?{source:it,target:lt}:{source:lt,target:it})}return i?$.sort(i):$}return u.padAngle=function(l){return arguments.length?(t=max$1(0,l),u):t},u.sortGroups=function(l){return arguments.length?(e=l,u):e},u.sortSubgroups=function(l){return arguments.length?(n=l,u):n},u.sortChords=function(l){return arguments.length?(l==null?i=null:(i=compareValue(l))._=l,u):i&&i._},u}var slice$4=Array.prototype.slice;function constant$8(t){return function(){return t}}var pi$2=Math.PI,tau$2=2*pi$2,epsilon$3=1e-6,tauEpsilon=tau$2-epsilon$3;function Path(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function path(){return new Path}Path.prototype=path.prototype={constructor:Path,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,u,l){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+u)+","+(this._y1=+l)},arcTo:function(t,e,n,i,u){t=+t,e=+e,n=+n,i=+i,u=+u;var l=this._x1,d=this._y1,g=n-t,_=i-e,b=l-t,$=d-e,w=b*b+$*$;if(u<0)throw new Error("negative radius: "+u);if(this._x1===null)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(w>epsilon$3)if(!(Math.abs($*g-_*b)>epsilon$3)||!u)this._+="L"+(this._x1=t)+","+(this._y1=e);else{var p=n-l,I=i-d,v=g*g+_*_,T=p*p+I*I,S=Math.sqrt(v),P=Math.sqrt(w),R=u*Math.tan((pi$2-Math.acos((v+w-T)/(2*S*P)))/2),O=R/P,V=R/S;Math.abs(O-1)>epsilon$3&&(this._+="L"+(t+O*b)+","+(e+O*$)),this._+="A"+u+","+u+",0,0,"+ +($*p>b*I)+","+(this._x1=t+V*g)+","+(this._y1=e+V*_)}},arc:function(t,e,n,i,u,l){t=+t,e=+e,n=+n,l=!!l;var d=n*Math.cos(i),g=n*Math.sin(i),_=t+d,b=e+g,$=1^l,w=l?i-u:u-i;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+_+","+b:(Math.abs(this._x1-_)>epsilon$3||Math.abs(this._y1-b)>epsilon$3)&&(this._+="L"+_+","+b),n&&(w<0&&(w=w%tau$2+tau$2),w>tauEpsilon?this._+="A"+n+","+n+",0,1,"+$+","+(t-d)+","+(e-g)+"A"+n+","+n+",0,1,"+$+","+(this._x1=_)+","+(this._y1=b):w>epsilon$3&&(this._+="A"+n+","+n+",0,"+ +(w>=pi$2)+","+$+","+(this._x1=t+n*Math.cos(u))+","+(this._y1=e+n*Math.sin(u))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};function defaultSource$1(t){return t.source}function defaultTarget(t){return t.target}function defaultRadius$1(t){return t.radius}function defaultStartAngle(t){return t.startAngle}function defaultEndAngle(t){return t.endAngle}function ribbon(){var t=defaultSource$1,e=defaultTarget,n=defaultRadius$1,i=defaultStartAngle,u=defaultEndAngle,l=null;function d(){var g,_=slice$4.call(arguments),b=t.apply(this,_),$=e.apply(this,_),w=+n.apply(this,(_[0]=b,_)),p=i.apply(this,_)-halfPi$2,I=u.apply(this,_)-halfPi$2,v=w*cos$2(p),T=w*sin$2(p),S=+n.apply(this,(_[0]=$,_)),P=i.apply(this,_)-halfPi$2,R=u.apply(this,_)-halfPi$2;if(l||(l=g=path()),l.moveTo(v,T),l.arc(0,0,w,p,I),(p!==P||I!==R)&&(l.quadraticCurveTo(0,0,S*cos$2(P),S*sin$2(P)),l.arc(0,0,S,P,R)),l.quadraticCurveTo(0,0,v,T),l.closePath(),g)return l=null,g+""||null}return d.radius=function(g){return arguments.length?(n=typeof g=="function"?g:constant$8(+g),d):n},d.startAngle=function(g){return arguments.length?(i=typeof g=="function"?g:constant$8(+g),d):i},d.endAngle=function(g){return arguments.length?(u=typeof g=="function"?g:constant$8(+g),d):u},d.source=function(g){return arguments.length?(t=g,d):t},d.target=function(g){return arguments.length?(e=g,d):e},d.context=function(g){return arguments.length?(l=g==null?null:g,d):l},d}var prefix="$";function Map$1(){}Map$1.prototype=map$2.prototype={constructor:Map$1,has:function(t){return prefix+t in this},get:function(t){return this[prefix+t]},set:function(t,e){return this[prefix+t]=e,this},remove:function(t){var e=prefix+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===prefix&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===prefix&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===prefix&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===prefix&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===prefix&&++t;return t},empty:function(){for(var t in this)if(t[0]===prefix)return!1;return!0},each:function(t){for(var e in this)e[0]===prefix&&t(this[e],e.slice(1),this)}};function map$2(t,e){var n=new Map$1;if(t instanceof Map$1)t.each(function(g,_){n.set(_,g)});else if(Array.isArray(t)){var i=-1,u=t.length,l;if(e==null)for(;++i<u;)n.set(i,t[i]);else for(;++i<u;)n.set(e(l=t[i],i,t),l)}else if(t)for(var d in t)n.set(d,t[d]);return n}function nest(){var t=[],e=[],n,i,u;function l(g,_,b,$){if(_>=t.length)return n!=null&&g.sort(n),i!=null?i(g):g;for(var w=-1,p=g.length,I=t[_++],v,T,S=map$2(),P,R=b();++w<p;)(P=S.get(v=I(T=g[w])+""))?P.push(T):S.set(v,[T]);return S.each(function(O,V){$(R,V,l(O,_,b,$))}),R}function d(g,_){if(++_>t.length)return g;var b,$=e[_-1];return i!=null&&_>=t.length?b=g.entries():(b=[],g.each(function(w,p){b.push({key:p,values:d(w,_)})})),$!=null?b.sort(function(w,p){return $(w.key,p.key)}):b}return u={object:function(g){return l(g,0,createObject,setObject)},map:function(g){return l(g,0,createMap,setMap)},entries:function(g){return d(l(g,0,createMap,setMap),0)},key:function(g){return t.push(g),u},sortKeys:function(g){return e[t.length-1]=g,u},sortValues:function(g){return n=g,u},rollup:function(g){return i=g,u}}}function createObject(){return{}}function setObject(t,e,n){t[e]=n}function createMap(){return map$2()}function setMap(t,e,n){t.set(e,n)}function Set(){}var proto=map$2.prototype;Set.prototype=set.prototype={constructor:Set,has:proto.has,add:function(t){return t+="",this[prefix+t]=t,this},remove:proto.remove,clear:proto.clear,values:proto.keys,size:proto.size,empty:proto.empty,each:proto.each};function set(t,e){var n=new Set;if(t instanceof Set)t.each(function(l){n.add(l)});else if(t){var i=-1,u=t.length;if(e==null)for(;++i<u;)n.add(t[i]);else for(;++i<u;)n.add(e(t[i],i,t))}return n}function keys(t){var e=[];for(var n in t)e.push(n);return e}function values(t){var e=[];for(var n in t)e.push(t[n]);return e}function entries(t){var e=[];for(var n in t)e.push({key:n,value:t[n]});return e}var array$1=Array.prototype,slice$3=array$1.slice;function ascending$1(t,e){return t-e}function area$3(t){for(var e=0,n=t.length,i=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)i+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return i}function constant$7(t){return function(){return t}}function contains$2(t,e){for(var n=-1,i=e.length,u;++n<i;)if(u=ringContains(t,e[n]))return u;return 0}function ringContains(t,e){for(var n=e[0],i=e[1],u=-1,l=0,d=t.length,g=d-1;l<d;g=l++){var _=t[l],b=_[0],$=_[1],w=t[g],p=w[0],I=w[1];if(segmentContains(_,w,e))return 0;$>i!=I>i&&n<(p-b)*(i-$)/(I-$)+b&&(u=-u)}return u}function segmentContains(t,e,n){var i;return collinear(t,e,n)&&within(t[i=+(t[0]===e[0])],n[i],e[i])}function collinear(t,e,n){return(e[0]-t[0])*(n[1]-t[1])===(n[0]-t[0])*(e[1]-t[1])}function within(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function noop$2(){}var cases=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function contours(){var t=1,e=1,n=thresholdSturges,i=_;function u(b){var $=n(b);if(Array.isArray($))$=$.slice().sort(ascending$1);else{var w=extent$1(b),p=w[0],I=w[1];$=tickStep(p,I,$),$=sequence(Math.floor(p/$)*$,Math.floor(I/$)*$,$)}return $.map(function(v){return l(b,v)})}function l(b,$){var w=[],p=[];return d(b,$,function(I){i(I,b,$),area$3(I)>0?w.push([I]):p.push(I)}),p.forEach(function(I){for(var v=0,T=w.length,S;v<T;++v)if(contains$2((S=w[v])[0],I)!==-1){S.push(I);return}}),{type:"MultiPolygon",value:$,coordinates:w}}function d(b,$,w){var p=new Array,I=new Array,v,T,S,P,R,O;for(v=T=-1,P=b[0]>=$,cases[P<<1].forEach(V);++v<t-1;)S=P,P=b[v+1]>=$,cases[S|P<<1].forEach(V);for(cases[P<<0].forEach(V);++T<e-1;){for(v=-1,P=b[T*t+t]>=$,R=b[T*t]>=$,cases[P<<1|R<<2].forEach(V);++v<t-1;)S=P,P=b[T*t+t+v+1]>=$,O=R,R=b[T*t+v+1]>=$,cases[S|P<<1|R<<2|O<<3].forEach(V);cases[P|R<<3].forEach(V)}for(v=-1,R=b[T*t]>=$,cases[R<<2].forEach(V);++v<t-1;)O=R,R=b[T*t+v+1]>=$,cases[R<<2|O<<3].forEach(V);cases[R<<3].forEach(V);function V(q){var et=[q[0][0]+v,q[0][1]+T],nt=[q[1][0]+v,q[1][1]+T],lt=g(et),it=g(nt),F,ct;(F=I[lt])?(ct=p[it])?(delete I[F.end],delete p[ct.start],F===ct?(F.ring.push(nt),w(F.ring)):p[F.start]=I[ct.end]={start:F.start,end:ct.end,ring:F.ring.concat(ct.ring)}):(delete I[F.end],F.ring.push(nt),I[F.end=it]=F):(F=p[it])?(ct=I[lt])?(delete p[F.start],delete I[ct.end],F===ct?(F.ring.push(nt),w(F.ring)):p[ct.start]=I[F.end]={start:ct.start,end:F.end,ring:ct.ring.concat(F.ring)}):(delete p[F.start],F.ring.unshift(et),p[F.start=lt]=F):p[lt]=I[it]={start:lt,end:it,ring:[et,nt]}}}function g(b){return b[0]*2+b[1]*(t+1)*4}function _(b,$,w){b.forEach(function(p){var I=p[0],v=p[1],T=I|0,S=v|0,P,R=$[S*t+T];I>0&&I<t&&T===I&&(P=$[S*t+T-1],p[0]=I+(w-P)/(R-P)-.5),v>0&&v<e&&S===v&&(P=$[(S-1)*t+T],p[1]=v+(w-P)/(R-P)-.5)})}return u.contour=l,u.size=function(b){if(!arguments.length)return[t,e];var $=Math.ceil(b[0]),w=Math.ceil(b[1]);if(!($>0)||!(w>0))throw new Error("invalid size");return t=$,e=w,u},u.thresholds=function(b){return arguments.length?(n=typeof b=="function"?b:Array.isArray(b)?constant$7(slice$3.call(b)):constant$7(b),u):n},u.smooth=function(b){return arguments.length?(i=b?_:noop$2,u):i===_},u}function blurX(t,e,n){for(var i=t.width,u=t.height,l=(n<<1)+1,d=0;d<u;++d)for(var g=0,_=0;g<i+n;++g)g<i&&(_+=t.data[g+d*i]),g>=n&&(g>=l&&(_-=t.data[g-l+d*i]),e.data[g-n+d*i]=_/Math.min(g+1,i-1+l-g,l))}function blurY(t,e,n){for(var i=t.width,u=t.height,l=(n<<1)+1,d=0;d<i;++d)for(var g=0,_=0;g<u+n;++g)g<u&&(_+=t.data[d+g*i]),g>=n&&(g>=l&&(_-=t.data[d+(g-l)*i]),e.data[d+(g-n)*i]=_/Math.min(g+1,u-1+l-g,l))}function defaultX$1(t){return t[0]}function defaultY$1(t){return t[1]}function defaultWeight(){return 1}function density(){var t=defaultX$1,e=defaultY$1,n=defaultWeight,i=960,u=500,l=20,d=2,g=l*3,_=i+g*2>>d,b=u+g*2>>d,$=constant$7(20);function w(P){var R=new Float32Array(_*b),O=new Float32Array(_*b);P.forEach(function(et,nt,lt){var it=+t(et,nt,lt)+g>>d,F=+e(et,nt,lt)+g>>d,ct=+n(et,nt,lt);it>=0&&it<_&&F>=0&&F<b&&(R[it+F*_]+=ct)}),blurX({width:_,height:b,data:R},{data:O},l>>d),blurY({width:_,height:b,data:O},{data:R},l>>d),blurX({width:_,height:b,data:R},{data:O},l>>d),blurY({width:_,height:b,data:O},{data:R},l>>d),blurX({width:_,height:b,data:R},{data:O},l>>d),blurY({width:_,height:b,data:O},{data:R},l>>d);var V=$(R);if(!Array.isArray(V)){var q=max$2(R);V=tickStep(0,q,V),V=sequence(0,Math.floor(q/V)*V,V),V.shift()}return contours().thresholds(V).size([_,b])(R).map(p)}function p(P){return P.value*=Math.pow(2,-2*d),P.coordinates.forEach(I),P}function I(P){P.forEach(v)}function v(P){P.forEach(T)}function T(P){P[0]=P[0]*Math.pow(2,d)-g,P[1]=P[1]*Math.pow(2,d)-g}function S(){return g=l*3,_=i+g*2>>d,b=u+g*2>>d,w}return w.x=function(P){return arguments.length?(t=typeof P=="function"?P:constant$7(+P),w):t},w.y=function(P){return arguments.length?(e=typeof P=="function"?P:constant$7(+P),w):e},w.weight=function(P){return arguments.length?(n=typeof P=="function"?P:constant$7(+P),w):n},w.size=function(P){if(!arguments.length)return[i,u];var R=Math.ceil(P[0]),O=Math.ceil(P[1]);if(!(R>=0)&&!(R>=0))throw new Error("invalid size");return i=R,u=O,S()},w.cellSize=function(P){if(!arguments.length)return 1<<d;if(!((P=+P)>=1))throw new Error("invalid cell size");return d=Math.floor(Math.log(P)/Math.LN2),S()},w.thresholds=function(P){return arguments.length?($=typeof P=="function"?P:Array.isArray(P)?constant$7(slice$3.call(P)):constant$7(P),w):$},w.bandwidth=function(P){if(!arguments.length)return Math.sqrt(l*(l+1));if(!((P=+P)>=0))throw new Error("invalid bandwidth");return l=Math.round((Math.sqrt(4*P*P+1)-1)/2),S()},w}var EOL={},EOF={},QUOTE=34,NEWLINE=10,RETURN=13;function objectConverter(t){return new Function("d","return {"+t.map(function(e,n){return JSON.stringify(e)+": d["+n+'] || ""'}).join(",")+"}")}function customConverter(t,e){var n=objectConverter(t);return function(i,u){return e(n(i),u,t)}}function inferColumns(t){var e=Object.create(null),n=[];return t.forEach(function(i){for(var u in i)u in e||n.push(e[u]=u)}),n}function pad$1(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function formatYear$1(t){return t<0?"-"+pad$1(-t,6):t>9999?"+"+pad$1(t,6):pad$1(t,4)}function formatDate(t){var e=t.getUTCHours(),n=t.getUTCMinutes(),i=t.getUTCSeconds(),u=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":formatYear$1(t.getUTCFullYear())+"-"+pad$1(t.getUTCMonth()+1,2)+"-"+pad$1(t.getUTCDate(),2)+(u?"T"+pad$1(e,2)+":"+pad$1(n,2)+":"+pad$1(i,2)+"."+pad$1(u,3)+"Z":i?"T"+pad$1(e,2)+":"+pad$1(n,2)+":"+pad$1(i,2)+"Z":n||e?"T"+pad$1(e,2)+":"+pad$1(n,2)+"Z":"")}function dsvFormat(t){var e=new RegExp('["'+t+`
\r]`),n=t.charCodeAt(0);function i(w,p){var I,v,T=u(w,function(S,P){if(I)return I(S,P-1);v=S,I=p?customConverter(S,p):objectConverter(S)});return T.columns=v||[],T}function u(w,p){var I=[],v=w.length,T=0,S=0,P,R=v<=0,O=!1;w.charCodeAt(v-1)===NEWLINE&&--v,w.charCodeAt(v-1)===RETURN&&--v;function V(){if(R)return EOF;if(O)return O=!1,EOL;var et,nt=T,lt;if(w.charCodeAt(nt)===QUOTE){for(;T++<v&&w.charCodeAt(T)!==QUOTE||w.charCodeAt(++T)===QUOTE;);return(et=T)>=v?R=!0:(lt=w.charCodeAt(T++))===NEWLINE?O=!0:lt===RETURN&&(O=!0,w.charCodeAt(T)===NEWLINE&&++T),w.slice(nt+1,et-1).replace(/""/g,'"')}for(;T<v;){if((lt=w.charCodeAt(et=T++))===NEWLINE)O=!0;else if(lt===RETURN)O=!0,w.charCodeAt(T)===NEWLINE&&++T;else if(lt!==n)continue;return w.slice(nt,et)}return R=!0,w.slice(nt,v)}for(;(P=V())!==EOF;){for(var q=[];P!==EOL&&P!==EOF;)q.push(P),P=V();p&&(q=p(q,S++))==null||I.push(q)}return I}function l(w,p){return w.map(function(I){return p.map(function(v){return $(I[v])}).join(t)})}function d(w,p){return p==null&&(p=inferColumns(w)),[p.map($).join(t)].concat(l(w,p)).join(`
`)}function g(w,p){return p==null&&(p=inferColumns(w)),l(w,p).join(`
`)}function _(w){return w.map(b).join(`
`)}function b(w){return w.map($).join(t)}function $(w){return w==null?"":w instanceof Date?formatDate(w):e.test(w+="")?'"'+w.replace(/"/g,'""')+'"':w}return{parse:i,parseRows:u,format:d,formatBody:g,formatRows:_,formatRow:b,formatValue:$}}var csv$1=dsvFormat(","),csvParse=csv$1.parse,csvParseRows=csv$1.parseRows,csvFormat=csv$1.format,csvFormatBody=csv$1.formatBody,csvFormatRows=csv$1.formatRows,csvFormatRow=csv$1.formatRow,csvFormatValue=csv$1.formatValue,tsv$1=dsvFormat("	"),tsvParse=tsv$1.parse,tsvParseRows=tsv$1.parseRows,tsvFormat=tsv$1.format,tsvFormatBody=tsv$1.formatBody,tsvFormatRows=tsv$1.formatRows,tsvFormatRow=tsv$1.formatRow,tsvFormatValue=tsv$1.formatValue;function autoType(t){for(var e in t){var n=t[e].trim(),i,u;if(!n)n=null;else if(n==="true")n=!0;else if(n==="false")n=!1;else if(n==="NaN")n=NaN;else if(!isNaN(i=+n))n=i;else if(u=n.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))fixtz&&u[4]&&!u[7]&&(n=n.replace(/-/g,"/").replace(/T/," ")),n=new Date(n);else continue;t[e]=n}return t}var fixtz=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function responseBlob(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function blob(t,e){return fetch(t,e).then(responseBlob)}function responseArrayBuffer(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function buffer(t,e){return fetch(t,e).then(responseArrayBuffer)}function responseText(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function text(t,e){return fetch(t,e).then(responseText)}function dsvParse(t){return function(e,n,i){return arguments.length===2&&typeof n=="function"&&(i=n,n=void 0),text(e,n).then(function(u){return t(u,i)})}}function dsv(t,e,n,i){arguments.length===3&&typeof n=="function"&&(i=n,n=void 0);var u=dsvFormat(t);return text(e,n).then(function(l){return u.parse(l,i)})}var csv=dsvParse(csvParse),tsv=dsvParse(tsvParse);function image(t,e){return new Promise(function(n,i){var u=new Image;for(var l in e)u[l]=e[l];u.onerror=i,u.onload=function(){n(u)},u.src=t})}function responseJson(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function json(t,e){return fetch(t,e).then(responseJson)}function parser(t){return function(e,n){return text(e,n).then(function(i){return new DOMParser().parseFromString(i,t)})}}const xml=parser("application/xml");var html=parser("text/html"),svg=parser("image/svg+xml");function center(t,e){var n;t==null&&(t=0),e==null&&(e=0);function i(){var u,l=n.length,d,g=0,_=0;for(u=0;u<l;++u)d=n[u],g+=d.x,_+=d.y;for(g=g/l-t,_=_/l-e,u=0;u<l;++u)d=n[u],d.x-=g,d.y-=_}return i.initialize=function(u){n=u},i.x=function(u){return arguments.length?(t=+u,i):t},i.y=function(u){return arguments.length?(e=+u,i):e},i}function constant$6(t){return function(){return t}}function jiggle(){return(Math.random()-.5)*1e-6}function tree_add(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return add$1(this.cover(e,n),e,n,t)}function add$1(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var u,l=t._root,d={data:i},g=t._x0,_=t._y0,b=t._x1,$=t._y1,w,p,I,v,T,S,P,R;if(!l)return t._root=d,t;for(;l.length;)if((T=e>=(w=(g+b)/2))?g=w:b=w,(S=n>=(p=(_+$)/2))?_=p:$=p,u=l,!(l=l[P=S<<1|T]))return u[P]=d,t;if(I=+t._x.call(null,l.data),v=+t._y.call(null,l.data),e===I&&n===v)return d.next=l,u?u[P]=d:t._root=d,t;do u=u?u[P]=new Array(4):t._root=new Array(4),(T=e>=(w=(g+b)/2))?g=w:b=w,(S=n>=(p=(_+$)/2))?_=p:$=p;while((P=S<<1|T)===(R=(v>=p)<<1|I>=w));return u[R]=l,u[P]=d,t}function addAll(t){var e,n,i=t.length,u,l,d=new Array(i),g=new Array(i),_=1/0,b=1/0,$=-1/0,w=-1/0;for(n=0;n<i;++n)isNaN(u=+this._x.call(null,e=t[n]))||isNaN(l=+this._y.call(null,e))||(d[n]=u,g[n]=l,u<_&&(_=u),u>$&&($=u),l<b&&(b=l),l>w&&(w=l));if(_>$||b>w)return this;for(this.cover(_,b).cover($,w),n=0;n<i;++n)add$1(this,d[n],g[n],t[n]);return this}function tree_cover(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,u=this._x1,l=this._y1;if(isNaN(n))u=(n=Math.floor(t))+1,l=(i=Math.floor(e))+1;else{for(var d=u-n,g=this._root,_,b;n>t||t>=u||i>e||e>=l;)switch(b=(e<i)<<1|t<n,_=new Array(4),_[b]=g,g=_,d*=2,b){case 0:u=n+d,l=i+d;break;case 1:n=u-d,l=i+d;break;case 2:u=n+d,i=l-d;break;case 3:n=u-d,i=l-d;break}this._root&&this._root.length&&(this._root=g)}return this._x0=n,this._y0=i,this._x1=u,this._y1=l,this}function tree_data(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function tree_extent(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad(t,e,n,i,u){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=u}function tree_find(t,e,n){var i,u=this._x0,l=this._y0,d,g,_,b,$=this._x1,w=this._y1,p=[],I=this._root,v,T;for(I&&p.push(new Quad(I,u,l,$,w)),n==null?n=1/0:(u=t-n,l=e-n,$=t+n,w=e+n,n*=n);v=p.pop();)if(!(!(I=v.node)||(d=v.x0)>$||(g=v.y0)>w||(_=v.x1)<u||(b=v.y1)<l))if(I.length){var S=(d+_)/2,P=(g+b)/2;p.push(new Quad(I[3],S,P,_,b),new Quad(I[2],d,P,S,b),new Quad(I[1],S,g,_,P),new Quad(I[0],d,g,S,P)),(T=(e>=P)<<1|t>=S)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-T],p[p.length-1-T]=v)}else{var R=t-+this._x.call(null,I.data),O=e-+this._y.call(null,I.data),V=R*R+O*O;if(V<n){var q=Math.sqrt(n=V);u=t-q,l=e-q,$=t+q,w=e+q,i=I.data}}return i}function tree_remove(t){if(isNaN($=+this._x.call(null,t))||isNaN(w=+this._y.call(null,t)))return this;var e,n=this._root,i,u,l,d=this._x0,g=this._y0,_=this._x1,b=this._y1,$,w,p,I,v,T,S,P;if(!n)return this;if(n.length)for(;;){if((v=$>=(p=(d+_)/2))?d=p:_=p,(T=w>=(I=(g+b)/2))?g=I:b=I,e=n,!(n=n[S=T<<1|v]))return this;if(!n.length)break;(e[S+1&3]||e[S+2&3]||e[S+3&3])&&(i=e,P=S)}for(;n.data!==t;)if(u=n,!(n=n.next))return this;return(l=n.next)&&delete n.next,u?(l?u.next=l:delete u.next,this):e?(l?e[S]=l:delete e[S],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[P]=n:this._root=n),this):(this._root=l,this)}function removeAll(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function tree_root(){return this._root}function tree_size(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function tree_visit(t){var e=[],n,i=this._root,u,l,d,g,_;for(i&&e.push(new Quad(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,l=n.x0,d=n.y0,g=n.x1,_=n.y1)&&i.length){var b=(l+g)/2,$=(d+_)/2;(u=i[3])&&e.push(new Quad(u,b,$,g,_)),(u=i[2])&&e.push(new Quad(u,l,$,b,_)),(u=i[1])&&e.push(new Quad(u,b,d,g,$)),(u=i[0])&&e.push(new Quad(u,l,d,b,$))}return this}function tree_visitAfter(t){var e=[],n=[],i;for(this._root&&e.push(new Quad(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var u=i.node;if(u.length){var l,d=i.x0,g=i.y0,_=i.x1,b=i.y1,$=(d+_)/2,w=(g+b)/2;(l=u[0])&&e.push(new Quad(l,d,g,$,w)),(l=u[1])&&e.push(new Quad(l,$,g,_,w)),(l=u[2])&&e.push(new Quad(l,d,w,$,b)),(l=u[3])&&e.push(new Quad(l,$,w,_,b))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function defaultX(t){return t[0]}function tree_x(t){return arguments.length?(this._x=t,this):this._x}function defaultY(t){return t[1]}function tree_y(t){return arguments.length?(this._y=t,this):this._y}function quadtree(t,e,n){var i=new Quadtree(e==null?defaultX:e,n==null?defaultY:n,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function Quadtree(t,e,n,i,u,l){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=u,this._y1=l,this._root=void 0}function leaf_copy(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var t=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=leaf_copy(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var u=0;u<4;++u)(i=e.source[u])&&(i.length?n.push({source:i,target:e.target[u]=new Array(4)}):e.target[u]=leaf_copy(i));return t};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function x$4(t){return t.x+t.vx}function y$4(t){return t.y+t.vy}function collide(t){var e,n,i=1,u=1;typeof t!="function"&&(t=constant$6(t==null?1:+t));function l(){for(var _,b=e.length,$,w,p,I,v,T,S=0;S<u;++S)for($=quadtree(e,x$4,y$4).visitAfter(d),_=0;_<b;++_)w=e[_],v=n[w.index],T=v*v,p=w.x+w.vx,I=w.y+w.vy,$.visit(P);function P(R,O,V,q,et){var nt=R.data,lt=R.r,it=v+lt;if(nt){if(nt.index>w.index){var F=p-nt.x-nt.vx,ct=I-nt.y-nt.vy,U=F*F+ct*ct;U<it*it&&(F===0&&(F=jiggle(),U+=F*F),ct===0&&(ct=jiggle(),U+=ct*ct),U=(it-(U=Math.sqrt(U)))/U*i,w.vx+=(F*=U)*(it=(lt*=lt)/(T+lt)),w.vy+=(ct*=U)*it,nt.vx-=F*(it=1-it),nt.vy-=ct*it)}return}return O>p+it||q<p-it||V>I+it||et<I-it}}function d(_){if(_.data)return _.r=n[_.data.index];for(var b=_.r=0;b<4;++b)_[b]&&_[b].r>_.r&&(_.r=_[b].r)}function g(){if(e){var _,b=e.length,$;for(n=new Array(b),_=0;_<b;++_)$=e[_],n[$.index]=+t($,_,e)}}return l.initialize=function(_){e=_,g()},l.iterations=function(_){return arguments.length?(u=+_,l):u},l.strength=function(_){return arguments.length?(i=+_,l):i},l.radius=function(_){return arguments.length?(t=typeof _=="function"?_:constant$6(+_),g(),l):t},l}function index$3(t){return t.index}function find(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function link$2(t){var e=index$3,n=$,i,u=constant$6(30),l,d,g,_,b=1;t==null&&(t=[]);function $(T){return 1/Math.min(g[T.source.index],g[T.target.index])}function w(T){for(var S=0,P=t.length;S<b;++S)for(var R=0,O,V,q,et,nt,lt,it;R<P;++R)O=t[R],V=O.source,q=O.target,et=q.x+q.vx-V.x-V.vx||jiggle(),nt=q.y+q.vy-V.y-V.vy||jiggle(),lt=Math.sqrt(et*et+nt*nt),lt=(lt-l[R])/lt*T*i[R],et*=lt,nt*=lt,q.vx-=et*(it=_[R]),q.vy-=nt*it,V.vx+=et*(it=1-it),V.vy+=nt*it}function p(){if(d){var T,S=d.length,P=t.length,R=map$2(d,e),O;for(T=0,g=new Array(S);T<P;++T)O=t[T],O.index=T,typeof O.source!="object"&&(O.source=find(R,O.source)),typeof O.target!="object"&&(O.target=find(R,O.target)),g[O.source.index]=(g[O.source.index]||0)+1,g[O.target.index]=(g[O.target.index]||0)+1;for(T=0,_=new Array(P);T<P;++T)O=t[T],_[T]=g[O.source.index]/(g[O.source.index]+g[O.target.index]);i=new Array(P),I(),l=new Array(P),v()}}function I(){if(d)for(var T=0,S=t.length;T<S;++T)i[T]=+n(t[T],T,t)}function v(){if(d)for(var T=0,S=t.length;T<S;++T)l[T]=+u(t[T],T,t)}return w.initialize=function(T){d=T,p()},w.links=function(T){return arguments.length?(t=T,p(),w):t},w.id=function(T){return arguments.length?(e=T,w):e},w.iterations=function(T){return arguments.length?(b=+T,w):b},w.strength=function(T){return arguments.length?(n=typeof T=="function"?T:constant$6(+T),I(),w):n},w.distance=function(T){return arguments.length?(u=typeof T=="function"?T:constant$6(+T),v(),w):u},w}function x$3(t){return t.x}function y$3(t){return t.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function simulation(t){var e,n=1,i=.001,u=1-Math.pow(i,1/300),l=0,d=.6,g=map$2(),_=timer($),b=dispatch("tick","end");t==null&&(t=[]);function $(){w(),b.call("tick",e),n<i&&(_.stop(),b.call("end",e))}function w(v){var T,S=t.length,P;v===void 0&&(v=1);for(var R=0;R<v;++R)for(n+=(l-n)*u,g.each(function(O){O(n)}),T=0;T<S;++T)P=t[T],P.fx==null?P.x+=P.vx*=d:(P.x=P.fx,P.vx=0),P.fy==null?P.y+=P.vy*=d:(P.y=P.fy,P.vy=0);return e}function p(){for(var v=0,T=t.length,S;v<T;++v){if(S=t[v],S.index=v,S.fx!=null&&(S.x=S.fx),S.fy!=null&&(S.y=S.fy),isNaN(S.x)||isNaN(S.y)){var P=initialRadius*Math.sqrt(v),R=v*initialAngle;S.x=P*Math.cos(R),S.y=P*Math.sin(R)}(isNaN(S.vx)||isNaN(S.vy))&&(S.vx=S.vy=0)}}function I(v){return v.initialize&&v.initialize(t),v}return p(),e={tick:w,restart:function(){return _.restart($),e},stop:function(){return _.stop(),e},nodes:function(v){return arguments.length?(t=v,p(),g.each(I),e):t},alpha:function(v){return arguments.length?(n=+v,e):n},alphaMin:function(v){return arguments.length?(i=+v,e):i},alphaDecay:function(v){return arguments.length?(u=+v,e):+u},alphaTarget:function(v){return arguments.length?(l=+v,e):l},velocityDecay:function(v){return arguments.length?(d=1-v,e):1-d},force:function(v,T){return arguments.length>1?(T==null?g.remove(v):g.set(v,I(T)),e):g.get(v)},find:function(v,T,S){var P=0,R=t.length,O,V,q,et,nt;for(S==null?S=1/0:S*=S,P=0;P<R;++P)et=t[P],O=v-et.x,V=T-et.y,q=O*O+V*V,q<S&&(nt=et,S=q);return nt},on:function(v,T){return arguments.length>1?(b.on(v,T),e):b.on(v)}}}function manyBody(){var t,e,n,i=constant$6(-30),u,l=1,d=1/0,g=.81;function _(p){var I,v=t.length,T=quadtree(t,x$3,y$3).visitAfter($);for(n=p,I=0;I<v;++I)e=t[I],T.visit(w)}function b(){if(t){var p,I=t.length,v;for(u=new Array(I),p=0;p<I;++p)v=t[p],u[v.index]=+i(v,p,t)}}function $(p){var I=0,v,T,S=0,P,R,O;if(p.length){for(P=R=O=0;O<4;++O)(v=p[O])&&(T=Math.abs(v.value))&&(I+=v.value,S+=T,P+=T*v.x,R+=T*v.y);p.x=P/S,p.y=R/S}else{v=p,v.x=v.data.x,v.y=v.data.y;do I+=u[v.data.index];while(v=v.next)}p.value=I}function w(p,I,v,T){if(!p.value)return!0;var S=p.x-e.x,P=p.y-e.y,R=T-I,O=S*S+P*P;if(R*R/g<O)return O<d&&(S===0&&(S=jiggle(),O+=S*S),P===0&&(P=jiggle(),O+=P*P),O<l&&(O=Math.sqrt(l*O)),e.vx+=S*p.value*n/O,e.vy+=P*p.value*n/O),!0;if(p.length||O>=d)return;(p.data!==e||p.next)&&(S===0&&(S=jiggle(),O+=S*S),P===0&&(P=jiggle(),O+=P*P),O<l&&(O=Math.sqrt(l*O)));do p.data!==e&&(R=u[p.data.index]*n/O,e.vx+=S*R,e.vy+=P*R);while(p=p.next)}return _.initialize=function(p){t=p,b()},_.strength=function(p){return arguments.length?(i=typeof p=="function"?p:constant$6(+p),b(),_):i},_.distanceMin=function(p){return arguments.length?(l=p*p,_):Math.sqrt(l)},_.distanceMax=function(p){return arguments.length?(d=p*p,_):Math.sqrt(d)},_.theta=function(p){return arguments.length?(g=p*p,_):Math.sqrt(g)},_}function radial(t,e,n){var i,u=constant$6(.1),l,d;typeof t!="function"&&(t=constant$6(+t)),e==null&&(e=0),n==null&&(n=0);function g(b){for(var $=0,w=i.length;$<w;++$){var p=i[$],I=p.x-e||1e-6,v=p.y-n||1e-6,T=Math.sqrt(I*I+v*v),S=(d[$]-T)*l[$]*b/T;p.vx+=I*S,p.vy+=v*S}}function _(){if(i){var b,$=i.length;for(l=new Array($),d=new Array($),b=0;b<$;++b)d[b]=+t(i[b],b,i),l[b]=isNaN(d[b])?0:+u(i[b],b,i)}}return g.initialize=function(b){i=b,_()},g.strength=function(b){return arguments.length?(u=typeof b=="function"?b:constant$6(+b),_(),g):u},g.radius=function(b){return arguments.length?(t=typeof b=="function"?b:constant$6(+b),_(),g):t},g.x=function(b){return arguments.length?(e=+b,g):e},g.y=function(b){return arguments.length?(n=+b,g):n},g}function x$2(t){var e=constant$6(.1),n,i,u;typeof t!="function"&&(t=constant$6(t==null?0:+t));function l(g){for(var _=0,b=n.length,$;_<b;++_)$=n[_],$.vx+=(u[_]-$.x)*i[_]*g}function d(){if(n){var g,_=n.length;for(i=new Array(_),u=new Array(_),g=0;g<_;++g)i[g]=isNaN(u[g]=+t(n[g],g,n))?0:+e(n[g],g,n)}}return l.initialize=function(g){n=g,d()},l.strength=function(g){return arguments.length?(e=typeof g=="function"?g:constant$6(+g),d(),l):e},l.x=function(g){return arguments.length?(t=typeof g=="function"?g:constant$6(+g),d(),l):t},l}function y$2(t){var e=constant$6(.1),n,i,u;typeof t!="function"&&(t=constant$6(t==null?0:+t));function l(g){for(var _=0,b=n.length,$;_<b;++_)$=n[_],$.vy+=(u[_]-$.y)*i[_]*g}function d(){if(n){var g,_=n.length;for(i=new Array(_),u=new Array(_),g=0;g<_;++g)i[g]=isNaN(u[g]=+t(n[g],g,n))?0:+e(n[g],g,n)}}return l.initialize=function(g){n=g,d()},l.strength=function(g){return arguments.length?(e=typeof g=="function"?g:constant$6(+g),d(),l):e},l.y=function(g){return arguments.length?(t=typeof g=="function"?g:constant$6(+g),d(),l):t},l}function formatDecimal(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function formatDecimalParts(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,i=t.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+t.slice(n+1)]}function exponent(t){return t=formatDecimalParts(Math.abs(t)),t?t[1]:NaN}function formatGroup(t,e){return function(n,i){for(var u=n.length,l=[],d=0,g=t[0],_=0;u>0&&g>0&&(_+g+1>i&&(g=Math.max(1,i-_)),l.push(n.substring(u-=g,u+g)),!((_+=g+1)>i));)g=t[d=(d+1)%t.length];return l.reverse().join(e)}}function formatNumerals(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(t){if(!(e=re.exec(t)))throw new Error("invalid format: "+t);var e;return new FormatSpecifier({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(t){t:for(var e=t.length,n=1,i=-1,u;n<e;++n)switch(t[n]){case".":i=u=n;break;case"0":i===0&&(i=n),u=n;break;default:if(!+t[n])break t;i>0&&(i=0);break}return i>0?t.slice(0,i)+t.slice(u+1):t}var prefixExponent;function formatPrefixAuto(t,e){var n=formatDecimalParts(t,e);if(!n)return t+"";var i=n[0],u=n[1],l=u-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(u/3)))*3)+1,d=i.length;return l===d?i:l>d?i+new Array(l-d+1).join("0"):l>0?i.slice(0,l)+"."+i.slice(l):"0."+new Array(1-l).join("0")+formatDecimalParts(t,Math.max(0,e+l-1))[0]}function formatRounded(t,e){var n=formatDecimalParts(t,e);if(!n)return t+"";var i=n[0],u=n[1];return u<0?"0."+new Array(-u).join("0")+i:i.length>u+1?i.slice(0,u+1)+"."+i.slice(u+1):i+new Array(u-i.length+2).join("0")}const formatTypes={"%":function(t,e){return(t*100).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:formatDecimal,e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return formatRounded(t*100,e)},r:formatRounded,s:formatPrefixAuto,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function identity$6(t){return t}var map$1=Array.prototype.map,prefixes=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function formatLocale$1(t){var e=t.grouping===void 0||t.thousands===void 0?identity$6:formatGroup(map$1.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",i=t.currency===void 0?"":t.currency[1]+"",u=t.decimal===void 0?".":t.decimal+"",l=t.numerals===void 0?identity$6:formatNumerals(map$1.call(t.numerals,String)),d=t.percent===void 0?"%":t.percent+"",g=t.minus===void 0?"-":t.minus+"",_=t.nan===void 0?"NaN":t.nan+"";function b(w){w=formatSpecifier(w);var p=w.fill,I=w.align,v=w.sign,T=w.symbol,S=w.zero,P=w.width,R=w.comma,O=w.precision,V=w.trim,q=w.type;q==="n"?(R=!0,q="g"):formatTypes[q]||(O===void 0&&(O=12),V=!0,q="g"),(S||p==="0"&&I==="=")&&(S=!0,p="0",I="=");var et=T==="$"?n:T==="#"&&/[boxX]/.test(q)?"0"+q.toLowerCase():"",nt=T==="$"?i:/[%p]/.test(q)?d:"",lt=formatTypes[q],it=/[defgprs%]/.test(q);O=O===void 0?6:/[gprs]/.test(q)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function F(ct){var U=et,st=nt,yt,ut,mt;if(q==="c")st=lt(ct)+st,ct="";else{ct=+ct;var $t=ct<0||1/ct<0;if(ct=isNaN(ct)?_:lt(Math.abs(ct),O),V&&(ct=formatTrim(ct)),$t&&+ct==0&&v!=="+"&&($t=!1),U=($t?v==="("?v:g:v==="-"||v==="("?"":v)+U,st=(q==="s"?prefixes[8+prefixExponent/3]:"")+st+($t&&v==="("?")":""),it){for(yt=-1,ut=ct.length;++yt<ut;)if(mt=ct.charCodeAt(yt),48>mt||mt>57){st=(mt===46?u+ct.slice(yt+1):ct.slice(yt))+st,ct=ct.slice(0,yt);break}}}R&&!S&&(ct=e(ct,1/0));var wt=U.length+ct.length+st.length,r=wt<P?new Array(P-wt+1).join(p):"";switch(R&&S&&(ct=e(r+ct,r.length?P-st.length:1/0),r=""),I){case"<":ct=U+ct+st+r;break;case"=":ct=U+r+ct+st;break;case"^":ct=r.slice(0,wt=r.length>>1)+U+ct+st+r.slice(wt);break;default:ct=r+U+ct+st;break}return l(ct)}return F.toString=function(){return w+""},F}function $(w,p){var I=b((w=formatSpecifier(w),w.type="f",w)),v=Math.max(-8,Math.min(8,Math.floor(exponent(p)/3)))*3,T=Math.pow(10,-v),S=prefixes[8+v/3];return function(P){return I(T*P)+S}}return{format:b,formatPrefix:$}}var locale$1,format,formatPrefix;defaultLocale$1({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function defaultLocale$1(t){return locale$1=formatLocale$1(t),format=locale$1.format,formatPrefix=locale$1.formatPrefix,locale$1}function precisionFixed(t){return Math.max(0,-exponent(Math.abs(t)))}function precisionPrefix(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(e)/3)))*3-exponent(Math.abs(t)))}function precisionRound(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,exponent(e)-exponent(t))+1}function adder(){return new Adder}function Adder(){this.reset()}Adder.prototype={constructor:Adder,reset:function(){this.s=this.t=0},add:function(t){add(temp,t,this.t),add(this,temp.s,this.s),this.s?this.t+=temp.t:this.s=temp.t},valueOf:function(){return this.s}};var temp=new Adder;function add(t,e,n){var i=t.s=e+n,u=i-e,l=i-u;t.t=e-l+(n-u)}var epsilon$2=1e-6,epsilon2=1e-12,pi$1=Math.PI,halfPi$1=pi$1/2,quarterPi=pi$1/4,tau$1=pi$1*2,degrees=180/pi$1,radians=pi$1/180,abs$1=Math.abs,atan=Math.atan,atan2$1=Math.atan2,cos$1=Math.cos,ceil=Math.ceil,exp=Math.exp,log$1=Math.log,pow$1=Math.pow,sin$1=Math.sin,sign$1=Math.sign||function(t){return t>0?1:t<0?-1:0},sqrt$2=Math.sqrt,tan=Math.tan;function acos$1(t){return t>1?0:t<-1?pi$1:Math.acos(t)}function asin$1(t){return t>1?halfPi$1:t<-1?-halfPi$1:Math.asin(t)}function haversin(t){return(t=sin$1(t/2))*t}function noop$1(){}function streamGeometry(t,e){t&&streamGeometryType.hasOwnProperty(t.type)&&streamGeometryType[t.type](t,e)}var streamObjectType={Feature:function(t,e){streamGeometry(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,u=n.length;++i<u;)streamGeometry(n[i].geometry,e)}},streamGeometryType={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,u=n.length;++i<u;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){streamLine(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,u=n.length;++i<u;)streamLine(n[i],e,0)},Polygon:function(t,e){streamPolygon(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,u=n.length;++i<u;)streamPolygon(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,u=n.length;++i<u;)streamGeometry(n[i],e)}};function streamLine(t,e,n){var i=-1,u=t.length-n,l;for(e.lineStart();++i<u;)l=t[i],e.point(l[0],l[1],l[2]);e.lineEnd()}function streamPolygon(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)streamLine(t[n],e,1);e.polygonEnd()}function geoStream(t,e){t&&streamObjectType.hasOwnProperty(t.type)?streamObjectType[t.type](t,e):streamGeometry(t,e)}var areaRingSum$1=adder(),areaSum$1=adder(),lambda00$2,phi00$2,lambda0$2,cosPhi0$1,sinPhi0$1,areaStream$1={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaRingSum$1.reset(),areaStream$1.lineStart=areaRingStart$1,areaStream$1.lineEnd=areaRingEnd$1},polygonEnd:function(){var t=+areaRingSum$1;areaSum$1.add(t<0?tau$1+t:t),this.lineStart=this.lineEnd=this.point=noop$1},sphere:function(){areaSum$1.add(tau$1)}};function areaRingStart$1(){areaStream$1.point=areaPointFirst$1}function areaRingEnd$1(){areaPoint$1(lambda00$2,phi00$2)}function areaPointFirst$1(t,e){areaStream$1.point=areaPoint$1,lambda00$2=t,phi00$2=e,t*=radians,e*=radians,lambda0$2=t,cosPhi0$1=cos$1(e=e/2+quarterPi),sinPhi0$1=sin$1(e)}function areaPoint$1(t,e){t*=radians,e*=radians,e=e/2+quarterPi;var n=t-lambda0$2,i=n>=0?1:-1,u=i*n,l=cos$1(e),d=sin$1(e),g=sinPhi0$1*d,_=cosPhi0$1*l+g*cos$1(u),b=g*i*sin$1(u);areaRingSum$1.add(atan2$1(b,_)),lambda0$2=t,cosPhi0$1=l,sinPhi0$1=d}function area$2(t){return areaSum$1.reset(),geoStream(t,areaStream$1),areaSum$1*2}function spherical(t){return[atan2$1(t[1],t[0]),asin$1(t[2])]}function cartesian(t){var e=t[0],n=t[1],i=cos$1(n);return[i*cos$1(e),i*sin$1(e),sin$1(n)]}function cartesianDot(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function cartesianCross(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function cartesianAddInPlace(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function cartesianScale(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function cartesianNormalizeInPlace(t){var e=sqrt$2(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var lambda0$1,phi0,lambda1,phi1,lambda2,lambda00$1,phi00$1,p0,deltaSum=adder(),ranges,range,boundsStream$1={point:boundsPoint$1,lineStart:boundsLineStart,lineEnd:boundsLineEnd,polygonStart:function(){boundsStream$1.point=boundsRingPoint,boundsStream$1.lineStart=boundsRingStart,boundsStream$1.lineEnd=boundsRingEnd,deltaSum.reset(),areaStream$1.polygonStart()},polygonEnd:function(){areaStream$1.polygonEnd(),boundsStream$1.point=boundsPoint$1,boundsStream$1.lineStart=boundsLineStart,boundsStream$1.lineEnd=boundsLineEnd,areaRingSum$1<0?(lambda0$1=-(lambda1=180),phi0=-(phi1=90)):deltaSum>epsilon$2?phi1=90:deltaSum<-epsilon$2&&(phi0=-90),range[0]=lambda0$1,range[1]=lambda1},sphere:function(){lambda0$1=-(lambda1=180),phi0=-(phi1=90)}};function boundsPoint$1(t,e){ranges.push(range=[lambda0$1=t,lambda1=t]),e<phi0&&(phi0=e),e>phi1&&(phi1=e)}function linePoint(t,e){var n=cartesian([t*radians,e*radians]);if(p0){var i=cartesianCross(p0,n),u=[i[1],-i[0],0],l=cartesianCross(u,i);cartesianNormalizeInPlace(l),l=spherical(l);var d=t-lambda2,g=d>0?1:-1,_=l[0]*degrees*g,b,$=abs$1(d)>180;$^(g*lambda2<_&&_<g*t)?(b=l[1]*degrees,b>phi1&&(phi1=b)):(_=(_+360)%360-180,$^(g*lambda2<_&&_<g*t)?(b=-l[1]*degrees,b<phi0&&(phi0=b)):(e<phi0&&(phi0=e),e>phi1&&(phi1=e))),$?t<lambda2?angle(lambda0$1,t)>angle(lambda0$1,lambda1)&&(lambda1=t):angle(t,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=t):lambda1>=lambda0$1?(t<lambda0$1&&(lambda0$1=t),t>lambda1&&(lambda1=t)):t>lambda2?angle(lambda0$1,t)>angle(lambda0$1,lambda1)&&(lambda1=t):angle(t,lambda1)>angle(lambda0$1,lambda1)&&(lambda0$1=t)}else ranges.push(range=[lambda0$1=t,lambda1=t]);e<phi0&&(phi0=e),e>phi1&&(phi1=e),p0=n,lambda2=t}function boundsLineStart(){boundsStream$1.point=linePoint}function boundsLineEnd(){range[0]=lambda0$1,range[1]=lambda1,boundsStream$1.point=boundsPoint$1,p0=null}function boundsRingPoint(t,e){if(p0){var n=t-lambda2;deltaSum.add(abs$1(n)>180?n+(n>0?360:-360):n)}else lambda00$1=t,phi00$1=e;areaStream$1.point(t,e),linePoint(t,e)}function boundsRingStart(){areaStream$1.lineStart()}function boundsRingEnd(){boundsRingPoint(lambda00$1,phi00$1),areaStream$1.lineEnd(),abs$1(deltaSum)>epsilon$2&&(lambda0$1=-(lambda1=180)),range[0]=lambda0$1,range[1]=lambda1,p0=null}function angle(t,e){return(e-=t)<0?e+360:e}function rangeCompare(t,e){return t[0]-e[0]}function rangeContains(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function bounds(t){var e,n,i,u,l,d,g;if(phi1=lambda1=-(lambda0$1=phi0=1/0),ranges=[],geoStream(t,boundsStream$1),n=ranges.length){for(ranges.sort(rangeCompare),e=1,i=ranges[0],l=[i];e<n;++e)u=ranges[e],rangeContains(i,u[0])||rangeContains(i,u[1])?(angle(i[0],u[1])>angle(i[0],i[1])&&(i[1]=u[1]),angle(u[0],i[1])>angle(i[0],i[1])&&(i[0]=u[0])):l.push(i=u);for(d=-1/0,n=l.length-1,e=0,i=l[n];e<=n;i=u,++e)u=l[e],(g=angle(i[1],u[0]))>d&&(d=g,lambda0$1=u[0],lambda1=i[1])}return ranges=range=null,lambda0$1===1/0||phi0===1/0?[[NaN,NaN],[NaN,NaN]]:[[lambda0$1,phi0],[lambda1,phi1]]}var W0,W1,X0$1,Y0$1,Z0$1,X1$1,Y1$1,Z1$1,X2$1,Y2$1,Z2$1,lambda00,phi00,x0$4,y0$4,z0,centroidStream$1={sphere:noop$1,point:centroidPoint$1,lineStart:centroidLineStart$1,lineEnd:centroidLineEnd$1,polygonStart:function(){centroidStream$1.lineStart=centroidRingStart$1,centroidStream$1.lineEnd=centroidRingEnd$1},polygonEnd:function(){centroidStream$1.lineStart=centroidLineStart$1,centroidStream$1.lineEnd=centroidLineEnd$1}};function centroidPoint$1(t,e){t*=radians,e*=radians;var n=cos$1(e);centroidPointCartesian(n*cos$1(t),n*sin$1(t),sin$1(e))}function centroidPointCartesian(t,e,n){++W0,X0$1+=(t-X0$1)/W0,Y0$1+=(e-Y0$1)/W0,Z0$1+=(n-Z0$1)/W0}function centroidLineStart$1(){centroidStream$1.point=centroidLinePointFirst}function centroidLinePointFirst(t,e){t*=radians,e*=radians;var n=cos$1(e);x0$4=n*cos$1(t),y0$4=n*sin$1(t),z0=sin$1(e),centroidStream$1.point=centroidLinePoint,centroidPointCartesian(x0$4,y0$4,z0)}function centroidLinePoint(t,e){t*=radians,e*=radians;var n=cos$1(e),i=n*cos$1(t),u=n*sin$1(t),l=sin$1(e),d=atan2$1(sqrt$2((d=y0$4*l-z0*u)*d+(d=z0*i-x0$4*l)*d+(d=x0$4*u-y0$4*i)*d),x0$4*i+y0$4*u+z0*l);W1+=d,X1$1+=d*(x0$4+(x0$4=i)),Y1$1+=d*(y0$4+(y0$4=u)),Z1$1+=d*(z0+(z0=l)),centroidPointCartesian(x0$4,y0$4,z0)}function centroidLineEnd$1(){centroidStream$1.point=centroidPoint$1}function centroidRingStart$1(){centroidStream$1.point=centroidRingPointFirst}function centroidRingEnd$1(){centroidRingPoint(lambda00,phi00),centroidStream$1.point=centroidPoint$1}function centroidRingPointFirst(t,e){lambda00=t,phi00=e,t*=radians,e*=radians,centroidStream$1.point=centroidRingPoint;var n=cos$1(e);x0$4=n*cos$1(t),y0$4=n*sin$1(t),z0=sin$1(e),centroidPointCartesian(x0$4,y0$4,z0)}function centroidRingPoint(t,e){t*=radians,e*=radians;var n=cos$1(e),i=n*cos$1(t),u=n*sin$1(t),l=sin$1(e),d=y0$4*l-z0*u,g=z0*i-x0$4*l,_=x0$4*u-y0$4*i,b=sqrt$2(d*d+g*g+_*_),$=asin$1(b),w=b&&-$/b;X2$1+=w*d,Y2$1+=w*g,Z2$1+=w*_,W1+=$,X1$1+=$*(x0$4+(x0$4=i)),Y1$1+=$*(y0$4+(y0$4=u)),Z1$1+=$*(z0+(z0=l)),centroidPointCartesian(x0$4,y0$4,z0)}function centroid$1(t){W0=W1=X0$1=Y0$1=Z0$1=X1$1=Y1$1=Z1$1=X2$1=Y2$1=Z2$1=0,geoStream(t,centroidStream$1);var e=X2$1,n=Y2$1,i=Z2$1,u=e*e+n*n+i*i;return u<epsilon2&&(e=X1$1,n=Y1$1,i=Z1$1,W1<epsilon$2&&(e=X0$1,n=Y0$1,i=Z0$1),u=e*e+n*n+i*i,u<epsilon2)?[NaN,NaN]:[atan2$1(n,e)*degrees,asin$1(i/sqrt$2(u))*degrees]}function constant$5(t){return function(){return t}}function compose(t,e){function n(i,u){return i=t(i,u),e(i[0],i[1])}return t.invert&&e.invert&&(n.invert=function(i,u){return i=e.invert(i,u),i&&t.invert(i[0],i[1])}),n}function rotationIdentity(t,e){return[abs$1(t)>pi$1?t+Math.round(-t/tau$1)*tau$1:t,e]}rotationIdentity.invert=rotationIdentity;function rotateRadians(t,e,n){return(t%=tau$1)?e||n?compose(rotationLambda(t),rotationPhiGamma(e,n)):rotationLambda(t):e||n?rotationPhiGamma(e,n):rotationIdentity}function forwardRotationLambda(t){return function(e,n){return e+=t,[e>pi$1?e-tau$1:e<-pi$1?e+tau$1:e,n]}}function rotationLambda(t){var e=forwardRotationLambda(t);return e.invert=forwardRotationLambda(-t),e}function rotationPhiGamma(t,e){var n=cos$1(t),i=sin$1(t),u=cos$1(e),l=sin$1(e);function d(g,_){var b=cos$1(_),$=cos$1(g)*b,w=sin$1(g)*b,p=sin$1(_),I=p*n+$*i;return[atan2$1(w*u-I*l,$*n-p*i),asin$1(I*u+w*l)]}return d.invert=function(g,_){var b=cos$1(_),$=cos$1(g)*b,w=sin$1(g)*b,p=sin$1(_),I=p*u-w*l;return[atan2$1(w*u+p*l,$*n+I*i),asin$1(I*n-$*i)]},d}function rotation(t){t=rotateRadians(t[0]*radians,t[1]*radians,t.length>2?t[2]*radians:0);function e(n){return n=t(n[0]*radians,n[1]*radians),n[0]*=degrees,n[1]*=degrees,n}return e.invert=function(n){return n=t.invert(n[0]*radians,n[1]*radians),n[0]*=degrees,n[1]*=degrees,n},e}function circleStream(t,e,n,i,u,l){if(n){var d=cos$1(e),g=sin$1(e),_=i*n;u==null?(u=e+i*tau$1,l=e-_/2):(u=circleRadius(d,u),l=circleRadius(d,l),(i>0?u<l:u>l)&&(u+=i*tau$1));for(var b,$=u;i>0?$>l:$<l;$-=_)b=spherical([d,-g*cos$1($),-g*sin$1($)]),t.point(b[0],b[1])}}function circleRadius(t,e){e=cartesian(e),e[0]-=t,cartesianNormalizeInPlace(e);var n=acos$1(-e[1]);return((-e[2]<0?-n:n)+tau$1-epsilon$2)%tau$1}function circle$2(){var t=constant$5([0,0]),e=constant$5(90),n=constant$5(6),i,u,l={point:d};function d(_,b){i.push(_=u(_,b)),_[0]*=degrees,_[1]*=degrees}function g(){var _=t.apply(this,arguments),b=e.apply(this,arguments)*radians,$=n.apply(this,arguments)*radians;return i=[],u=rotateRadians(-_[0]*radians,-_[1]*radians,0).invert,circleStream(l,b,$,1),_={type:"Polygon",coordinates:[i]},i=u=null,_}return g.center=function(_){return arguments.length?(t=typeof _=="function"?_:constant$5([+_[0],+_[1]]),g):t},g.radius=function(_){return arguments.length?(e=typeof _=="function"?_:constant$5(+_),g):e},g.precision=function(_){return arguments.length?(n=typeof _=="function"?_:constant$5(+_),g):n},g}function clipBuffer(){var t=[],e;return{point:function(n,i,u){e.push([n,i,u])},lineStart:function(){t.push(e=[])},lineEnd:noop$1,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function pointEqual(t,e){return abs$1(t[0]-e[0])<epsilon$2&&abs$1(t[1]-e[1])<epsilon$2}function Intersection(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function clipRejoin(t,e,n,i,u){var l=[],d=[],g,_;if(t.forEach(function(v){if(!((T=v.length-1)<=0)){var T,S=v[0],P=v[T],R;if(pointEqual(S,P)){if(!S[2]&&!P[2]){for(u.lineStart(),g=0;g<T;++g)u.point((S=v[g])[0],S[1]);u.lineEnd();return}P[0]+=2*epsilon$2}l.push(R=new Intersection(S,v,null,!0)),d.push(R.o=new Intersection(S,null,R,!1)),l.push(R=new Intersection(P,v,null,!1)),d.push(R.o=new Intersection(P,null,R,!0))}}),!!l.length){for(d.sort(e),link$1(l),link$1(d),g=0,_=d.length;g<_;++g)d[g].e=n=!n;for(var b=l[0],$,w;;){for(var p=b,I=!0;p.v;)if((p=p.n)===b)return;$=p.z,u.lineStart();do{if(p.v=p.o.v=!0,p.e){if(I)for(g=0,_=$.length;g<_;++g)u.point((w=$[g])[0],w[1]);else i(p.x,p.n.x,1,u);p=p.n}else{if(I)for($=p.p.z,g=$.length-1;g>=0;--g)u.point((w=$[g])[0],w[1]);else i(p.x,p.p.x,-1,u);p=p.p}p=p.o,$=p.z,I=!I}while(!p.v);u.lineEnd()}}}function link$1(t){if(e=t.length){for(var e,n=0,i=t[0],u;++n<e;)i.n=u=t[n],u.p=i,i=u;i.n=u=t[0],u.p=i}}var sum$1=adder();function longitude(t){return abs$1(t[0])<=pi$1?t[0]:sign$1(t[0])*((abs$1(t[0])+pi$1)%tau$1-pi$1)}function polygonContains(t,e){var n=longitude(e),i=e[1],u=sin$1(i),l=[sin$1(n),-cos$1(n),0],d=0,g=0;sum$1.reset(),u===1?i=halfPi$1+epsilon$2:u===-1&&(i=-halfPi$1-epsilon$2);for(var _=0,b=t.length;_<b;++_)if(w=($=t[_]).length)for(var $,w,p=$[w-1],I=longitude(p),v=p[1]/2+quarterPi,T=sin$1(v),S=cos$1(v),P=0;P<w;++P,I=O,T=q,S=et,p=R){var R=$[P],O=longitude(R),V=R[1]/2+quarterPi,q=sin$1(V),et=cos$1(V),nt=O-I,lt=nt>=0?1:-1,it=lt*nt,F=it>pi$1,ct=T*q;if(sum$1.add(atan2$1(ct*lt*sin$1(it),S*et+ct*cos$1(it))),d+=F?nt+lt*tau$1:nt,F^I>=n^O>=n){var U=cartesianCross(cartesian(p),cartesian(R));cartesianNormalizeInPlace(U);var st=cartesianCross(l,U);cartesianNormalizeInPlace(st);var yt=(F^nt>=0?-1:1)*asin$1(st[2]);(i>yt||i===yt&&(U[0]||U[1]))&&(g+=F^nt>=0?1:-1)}}return(d<-epsilon$2||d<epsilon$2&&sum$1<-epsilon$2)^g&1}function clip(t,e,n,i){return function(u){var l=e(u),d=clipBuffer(),g=e(d),_=!1,b,$,w,p={point:I,lineStart:T,lineEnd:S,polygonStart:function(){p.point=P,p.lineStart=R,p.lineEnd=O,$=[],b=[]},polygonEnd:function(){p.point=I,p.lineStart=T,p.lineEnd=S,$=merge($);var V=polygonContains(b,i);$.length?(_||(u.polygonStart(),_=!0),clipRejoin($,compareIntersection,V,n,u)):V&&(_||(u.polygonStart(),_=!0),u.lineStart(),n(null,null,1,u),u.lineEnd()),_&&(u.polygonEnd(),_=!1),$=b=null},sphere:function(){u.polygonStart(),u.lineStart(),n(null,null,1,u),u.lineEnd(),u.polygonEnd()}};function I(V,q){t(V,q)&&u.point(V,q)}function v(V,q){l.point(V,q)}function T(){p.point=v,l.lineStart()}function S(){p.point=I,l.lineEnd()}function P(V,q){w.push([V,q]),g.point(V,q)}function R(){g.lineStart(),w=[]}function O(){P(w[0][0],w[0][1]),g.lineEnd();var V=g.clean(),q=d.result(),et,nt=q.length,lt,it,F;if(w.pop(),b.push(w),w=null,!!nt){if(V&1){if(it=q[0],(lt=it.length-1)>0){for(_||(u.polygonStart(),_=!0),u.lineStart(),et=0;et<lt;++et)u.point((F=it[et])[0],F[1]);u.lineEnd()}return}nt>1&&V&2&&q.push(q.pop().concat(q.shift())),$.push(q.filter(validSegment))}}return p}}function validSegment(t){return t.length>1}function compareIntersection(t,e){return((t=t.x)[0]<0?t[1]-halfPi$1-epsilon$2:halfPi$1-t[1])-((e=e.x)[0]<0?e[1]-halfPi$1-epsilon$2:halfPi$1-e[1])}const clipAntimeridian=clip(function(){return!0},clipAntimeridianLine,clipAntimeridianInterpolate,[-pi$1,-halfPi$1]);function clipAntimeridianLine(t){var e=NaN,n=NaN,i=NaN,u;return{lineStart:function(){t.lineStart(),u=1},point:function(l,d){var g=l>0?pi$1:-pi$1,_=abs$1(l-e);abs$1(_-pi$1)<epsilon$2?(t.point(e,n=(n+d)/2>0?halfPi$1:-halfPi$1),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(g,n),t.point(l,n),u=0):i!==g&&_>=pi$1&&(abs$1(e-i)<epsilon$2&&(e-=i*epsilon$2),abs$1(l-g)<epsilon$2&&(l-=g*epsilon$2),n=clipAntimeridianIntersect(e,n,l,d),t.point(i,n),t.lineEnd(),t.lineStart(),t.point(g,n),u=0),t.point(e=l,n=d),i=g},lineEnd:function(){t.lineEnd(),e=n=NaN},clean:function(){return 2-u}}}function clipAntimeridianIntersect(t,e,n,i){var u,l,d=sin$1(t-n);return abs$1(d)>epsilon$2?atan((sin$1(e)*(l=cos$1(i))*sin$1(n)-sin$1(i)*(u=cos$1(e))*sin$1(t))/(u*l*d)):(e+i)/2}function clipAntimeridianInterpolate(t,e,n,i){var u;if(t==null)u=n*halfPi$1,i.point(-pi$1,u),i.point(0,u),i.point(pi$1,u),i.point(pi$1,0),i.point(pi$1,-u),i.point(0,-u),i.point(-pi$1,-u),i.point(-pi$1,0),i.point(-pi$1,u);else if(abs$1(t[0]-e[0])>epsilon$2){var l=t[0]<e[0]?pi$1:-pi$1;u=n*l/2,i.point(-l,u),i.point(0,u),i.point(l,u)}else i.point(e[0],e[1])}function clipCircle(t){var e=cos$1(t),n=6*radians,i=e>0,u=abs$1(e)>epsilon$2;function l($,w,p,I){circleStream(I,t,n,p,$,w)}function d($,w){return cos$1($)*cos$1(w)>e}function g($){var w,p,I,v,T;return{lineStart:function(){v=I=!1,T=1},point:function(S,P){var R=[S,P],O,V=d(S,P),q=i?V?0:b(S,P):V?b(S+(S<0?pi$1:-pi$1),P):0;if(!w&&(v=I=V)&&$.lineStart(),V!==I&&(O=_(w,R),(!O||pointEqual(w,O)||pointEqual(R,O))&&(R[2]=1)),V!==I)T=0,V?($.lineStart(),O=_(R,w),$.point(O[0],O[1])):(O=_(w,R),$.point(O[0],O[1],2),$.lineEnd()),w=O;else if(u&&w&&i^V){var et;!(q&p)&&(et=_(R,w,!0))&&(T=0,i?($.lineStart(),$.point(et[0][0],et[0][1]),$.point(et[1][0],et[1][1]),$.lineEnd()):($.point(et[1][0],et[1][1]),$.lineEnd(),$.lineStart(),$.point(et[0][0],et[0][1],3)))}V&&(!w||!pointEqual(w,R))&&$.point(R[0],R[1]),w=R,I=V,p=q},lineEnd:function(){I&&$.lineEnd(),w=null},clean:function(){return T|(v&&I)<<1}}}function _($,w,p){var I=cartesian($),v=cartesian(w),T=[1,0,0],S=cartesianCross(I,v),P=cartesianDot(S,S),R=S[0],O=P-R*R;if(!O)return!p&&$;var V=e*P/O,q=-e*R/O,et=cartesianCross(T,S),nt=cartesianScale(T,V),lt=cartesianScale(S,q);cartesianAddInPlace(nt,lt);var it=et,F=cartesianDot(nt,it),ct=cartesianDot(it,it),U=F*F-ct*(cartesianDot(nt,nt)-1);if(!(U<0)){var st=sqrt$2(U),yt=cartesianScale(it,(-F-st)/ct);if(cartesianAddInPlace(yt,nt),yt=spherical(yt),!p)return yt;var ut=$[0],mt=w[0],$t=$[1],wt=w[1],r;mt<ut&&(r=ut,ut=mt,mt=r);var o=mt-ut,h=abs$1(o-pi$1)<epsilon$2,m=h||o<epsilon$2;if(!h&&wt<$t&&(r=$t,$t=wt,wt=r),m?h?$t+wt>0^yt[1]<(abs$1(yt[0]-ut)<epsilon$2?$t:wt):$t<=yt[1]&&yt[1]<=wt:o>pi$1^(ut<=yt[0]&&yt[0]<=mt)){var L=cartesianScale(it,(-F+st)/ct);return cartesianAddInPlace(L,nt),[yt,spherical(L)]}}}function b($,w){var p=i?t:pi$1-t,I=0;return $<-p?I|=1:$>p&&(I|=2),w<-p?I|=4:w>p&&(I|=8),I}return clip(d,g,l,i?[0,-t]:[-pi$1,t-pi$1])}function clipLine(t,e,n,i,u,l){var d=t[0],g=t[1],_=e[0],b=e[1],$=0,w=1,p=_-d,I=b-g,v;if(v=n-d,!(!p&&v>0)){if(v/=p,p<0){if(v<$)return;v<w&&(w=v)}else if(p>0){if(v>w)return;v>$&&($=v)}if(v=u-d,!(!p&&v<0)){if(v/=p,p<0){if(v>w)return;v>$&&($=v)}else if(p>0){if(v<$)return;v<w&&(w=v)}if(v=i-g,!(!I&&v>0)){if(v/=I,I<0){if(v<$)return;v<w&&(w=v)}else if(I>0){if(v>w)return;v>$&&($=v)}if(v=l-g,!(!I&&v<0)){if(v/=I,I<0){if(v>w)return;v>$&&($=v)}else if(I>0){if(v<$)return;v<w&&(w=v)}return $>0&&(t[0]=d+$*p,t[1]=g+$*I),w<1&&(e[0]=d+w*p,e[1]=g+w*I),!0}}}}}var clipMax=1e9,clipMin=-clipMax;function clipRectangle(t,e,n,i){function u(b,$){return t<=b&&b<=n&&e<=$&&$<=i}function l(b,$,w,p){var I=0,v=0;if(b==null||(I=d(b,w))!==(v=d($,w))||_(b,$)<0^w>0)do p.point(I===0||I===3?t:n,I>1?i:e);while((I=(I+w+4)%4)!==v);else p.point($[0],$[1])}function d(b,$){return abs$1(b[0]-t)<epsilon$2?$>0?0:3:abs$1(b[0]-n)<epsilon$2?$>0?2:1:abs$1(b[1]-e)<epsilon$2?$>0?1:0:$>0?3:2}function g(b,$){return _(b.x,$.x)}function _(b,$){var w=d(b,1),p=d($,1);return w!==p?w-p:w===0?$[1]-b[1]:w===1?b[0]-$[0]:w===2?b[1]-$[1]:$[0]-b[0]}return function(b){var $=b,w=clipBuffer(),p,I,v,T,S,P,R,O,V,q,et,nt={point:lt,lineStart:U,lineEnd:st,polygonStart:F,polygonEnd:ct};function lt(ut,mt){u(ut,mt)&&$.point(ut,mt)}function it(){for(var ut=0,mt=0,$t=I.length;mt<$t;++mt)for(var wt=I[mt],r=1,o=wt.length,h=wt[0],m,L,N=h[0],G=h[1];r<o;++r)m=N,L=G,h=wt[r],N=h[0],G=h[1],L<=i?G>i&&(N-m)*(i-L)>(G-L)*(t-m)&&++ut:G<=i&&(N-m)*(i-L)<(G-L)*(t-m)&&--ut;return ut}function F(){$=w,p=[],I=[],et=!0}function ct(){var ut=it(),mt=et&&ut,$t=(p=merge(p)).length;(mt||$t)&&(b.polygonStart(),mt&&(b.lineStart(),l(null,null,1,b),b.lineEnd()),$t&&clipRejoin(p,g,ut,l,b),b.polygonEnd()),$=b,p=I=v=null}function U(){nt.point=yt,I&&I.push(v=[]),q=!0,V=!1,R=O=NaN}function st(){p&&(yt(T,S),P&&V&&w.rejoin(),p.push(w.result())),nt.point=lt,V&&$.lineEnd()}function yt(ut,mt){var $t=u(ut,mt);if(I&&v.push([ut,mt]),q)T=ut,S=mt,P=$t,q=!1,$t&&($.lineStart(),$.point(ut,mt));else if($t&&V)$.point(ut,mt);else{var wt=[R=Math.max(clipMin,Math.min(clipMax,R)),O=Math.max(clipMin,Math.min(clipMax,O))],r=[ut=Math.max(clipMin,Math.min(clipMax,ut)),mt=Math.max(clipMin,Math.min(clipMax,mt))];clipLine(wt,r,t,e,n,i)?(V||($.lineStart(),$.point(wt[0],wt[1])),$.point(r[0],r[1]),$t||$.lineEnd(),et=!1):$t&&($.lineStart(),$.point(ut,mt),et=!1)}R=ut,O=mt,V=$t}return nt}}function extent(){var t=0,e=0,n=960,i=500,u,l,d;return d={stream:function(g){return u&&l===g?u:u=clipRectangle(t,e,n,i)(l=g)},extent:function(g){return arguments.length?(t=+g[0][0],e=+g[0][1],n=+g[1][0],i=+g[1][1],u=l=null,d):[[t,e],[n,i]]}}}var lengthSum$1=adder(),lambda0,sinPhi0,cosPhi0,lengthStream$1={sphere:noop$1,point:noop$1,lineStart:lengthLineStart,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1};function lengthLineStart(){lengthStream$1.point=lengthPointFirst$1,lengthStream$1.lineEnd=lengthLineEnd}function lengthLineEnd(){lengthStream$1.point=lengthStream$1.lineEnd=noop$1}function lengthPointFirst$1(t,e){t*=radians,e*=radians,lambda0=t,sinPhi0=sin$1(e),cosPhi0=cos$1(e),lengthStream$1.point=lengthPoint$1}function lengthPoint$1(t,e){t*=radians,e*=radians;var n=sin$1(e),i=cos$1(e),u=abs$1(t-lambda0),l=cos$1(u),d=sin$1(u),g=i*d,_=cosPhi0*n-sinPhi0*i*l,b=sinPhi0*n+cosPhi0*i*l;lengthSum$1.add(atan2$1(sqrt$2(g*g+_*_),b)),lambda0=t,sinPhi0=n,cosPhi0=i}function length$1(t){return lengthSum$1.reset(),geoStream(t,lengthStream$1),+lengthSum$1}var coordinates=[null,null],object={type:"LineString",coordinates};function distance(t,e){return coordinates[0]=t,coordinates[1]=e,length$1(object)}var containsObjectType={Feature:function(t,e){return containsGeometry(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,u=n.length;++i<u;)if(containsGeometry(n[i].geometry,e))return!0;return!1}},containsGeometryType={Sphere:function(){return!0},Point:function(t,e){return containsPoint(t.coordinates,e)},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,u=n.length;++i<u;)if(containsPoint(n[i],e))return!0;return!1},LineString:function(t,e){return containsLine(t.coordinates,e)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,u=n.length;++i<u;)if(containsLine(n[i],e))return!0;return!1},Polygon:function(t,e){return containsPolygon(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,u=n.length;++i<u;)if(containsPolygon(n[i],e))return!0;return!1},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,u=n.length;++i<u;)if(containsGeometry(n[i],e))return!0;return!1}};function containsGeometry(t,e){return t&&containsGeometryType.hasOwnProperty(t.type)?containsGeometryType[t.type](t,e):!1}function containsPoint(t,e){return distance(t,e)===0}function containsLine(t,e){for(var n,i,u,l=0,d=t.length;l<d;l++){if(i=distance(t[l],e),i===0||l>0&&(u=distance(t[l],t[l-1]),u>0&&n<=u&&i<=u&&(n+i-u)*(1-Math.pow((n-i)/u,2))<epsilon2*u))return!0;n=i}return!1}function containsPolygon(t,e){return!!polygonContains(t.map(ringRadians),pointRadians(e))}function ringRadians(t){return t=t.map(pointRadians),t.pop(),t}function pointRadians(t){return[t[0]*radians,t[1]*radians]}function contains$1(t,e){return(t&&containsObjectType.hasOwnProperty(t.type)?containsObjectType[t.type]:containsGeometry)(t,e)}function graticuleX(t,e,n){var i=sequence(t,e-epsilon$2,n).concat(e);return function(u){return i.map(function(l){return[u,l]})}}function graticuleY(t,e,n){var i=sequence(t,e-epsilon$2,n).concat(e);return function(u){return i.map(function(l){return[l,u]})}}function graticule(){var t,e,n,i,u,l,d,g,_=10,b=_,$=90,w=360,p,I,v,T,S=2.5;function P(){return{type:"MultiLineString",coordinates:R()}}function R(){return sequence(ceil(i/$)*$,n,$).map(v).concat(sequence(ceil(g/w)*w,d,w).map(T)).concat(sequence(ceil(e/_)*_,t,_).filter(function(O){return abs$1(O%$)>epsilon$2}).map(p)).concat(sequence(ceil(l/b)*b,u,b).filter(function(O){return abs$1(O%w)>epsilon$2}).map(I))}return P.lines=function(){return R().map(function(O){return{type:"LineString",coordinates:O}})},P.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(T(d).slice(1),v(n).reverse().slice(1),T(g).reverse().slice(1))]}},P.extent=function(O){return arguments.length?P.extentMajor(O).extentMinor(O):P.extentMinor()},P.extentMajor=function(O){return arguments.length?(i=+O[0][0],n=+O[1][0],g=+O[0][1],d=+O[1][1],i>n&&(O=i,i=n,n=O),g>d&&(O=g,g=d,d=O),P.precision(S)):[[i,g],[n,d]]},P.extentMinor=function(O){return arguments.length?(e=+O[0][0],t=+O[1][0],l=+O[0][1],u=+O[1][1],e>t&&(O=e,e=t,t=O),l>u&&(O=l,l=u,u=O),P.precision(S)):[[e,l],[t,u]]},P.step=function(O){return arguments.length?P.stepMajor(O).stepMinor(O):P.stepMinor()},P.stepMajor=function(O){return arguments.length?($=+O[0],w=+O[1],P):[$,w]},P.stepMinor=function(O){return arguments.length?(_=+O[0],b=+O[1],P):[_,b]},P.precision=function(O){return arguments.length?(S=+O,p=graticuleX(l,u,90),I=graticuleY(e,t,S),v=graticuleX(g,d,90),T=graticuleY(i,n,S),P):S},P.extentMajor([[-180,-90+epsilon$2],[180,90-epsilon$2]]).extentMinor([[-180,-80-epsilon$2],[180,80+epsilon$2]])}function graticule10(){return graticule()()}function interpolate(t,e){var n=t[0]*radians,i=t[1]*radians,u=e[0]*radians,l=e[1]*radians,d=cos$1(i),g=sin$1(i),_=cos$1(l),b=sin$1(l),$=d*cos$1(n),w=d*sin$1(n),p=_*cos$1(u),I=_*sin$1(u),v=2*asin$1(sqrt$2(haversin(l-i)+d*_*haversin(u-n))),T=sin$1(v),S=v?function(P){var R=sin$1(P*=v)/T,O=sin$1(v-P)/T,V=O*$+R*p,q=O*w+R*I,et=O*g+R*b;return[atan2$1(q,V)*degrees,atan2$1(et,sqrt$2(V*V+q*q))*degrees]}:function(){return[n*degrees,i*degrees]};return S.distance=v,S}function identity$5(t){return t}var areaSum=adder(),areaRingSum=adder(),x00$2,y00$2,x0$3,y0$3,areaStream={point:noop$1,lineStart:noop$1,lineEnd:noop$1,polygonStart:function(){areaStream.lineStart=areaRingStart,areaStream.lineEnd=areaRingEnd},polygonEnd:function(){areaStream.lineStart=areaStream.lineEnd=areaStream.point=noop$1,areaSum.add(abs$1(areaRingSum)),areaRingSum.reset()},result:function(){var t=areaSum/2;return areaSum.reset(),t}};function areaRingStart(){areaStream.point=areaPointFirst}function areaPointFirst(t,e){areaStream.point=areaPoint,x00$2=x0$3=t,y00$2=y0$3=e}function areaPoint(t,e){areaRingSum.add(y0$3*t-x0$3*e),x0$3=t,y0$3=e}function areaRingEnd(){areaPoint(x00$2,y00$2)}var x0$2=1/0,y0$2=x0$2,x1=-x0$2,y1=x1,boundsStream={point:boundsPoint,lineStart:noop$1,lineEnd:noop$1,polygonStart:noop$1,polygonEnd:noop$1,result:function(){var t=[[x0$2,y0$2],[x1,y1]];return x1=y1=-(y0$2=x0$2=1/0),t}};function boundsPoint(t,e){t<x0$2&&(x0$2=t),t>x1&&(x1=t),e<y0$2&&(y0$2=e),e>y1&&(y1=e)}var X0=0,Y0=0,Z0=0,X1=0,Y1=0,Z1=0,X2=0,Y2=0,Z2=0,x00$1,y00$1,x0$1,y0$1,centroidStream={point:centroidPoint,lineStart:centroidLineStart,lineEnd:centroidLineEnd,polygonStart:function(){centroidStream.lineStart=centroidRingStart,centroidStream.lineEnd=centroidRingEnd},polygonEnd:function(){centroidStream.point=centroidPoint,centroidStream.lineStart=centroidLineStart,centroidStream.lineEnd=centroidLineEnd},result:function(){var t=Z2?[X2/Z2,Y2/Z2]:Z1?[X1/Z1,Y1/Z1]:Z0?[X0/Z0,Y0/Z0]:[NaN,NaN];return X0=Y0=Z0=X1=Y1=Z1=X2=Y2=Z2=0,t}};function centroidPoint(t,e){X0+=t,Y0+=e,++Z0}function centroidLineStart(){centroidStream.point=centroidPointFirstLine}function centroidPointFirstLine(t,e){centroidStream.point=centroidPointLine,centroidPoint(x0$1=t,y0$1=e)}function centroidPointLine(t,e){var n=t-x0$1,i=e-y0$1,u=sqrt$2(n*n+i*i);X1+=u*(x0$1+t)/2,Y1+=u*(y0$1+e)/2,Z1+=u,centroidPoint(x0$1=t,y0$1=e)}function centroidLineEnd(){centroidStream.point=centroidPoint}function centroidRingStart(){centroidStream.point=centroidPointFirstRing}function centroidRingEnd(){centroidPointRing(x00$1,y00$1)}function centroidPointFirstRing(t,e){centroidStream.point=centroidPointRing,centroidPoint(x00$1=x0$1=t,y00$1=y0$1=e)}function centroidPointRing(t,e){var n=t-x0$1,i=e-y0$1,u=sqrt$2(n*n+i*i);X1+=u*(x0$1+t)/2,Y1+=u*(y0$1+e)/2,Z1+=u,u=y0$1*t-x0$1*e,X2+=u*(x0$1+t),Y2+=u*(y0$1+e),Z2+=u*3,centroidPoint(x0$1=t,y0$1=e)}function PathContext(t){this._context=t}PathContext.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._context.moveTo(t,e),this._point=1;break}case 1:{this._context.lineTo(t,e);break}default:{this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,tau$1);break}}},result:noop$1};var lengthSum=adder(),lengthRing,x00,y00,x0,y0,lengthStream={point:noop$1,lineStart:function(){lengthStream.point=lengthPointFirst},lineEnd:function(){lengthRing&&lengthPoint(x00,y00),lengthStream.point=noop$1},polygonStart:function(){lengthRing=!0},polygonEnd:function(){lengthRing=null},result:function(){var t=+lengthSum;return lengthSum.reset(),t}};function lengthPointFirst(t,e){lengthStream.point=lengthPoint,x00=x0=t,y00=y0=e}function lengthPoint(t,e){x0-=t,y0-=e,lengthSum.add(sqrt$2(x0*x0+y0*y0)),x0=t,y0=e}function PathString(){this._string=[]}PathString.prototype={_radius:4.5,_circle:circle$1(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:{this._string.push("M",t,",",e),this._point=1;break}case 1:{this._string.push("L",t,",",e);break}default:{this._circle==null&&(this._circle=circle$1(this._radius)),this._string.push("M",t,",",e,this._circle);break}}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}else return null}};function circle$1(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function index$2(t,e){var n=4.5,i,u;function l(d){return d&&(typeof n=="function"&&u.pointRadius(+n.apply(this,arguments)),geoStream(d,i(u))),u.result()}return l.area=function(d){return geoStream(d,i(areaStream)),areaStream.result()},l.measure=function(d){return geoStream(d,i(lengthStream)),lengthStream.result()},l.bounds=function(d){return geoStream(d,i(boundsStream)),boundsStream.result()},l.centroid=function(d){return geoStream(d,i(centroidStream)),centroidStream.result()},l.projection=function(d){return arguments.length?(i=d==null?(t=null,identity$5):(t=d).stream,l):t},l.context=function(d){return arguments.length?(u=d==null?(e=null,new PathString):new PathContext(e=d),typeof n!="function"&&u.pointRadius(n),l):e},l.pointRadius=function(d){return arguments.length?(n=typeof d=="function"?d:(u.pointRadius(+d),+d),l):n},l.projection(t).context(e)}function transform$1(t){return{stream:transformer$3(t)}}function transformer$3(t){return function(e){var n=new TransformStream;for(var i in t)n[i]=t[i];return n.stream=e,n}}function TransformStream(){}TransformStream.prototype={constructor:TransformStream,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function fit(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),i!=null&&t.clipExtent(null),geoStream(n,t.stream(boundsStream)),e(boundsStream.result()),i!=null&&t.clipExtent(i),t}function fitExtent(t,e,n){return fit(t,function(i){var u=e[1][0]-e[0][0],l=e[1][1]-e[0][1],d=Math.min(u/(i[1][0]-i[0][0]),l/(i[1][1]-i[0][1])),g=+e[0][0]+(u-d*(i[1][0]+i[0][0]))/2,_=+e[0][1]+(l-d*(i[1][1]+i[0][1]))/2;t.scale(150*d).translate([g,_])},n)}function fitSize(t,e,n){return fitExtent(t,[[0,0],e],n)}function fitWidth(t,e,n){return fit(t,function(i){var u=+e,l=u/(i[1][0]-i[0][0]),d=(u-l*(i[1][0]+i[0][0]))/2,g=-l*i[0][1];t.scale(150*l).translate([d,g])},n)}function fitHeight(t,e,n){return fit(t,function(i){var u=+e,l=u/(i[1][1]-i[0][1]),d=-l*i[0][0],g=(u-l*(i[1][1]+i[0][1]))/2;t.scale(150*l).translate([d,g])},n)}var maxDepth=16,cosMinDistance=cos$1(30*radians);function resample(t,e){return+e?resample$1(t,e):resampleNone(t)}function resampleNone(t){return transformer$3({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function resample$1(t,e){function n(i,u,l,d,g,_,b,$,w,p,I,v,T,S){var P=b-i,R=$-u,O=P*P+R*R;if(O>4*e&&T--){var V=d+p,q=g+I,et=_+v,nt=sqrt$2(V*V+q*q+et*et),lt=asin$1(et/=nt),it=abs$1(abs$1(et)-1)<epsilon$2||abs$1(l-w)<epsilon$2?(l+w)/2:atan2$1(q,V),F=t(it,lt),ct=F[0],U=F[1],st=ct-i,yt=U-u,ut=R*st-P*yt;(ut*ut/O>e||abs$1((P*st+R*yt)/O-.5)>.3||d*p+g*I+_*v<cosMinDistance)&&(n(i,u,l,d,g,_,ct,U,it,V/=nt,q/=nt,et,T,S),S.point(ct,U),n(ct,U,it,V,q,et,b,$,w,p,I,v,T,S))}}return function(i){var u,l,d,g,_,b,$,w,p,I,v,T,S={point:P,lineStart:R,lineEnd:V,polygonStart:function(){i.polygonStart(),S.lineStart=q},polygonEnd:function(){i.polygonEnd(),S.lineStart=R}};function P(lt,it){lt=t(lt,it),i.point(lt[0],lt[1])}function R(){w=NaN,S.point=O,i.lineStart()}function O(lt,it){var F=cartesian([lt,it]),ct=t(lt,it);n(w,p,$,I,v,T,w=ct[0],p=ct[1],$=lt,I=F[0],v=F[1],T=F[2],maxDepth,i),i.point(w,p)}function V(){S.point=P,i.lineEnd()}function q(){R(),S.point=et,S.lineEnd=nt}function et(lt,it){O(u=lt,it),l=w,d=p,g=I,_=v,b=T,S.point=O}function nt(){n(w,p,$,I,v,T,l,d,u,g,_,b,maxDepth,i),S.lineEnd=V,V()}return S}}var transformRadians=transformer$3({point:function(t,e){this.stream.point(t*radians,e*radians)}});function transformRotate(t){return transformer$3({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}function scaleTranslate(t,e,n,i,u){function l(d,g){return d*=i,g*=u,[e+t*d,n-t*g]}return l.invert=function(d,g){return[(d-e)/t*i,(n-g)/t*u]},l}function scaleTranslateRotate(t,e,n,i,u,l){var d=cos$1(l),g=sin$1(l),_=d*t,b=g*t,$=d/t,w=g/t,p=(g*n-d*e)/t,I=(g*e+d*n)/t;function v(T,S){return T*=i,S*=u,[_*T-b*S+e,n-b*T-_*S]}return v.invert=function(T,S){return[i*($*T-w*S+p),u*(I-w*T-$*S)]},v}function projection(t){return projectionMutator(function(){return t})()}function projectionMutator(t){var e,n=150,i=480,u=250,l=0,d=0,g=0,_=0,b=0,$,w=0,p=1,I=1,v=null,T=clipAntimeridian,S=null,P,R,O,V=identity$5,q=.5,et,nt,lt,it,F;function ct(ut){return lt(ut[0]*radians,ut[1]*radians)}function U(ut){return ut=lt.invert(ut[0],ut[1]),ut&&[ut[0]*degrees,ut[1]*degrees]}ct.stream=function(ut){return it&&F===ut?it:it=transformRadians(transformRotate($)(T(et(V(F=ut)))))},ct.preclip=function(ut){return arguments.length?(T=ut,v=void 0,yt()):T},ct.postclip=function(ut){return arguments.length?(V=ut,S=P=R=O=null,yt()):V},ct.clipAngle=function(ut){return arguments.length?(T=+ut?clipCircle(v=ut*radians):(v=null,clipAntimeridian),yt()):v*degrees},ct.clipExtent=function(ut){return arguments.length?(V=ut==null?(S=P=R=O=null,identity$5):clipRectangle(S=+ut[0][0],P=+ut[0][1],R=+ut[1][0],O=+ut[1][1]),yt()):S==null?null:[[S,P],[R,O]]},ct.scale=function(ut){return arguments.length?(n=+ut,st()):n},ct.translate=function(ut){return arguments.length?(i=+ut[0],u=+ut[1],st()):[i,u]},ct.center=function(ut){return arguments.length?(l=ut[0]%360*radians,d=ut[1]%360*radians,st()):[l*degrees,d*degrees]},ct.rotate=function(ut){return arguments.length?(g=ut[0]%360*radians,_=ut[1]%360*radians,b=ut.length>2?ut[2]%360*radians:0,st()):[g*degrees,_*degrees,b*degrees]},ct.angle=function(ut){return arguments.length?(w=ut%360*radians,st()):w*degrees},ct.reflectX=function(ut){return arguments.length?(p=ut?-1:1,st()):p<0},ct.reflectY=function(ut){return arguments.length?(I=ut?-1:1,st()):I<0},ct.precision=function(ut){return arguments.length?(et=resample(nt,q=ut*ut),yt()):sqrt$2(q)},ct.fitExtent=function(ut,mt){return fitExtent(ct,ut,mt)},ct.fitSize=function(ut,mt){return fitSize(ct,ut,mt)},ct.fitWidth=function(ut,mt){return fitWidth(ct,ut,mt)},ct.fitHeight=function(ut,mt){return fitHeight(ct,ut,mt)};function st(){var ut=scaleTranslateRotate(n,0,0,p,I,w).apply(null,e(l,d)),mt=(w?scaleTranslateRotate:scaleTranslate)(n,i-ut[0],u-ut[1],p,I,w);return $=rotateRadians(g,_,b),nt=compose(e,mt),lt=compose($,nt),et=resample(nt,q),yt()}function yt(){return it=F=null,ct}return function(){return e=t.apply(this,arguments),ct.invert=e.invert&&U,st()}}function conicProjection(t){var e=0,n=pi$1/3,i=projectionMutator(t),u=i(e,n);return u.parallels=function(l){return arguments.length?i(e=l[0]*radians,n=l[1]*radians):[e*degrees,n*degrees]},u}function cylindricalEqualAreaRaw(t){var e=cos$1(t);function n(i,u){return[i*e,sin$1(u)/e]}return n.invert=function(i,u){return[i/e,asin$1(u*e)]},n}function conicEqualAreaRaw(t,e){var n=sin$1(t),i=(n+sin$1(e))/2;if(abs$1(i)<epsilon$2)return cylindricalEqualAreaRaw(t);var u=1+n*(2*i-n),l=sqrt$2(u)/i;function d(g,_){var b=sqrt$2(u-2*i*sin$1(_))/i;return[b*sin$1(g*=i),l-b*cos$1(g)]}return d.invert=function(g,_){var b=l-_,$=atan2$1(g,abs$1(b))*sign$1(b);return b*i<0&&($-=pi$1*sign$1(g)*sign$1(b)),[$/i,asin$1((u-(g*g+b*b)*i*i)/(2*i))]},d}function conicEqualArea(){return conicProjection(conicEqualAreaRaw).scale(155.424).center([0,33.6442])}function albers(){return conicEqualArea().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function multiplex(t){var e=t.length;return{point:function(n,i){for(var u=-1;++u<e;)t[u].point(n,i)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function albersUsa(){var t,e,n=albers(),i,u=conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l,d=conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),g,_,b={point:function(p,I){_=[p,I]}};function $(p){var I=p[0],v=p[1];return _=null,i.point(I,v),_||(l.point(I,v),_)||(g.point(I,v),_)}$.invert=function(p){var I=n.scale(),v=n.translate(),T=(p[0]-v[0])/I,S=(p[1]-v[1])/I;return(S>=.12&&S<.234&&T>=-.425&&T<-.214?u:S>=.166&&S<.234&&T>=-.214&&T<-.115?d:n).invert(p)},$.stream=function(p){return t&&e===p?t:t=multiplex([n.stream(e=p),u.stream(p),d.stream(p)])},$.precision=function(p){return arguments.length?(n.precision(p),u.precision(p),d.precision(p),w()):n.precision()},$.scale=function(p){return arguments.length?(n.scale(p),u.scale(p*.35),d.scale(p),$.translate(n.translate())):n.scale()},$.translate=function(p){if(!arguments.length)return n.translate();var I=n.scale(),v=+p[0],T=+p[1];return i=n.translate(p).clipExtent([[v-.455*I,T-.238*I],[v+.455*I,T+.238*I]]).stream(b),l=u.translate([v-.307*I,T+.201*I]).clipExtent([[v-.425*I+epsilon$2,T+.12*I+epsilon$2],[v-.214*I-epsilon$2,T+.234*I-epsilon$2]]).stream(b),g=d.translate([v-.205*I,T+.212*I]).clipExtent([[v-.214*I+epsilon$2,T+.166*I+epsilon$2],[v-.115*I-epsilon$2,T+.234*I-epsilon$2]]).stream(b),w()},$.fitExtent=function(p,I){return fitExtent($,p,I)},$.fitSize=function(p,I){return fitSize($,p,I)},$.fitWidth=function(p,I){return fitWidth($,p,I)},$.fitHeight=function(p,I){return fitHeight($,p,I)};function w(){return t=e=null,$}return $.scale(1070)}function azimuthalRaw(t){return function(e,n){var i=cos$1(e),u=cos$1(n),l=t(i*u);return[l*u*sin$1(e),l*sin$1(n)]}}function azimuthalInvert(t){return function(e,n){var i=sqrt$2(e*e+n*n),u=t(i),l=sin$1(u),d=cos$1(u);return[atan2$1(e*l,i*d),asin$1(i&&n*l/i)]}}var azimuthalEqualAreaRaw=azimuthalRaw(function(t){return sqrt$2(2/(1+t))});azimuthalEqualAreaRaw.invert=azimuthalInvert(function(t){return 2*asin$1(t/2)});function azimuthalEqualArea(){return projection(azimuthalEqualAreaRaw).scale(124.75).clipAngle(180-.001)}var azimuthalEquidistantRaw=azimuthalRaw(function(t){return(t=acos$1(t))&&t/sin$1(t)});azimuthalEquidistantRaw.invert=azimuthalInvert(function(t){return t});function azimuthalEquidistant(){return projection(azimuthalEquidistantRaw).scale(79.4188).clipAngle(180-.001)}function mercatorRaw(t,e){return[t,log$1(tan((halfPi$1+e)/2))]}mercatorRaw.invert=function(t,e){return[t,2*atan(exp(e))-halfPi$1]};function mercator(){return mercatorProjection(mercatorRaw).scale(961/tau$1)}function mercatorProjection(t){var e=projection(t),n=e.center,i=e.scale,u=e.translate,l=e.clipExtent,d=null,g,_,b;e.scale=function(w){return arguments.length?(i(w),$()):i()},e.translate=function(w){return arguments.length?(u(w),$()):u()},e.center=function(w){return arguments.length?(n(w),$()):n()},e.clipExtent=function(w){return arguments.length?(w==null?d=g=_=b=null:(d=+w[0][0],g=+w[0][1],_=+w[1][0],b=+w[1][1]),$()):d==null?null:[[d,g],[_,b]]};function $(){var w=pi$1*i(),p=e(rotation(e.rotate()).invert([0,0]));return l(d==null?[[p[0]-w,p[1]-w],[p[0]+w,p[1]+w]]:t===mercatorRaw?[[Math.max(p[0]-w,d),g],[Math.min(p[0]+w,_),b]]:[[d,Math.max(p[1]-w,g)],[_,Math.min(p[1]+w,b)]])}return $()}function tany(t){return tan((halfPi$1+t)/2)}function conicConformalRaw(t,e){var n=cos$1(t),i=t===e?sin$1(t):log$1(n/cos$1(e))/log$1(tany(e)/tany(t)),u=n*pow$1(tany(t),i)/i;if(!i)return mercatorRaw;function l(d,g){u>0?g<-halfPi$1+epsilon$2&&(g=-halfPi$1+epsilon$2):g>halfPi$1-epsilon$2&&(g=halfPi$1-epsilon$2);var _=u/pow$1(tany(g),i);return[_*sin$1(i*d),u-_*cos$1(i*d)]}return l.invert=function(d,g){var _=u-g,b=sign$1(i)*sqrt$2(d*d+_*_),$=atan2$1(d,abs$1(_))*sign$1(_);return _*i<0&&($-=pi$1*sign$1(d)*sign$1(_)),[$/i,2*atan(pow$1(u/b,1/i))-halfPi$1]},l}function conicConformal(){return conicProjection(conicConformalRaw).scale(109.5).parallels([30,30])}function equirectangularRaw(t,e){return[t,e]}equirectangularRaw.invert=equirectangularRaw;function equirectangular(){return projection(equirectangularRaw).scale(152.63)}function conicEquidistantRaw(t,e){var n=cos$1(t),i=t===e?sin$1(t):(n-cos$1(e))/(e-t),u=n/i+t;if(abs$1(i)<epsilon$2)return equirectangularRaw;function l(d,g){var _=u-g,b=i*d;return[_*sin$1(b),u-_*cos$1(b)]}return l.invert=function(d,g){var _=u-g,b=atan2$1(d,abs$1(_))*sign$1(_);return _*i<0&&(b-=pi$1*sign$1(d)*sign$1(_)),[b/i,u-sign$1(i)*sqrt$2(d*d+_*_)]},l}function conicEquidistant(){return conicProjection(conicEquidistantRaw).scale(131.154).center([0,13.9389])}var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M=sqrt$2(3)/2,iterations=12;function equalEarthRaw(t,e){var n=asin$1(M*sin$1(e)),i=n*n,u=i*i*i;return[t*cos$1(n)/(M*(A1+3*A2*i+u*(7*A3+9*A4*i))),n*(A1+A2*i+u*(A3+A4*i))]}equalEarthRaw.invert=function(t,e){for(var n=e,i=n*n,u=i*i*i,l=0,d,g,_;l<iterations&&(g=n*(A1+A2*i+u*(A3+A4*i))-e,_=A1+3*A2*i+u*(7*A3+9*A4*i),n-=d=g/_,i=n*n,u=i*i*i,!(abs$1(d)<epsilon2));++l);return[M*t*(A1+3*A2*i+u*(7*A3+9*A4*i))/cos$1(n),asin$1(sin$1(n)/M)]};function equalEarth(){return projection(equalEarthRaw).scale(177.158)}function gnomonicRaw(t,e){var n=cos$1(e),i=cos$1(t)*n;return[n*sin$1(t)/i,sin$1(e)/i]}gnomonicRaw.invert=azimuthalInvert(atan);function gnomonic(){return projection(gnomonicRaw).scale(144.049).clipAngle(60)}function identity$4(){var t=1,e=0,n=0,i=1,u=1,l=0,d,g,_=null,b,$,w,p=1,I=1,v=transformer$3({point:function(V,q){var et=O([V,q]);this.stream.point(et[0],et[1])}}),T=identity$5,S,P;function R(){return p=t*i,I=t*u,S=P=null,O}function O(V){var q=V[0]*p,et=V[1]*I;if(l){var nt=et*d-q*g;q=q*d+et*g,et=nt}return[q+e,et+n]}return O.invert=function(V){var q=V[0]-e,et=V[1]-n;if(l){var nt=et*d+q*g;q=q*d-et*g,et=nt}return[q/p,et/I]},O.stream=function(V){return S&&P===V?S:S=v(T(P=V))},O.postclip=function(V){return arguments.length?(T=V,_=b=$=w=null,R()):T},O.clipExtent=function(V){return arguments.length?(T=V==null?(_=b=$=w=null,identity$5):clipRectangle(_=+V[0][0],b=+V[0][1],$=+V[1][0],w=+V[1][1]),R()):_==null?null:[[_,b],[$,w]]},O.scale=function(V){return arguments.length?(t=+V,R()):t},O.translate=function(V){return arguments.length?(e=+V[0],n=+V[1],R()):[e,n]},O.angle=function(V){return arguments.length?(l=V%360*radians,g=sin$1(l),d=cos$1(l),R()):l*degrees},O.reflectX=function(V){return arguments.length?(i=V?-1:1,R()):i<0},O.reflectY=function(V){return arguments.length?(u=V?-1:1,R()):u<0},O.fitExtent=function(V,q){return fitExtent(O,V,q)},O.fitSize=function(V,q){return fitSize(O,V,q)},O.fitWidth=function(V,q){return fitWidth(O,V,q)},O.fitHeight=function(V,q){return fitHeight(O,V,q)},O}function naturalEarth1Raw(t,e){var n=e*e,i=n*n;return[t*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),e*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}naturalEarth1Raw.invert=function(t,e){var n=e,i=25,u;do{var l=n*n,d=l*l;n-=u=(n*(1.007226+l*(.015085+d*(-.044475+.028874*l-.005916*d)))-e)/(1.007226+l*(.015085*3+d*(-.044475*7+.028874*9*l-.005916*11*d)))}while(abs$1(u)>epsilon$2&&--i>0);return[t/(.8707+(l=n*n)*(-.131979+l*(-.013791+l*l*l*(.003971-.001529*l)))),n]};function naturalEarth1(){return projection(naturalEarth1Raw).scale(175.295)}function orthographicRaw(t,e){return[cos$1(e)*sin$1(t),sin$1(e)]}orthographicRaw.invert=azimuthalInvert(asin$1);function orthographic(){return projection(orthographicRaw).scale(249.5).clipAngle(90+epsilon$2)}function stereographicRaw(t,e){var n=cos$1(e),i=1+cos$1(t)*n;return[n*sin$1(t)/i,sin$1(e)/i]}stereographicRaw.invert=azimuthalInvert(function(t){return 2*atan(t)});function stereographic(){return projection(stereographicRaw).scale(250).clipAngle(142)}function transverseMercatorRaw(t,e){return[log$1(tan((halfPi$1+e)/2)),-t]}transverseMercatorRaw.invert=function(t,e){return[-e,2*atan(exp(t))-halfPi$1]};function transverseMercator(){var t=mercatorProjection(transverseMercatorRaw),e=t.center,n=t.rotate;return t.center=function(i){return arguments.length?e([-i[1],i[0]]):(i=e(),[i[1],-i[0]])},t.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}function defaultSeparation$1(t,e){return t.parent===e.parent?1:2}function meanX(t){return t.reduce(meanXReduce,0)/t.length}function meanXReduce(t,e){return t+e.x}function maxY(t){return 1+t.reduce(maxYReduce,0)}function maxYReduce(t,e){return Math.max(t,e.y)}function leafLeft(t){for(var e;e=t.children;)t=e[0];return t}function leafRight(t){for(var e;e=t.children;)t=e[e.length-1];return t}function cluster(){var t=defaultSeparation$1,e=1,n=1,i=!1;function u(l){var d,g=0;l.eachAfter(function(p){var I=p.children;I?(p.x=meanX(I),p.y=maxY(I)):(p.x=d?g+=t(p,d):0,p.y=0,d=p)});var _=leafLeft(l),b=leafRight(l),$=_.x-t(_,b)/2,w=b.x+t(b,_)/2;return l.eachAfter(i?function(p){p.x=(p.x-l.x)*e,p.y=(l.y-p.y)*n}:function(p){p.x=(p.x-$)/(w-$)*e,p.y=(1-(l.y?p.y/l.y:1))*n})}return u.separation=function(l){return arguments.length?(t=l,u):t},u.size=function(l){return arguments.length?(i=!1,e=+l[0],n=+l[1],u):i?null:[e,n]},u.nodeSize=function(l){return arguments.length?(i=!0,e=+l[0],n=+l[1],u):i?[e,n]:null},u}function count(t){var e=0,n=t.children,i=n&&n.length;if(!i)e=1;else for(;--i>=0;)e+=n[i].value;t.value=e}function node_count(){return this.eachAfter(count)}function node_each(t){var e=this,n,i=[e],u,l,d;do for(n=i.reverse(),i=[];e=n.pop();)if(t(e),u=e.children,u)for(l=0,d=u.length;l<d;++l)i.push(u[l]);while(i.length);return this}function node_eachBefore(t){for(var e=this,n=[e],i,u;e=n.pop();)if(t(e),i=e.children,i)for(u=i.length-1;u>=0;--u)n.push(i[u]);return this}function node_eachAfter(t){for(var e=this,n=[e],i=[],u,l,d;e=n.pop();)if(i.push(e),u=e.children,u)for(l=0,d=u.length;l<d;++l)n.push(u[l]);for(;e=i.pop();)t(e);return this}function node_sum(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,i=e.children,u=i&&i.length;--u>=0;)n+=i[u].value;e.value=n})}function node_sort(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function node_path(t){for(var e=this,n=leastCommonAncestor(e,t),i=[e];e!==n;)e=e.parent,i.push(e);for(var u=i.length;t!==n;)i.splice(u,0,t),t=t.parent;return i}function leastCommonAncestor(t,e){if(t===e)return t;var n=t.ancestors(),i=e.ancestors(),u=null;for(t=n.pop(),e=i.pop();t===e;)u=t,t=n.pop(),e=i.pop();return u}function node_ancestors(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function node_descendants(){var t=[];return this.each(function(e){t.push(e)}),t}function node_leaves(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function node_links(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function hierarchy(t,e){var n=new Node$1(t),i=+t.value&&(n.value=t.value),u,l=[n],d,g,_,b;for(e==null&&(e=defaultChildren);u=l.pop();)if(i&&(u.value=+u.data.value),(g=e(u.data))&&(b=g.length))for(u.children=new Array(b),_=b-1;_>=0;--_)l.push(d=u.children[_]=new Node$1(g[_])),d.parent=u,d.depth=u.depth+1;return n.eachBefore(computeHeight)}function node_copy(){return hierarchy(this).eachBefore(copyData)}function defaultChildren(t){return t.children}function copyData(t){t.data=t.data.data}function computeHeight(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Node$1(t){this.data=t,this.depth=this.height=0,this.parent=null}Node$1.prototype=hierarchy.prototype={constructor:Node$1,count:node_count,each:node_each,eachAfter:node_eachAfter,eachBefore:node_eachBefore,sum:node_sum,sort:node_sort,path:node_path,ancestors:node_ancestors,descendants:node_descendants,leaves:node_leaves,links:node_links,copy:node_copy};var slice$2=Array.prototype.slice;function shuffle(t){for(var e=t.length,n,i;e;)i=Math.random()*e--|0,n=t[e],t[e]=t[i],t[i]=n;return t}function enclose(t){for(var e=0,n=(t=shuffle(slice$2.call(t))).length,i=[],u,l;e<n;)u=t[e],l&&enclosesWeak(l,u)?++e:(l=encloseBasis(i=extendBasis(i,u)),e=0);return l}function extendBasis(t,e){var n,i;if(enclosesWeakAll(e,t))return[e];for(n=0;n<t.length;++n)if(enclosesNot(e,t[n])&&enclosesWeakAll(encloseBasis2(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(enclosesNot(encloseBasis2(t[n],t[i]),e)&&enclosesNot(encloseBasis2(t[n],e),t[i])&&enclosesNot(encloseBasis2(t[i],e),t[n])&&enclosesWeakAll(encloseBasis3(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function enclosesNot(t,e){var n=t.r-e.r,i=e.x-t.x,u=e.y-t.y;return n<0||n*n<i*i+u*u}function enclosesWeak(t,e){var n=t.r-e.r+1e-6,i=e.x-t.x,u=e.y-t.y;return n>0&&n*n>i*i+u*u}function enclosesWeakAll(t,e){for(var n=0;n<e.length;++n)if(!enclosesWeak(t,e[n]))return!1;return!0}function encloseBasis(t){switch(t.length){case 1:return encloseBasis1(t[0]);case 2:return encloseBasis2(t[0],t[1]);case 3:return encloseBasis3(t[0],t[1],t[2])}}function encloseBasis1(t){return{x:t.x,y:t.y,r:t.r}}function encloseBasis2(t,e){var n=t.x,i=t.y,u=t.r,l=e.x,d=e.y,g=e.r,_=l-n,b=d-i,$=g-u,w=Math.sqrt(_*_+b*b);return{x:(n+l+_/w*$)/2,y:(i+d+b/w*$)/2,r:(w+u+g)/2}}function encloseBasis3(t,e,n){var i=t.x,u=t.y,l=t.r,d=e.x,g=e.y,_=e.r,b=n.x,$=n.y,w=n.r,p=i-d,I=i-b,v=u-g,T=u-$,S=_-l,P=w-l,R=i*i+u*u-l*l,O=R-d*d-g*g+_*_,V=R-b*b-$*$+w*w,q=I*v-p*T,et=(v*V-T*O)/(q*2)-i,nt=(T*S-v*P)/q,lt=(I*O-p*V)/(q*2)-u,it=(p*P-I*S)/q,F=nt*nt+it*it-1,ct=2*(l+et*nt+lt*it),U=et*et+lt*lt-l*l,st=-(F?(ct+Math.sqrt(ct*ct-4*F*U))/(2*F):U/ct);return{x:i+et+nt*st,y:u+lt+it*st,r:st}}function place(t,e,n){var i=t.x-e.x,u,l,d=t.y-e.y,g,_,b=i*i+d*d;b?(l=e.r+n.r,l*=l,_=t.r+n.r,_*=_,l>_?(u=(b+_-l)/(2*b),g=Math.sqrt(Math.max(0,_/b-u*u)),n.x=t.x-u*i-g*d,n.y=t.y-u*d+g*i):(u=(b+l-_)/(2*b),g=Math.sqrt(Math.max(0,l/b-u*u)),n.x=e.x+u*i-g*d,n.y=e.y+u*d+g*i)):(n.x=e.x+n.r,n.y=e.y)}function intersects(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,u=e.y-t.y;return n>0&&n*n>i*i+u*u}function score(t){var e=t._,n=t.next._,i=e.r+n.r,u=(e.x*n.r+n.x*e.r)/i,l=(e.y*n.r+n.y*e.r)/i;return u*u+l*l}function Node(t){this._=t,this.next=null,this.previous=null}function packEnclose(t){if(!(u=t.length))return 0;var e,n,i,u,l,d,g,_,b,$,w;if(e=t[0],e.x=0,e.y=0,!(u>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(u>2))return e.r+n.r;place(n,e,i=t[2]),e=new Node(e),n=new Node(n),i=new Node(i),e.next=i.previous=n,n.next=e.previous=i,i.next=n.previous=e;t:for(g=3;g<u;++g){place(e._,n._,i=t[g]),i=new Node(i),_=n.next,b=e.previous,$=n._.r,w=e._.r;do if($<=w){if(intersects(_._,i._)){n=_,e.next=n,n.previous=e,--g;continue t}$+=_._.r,_=_.next}else{if(intersects(b._,i._)){e=b,e.next=n,n.previous=e,--g;continue t}w+=b._.r,b=b.previous}while(_!==b.next);for(i.previous=e,i.next=n,e.next=n.previous=n=i,l=score(e);(i=i.next)!==n;)(d=score(i))<l&&(e=i,l=d);n=e.next}for(e=[n._],i=n;(i=i.next)!==n;)e.push(i._);for(i=enclose(e),g=0;g<u;++g)e=t[g],e.x-=i.x,e.y-=i.y;return i.r}function siblings(t){return packEnclose(t),t}function optional(t){return t==null?null:required(t)}function required(t){if(typeof t!="function")throw new Error;return t}function constantZero(){return 0}function constant$4(t){return function(){return t}}function defaultRadius(t){return Math.sqrt(t.value)}function index$1(){var t=null,e=1,n=1,i=constantZero;function u(l){return l.x=e/2,l.y=n/2,t?l.eachBefore(radiusLeaf(t)).eachAfter(packChildren(i,.5)).eachBefore(translateChild(1)):l.eachBefore(radiusLeaf(defaultRadius)).eachAfter(packChildren(constantZero,1)).eachAfter(packChildren(i,l.r/Math.min(e,n))).eachBefore(translateChild(Math.min(e,n)/(2*l.r))),l}return u.radius=function(l){return arguments.length?(t=optional(l),u):t},u.size=function(l){return arguments.length?(e=+l[0],n=+l[1],u):[e,n]},u.padding=function(l){return arguments.length?(i=typeof l=="function"?l:constant$4(+l),u):i},u}function radiusLeaf(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function packChildren(t,e){return function(n){if(i=n.children){var i,u,l=i.length,d=t(n)*e||0,g;if(d)for(u=0;u<l;++u)i[u].r+=d;if(g=packEnclose(i),d)for(u=0;u<l;++u)i[u].r-=d;n.r=g+d}}}function translateChild(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function roundNode(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function treemapDice(t,e,n,i,u){for(var l=t.children,d,g=-1,_=l.length,b=t.value&&(i-e)/t.value;++g<_;)d=l[g],d.y0=n,d.y1=u,d.x0=e,d.x1=e+=d.value*b}function partition(){var t=1,e=1,n=0,i=!1;function u(d){var g=d.height+1;return d.x0=d.y0=n,d.x1=t,d.y1=e/g,d.eachBefore(l(e,g)),i&&d.eachBefore(roundNode),d}function l(d,g){return function(_){_.children&&treemapDice(_,_.x0,d*(_.depth+1)/g,_.x1,d*(_.depth+2)/g);var b=_.x0,$=_.y0,w=_.x1-n,p=_.y1-n;w<b&&(b=w=(b+w)/2),p<$&&($=p=($+p)/2),_.x0=b,_.y0=$,_.x1=w,_.y1=p}}return u.round=function(d){return arguments.length?(i=!!d,u):i},u.size=function(d){return arguments.length?(t=+d[0],e=+d[1],u):[t,e]},u.padding=function(d){return arguments.length?(n=+d,u):n},u}var keyPrefix="$",preroot={depth:-1},ambiguous={};function defaultId(t){return t.id}function defaultParentId(t){return t.parentId}function stratify(){var t=defaultId,e=defaultParentId;function n(i){var u,l,d=i.length,g,_,b,$=new Array(d),w,p,I={};for(l=0;l<d;++l)u=i[l],b=$[l]=new Node$1(u),(w=t(u,l,i))!=null&&(w+="")&&(p=keyPrefix+(b.id=w),I[p]=p in I?ambiguous:b);for(l=0;l<d;++l)if(b=$[l],w=e(i[l],l,i),w==null||!(w+="")){if(g)throw new Error("multiple roots");g=b}else{if(_=I[keyPrefix+w],!_)throw new Error("missing: "+w);if(_===ambiguous)throw new Error("ambiguous: "+w);_.children?_.children.push(b):_.children=[b],b.parent=_}if(!g)throw new Error("no root");if(g.parent=preroot,g.eachBefore(function(v){v.depth=v.parent.depth+1,--d}).eachBefore(computeHeight),g.parent=null,d>0)throw new Error("cycle");return g}return n.id=function(i){return arguments.length?(t=required(i),n):t},n.parentId=function(i){return arguments.length?(e=required(i),n):e},n}function defaultSeparation(t,e){return t.parent===e.parent?1:2}function nextLeft(t){var e=t.children;return e?e[0]:t.t}function nextRight(t){var e=t.children;return e?e[e.length-1]:t.t}function moveSubtree(t,e,n){var i=n/(e.i-t.i);e.c-=i,e.s+=n,t.c+=i,e.z+=n,e.m+=n}function executeShifts(t){for(var e=0,n=0,i=t.children,u=i.length,l;--u>=0;)l=i[u],l.z+=e,l.m+=e,e+=l.s+(n+=l.c)}function nextAncestor(t,e,n){return t.a.parent===e.parent?t.a:n}function TreeNode(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}TreeNode.prototype=Object.create(Node$1.prototype);function treeRoot(t){for(var e=new TreeNode(t,0),n,i=[e],u,l,d,g;n=i.pop();)if(l=n._.children)for(n.children=new Array(g=l.length),d=g-1;d>=0;--d)i.push(u=n.children[d]=new TreeNode(l[d],d)),u.parent=n;return(e.parent=new TreeNode(null,0)).children=[e],e}function tree(){var t=defaultSeparation,e=1,n=1,i=null;function u(b){var $=treeRoot(b);if($.eachAfter(l),$.parent.m=-$.z,$.eachBefore(d),i)b.eachBefore(_);else{var w=b,p=b,I=b;b.eachBefore(function(R){R.x<w.x&&(w=R),R.x>p.x&&(p=R),R.depth>I.depth&&(I=R)});var v=w===p?1:t(w,p)/2,T=v-w.x,S=e/(p.x+v+T),P=n/(I.depth||1);b.eachBefore(function(R){R.x=(R.x+T)*S,R.y=R.depth*P})}return b}function l(b){var $=b.children,w=b.parent.children,p=b.i?w[b.i-1]:null;if($){executeShifts(b);var I=($[0].z+$[$.length-1].z)/2;p?(b.z=p.z+t(b._,p._),b.m=b.z-I):b.z=I}else p&&(b.z=p.z+t(b._,p._));b.parent.A=g(b,p,b.parent.A||w[0])}function d(b){b._.x=b.z+b.parent.m,b.m+=b.parent.m}function g(b,$,w){if($){for(var p=b,I=b,v=$,T=p.parent.children[0],S=p.m,P=I.m,R=v.m,O=T.m,V;v=nextRight(v),p=nextLeft(p),v&&p;)T=nextLeft(T),I=nextRight(I),I.a=b,V=v.z+R-p.z-S+t(v._,p._),V>0&&(moveSubtree(nextAncestor(v,b,w),b,V),S+=V,P+=V),R+=v.m,S+=p.m,O+=T.m,P+=I.m;v&&!nextRight(I)&&(I.t=v,I.m+=R-P),p&&!nextLeft(T)&&(T.t=p,T.m+=S-O,w=b)}return w}function _(b){b.x*=e,b.y=b.depth*n}return u.separation=function(b){return arguments.length?(t=b,u):t},u.size=function(b){return arguments.length?(i=!1,e=+b[0],n=+b[1],u):i?null:[e,n]},u.nodeSize=function(b){return arguments.length?(i=!0,e=+b[0],n=+b[1],u):i?[e,n]:null},u}function treemapSlice(t,e,n,i,u){for(var l=t.children,d,g=-1,_=l.length,b=t.value&&(u-n)/t.value;++g<_;)d=l[g],d.x0=e,d.x1=i,d.y0=n,d.y1=n+=d.value*b}var phi=(1+Math.sqrt(5))/2;function squarifyRatio(t,e,n,i,u,l){for(var d=[],g=e.children,_,b,$=0,w=0,p=g.length,I,v,T=e.value,S,P,R,O,V,q,et;$<p;){I=u-n,v=l-i;do S=g[w++].value;while(!S&&w<p);for(P=R=S,q=Math.max(v/I,I/v)/(T*t),et=S*S*q,V=Math.max(R/et,et/P);w<p;++w){if(S+=b=g[w].value,b<P&&(P=b),b>R&&(R=b),et=S*S*q,O=Math.max(R/et,et/P),O>V){S-=b;break}V=O}d.push(_={value:S,dice:I<v,children:g.slice($,w)}),_.dice?treemapDice(_,n,i,u,T?i+=v*S/T:l):treemapSlice(_,n,i,T?n+=I*S/T:u,l),T-=S,$=w}return d}const squarify=(function t(e){function n(i,u,l,d,g){squarifyRatio(e,i,u,l,d,g)}return n.ratio=function(i){return t((i=+i)>1?i:1)},n})(phi);function index(){var t=squarify,e=!1,n=1,i=1,u=[0],l=constantZero,d=constantZero,g=constantZero,_=constantZero,b=constantZero;function $(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(w),u=[0],e&&p.eachBefore(roundNode),p}function w(p){var I=u[p.depth],v=p.x0+I,T=p.y0+I,S=p.x1-I,P=p.y1-I;S<v&&(v=S=(v+S)/2),P<T&&(T=P=(T+P)/2),p.x0=v,p.y0=T,p.x1=S,p.y1=P,p.children&&(I=u[p.depth+1]=l(p)/2,v+=b(p)-I,T+=d(p)-I,S-=g(p)-I,P-=_(p)-I,S<v&&(v=S=(v+S)/2),P<T&&(T=P=(T+P)/2),t(p,v,T,S,P))}return $.round=function(p){return arguments.length?(e=!!p,$):e},$.size=function(p){return arguments.length?(n=+p[0],i=+p[1],$):[n,i]},$.tile=function(p){return arguments.length?(t=required(p),$):t},$.padding=function(p){return arguments.length?$.paddingInner(p).paddingOuter(p):$.paddingInner()},$.paddingInner=function(p){return arguments.length?(l=typeof p=="function"?p:constant$4(+p),$):l},$.paddingOuter=function(p){return arguments.length?$.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):$.paddingTop()},$.paddingTop=function(p){return arguments.length?(d=typeof p=="function"?p:constant$4(+p),$):d},$.paddingRight=function(p){return arguments.length?(g=typeof p=="function"?p:constant$4(+p),$):g},$.paddingBottom=function(p){return arguments.length?(_=typeof p=="function"?p:constant$4(+p),$):_},$.paddingLeft=function(p){return arguments.length?(b=typeof p=="function"?p:constant$4(+p),$):b},$}function binary(t,e,n,i,u){var l=t.children,d,g=l.length,_,b=new Array(g+1);for(b[0]=_=d=0;d<g;++d)b[d+1]=_+=l[d].value;$(0,g,t.value,e,n,i,u);function $(w,p,I,v,T,S,P){if(w>=p-1){var R=l[w];R.x0=v,R.y0=T,R.x1=S,R.y1=P;return}for(var O=b[w],V=I/2+O,q=w+1,et=p-1;q<et;){var nt=q+et>>>1;b[nt]<V?q=nt+1:et=nt}V-b[q-1]<b[q]-V&&w+1<q&&--q;var lt=b[q]-O,it=I-lt;if(S-v>P-T){var F=(v*it+S*lt)/I;$(w,q,lt,v,T,F,P),$(q,p,it,F,T,S,P)}else{var ct=(T*it+P*lt)/I;$(w,q,lt,v,T,S,ct),$(q,p,it,v,ct,S,P)}}}function sliceDice(t,e,n,i,u){(t.depth&1?treemapSlice:treemapDice)(t,e,n,i,u)}const resquarify=(function t(e){function n(i,u,l,d,g){if((_=i._squarify)&&_.ratio===e)for(var _,b,$,w,p=-1,I,v=_.length,T=i.value;++p<v;){for(b=_[p],$=b.children,w=b.value=0,I=$.length;w<I;++w)b.value+=$[w].value;b.dice?treemapDice(b,u,l,d,l+=(g-l)*b.value/T):treemapSlice(b,u,l,u+=(d-u)*b.value/T,g),T-=b.value}else i._squarify=_=squarifyRatio(e,i,u,l,d,g),_.ratio=e}return n.ratio=function(i){return t((i=+i)>1?i:1)},n})(phi);function area$1(t){for(var e=-1,n=t.length,i,u=t[n-1],l=0;++e<n;)i=u,u=t[e],l+=i[1]*u[0]-i[0]*u[1];return l/2}function centroid(t){for(var e=-1,n=t.length,i=0,u=0,l,d=t[n-1],g,_=0;++e<n;)l=d,d=t[e],_+=g=l[0]*d[1]-d[0]*l[1],i+=(l[0]+d[0])*g,u+=(l[1]+d[1])*g;return _*=3,[i/_,u/_]}function cross$1(t,e,n){return(e[0]-t[0])*(n[1]-t[1])-(e[1]-t[1])*(n[0]-t[0])}function lexicographicOrder(t,e){return t[0]-e[0]||t[1]-e[1]}function computeUpperHullIndexes(t){for(var e=t.length,n=[0,1],i=2,u=2;u<e;++u){for(;i>1&&cross$1(t[n[i-2]],t[n[i-1]],t[u])<=0;)--i;n[i++]=u}return n.slice(0,i)}function hull(t){if((n=t.length)<3)return null;var e,n,i=new Array(n),u=new Array(n);for(e=0;e<n;++e)i[e]=[+t[e][0],+t[e][1],e];for(i.sort(lexicographicOrder),e=0;e<n;++e)u[e]=[i[e][0],-i[e][1]];var l=computeUpperHullIndexes(i),d=computeUpperHullIndexes(u),g=d[0]===l[0],_=d[d.length-1]===l[l.length-1],b=[];for(e=l.length-1;e>=0;--e)b.push(t[i[l[e]][2]]);for(e=+g;e<d.length-_;++e)b.push(t[i[d[e]][2]]);return b}function contains(t,e){for(var n=t.length,i=t[n-1],u=e[0],l=e[1],d=i[0],g=i[1],_,b,$=!1,w=0;w<n;++w)i=t[w],_=i[0],b=i[1],b>l!=g>l&&u<(d-_)*(l-b)/(g-b)+_&&($=!$),d=_,g=b;return $}function length(t){for(var e=-1,n=t.length,i=t[n-1],u,l,d=i[0],g=i[1],_=0;++e<n;)u=d,l=g,i=t[e],d=i[0],g=i[1],u-=d,l-=g,_+=Math.sqrt(u*u+l*l);return _}function defaultSource(){return Math.random()}const uniform=(function t(e){function n(i,u){return i=i==null?0:+i,u=u==null?1:+u,arguments.length===1?(u=i,i=0):u-=i,function(){return e()*u+i}}return n.source=t,n})(defaultSource),normal=(function t(e){function n(i,u){var l,d;return i=i==null?0:+i,u=u==null?1:+u,function(){var g;if(l!=null)g=l,l=null;else do l=e()*2-1,g=e()*2-1,d=l*l+g*g;while(!d||d>1);return i+u*g*Math.sqrt(-2*Math.log(d)/d)}}return n.source=t,n})(defaultSource),logNormal=(function t(e){function n(){var i=normal.source(e).apply(this,arguments);return function(){return Math.exp(i())}}return n.source=t,n})(defaultSource),irwinHall=(function t(e){function n(i){return function(){for(var u=0,l=0;l<i;++l)u+=e();return u}}return n.source=t,n})(defaultSource),bates=(function t(e){function n(i){var u=irwinHall.source(e)(i);return function(){return u()/i}}return n.source=t,n})(defaultSource),exponential=(function t(e){function n(i){return function(){return-Math.log(1-e())/i}}return n.source=t,n})(defaultSource);function initRange(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function initInterpolator(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t);break}return this}var array=Array.prototype,map=array.map,slice$1=array.slice,implicit={name:"implicit"};function ordinal(){var t=map$2(),e=[],n=[],i=implicit;function u(l){var d=l+"",g=t.get(d);if(!g){if(i!==implicit)return i;t.set(d,g=e.push(l))}return n[(g-1)%n.length]}return u.domain=function(l){if(!arguments.length)return e.slice();e=[],t=map$2();for(var d=-1,g=l.length,_,b;++d<g;)t.has(b=(_=l[d])+"")||t.set(b,e.push(_));return u},u.range=function(l){return arguments.length?(n=slice$1.call(l),u):n.slice()},u.unknown=function(l){return arguments.length?(i=l,u):i},u.copy=function(){return ordinal(e,n).unknown(i)},initRange.apply(u,arguments),u}function band(){var t=ordinal().unknown(void 0),e=t.domain,n=t.range,i=[0,1],u,l,d=!1,g=0,_=0,b=.5;delete t.unknown;function $(){var w=e().length,p=i[1]<i[0],I=i[p-0],v=i[1-p];u=(v-I)/Math.max(1,w-g+_*2),d&&(u=Math.floor(u)),I+=(v-I-u*(w-g))*b,l=u*(1-g),d&&(I=Math.round(I),l=Math.round(l));var T=sequence(w).map(function(S){return I+u*S});return n(p?T.reverse():T)}return t.domain=function(w){return arguments.length?(e(w),$()):e()},t.range=function(w){return arguments.length?(i=[+w[0],+w[1]],$()):i.slice()},t.rangeRound=function(w){return i=[+w[0],+w[1]],d=!0,$()},t.bandwidth=function(){return l},t.step=function(){return u},t.round=function(w){return arguments.length?(d=!!w,$()):d},t.padding=function(w){return arguments.length?(g=Math.min(1,_=+w),$()):g},t.paddingInner=function(w){return arguments.length?(g=Math.min(1,w),$()):g},t.paddingOuter=function(w){return arguments.length?(_=+w,$()):_},t.align=function(w){return arguments.length?(b=Math.max(0,Math.min(1,w)),$()):b},t.copy=function(){return band(e(),i).round(d).paddingInner(g).paddingOuter(_).align(b)},initRange.apply($(),arguments)}function pointish(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return pointish(e())},t}function point$4(){return pointish(band.apply(null,arguments).paddingInner(1))}function constant$3(t){return function(){return t}}function number$1(t){return+t}var unit=[0,1];function identity$3(t){return t}function normalize(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:constant$3(isNaN(e)?NaN:.5)}function clamper(t){var e=t[0],n=t[t.length-1],i;return e>n&&(i=e,e=n,n=i),function(u){return Math.max(e,Math.min(n,u))}}function bimap(t,e,n){var i=t[0],u=t[1],l=e[0],d=e[1];return u<i?(i=normalize(u,i),l=n(d,l)):(i=normalize(i,u),l=n(l,d)),function(g){return l(i(g))}}function polymap(t,e,n){var i=Math.min(t.length,e.length)-1,u=new Array(i),l=new Array(i),d=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++d<i;)u[d]=normalize(t[d],t[d+1]),l[d]=n(e[d],e[d+1]);return function(g){var _=bisectRight(t,g,1,i)-1;return l[_](u[_](g))}}function copy$1(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function transformer$2(){var t=unit,e=unit,n=interpolateValue,i,u,l,d=identity$3,g,_,b;function $(){return g=Math.min(t.length,e.length)>2?polymap:bimap,_=b=null,w}function w(p){return isNaN(p=+p)?l:(_||(_=g(t.map(i),e,n)))(i(d(p)))}return w.invert=function(p){return d(u((b||(b=g(e,t.map(i),interpolateNumber)))(p)))},w.domain=function(p){return arguments.length?(t=map.call(p,number$1),d===identity$3||(d=clamper(t)),$()):t.slice()},w.range=function(p){return arguments.length?(e=slice$1.call(p),$()):e.slice()},w.rangeRound=function(p){return e=slice$1.call(p),n=interpolateRound,$()},w.clamp=function(p){return arguments.length?(d=p?clamper(t):identity$3,w):d!==identity$3},w.interpolate=function(p){return arguments.length?(n=p,$()):n},w.unknown=function(p){return arguments.length?(l=p,w):l},function(p,I){return i=p,u=I,$()}}function continuous(t,e){return transformer$2()(t,e)}function tickFormat(t,e,n,i){var u=tickStep(t,e,n),l;switch(i=formatSpecifier(i==null?",f":i),i.type){case"s":{var d=Math.max(Math.abs(t),Math.abs(e));return i.precision==null&&!isNaN(l=precisionPrefix(u,d))&&(i.precision=l),formatPrefix(i,d)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(l=precisionRound(u,Math.max(Math.abs(t),Math.abs(e))))&&(i.precision=l-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(l=precisionFixed(u))&&(i.precision=l-(i.type==="%")*2);break}}return format(i)}function linearish(t){var e=t.domain;return t.ticks=function(n){var i=e();return ticks(i[0],i[i.length-1],n==null?10:n)},t.tickFormat=function(n,i){var u=e();return tickFormat(u[0],u[u.length-1],n==null?10:n,i)},t.nice=function(n){n==null&&(n=10);var i=e(),u=0,l=i.length-1,d=i[u],g=i[l],_;return g<d&&(_=d,d=g,g=_,_=u,u=l,l=_),_=tickIncrement(d,g,n),_>0?(d=Math.floor(d/_)*_,g=Math.ceil(g/_)*_,_=tickIncrement(d,g,n)):_<0&&(d=Math.ceil(d*_)/_,g=Math.floor(g*_)/_,_=tickIncrement(d,g,n)),_>0?(i[u]=Math.floor(d/_)*_,i[l]=Math.ceil(g/_)*_,e(i)):_<0&&(i[u]=Math.ceil(d*_)/_,i[l]=Math.floor(g*_)/_,e(i)),t},t}function linear(){var t=continuous(identity$3,identity$3);return t.copy=function(){return copy$1(t,linear())},initRange.apply(t,arguments),linearish(t)}function identity$2(t){var e;function n(i){return isNaN(i=+i)?e:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(t=map.call(i,number$1),n):t.slice()},n.unknown=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return identity$2(t).unknown(e)},t=arguments.length?map.call(t,number$1):[0,1],linearish(n)}function nice(t,e){t=t.slice();var n=0,i=t.length-1,u=t[n],l=t[i],d;return l<u&&(d=n,n=i,i=d,d=u,u=l,l=d),t[n]=e.floor(u),t[i]=e.ceil(l),t}function transformLog(t){return Math.log(t)}function transformExp(t){return Math.exp(t)}function transformLogn(t){return-Math.log(-t)}function transformExpn(t){return-Math.exp(-t)}function pow10(t){return isFinite(t)?+("1e"+t):t<0?0:t}function powp(t){return t===10?pow10:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function logp(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function reflect(t){return function(e){return-t(-e)}}function loggish(t){var e=t(transformLog,transformExp),n=e.domain,i=10,u,l;function d(){return u=logp(i),l=powp(i),n()[0]<0?(u=reflect(u),l=reflect(l),t(transformLogn,transformExpn)):t(transformLog,transformExp),e}return e.base=function(g){return arguments.length?(i=+g,d()):i},e.domain=function(g){return arguments.length?(n(g),d()):n()},e.ticks=function(g){var _=n(),b=_[0],$=_[_.length-1],w;(w=$<b)&&(p=b,b=$,$=p);var p=u(b),I=u($),v,T,S,P=g==null?10:+g,R=[];if(!(i%1)&&I-p<P){if(p=Math.round(p)-1,I=Math.round(I)+1,b>0){for(;p<I;++p)for(T=1,v=l(p);T<i;++T)if(S=v*T,!(S<b)){if(S>$)break;R.push(S)}}else for(;p<I;++p)for(T=i-1,v=l(p);T>=1;--T)if(S=v*T,!(S<b)){if(S>$)break;R.push(S)}}else R=ticks(p,I,Math.min(I-p,P)).map(l);return w?R.reverse():R},e.tickFormat=function(g,_){if(_==null&&(_=i===10?".0e":","),typeof _!="function"&&(_=format(_)),g===1/0)return _;g==null&&(g=10);var b=Math.max(1,i*g/e.ticks().length);return function($){var w=$/l(Math.round(u($)));return w*i<i-.5&&(w*=i),w<=b?_($):""}},e.nice=function(){return n(nice(n(),{floor:function(g){return l(Math.floor(u(g)))},ceil:function(g){return l(Math.ceil(u(g)))}}))},e}function log(){var t=loggish(transformer$2()).domain([1,10]);return t.copy=function(){return copy$1(t,log()).base(t.base())},initRange.apply(t,arguments),t}function transformSymlog(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function transformSymexp(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function symlogish(t){var e=1,n=t(transformSymlog(e),transformSymexp(e));return n.constant=function(i){return arguments.length?t(transformSymlog(e=+i),transformSymexp(e)):e},linearish(n)}function symlog(){var t=symlogish(transformer$2());return t.copy=function(){return copy$1(t,symlog()).constant(t.constant())},initRange.apply(t,arguments)}function transformPow(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function transformSqrt(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function transformSquare(t){return t<0?-t*t:t*t}function powish(t){var e=t(identity$3,identity$3),n=1;function i(){return n===1?t(identity$3,identity$3):n===.5?t(transformSqrt,transformSquare):t(transformPow(n),transformPow(1/n))}return e.exponent=function(u){return arguments.length?(n=+u,i()):n},linearish(e)}function pow(){var t=powish(transformer$2());return t.copy=function(){return copy$1(t,pow()).exponent(t.exponent())},initRange.apply(t,arguments),t}function sqrt$1(){return pow.apply(null,arguments).exponent(.5)}function quantile(){var t=[],e=[],n=[],i;function u(){var d=0,g=Math.max(1,e.length);for(n=new Array(g-1);++d<g;)n[d-1]=threshold$1(t,d/g);return l}function l(d){return isNaN(d=+d)?i:e[bisectRight(n,d)]}return l.invertExtent=function(d){var g=e.indexOf(d);return g<0?[NaN,NaN]:[g>0?n[g-1]:t[0],g<n.length?n[g]:t[t.length-1]]},l.domain=function(d){if(!arguments.length)return t.slice();t=[];for(var g=0,_=d.length,b;g<_;++g)b=d[g],b!=null&&!isNaN(b=+b)&&t.push(b);return t.sort(ascending$3),u()},l.range=function(d){return arguments.length?(e=slice$1.call(d),u()):e.slice()},l.unknown=function(d){return arguments.length?(i=d,l):i},l.quantiles=function(){return n.slice()},l.copy=function(){return quantile().domain(t).range(e).unknown(i)},initRange.apply(l,arguments)}function quantize(){var t=0,e=1,n=1,i=[.5],u=[0,1],l;function d(_){return _<=_?u[bisectRight(i,_,0,n)]:l}function g(){var _=-1;for(i=new Array(n);++_<n;)i[_]=((_+1)*e-(_-n)*t)/(n+1);return d}return d.domain=function(_){return arguments.length?(t=+_[0],e=+_[1],g()):[t,e]},d.range=function(_){return arguments.length?(n=(u=slice$1.call(_)).length-1,g()):u.slice()},d.invertExtent=function(_){var b=u.indexOf(_);return b<0?[NaN,NaN]:b<1?[t,i[0]]:b>=n?[i[n-1],e]:[i[b-1],i[b]]},d.unknown=function(_){return arguments.length&&(l=_),d},d.thresholds=function(){return i.slice()},d.copy=function(){return quantize().domain([t,e]).range(u).unknown(l)},initRange.apply(linearish(d),arguments)}function threshold(){var t=[.5],e=[0,1],n,i=1;function u(l){return l<=l?e[bisectRight(t,l,0,i)]:n}return u.domain=function(l){return arguments.length?(t=slice$1.call(l),i=Math.min(t.length,e.length-1),u):t.slice()},u.range=function(l){return arguments.length?(e=slice$1.call(l),i=Math.min(t.length,e.length-1),u):e.slice()},u.invertExtent=function(l){var d=e.indexOf(l);return[t[d-1],t[d]]},u.unknown=function(l){return arguments.length?(n=l,u):n},u.copy=function(){return threshold().domain(t).range(e).unknown(n)},initRange.apply(u,arguments)}var t0=new Date,t1=new Date;function newInterval(t,e,n,i){function u(l){return t(l=arguments.length===0?new Date:new Date(+l)),l}return u.floor=function(l){return t(l=new Date(+l)),l},u.ceil=function(l){return t(l=new Date(l-1)),e(l,1),t(l),l},u.round=function(l){var d=u(l),g=u.ceil(l);return l-d<g-l?d:g},u.offset=function(l,d){return e(l=new Date(+l),d==null?1:Math.floor(d)),l},u.range=function(l,d,g){var _=[],b;if(l=u.ceil(l),g=g==null?1:Math.floor(g),!(l<d)||!(g>0))return _;do _.push(b=new Date(+l)),e(l,g),t(l);while(b<l&&l<d);return _},u.filter=function(l){return newInterval(function(d){if(d>=d)for(;t(d),!l(d);)d.setTime(d-1)},function(d,g){if(d>=d)if(g<0)for(;++g<=0;)for(;e(d,-1),!l(d););else for(;--g>=0;)for(;e(d,1),!l(d););})},n&&(u.count=function(l,d){return t0.setTime(+l),t1.setTime(+d),t(t0),t(t1),Math.floor(n(t0,t1))},u.every=function(l){return l=Math.floor(l),!isFinite(l)||!(l>0)?null:l>1?u.filter(i?function(d){return i(d)%l===0}:function(d){return u.count(0,d)%l===0}):u}),u}var millisecond=newInterval(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});millisecond.every=function(t){return t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?newInterval(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):millisecond};var milliseconds=millisecond.range,durationSecond$1=1e3,durationMinute$1=6e4,durationHour$1=36e5,durationDay$1=864e5,durationWeek$1=6048e5,second=newInterval(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+e*durationSecond$1)},function(t,e){return(e-t)/durationSecond$1},function(t){return t.getUTCSeconds()}),seconds=second.range,minute=newInterval(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*durationSecond$1)},function(t,e){t.setTime(+t+e*durationMinute$1)},function(t,e){return(e-t)/durationMinute$1},function(t){return t.getMinutes()}),minutes=minute.range,hour=newInterval(function(t){t.setTime(t-t.getMilliseconds()-t.getSeconds()*durationSecond$1-t.getMinutes()*durationMinute$1)},function(t,e){t.setTime(+t+e*durationHour$1)},function(t,e){return(e-t)/durationHour$1},function(t){return t.getHours()}),hours=hour.range,day=newInterval(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*durationMinute$1)/durationDay$1},function(t){return t.getDate()-1}),days=day.range;function weekday(t){return newInterval(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(e,n){e.setDate(e.getDate()+n*7)},function(e,n){return(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*durationMinute$1)/durationWeek$1})}var sunday=weekday(0),monday=weekday(1),tuesday=weekday(2),wednesday=weekday(3),thursday=weekday(4),friday=weekday(5),saturday=weekday(6),sundays=sunday.range,mondays=monday.range,tuesdays=tuesday.range,wednesdays=wednesday.range,thursdays=thursday.range,fridays=friday.range,saturdays=saturday.range,month=newInterval(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12},function(t){return t.getMonth()}),months=month.range,year=newInterval(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});year.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:newInterval(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)})};var years=year.range,utcMinute=newInterval(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*durationMinute$1)},function(t,e){return(e-t)/durationMinute$1},function(t){return t.getUTCMinutes()}),utcMinutes=utcMinute.range,utcHour=newInterval(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*durationHour$1)},function(t,e){return(e-t)/durationHour$1},function(t){return t.getUTCHours()}),utcHours=utcHour.range,utcDay=newInterval(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/durationDay$1},function(t){return t.getUTCDate()-1}),utcDays=utcDay.range;function utcWeekday(t){return newInterval(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCDate(e.getUTCDate()+n*7)},function(e,n){return(n-e)/durationWeek$1})}var utcSunday=utcWeekday(0),utcMonday=utcWeekday(1),utcTuesday=utcWeekday(2),utcWednesday=utcWeekday(3),utcThursday=utcWeekday(4),utcFriday=utcWeekday(5),utcSaturday=utcWeekday(6),utcSundays=utcSunday.range,utcMondays=utcMonday.range,utcTuesdays=utcTuesday.range,utcWednesdays=utcWednesday.range,utcThursdays=utcThursday.range,utcFridays=utcFriday.range,utcSaturdays=utcSaturday.range,utcMonth=newInterval(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12},function(t){return t.getUTCMonth()}),utcMonths=utcMonth.range,utcYear=newInterval(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});utcYear.every=function(t){return!isFinite(t=Math.floor(t))||!(t>0)?null:newInterval(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)})};var utcYears=utcYear.range;function localDate(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function utcDate(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function newDate(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function formatLocale(t){var e=t.dateTime,n=t.date,i=t.time,u=t.periods,l=t.days,d=t.shortDays,g=t.months,_=t.shortMonths,b=formatRe(u),$=formatLookup(u),w=formatRe(l),p=formatLookup(l),I=formatRe(d),v=formatLookup(d),T=formatRe(g),S=formatLookup(g),P=formatRe(_),R=formatLookup(_),O={a:$t,A:wt,b:r,B:o,c:null,d:formatDayOfMonth,e:formatDayOfMonth,f:formatMicroseconds,g:formatYearISO,G:formatFullYearISO,H:formatHour24,I:formatHour12,j:formatDayOfYear,L:formatMilliseconds,m:formatMonthNumber,M:formatMinutes,p:h,q:m,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatSeconds,u:formatWeekdayNumberMonday,U:formatWeekNumberSunday,V:formatWeekNumberISO,w:formatWeekdayNumberSunday,W:formatWeekNumberMonday,x:null,X:null,y:formatYear,Y:formatFullYear,Z:formatZone,"%":formatLiteralPercent},V={a:L,A:N,b:G,B:H,c:null,d:formatUTCDayOfMonth,e:formatUTCDayOfMonth,f:formatUTCMicroseconds,g:formatUTCYearISO,G:formatUTCFullYearISO,H:formatUTCHour24,I:formatUTCHour12,j:formatUTCDayOfYear,L:formatUTCMilliseconds,m:formatUTCMonthNumber,M:formatUTCMinutes,p:W,q:z,Q:formatUnixTimestamp,s:formatUnixTimestampSeconds,S:formatUTCSeconds,u:formatUTCWeekdayNumberMonday,U:formatUTCWeekNumberSunday,V:formatUTCWeekNumberISO,w:formatUTCWeekdayNumberSunday,W:formatUTCWeekNumberMonday,x:null,X:null,y:formatUTCYear,Y:formatUTCFullYear,Z:formatUTCZone,"%":formatLiteralPercent},q={a:F,A:ct,b:U,B:st,c:yt,d:parseDayOfMonth,e:parseDayOfMonth,f:parseMicroseconds,g:parseYear,G:parseFullYear,H:parseHour24,I:parseHour24,j:parseDayOfYear,L:parseMilliseconds,m:parseMonthNumber,M:parseMinutes,p:it,q:parseQuarter,Q:parseUnixTimestamp,s:parseUnixTimestampSeconds,S:parseSeconds,u:parseWeekdayNumberMonday,U:parseWeekNumberSunday,V:parseWeekNumberISO,w:parseWeekdayNumberSunday,W:parseWeekNumberMonday,x:ut,X:mt,y:parseYear,Y:parseFullYear,Z:parseZone,"%":parseLiteralPercent};O.x=et(n,O),O.X=et(i,O),O.c=et(e,O),V.x=et(n,V),V.X=et(i,V),V.c=et(e,V);function et(Q,Z){return function(ot){var J=[],ht=-1,ft=0,vt=Q.length,xt,Tt,St;for(ot instanceof Date||(ot=new Date(+ot));++ht<vt;)Q.charCodeAt(ht)===37&&(J.push(Q.slice(ft,ht)),(Tt=pads[xt=Q.charAt(++ht)])!=null?xt=Q.charAt(++ht):Tt=xt==="e"?" ":"0",(St=Z[xt])&&(xt=St(ot,Tt)),J.push(xt),ft=ht+1);return J.push(Q.slice(ft,ht)),J.join("")}}function nt(Q,Z){return function(ot){var J=newDate(1900,void 0,1),ht=lt(J,Q,ot+="",0),ft,vt;if(ht!=ot.length)return null;if("Q"in J)return new Date(J.Q);if("s"in J)return new Date(J.s*1e3+("L"in J?J.L:0));if(Z&&!("Z"in J)&&(J.Z=0),"p"in J&&(J.H=J.H%12+J.p*12),J.m===void 0&&(J.m="q"in J?J.q:0),"V"in J){if(J.V<1||J.V>53)return null;"w"in J||(J.w=1),"Z"in J?(ft=utcDate(newDate(J.y,0,1)),vt=ft.getUTCDay(),ft=vt>4||vt===0?utcMonday.ceil(ft):utcMonday(ft),ft=utcDay.offset(ft,(J.V-1)*7),J.y=ft.getUTCFullYear(),J.m=ft.getUTCMonth(),J.d=ft.getUTCDate()+(J.w+6)%7):(ft=localDate(newDate(J.y,0,1)),vt=ft.getDay(),ft=vt>4||vt===0?monday.ceil(ft):monday(ft),ft=day.offset(ft,(J.V-1)*7),J.y=ft.getFullYear(),J.m=ft.getMonth(),J.d=ft.getDate()+(J.w+6)%7)}else("W"in J||"U"in J)&&("w"in J||(J.w="u"in J?J.u%7:"W"in J?1:0),vt="Z"in J?utcDate(newDate(J.y,0,1)).getUTCDay():localDate(newDate(J.y,0,1)).getDay(),J.m=0,J.d="W"in J?(J.w+6)%7+J.W*7-(vt+5)%7:J.w+J.U*7-(vt+6)%7);return"Z"in J?(J.H+=J.Z/100|0,J.M+=J.Z%100,utcDate(J)):localDate(J)}}function lt(Q,Z,ot,J){for(var ht=0,ft=Z.length,vt=ot.length,xt,Tt;ht<ft;){if(J>=vt)return-1;if(xt=Z.charCodeAt(ht++),xt===37){if(xt=Z.charAt(ht++),Tt=q[xt in pads?Z.charAt(ht++):xt],!Tt||(J=Tt(Q,ot,J))<0)return-1}else if(xt!=ot.charCodeAt(J++))return-1}return J}function it(Q,Z,ot){var J=b.exec(Z.slice(ot));return J?(Q.p=$[J[0].toLowerCase()],ot+J[0].length):-1}function F(Q,Z,ot){var J=I.exec(Z.slice(ot));return J?(Q.w=v[J[0].toLowerCase()],ot+J[0].length):-1}function ct(Q,Z,ot){var J=w.exec(Z.slice(ot));return J?(Q.w=p[J[0].toLowerCase()],ot+J[0].length):-1}function U(Q,Z,ot){var J=P.exec(Z.slice(ot));return J?(Q.m=R[J[0].toLowerCase()],ot+J[0].length):-1}function st(Q,Z,ot){var J=T.exec(Z.slice(ot));return J?(Q.m=S[J[0].toLowerCase()],ot+J[0].length):-1}function yt(Q,Z,ot){return lt(Q,e,Z,ot)}function ut(Q,Z,ot){return lt(Q,n,Z,ot)}function mt(Q,Z,ot){return lt(Q,i,Z,ot)}function $t(Q){return d[Q.getDay()]}function wt(Q){return l[Q.getDay()]}function r(Q){return _[Q.getMonth()]}function o(Q){return g[Q.getMonth()]}function h(Q){return u[+(Q.getHours()>=12)]}function m(Q){return 1+~~(Q.getMonth()/3)}function L(Q){return d[Q.getUTCDay()]}function N(Q){return l[Q.getUTCDay()]}function G(Q){return _[Q.getUTCMonth()]}function H(Q){return g[Q.getUTCMonth()]}function W(Q){return u[+(Q.getUTCHours()>=12)]}function z(Q){return 1+~~(Q.getUTCMonth()/3)}return{format:function(Q){var Z=et(Q+="",O);return Z.toString=function(){return Q},Z},parse:function(Q){var Z=nt(Q+="",!1);return Z.toString=function(){return Q},Z},utcFormat:function(Q){var Z=et(Q+="",V);return Z.toString=function(){return Q},Z},utcParse:function(Q){var Z=nt(Q+="",!0);return Z.toString=function(){return Q},Z}}}var pads={"-":"",_:" ",0:"0"},numberRe=/^\s*\d+/,percentRe=/^%/,requoteRe=/[\\^$*+?|[\]().{}]/g;function pad(t,e,n){var i=t<0?"-":"",u=(i?-t:t)+"",l=u.length;return i+(l<n?new Array(n-l+1).join(e)+u:u)}function requote(t){return t.replace(requoteRe,"\\$&")}function formatRe(t){return new RegExp("^(?:"+t.map(requote).join("|")+")","i")}function formatLookup(t){for(var e={},n=-1,i=t.length;++n<i;)e[t[n].toLowerCase()]=n;return e}function parseWeekdayNumberSunday(t,e,n){var i=numberRe.exec(e.slice(n,n+1));return i?(t.w=+i[0],n+i[0].length):-1}function parseWeekdayNumberMonday(t,e,n){var i=numberRe.exec(e.slice(n,n+1));return i?(t.u=+i[0],n+i[0].length):-1}function parseWeekNumberSunday(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.U=+i[0],n+i[0].length):-1}function parseWeekNumberISO(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.V=+i[0],n+i[0].length):-1}function parseWeekNumberMonday(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.W=+i[0],n+i[0].length):-1}function parseFullYear(t,e,n){var i=numberRe.exec(e.slice(n,n+4));return i?(t.y=+i[0],n+i[0].length):-1}function parseYear(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function parseZone(t,e,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return i?(t.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function parseQuarter(t,e,n){var i=numberRe.exec(e.slice(n,n+1));return i?(t.q=i[0]*3-3,n+i[0].length):-1}function parseMonthNumber(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.m=i[0]-1,n+i[0].length):-1}function parseDayOfMonth(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.d=+i[0],n+i[0].length):-1}function parseDayOfYear(t,e,n){var i=numberRe.exec(e.slice(n,n+3));return i?(t.m=0,t.d=+i[0],n+i[0].length):-1}function parseHour24(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.H=+i[0],n+i[0].length):-1}function parseMinutes(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.M=+i[0],n+i[0].length):-1}function parseSeconds(t,e,n){var i=numberRe.exec(e.slice(n,n+2));return i?(t.S=+i[0],n+i[0].length):-1}function parseMilliseconds(t,e,n){var i=numberRe.exec(e.slice(n,n+3));return i?(t.L=+i[0],n+i[0].length):-1}function parseMicroseconds(t,e,n){var i=numberRe.exec(e.slice(n,n+6));return i?(t.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function parseLiteralPercent(t,e,n){var i=percentRe.exec(e.slice(n,n+1));return i?n+i[0].length:-1}function parseUnixTimestamp(t,e,n){var i=numberRe.exec(e.slice(n));return i?(t.Q=+i[0],n+i[0].length):-1}function parseUnixTimestampSeconds(t,e,n){var i=numberRe.exec(e.slice(n));return i?(t.s=+i[0],n+i[0].length):-1}function formatDayOfMonth(t,e){return pad(t.getDate(),e,2)}function formatHour24(t,e){return pad(t.getHours(),e,2)}function formatHour12(t,e){return pad(t.getHours()%12||12,e,2)}function formatDayOfYear(t,e){return pad(1+day.count(year(t),t),e,3)}function formatMilliseconds(t,e){return pad(t.getMilliseconds(),e,3)}function formatMicroseconds(t,e){return formatMilliseconds(t,e)+"000"}function formatMonthNumber(t,e){return pad(t.getMonth()+1,e,2)}function formatMinutes(t,e){return pad(t.getMinutes(),e,2)}function formatSeconds(t,e){return pad(t.getSeconds(),e,2)}function formatWeekdayNumberMonday(t){var e=t.getDay();return e===0?7:e}function formatWeekNumberSunday(t,e){return pad(sunday.count(year(t)-1,t),e,2)}function dISO(t){var e=t.getDay();return e>=4||e===0?thursday(t):thursday.ceil(t)}function formatWeekNumberISO(t,e){return t=dISO(t),pad(thursday.count(year(t),t)+(year(t).getDay()===4),e,2)}function formatWeekdayNumberSunday(t){return t.getDay()}function formatWeekNumberMonday(t,e){return pad(monday.count(year(t)-1,t),e,2)}function formatYear(t,e){return pad(t.getFullYear()%100,e,2)}function formatYearISO(t,e){return t=dISO(t),pad(t.getFullYear()%100,e,2)}function formatFullYear(t,e){return pad(t.getFullYear()%1e4,e,4)}function formatFullYearISO(t,e){var n=t.getDay();return t=n>=4||n===0?thursday(t):thursday.ceil(t),pad(t.getFullYear()%1e4,e,4)}function formatZone(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+pad(e/60|0,"0",2)+pad(e%60,"0",2)}function formatUTCDayOfMonth(t,e){return pad(t.getUTCDate(),e,2)}function formatUTCHour24(t,e){return pad(t.getUTCHours(),e,2)}function formatUTCHour12(t,e){return pad(t.getUTCHours()%12||12,e,2)}function formatUTCDayOfYear(t,e){return pad(1+utcDay.count(utcYear(t),t),e,3)}function formatUTCMilliseconds(t,e){return pad(t.getUTCMilliseconds(),e,3)}function formatUTCMicroseconds(t,e){return formatUTCMilliseconds(t,e)+"000"}function formatUTCMonthNumber(t,e){return pad(t.getUTCMonth()+1,e,2)}function formatUTCMinutes(t,e){return pad(t.getUTCMinutes(),e,2)}function formatUTCSeconds(t,e){return pad(t.getUTCSeconds(),e,2)}function formatUTCWeekdayNumberMonday(t){var e=t.getUTCDay();return e===0?7:e}function formatUTCWeekNumberSunday(t,e){return pad(utcSunday.count(utcYear(t)-1,t),e,2)}function UTCdISO(t){var e=t.getUTCDay();return e>=4||e===0?utcThursday(t):utcThursday.ceil(t)}function formatUTCWeekNumberISO(t,e){return t=UTCdISO(t),pad(utcThursday.count(utcYear(t),t)+(utcYear(t).getUTCDay()===4),e,2)}function formatUTCWeekdayNumberSunday(t){return t.getUTCDay()}function formatUTCWeekNumberMonday(t,e){return pad(utcMonday.count(utcYear(t)-1,t),e,2)}function formatUTCYear(t,e){return pad(t.getUTCFullYear()%100,e,2)}function formatUTCYearISO(t,e){return t=UTCdISO(t),pad(t.getUTCFullYear()%100,e,2)}function formatUTCFullYear(t,e){return pad(t.getUTCFullYear()%1e4,e,4)}function formatUTCFullYearISO(t,e){var n=t.getUTCDay();return t=n>=4||n===0?utcThursday(t):utcThursday.ceil(t),pad(t.getUTCFullYear()%1e4,e,4)}function formatUTCZone(){return"+0000"}function formatLiteralPercent(){return"%"}function formatUnixTimestamp(t){return+t}function formatUnixTimestampSeconds(t){return Math.floor(+t/1e3)}var locale,timeFormat,timeParse,utcFormat,utcParse;defaultLocale({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function defaultLocale(t){return locale=formatLocale(t),timeFormat=locale.format,timeParse=locale.parse,utcFormat=locale.utcFormat,utcParse=locale.utcParse,locale}var isoSpecifier="%Y-%m-%dT%H:%M:%S.%LZ";function formatIsoNative(t){return t.toISOString()}var formatIso=Date.prototype.toISOString?formatIsoNative:utcFormat(isoSpecifier);function parseIsoNative(t){var e=new Date(t);return isNaN(e)?null:e}var parseIso=+new Date("2000-01-01T00:00:00.000Z")?parseIsoNative:utcParse(isoSpecifier),durationSecond=1e3,durationMinute=durationSecond*60,durationHour=durationMinute*60,durationDay=durationHour*24,durationWeek=durationDay*7,durationMonth=durationDay*30,durationYear=durationDay*365;function date(t){return new Date(t)}function number(t){return t instanceof Date?+t:+new Date(+t)}function calendar(t,e,n,i,u,l,d,g,_){var b=continuous(identity$3,identity$3),$=b.invert,w=b.domain,p=_(".%L"),I=_(":%S"),v=_("%I:%M"),T=_("%I %p"),S=_("%a %d"),P=_("%b %d"),R=_("%B"),O=_("%Y"),V=[[d,1,durationSecond],[d,5,5*durationSecond],[d,15,15*durationSecond],[d,30,30*durationSecond],[l,1,durationMinute],[l,5,5*durationMinute],[l,15,15*durationMinute],[l,30,30*durationMinute],[u,1,durationHour],[u,3,3*durationHour],[u,6,6*durationHour],[u,12,12*durationHour],[i,1,durationDay],[i,2,2*durationDay],[n,1,durationWeek],[e,1,durationMonth],[e,3,3*durationMonth],[t,1,durationYear]];function q(nt){return(d(nt)<nt?p:l(nt)<nt?I:u(nt)<nt?v:i(nt)<nt?T:e(nt)<nt?n(nt)<nt?S:P:t(nt)<nt?R:O)(nt)}function et(nt,lt,it,F){if(nt==null&&(nt=10),typeof nt=="number"){var ct=Math.abs(it-lt)/nt,U=bisector(function(st){return st[2]}).right(V,ct);U===V.length?(F=tickStep(lt/durationYear,it/durationYear,nt),nt=t):U?(U=V[ct/V[U-1][2]<V[U][2]/ct?U-1:U],F=U[1],nt=U[0]):(F=Math.max(tickStep(lt,it,nt),1),nt=g)}return F==null?nt:nt.every(F)}return b.invert=function(nt){return new Date($(nt))},b.domain=function(nt){return arguments.length?w(map.call(nt,number)):w().map(date)},b.ticks=function(nt,lt){var it=w(),F=it[0],ct=it[it.length-1],U=ct<F,st;return U&&(st=F,F=ct,ct=st),st=et(nt,F,ct,lt),st=st?st.range(F,ct+1):[],U?st.reverse():st},b.tickFormat=function(nt,lt){return lt==null?q:_(lt)},b.nice=function(nt,lt){var it=w();return(nt=et(nt,it[0],it[it.length-1],lt))?w(nice(it,nt)):b},b.copy=function(){return copy$1(b,calendar(t,e,n,i,u,l,d,g,_))},b}function time(){return initRange.apply(calendar(year,month,sunday,day,hour,minute,second,millisecond,timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function utcTime(){return initRange.apply(calendar(utcYear,utcMonth,utcSunday,utcDay,utcHour,utcMinute,second,millisecond,utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function transformer$1(){var t=0,e=1,n,i,u,l,d=identity$3,g=!1,_;function b($){return isNaN($=+$)?_:d(u===0?.5:($=(l($)-n)*u,g?Math.max(0,Math.min(1,$)):$))}return b.domain=function($){return arguments.length?(n=l(t=+$[0]),i=l(e=+$[1]),u=n===i?0:1/(i-n),b):[t,e]},b.clamp=function($){return arguments.length?(g=!!$,b):g},b.interpolator=function($){return arguments.length?(d=$,b):d},b.unknown=function($){return arguments.length?(_=$,b):_},function($){return l=$,n=$(t),i=$(e),u=n===i?0:1/(i-n),b}}function copy(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function sequential(){var t=linearish(transformer$1()(identity$3));return t.copy=function(){return copy(t,sequential())},initInterpolator.apply(t,arguments)}function sequentialLog(){var t=loggish(transformer$1()).domain([1,10]);return t.copy=function(){return copy(t,sequentialLog()).base(t.base())},initInterpolator.apply(t,arguments)}function sequentialSymlog(){var t=symlogish(transformer$1());return t.copy=function(){return copy(t,sequentialSymlog()).constant(t.constant())},initInterpolator.apply(t,arguments)}function sequentialPow(){var t=powish(transformer$1());return t.copy=function(){return copy(t,sequentialPow()).exponent(t.exponent())},initInterpolator.apply(t,arguments)}function sequentialSqrt(){return sequentialPow.apply(null,arguments).exponent(.5)}function sequentialQuantile(){var t=[],e=identity$3;function n(i){if(!isNaN(i=+i))return e((bisectRight(t,i)-1)/(t.length-1))}return n.domain=function(i){if(!arguments.length)return t.slice();t=[];for(var u=0,l=i.length,d;u<l;++u)d=i[u],d!=null&&!isNaN(d=+d)&&t.push(d);return t.sort(ascending$3),n},n.interpolator=function(i){return arguments.length?(e=i,n):e},n.copy=function(){return sequentialQuantile(e).domain(t)},initInterpolator.apply(n,arguments)}function transformer(){var t=0,e=.5,n=1,i,u,l,d,g,_=identity$3,b,$=!1,w;function p(I){return isNaN(I=+I)?w:(I=.5+((I=+b(I))-u)*(I<u?d:g),_($?Math.max(0,Math.min(1,I)):I))}return p.domain=function(I){return arguments.length?(i=b(t=+I[0]),u=b(e=+I[1]),l=b(n=+I[2]),d=i===u?0:.5/(u-i),g=u===l?0:.5/(l-u),p):[t,e,n]},p.clamp=function(I){return arguments.length?($=!!I,p):$},p.interpolator=function(I){return arguments.length?(_=I,p):_},p.unknown=function(I){return arguments.length?(w=I,p):w},function(I){return b=I,i=I(t),u=I(e),l=I(n),d=i===u?0:.5/(u-i),g=u===l?0:.5/(l-u),p}}function diverging$1(){var t=linearish(transformer()(identity$3));return t.copy=function(){return copy(t,diverging$1())},initInterpolator.apply(t,arguments)}function divergingLog(){var t=loggish(transformer()).domain([.1,1,10]);return t.copy=function(){return copy(t,divergingLog()).base(t.base())},initInterpolator.apply(t,arguments)}function divergingSymlog(){var t=symlogish(transformer());return t.copy=function(){return copy(t,divergingSymlog()).constant(t.constant())},initInterpolator.apply(t,arguments)}function divergingPow(){var t=powish(transformer());return t.copy=function(){return copy(t,divergingPow()).exponent(t.exponent())},initInterpolator.apply(t,arguments)}function divergingSqrt(){return divergingPow.apply(null,arguments).exponent(.5)}function colors(t){for(var e=t.length/6|0,n=new Array(e),i=0;i<e;)n[i]="#"+t.slice(i*6,++i*6);return n}const category10=colors("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Accent=colors("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Dark2=colors("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Paired=colors("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Pastel1=colors("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Pastel2=colors("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Set1=colors("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Set2=colors("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Set3=colors("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Tableau10=colors("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function ramp$1(t){return rgbBasis(t[t.length-1])}var scheme$q=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(colors);const BrBG=ramp$1(scheme$q);var scheme$p=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(colors);const PRGn=ramp$1(scheme$p);var scheme$o=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(colors);const PiYG=ramp$1(scheme$o);var scheme$n=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(colors);const PuOr=ramp$1(scheme$n);var scheme$m=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(colors);const RdBu=ramp$1(scheme$m);var scheme$l=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(colors);const RdGy=ramp$1(scheme$l);var scheme$k=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(colors);const RdYlBu=ramp$1(scheme$k);var scheme$j=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(colors);const RdYlGn=ramp$1(scheme$j);var scheme$i=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(colors);const Spectral=ramp$1(scheme$i);var scheme$h=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(colors);const BuGn=ramp$1(scheme$h);var scheme$g=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(colors);const BuPu=ramp$1(scheme$g);var scheme$f=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(colors);const GnBu=ramp$1(scheme$f);var scheme$e=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(colors);const OrRd=ramp$1(scheme$e);var scheme$d=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(colors);const PuBuGn=ramp$1(scheme$d);var scheme$c=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(colors);const PuBu=ramp$1(scheme$c);var scheme$b=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(colors);const PuRd=ramp$1(scheme$b);var scheme$a=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(colors);const RdPu=ramp$1(scheme$a);var scheme$9=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(colors);const YlGnBu=ramp$1(scheme$9);var scheme$8=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(colors);const YlGn=ramp$1(scheme$8);var scheme$7=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(colors);const YlOrBr=ramp$1(scheme$7);var scheme$6=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(colors);const YlOrRd=ramp$1(scheme$6);var scheme$5=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(colors);const Blues=ramp$1(scheme$5);var scheme$4=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(colors);const Greens=ramp$1(scheme$4);var scheme$3=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(colors);const Greys=ramp$1(scheme$3);var scheme$2=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(colors);const Purples=ramp$1(scheme$2);var scheme$1=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(colors);const Reds=ramp$1(scheme$1);var scheme=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(colors);const Oranges=ramp$1(scheme);function cividis(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-t*2710.57)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-t*67.37)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-t*2475.67)))))))+")"}const cubehelix=cubehelixLong(cubehelix$3(300,.5,0),cubehelix$3(-240,.5,1));var warm=cubehelixLong(cubehelix$3(-100,.75,.35),cubehelix$3(80,1.5,.8)),cool=cubehelixLong(cubehelix$3(260,.75,.35),cubehelix$3(80,1.5,.8)),c$2=cubehelix$3();function rainbow(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return c$2.h=360*t-100,c$2.s=1.5-1.5*e,c$2.l=.8-.9*e,c$2+""}var c$1=rgb(),pi_1_3=Math.PI/3,pi_2_3=Math.PI*2/3;function sinebow(t){var e;return t=(.5-t)*Math.PI,c$1.r=255*(e=Math.sin(t))*e,c$1.g=255*(e=Math.sin(t+pi_1_3))*e,c$1.b=255*(e=Math.sin(t+pi_2_3))*e,c$1+""}function turbo(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-t*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+t*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-t*6838.66)))))))+")"}function ramp(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}const viridis=ramp(colors("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var magma=ramp(colors("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),inferno=ramp(colors("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),plasma=ramp(colors("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function constant$2(t){return function(){return t}}var abs=Math.abs,atan2=Math.atan2,cos=Math.cos,max=Math.max,min=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon$1=1e-12,pi=Math.PI,halfPi=pi/2,tau=2*pi;function acos(t){return t>1?0:t<-1?pi:Math.acos(t)}function asin(t){return t>=1?halfPi:t<=-1?-halfPi:Math.asin(t)}function arcInnerRadius(t){return t.innerRadius}function arcOuterRadius(t){return t.outerRadius}function arcStartAngle(t){return t.startAngle}function arcEndAngle(t){return t.endAngle}function arcPadAngle(t){return t&&t.padAngle}function intersect(t,e,n,i,u,l,d,g){var _=n-t,b=i-e,$=d-u,w=g-l,p=w*_-$*b;if(!(p*p<epsilon$1))return p=($*(e-l)-w*(t-u))/p,[t+p*_,e+p*b]}function cornerTangents(t,e,n,i,u,l,d){var g=t-n,_=e-i,b=(d?l:-l)/sqrt(g*g+_*_),$=b*_,w=-b*g,p=t+$,I=e+w,v=n+$,T=i+w,S=(p+v)/2,P=(I+T)/2,R=v-p,O=T-I,V=R*R+O*O,q=u-l,et=p*T-v*I,nt=(O<0?-1:1)*sqrt(max(0,q*q*V-et*et)),lt=(et*O-R*nt)/V,it=(-et*R-O*nt)/V,F=(et*O+R*nt)/V,ct=(-et*R+O*nt)/V,U=lt-S,st=it-P,yt=F-S,ut=ct-P;return U*U+st*st>yt*yt+ut*ut&&(lt=F,it=ct),{cx:lt,cy:it,x01:-$,y01:-w,x11:lt*(u/q-1),y11:it*(u/q-1)}}function arc(){var t=arcInnerRadius,e=arcOuterRadius,n=constant$2(0),i=null,u=arcStartAngle,l=arcEndAngle,d=arcPadAngle,g=null;function _(){var b,$,w=+t.apply(this,arguments),p=+e.apply(this,arguments),I=u.apply(this,arguments)-halfPi,v=l.apply(this,arguments)-halfPi,T=abs(v-I),S=v>I;if(g||(g=b=path()),p<w&&($=p,p=w,w=$),!(p>epsilon$1))g.moveTo(0,0);else if(T>tau-epsilon$1)g.moveTo(p*cos(I),p*sin(I)),g.arc(0,0,p,I,v,!S),w>epsilon$1&&(g.moveTo(w*cos(v),w*sin(v)),g.arc(0,0,w,v,I,S));else{var P=I,R=v,O=I,V=v,q=T,et=T,nt=d.apply(this,arguments)/2,lt=nt>epsilon$1&&(i?+i.apply(this,arguments):sqrt(w*w+p*p)),it=min(abs(p-w)/2,+n.apply(this,arguments)),F=it,ct=it,U,st;if(lt>epsilon$1){var yt=asin(lt/w*sin(nt)),ut=asin(lt/p*sin(nt));(q-=yt*2)>epsilon$1?(yt*=S?1:-1,O+=yt,V-=yt):(q=0,O=V=(I+v)/2),(et-=ut*2)>epsilon$1?(ut*=S?1:-1,P+=ut,R-=ut):(et=0,P=R=(I+v)/2)}var mt=p*cos(P),$t=p*sin(P),wt=w*cos(V),r=w*sin(V);if(it>epsilon$1){var o=p*cos(R),h=p*sin(R),m=w*cos(O),L=w*sin(O),N;if(T<pi&&(N=intersect(mt,$t,m,L,o,h,wt,r))){var G=mt-N[0],H=$t-N[1],W=o-N[0],z=h-N[1],Q=1/sin(acos((G*W+H*z)/(sqrt(G*G+H*H)*sqrt(W*W+z*z)))/2),Z=sqrt(N[0]*N[0]+N[1]*N[1]);F=min(it,(w-Z)/(Q-1)),ct=min(it,(p-Z)/(Q+1))}}et>epsilon$1?ct>epsilon$1?(U=cornerTangents(m,L,mt,$t,p,ct,S),st=cornerTangents(o,h,wt,r,p,ct,S),g.moveTo(U.cx+U.x01,U.cy+U.y01),ct<it?g.arc(U.cx,U.cy,ct,atan2(U.y01,U.x01),atan2(st.y01,st.x01),!S):(g.arc(U.cx,U.cy,ct,atan2(U.y01,U.x01),atan2(U.y11,U.x11),!S),g.arc(0,0,p,atan2(U.cy+U.y11,U.cx+U.x11),atan2(st.cy+st.y11,st.cx+st.x11),!S),g.arc(st.cx,st.cy,ct,atan2(st.y11,st.x11),atan2(st.y01,st.x01),!S))):(g.moveTo(mt,$t),g.arc(0,0,p,P,R,!S)):g.moveTo(mt,$t),!(w>epsilon$1)||!(q>epsilon$1)?g.lineTo(wt,r):F>epsilon$1?(U=cornerTangents(wt,r,o,h,w,-F,S),st=cornerTangents(mt,$t,m,L,w,-F,S),g.lineTo(U.cx+U.x01,U.cy+U.y01),F<it?g.arc(U.cx,U.cy,F,atan2(U.y01,U.x01),atan2(st.y01,st.x01),!S):(g.arc(U.cx,U.cy,F,atan2(U.y01,U.x01),atan2(U.y11,U.x11),!S),g.arc(0,0,w,atan2(U.cy+U.y11,U.cx+U.x11),atan2(st.cy+st.y11,st.cx+st.x11),S),g.arc(st.cx,st.cy,F,atan2(st.y11,st.x11),atan2(st.y01,st.x01),!S))):g.arc(0,0,w,V,O,S)}if(g.closePath(),b)return g=null,b+""||null}return _.centroid=function(){var b=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,$=(+u.apply(this,arguments)+ +l.apply(this,arguments))/2-pi/2;return[cos($)*b,sin($)*b]},_.innerRadius=function(b){return arguments.length?(t=typeof b=="function"?b:constant$2(+b),_):t},_.outerRadius=function(b){return arguments.length?(e=typeof b=="function"?b:constant$2(+b),_):e},_.cornerRadius=function(b){return arguments.length?(n=typeof b=="function"?b:constant$2(+b),_):n},_.padRadius=function(b){return arguments.length?(i=b==null?null:typeof b=="function"?b:constant$2(+b),_):i},_.startAngle=function(b){return arguments.length?(u=typeof b=="function"?b:constant$2(+b),_):u},_.endAngle=function(b){return arguments.length?(l=typeof b=="function"?b:constant$2(+b),_):l},_.padAngle=function(b){return arguments.length?(d=typeof b=="function"?b:constant$2(+b),_):d},_.context=function(b){return arguments.length?(g=b==null?null:b,_):g},_}function Linear(t){this._context=t}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function curveLinear(t){return new Linear(t)}function x$1(t){return t[0]}function y$1(t){return t[1]}function line(){var t=x$1,e=y$1,n=constant$2(!0),i=null,u=curveLinear,l=null;function d(g){var _,b=g.length,$,w=!1,p;for(i==null&&(l=u(p=path())),_=0;_<=b;++_)!(_<b&&n($=g[_],_,g))===w&&((w=!w)?l.lineStart():l.lineEnd()),w&&l.point(+t($,_,g),+e($,_,g));if(p)return l=null,p+""||null}return d.x=function(g){return arguments.length?(t=typeof g=="function"?g:constant$2(+g),d):t},d.y=function(g){return arguments.length?(e=typeof g=="function"?g:constant$2(+g),d):e},d.defined=function(g){return arguments.length?(n=typeof g=="function"?g:constant$2(!!g),d):n},d.curve=function(g){return arguments.length?(u=g,i!=null&&(l=u(i)),d):u},d.context=function(g){return arguments.length?(g==null?i=l=null:l=u(i=g),d):i},d}function area(){var t=x$1,e=null,n=constant$2(0),i=y$1,u=constant$2(!0),l=null,d=curveLinear,g=null;function _($){var w,p,I,v=$.length,T,S=!1,P,R=new Array(v),O=new Array(v);for(l==null&&(g=d(P=path())),w=0;w<=v;++w){if(!(w<v&&u(T=$[w],w,$))===S)if(S=!S)p=w,g.areaStart(),g.lineStart();else{for(g.lineEnd(),g.lineStart(),I=w-1;I>=p;--I)g.point(R[I],O[I]);g.lineEnd(),g.areaEnd()}S&&(R[w]=+t(T,w,$),O[w]=+n(T,w,$),g.point(e?+e(T,w,$):R[w],i?+i(T,w,$):O[w]))}if(P)return g=null,P+""||null}function b(){return line().defined(u).curve(d).context(l)}return _.x=function($){return arguments.length?(t=typeof $=="function"?$:constant$2(+$),e=null,_):t},_.x0=function($){return arguments.length?(t=typeof $=="function"?$:constant$2(+$),_):t},_.x1=function($){return arguments.length?(e=$==null?null:typeof $=="function"?$:constant$2(+$),_):e},_.y=function($){return arguments.length?(n=typeof $=="function"?$:constant$2(+$),i=null,_):n},_.y0=function($){return arguments.length?(n=typeof $=="function"?$:constant$2(+$),_):n},_.y1=function($){return arguments.length?(i=$==null?null:typeof $=="function"?$:constant$2(+$),_):i},_.lineX0=_.lineY0=function(){return b().x(t).y(n)},_.lineY1=function(){return b().x(t).y(i)},_.lineX1=function(){return b().x(e).y(n)},_.defined=function($){return arguments.length?(u=typeof $=="function"?$:constant$2(!!$),_):u},_.curve=function($){return arguments.length?(d=$,l!=null&&(g=d(l)),_):d},_.context=function($){return arguments.length?($==null?l=g=null:g=d(l=$),_):l},_}function descending$1(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function identity$1(t){return t}function pie(){var t=identity$1,e=descending$1,n=null,i=constant$2(0),u=constant$2(tau),l=constant$2(0);function d(g){var _,b=g.length,$,w,p=0,I=new Array(b),v=new Array(b),T=+i.apply(this,arguments),S=Math.min(tau,Math.max(-tau,u.apply(this,arguments)-T)),P,R=Math.min(Math.abs(S)/b,l.apply(this,arguments)),O=R*(S<0?-1:1),V;for(_=0;_<b;++_)(V=v[I[_]=_]=+t(g[_],_,g))>0&&(p+=V);for(e!=null?I.sort(function(q,et){return e(v[q],v[et])}):n!=null&&I.sort(function(q,et){return n(g[q],g[et])}),_=0,w=p?(S-b*O)/p:0;_<b;++_,T=P)$=I[_],V=v[$],P=T+(V>0?V*w:0)+O,v[$]={data:g[$],index:_,value:V,startAngle:T,endAngle:P,padAngle:R};return v}return d.value=function(g){return arguments.length?(t=typeof g=="function"?g:constant$2(+g),d):t},d.sortValues=function(g){return arguments.length?(e=g,n=null,d):e},d.sort=function(g){return arguments.length?(n=g,e=null,d):n},d.startAngle=function(g){return arguments.length?(i=typeof g=="function"?g:constant$2(+g),d):i},d.endAngle=function(g){return arguments.length?(u=typeof g=="function"?g:constant$2(+g),d):u},d.padAngle=function(g){return arguments.length?(l=typeof g=="function"?g:constant$2(+g),d):l},d}var curveRadialLinear=curveRadial$1(curveLinear);function Radial(t){this._curve=t}Radial.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};function curveRadial$1(t){function e(n){return new Radial(t(n))}return e._curve=t,e}function lineRadial(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(n){return arguments.length?e(curveRadial$1(n)):e()._curve},t}function lineRadial$1(){return lineRadial(line().curve(curveRadialLinear))}function areaRadial(){var t=area().curve(curveRadialLinear),e=t.curve,n=t.lineX0,i=t.lineX1,u=t.lineY0,l=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return lineRadial(n())},delete t.lineX0,t.lineEndAngle=function(){return lineRadial(i())},delete t.lineX1,t.lineInnerRadius=function(){return lineRadial(u())},delete t.lineY0,t.lineOuterRadius=function(){return lineRadial(l())},delete t.lineY1,t.curve=function(d){return arguments.length?e(curveRadial$1(d)):e()._curve},t}function pointRadial(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]}var slice=Array.prototype.slice;function linkSource(t){return t.source}function linkTarget(t){return t.target}function link(t){var e=linkSource,n=linkTarget,i=x$1,u=y$1,l=null;function d(){var g,_=slice.call(arguments),b=e.apply(this,_),$=n.apply(this,_);if(l||(l=g=path()),t(l,+i.apply(this,(_[0]=b,_)),+u.apply(this,_),+i.apply(this,(_[0]=$,_)),+u.apply(this,_)),g)return l=null,g+""||null}return d.source=function(g){return arguments.length?(e=g,d):e},d.target=function(g){return arguments.length?(n=g,d):n},d.x=function(g){return arguments.length?(i=typeof g=="function"?g:constant$2(+g),d):i},d.y=function(g){return arguments.length?(u=typeof g=="function"?g:constant$2(+g),d):u},d.context=function(g){return arguments.length?(l=g==null?null:g,d):l},d}function curveHorizontal(t,e,n,i,u){t.moveTo(e,n),t.bezierCurveTo(e=(e+i)/2,n,e,u,i,u)}function curveVertical(t,e,n,i,u){t.moveTo(e,n),t.bezierCurveTo(e,n=(n+u)/2,i,n,i,u)}function curveRadial(t,e,n,i,u){var l=pointRadial(e,n),d=pointRadial(e,n=(n+u)/2),g=pointRadial(i,n),_=pointRadial(i,u);t.moveTo(l[0],l[1]),t.bezierCurveTo(d[0],d[1],g[0],g[1],_[0],_[1])}function linkHorizontal(){return link(curveHorizontal)}function linkVertical(){return link(curveVertical)}function linkRadial(){var t=link(curveRadial);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}const circle={draw:function(t,e){var n=Math.sqrt(e/pi);t.moveTo(n,0),t.arc(0,0,n,0,tau)}},cross={draw:function(t,e){var n=Math.sqrt(e/5)/2;t.moveTo(-3*n,-n),t.lineTo(-n,-n),t.lineTo(-n,-3*n),t.lineTo(n,-3*n),t.lineTo(n,-n),t.lineTo(3*n,-n),t.lineTo(3*n,n),t.lineTo(n,n),t.lineTo(n,3*n),t.lineTo(-n,3*n),t.lineTo(-n,n),t.lineTo(-3*n,n),t.closePath()}};var tan30=Math.sqrt(1/3),tan30_2=tan30*2;const diamond={draw:function(t,e){var n=Math.sqrt(e/tan30_2),i=n*tan30;t.moveTo(0,-n),t.lineTo(i,0),t.lineTo(0,n),t.lineTo(-i,0),t.closePath()}};var ka=.8908130915292852,kr=Math.sin(pi/10)/Math.sin(7*pi/10),kx=Math.sin(tau/10)*kr,ky=-Math.cos(tau/10)*kr;const star={draw:function(t,e){var n=Math.sqrt(e*ka),i=kx*n,u=ky*n;t.moveTo(0,-n),t.lineTo(i,u);for(var l=1;l<5;++l){var d=tau*l/5,g=Math.cos(d),_=Math.sin(d);t.lineTo(_*n,-g*n),t.lineTo(g*i-_*u,_*i+g*u)}t.closePath()}},square={draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}};var sqrt3=Math.sqrt(3);const triangle={draw:function(t,e){var n=-Math.sqrt(e/(sqrt3*3));t.moveTo(0,n*2),t.lineTo(-sqrt3*n,-n),t.lineTo(sqrt3*n,-n),t.closePath()}};var c=-.5,s=Math.sqrt(3)/2,k=1/Math.sqrt(12),a=(k/2+1)*3;const wye={draw:function(t,e){var n=Math.sqrt(e/a),i=n/2,u=n*k,l=i,d=n*k+n,g=-l,_=d;t.moveTo(i,u),t.lineTo(l,d),t.lineTo(g,_),t.lineTo(c*i-s*u,s*i+c*u),t.lineTo(c*l-s*d,s*l+c*d),t.lineTo(c*g-s*_,s*g+c*_),t.lineTo(c*i+s*u,c*u-s*i),t.lineTo(c*l+s*d,c*d-s*l),t.lineTo(c*g+s*_,c*_-s*g),t.closePath()}};var symbols=[circle,cross,diamond,square,star,triangle,wye];function symbol(){var t=constant$2(circle),e=constant$2(64),n=null;function i(){var u;if(n||(n=u=path()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),u)return n=null,u+""||null}return i.type=function(u){return arguments.length?(t=typeof u=="function"?u:constant$2(u),i):t},i.size=function(u){return arguments.length?(e=typeof u=="function"?u:constant$2(+u),i):e},i.context=function(u){return arguments.length?(n=u==null?null:u,i):n},i}function noop(){}function point$3(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Basis(t){this._context=t}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$3(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function basis(t){return new Basis(t)}function BasisClosed(t){this._context=t}BasisClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:point$3(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function basisClosed(t){return new BasisClosed(t)}function BasisOpen(t){this._context=t}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:point$3(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function basisOpen(t){return new BasisOpen(t)}function Bundle(t,e){this._basis=new Basis(t),this._beta=e}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i=t[0],u=e[0],l=t[n]-i,d=e[n]-u,g=-1,_;++g<=n;)_=g/n,this._basis.point(this._beta*t[g]+(1-this._beta)*(i+_*l),this._beta*e[g]+(1-this._beta)*(u+_*d));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const bundle=(function t(e){function n(i){return e===1?new Basis(i):new Bundle(i,e)}return n.beta=function(i){return t(+i)},n})(.85);function point$2(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function Cardinal(t,e){this._context=t,this._k=(1-e)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$2(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:point$2(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const cardinal=(function t(e){function n(i){return new Cardinal(i,e)}return n.tension=function(i){return t(+i)},n})(0);function CardinalClosed(t,e){this._context=t,this._k=(1-e)/6}CardinalClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:point$2(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const cardinalClosed=(function t(e){function n(i){return new CardinalClosed(i,e)}return n.tension=function(i){return t(+i)},n})(0);function CardinalOpen(t,e){this._context=t,this._k=(1-e)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,t,e);break}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const cardinalOpen=(function t(e){function n(i){return new CardinalOpen(i,e)}return n.tension=function(i){return t(+i)},n})(0);function point$1(t,e,n){var i=t._x1,u=t._y1,l=t._x2,d=t._y2;if(t._l01_a>epsilon$1){var g=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,_=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*g-t._x0*t._l12_2a+t._x2*t._l01_2a)/_,u=(u*g-t._y0*t._l12_2a+t._y2*t._l01_2a)/_}if(t._l23_a>epsilon$1){var b=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,$=3*t._l23_a*(t._l23_a+t._l12_a);l=(l*b+t._x1*t._l23_2a-e*t._l12_2a)/$,d=(d*b+t._y1*t._l23_2a-n*t._l12_2a)/$}t._context.bezierCurveTo(i,u,l,d,t._x2,t._y2)}function CatmullRom(t,e){this._context=t,this._alpha=e}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:point$1(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const catmullRom=(function t(e){function n(i){return e?new CatmullRom(i,e):new Cardinal(i,0)}return n.alpha=function(i){return t(+i)},n})(.5);function CatmullRomClosed(t,e){this._context=t,this._alpha=e}CatmullRomClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:point$1(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const catmullRomClosed=(function t(e){function n(i){return e?new CatmullRomClosed(i,e):new CardinalClosed(i,0)}return n.alpha=function(i){return t(+i)},n})(.5);function CatmullRomOpen(t,e){this._context=t,this._alpha=e}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$1(this,t,e);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const catmullRomOpen=(function t(e){function n(i){return e?new CatmullRomOpen(i,e):new CardinalOpen(i,0)}return n.alpha=function(i){return t(+i)},n})(.5);function LinearClosed(t){this._context=t}LinearClosed.prototype={areaStart:noop,areaEnd:noop,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function linearClosed(t){return new LinearClosed(t)}function sign(t){return t<0?-1:1}function slope3(t,e,n){var i=t._x1-t._x0,u=e-t._x1,l=(t._y1-t._y0)/(i||u<0&&-0),d=(n-t._y1)/(u||i<0&&-0),g=(l*u+d*i)/(i+u);return(sign(l)+sign(d))*Math.min(Math.abs(l),Math.abs(d),.5*Math.abs(g))||0}function slope2(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function point(t,e,n){var i=t._x0,u=t._y0,l=t._x1,d=t._y1,g=(l-i)/3;t._context.bezierCurveTo(i+g,u+g*e,l-g,d-g*n,l,d)}function MonotoneX(t){this._context=t}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,point(this,slope2(this,n=slope3(this,t,e)),n);break;default:point(this,this._t0,n=slope3(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function MonotoneY(t){this._context=new ReflectContext(t)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(t,e){MonotoneX.prototype.point.call(this,e,t)};function ReflectContext(t){this._context=t}ReflectContext.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,u,l){this._context.bezierCurveTo(e,t,i,n,l,u)}};function monotoneX(t){return new MonotoneX(t)}function monotoneY(t){return new MonotoneY(t)}function Natural(t){this._context=t}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var i=controlPoints(t),u=controlPoints(e),l=0,d=1;d<n;++l,++d)this._context.bezierCurveTo(i[0][l],u[0][l],i[1][l],u[1][l],t[d],e[d]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function controlPoints(t){var e,n=t.length-1,i,u=new Array(n),l=new Array(n),d=new Array(n);for(u[0]=0,l[0]=2,d[0]=t[0]+2*t[1],e=1;e<n-1;++e)u[e]=1,l[e]=4,d[e]=4*t[e]+2*t[e+1];for(u[n-1]=2,l[n-1]=7,d[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)i=u[e]/l[e-1],l[e]-=i,d[e]-=i*d[e-1];for(u[n-1]=d[n-1]/l[n-1],e=n-2;e>=0;--e)u[e]=(d[e]-u[e+1])/l[e];for(l[n-1]=(t[n]+u[n-1])/2,e=0;e<n-1;++e)l[e]=2*t[e+1]-u[e+1];return[u,l]}function natural(t){return new Natural(t)}function Step(t,e){this._context=t,this._t=e}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function step(t){return new Step(t,.5)}function stepBefore(t){return new Step(t,0)}function stepAfter(t){return new Step(t,1)}function none$1(t,e){if((d=t.length)>1)for(var n=1,i,u,l=t[e[0]],d,g=l.length;n<d;++n)for(u=l,l=t[e[n]],i=0;i<g;++i)l[i][1]+=l[i][0]=isNaN(u[i][1])?u[i][0]:u[i][1]}function none(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function stackValue(t,e){return t[e]}function stack(){var t=constant$2([]),e=none,n=none$1,i=stackValue;function u(l){var d=t.apply(this,arguments),g,_=l.length,b=d.length,$=new Array(b),w;for(g=0;g<b;++g){for(var p=d[g],I=$[g]=new Array(_),v=0,T;v<_;++v)I[v]=T=[0,+i(l[v],p,v,l)],T.data=l[v];I.key=p}for(g=0,w=e($);g<b;++g)$[w[g]].index=g;return n($,w),$}return u.keys=function(l){return arguments.length?(t=typeof l=="function"?l:constant$2(slice.call(l)),u):t},u.value=function(l){return arguments.length?(i=typeof l=="function"?l:constant$2(+l),u):i},u.order=function(l){return arguments.length?(e=l==null?none:typeof l=="function"?l:constant$2(slice.call(l)),u):e},u.offset=function(l){return arguments.length?(n=l==null?none$1:l,u):n},u}function expand(t,e){if((i=t.length)>0){for(var n,i,u=0,l=t[0].length,d;u<l;++u){for(d=n=0;n<i;++n)d+=t[n][u][1]||0;if(d)for(n=0;n<i;++n)t[n][u][1]/=d}none$1(t,e)}}function diverging(t,e){if((_=t.length)>0)for(var n,i=0,u,l,d,g,_,b=t[e[0]].length;i<b;++i)for(d=g=0,n=0;n<_;++n)(l=(u=t[e[n]][i])[1]-u[0])>0?(u[0]=d,u[1]=d+=l):l<0?(u[1]=g,u[0]=g+=l):(u[0]=0,u[1]=l)}function silhouette(t,e){if((u=t.length)>0){for(var n=0,i=t[e[0]],u,l=i.length;n<l;++n){for(var d=0,g=0;d<u;++d)g+=t[d][n][1]||0;i[n][1]+=i[n][0]=-g/2}none$1(t,e)}}function wiggle(t,e){if(!(!((d=t.length)>0)||!((l=(u=t[e[0]]).length)>0))){for(var n=0,i=1,u,l,d;i<l;++i){for(var g=0,_=0,b=0;g<d;++g){for(var $=t[e[g]],w=$[i][1]||0,p=$[i-1][1]||0,I=(w-p)/2,v=0;v<g;++v){var T=t[e[v]],S=T[i][1]||0,P=T[i-1][1]||0;I+=S-P}_+=w,b+=I*w}u[i-1][1]+=u[i-1][0]=n,_&&(n-=b/_)}u[i-1][1]+=u[i-1][0]=n,none$1(t,e)}}function appearance(t){var e=t.map(peak);return none(t).sort(function(n,i){return e[n]-e[i]})}function peak(t){for(var e=-1,n=0,i=t.length,u,l=-1/0;++e<i;)(u=+t[e][1])>l&&(l=u,n=e);return n}function ascending(t){var e=t.map(sum);return none(t).sort(function(n,i){return e[n]-e[i]})}function sum(t){for(var e=0,n=-1,i=t.length,u;++n<i;)(u=+t[n][1])&&(e+=u);return e}function descending(t){return ascending(t).reverse()}function insideOut(t){var e=t.length,n,i,u=t.map(sum),l=appearance(t),d=0,g=0,_=[],b=[];for(n=0;n<e;++n)i=l[n],d<g?(d+=u[i],_.push(i)):(g+=u[i],b.push(i));return b.reverse().concat(_)}function reverse(t){return none(t).reverse()}function constant$1(t){return function(){return t}}function x(t){return t[0]}function y(t){return t[1]}function RedBlackTree(){this._=null}function RedBlackNode(t){t.U=t.C=t.L=t.R=t.P=t.N=null}RedBlackTree.prototype={constructor:RedBlackTree,insert:function(t,e){var n,i,u;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=RedBlackFirst(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)i=n.U,n===i.L?(u=i.R,u&&u.C?(n.C=u.C=!1,i.C=!0,t=i):(t===n.R&&(RedBlackRotateLeft(this,n),t=n,n=t.U),n.C=!1,i.C=!0,RedBlackRotateRight(this,i))):(u=i.L,u&&u.C?(n.C=u.C=!1,i.C=!0,t=i):(t===n.L&&(RedBlackRotateRight(this,n),t=n,n=t.U),n.C=!1,i.C=!0,RedBlackRotateLeft(this,i))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e=t.U,n,i=t.L,u=t.R,l,d;if(i?u?l=RedBlackFirst(u):l=i:l=u,e?e.L===t?e.L=l:e.R=l:this._=l,i&&u?(d=l.C,l.C=t.C,l.L=i,i.U=l,l!==u?(e=l.U,l.U=t.U,t=l.R,e.L=t,l.R=u,u.U=l):(l.U=e,e=l,t=l.R)):(d=t.C,t=l),t&&(t.U=e),!d){if(t&&t.C){t.C=!1;return}do{if(t===this._)break;if(t===e.L){if(n=e.R,n.C&&(n.C=!1,e.C=!0,RedBlackRotateLeft(this,e),n=e.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,RedBlackRotateRight(this,n),n=e.R),n.C=e.C,e.C=n.R.C=!1,RedBlackRotateLeft(this,e),t=this._;break}}else if(n=e.L,n.C&&(n.C=!1,e.C=!0,RedBlackRotateRight(this,e),n=e.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,RedBlackRotateLeft(this,n),n=e.L),n.C=e.C,e.C=n.L.C=!1,RedBlackRotateRight(this,e),t=this._;break}n.C=!0,t=e,e=e.U}while(!t.C);t&&(t.C=!1)}}};function RedBlackRotateLeft(t,e){var n=e,i=e.R,u=n.U;u?u.L===n?u.L=i:u.R=i:t._=i,i.U=u,n.U=i,n.R=i.L,n.R&&(n.R.U=n),i.L=n}function RedBlackRotateRight(t,e){var n=e,i=e.L,u=n.U;u?u.L===n?u.L=i:u.R=i:t._=i,i.U=u,n.U=i,n.L=i.R,n.L&&(n.L.U=n),i.R=n}function RedBlackFirst(t){for(;t.L;)t=t.L;return t}function createEdge(t,e,n,i){var u=[null,null],l=edges.push(u)-1;return u.left=t,u.right=e,n&&setEdgeEnd(u,t,e,n),i&&setEdgeEnd(u,e,t,i),cells[t.index].halfedges.push(l),cells[e.index].halfedges.push(l),u}function createBorderEdge(t,e,n){var i=[e,n];return i.left=t,i}function setEdgeEnd(t,e,n,i){!t[0]&&!t[1]?(t[0]=i,t.left=e,t.right=n):t.left===n?t[1]=i:t[0]=i}function clipEdge(t,e,n,i,u){var l=t[0],d=t[1],g=l[0],_=l[1],b=d[0],$=d[1],w=0,p=1,I=b-g,v=$-_,T;if(T=e-g,!(!I&&T>0)){if(T/=I,I<0){if(T<w)return;T<p&&(p=T)}else if(I>0){if(T>p)return;T>w&&(w=T)}if(T=i-g,!(!I&&T<0)){if(T/=I,I<0){if(T>p)return;T>w&&(w=T)}else if(I>0){if(T<w)return;T<p&&(p=T)}if(T=n-_,!(!v&&T>0)){if(T/=v,v<0){if(T<w)return;T<p&&(p=T)}else if(v>0){if(T>p)return;T>w&&(w=T)}if(T=u-_,!(!v&&T<0)){if(T/=v,v<0){if(T>p)return;T>w&&(w=T)}else if(v>0){if(T<w)return;T<p&&(p=T)}return!(w>0)&&!(p<1)||(w>0&&(t[0]=[g+w*I,_+w*v]),p<1&&(t[1]=[g+p*I,_+p*v])),!0}}}}}function connectEdge(t,e,n,i,u){var l=t[1];if(l)return!0;var d=t[0],g=t.left,_=t.right,b=g[0],$=g[1],w=_[0],p=_[1],I=(b+w)/2,v=($+p)/2,T,S;if(p===$){if(I<e||I>=i)return;if(b>w){if(!d)d=[I,n];else if(d[1]>=u)return;l=[I,u]}else{if(!d)d=[I,u];else if(d[1]<n)return;l=[I,n]}}else if(T=(b-w)/(p-$),S=v-T*I,T<-1||T>1)if(b>w){if(!d)d=[(n-S)/T,n];else if(d[1]>=u)return;l=[(u-S)/T,u]}else{if(!d)d=[(u-S)/T,u];else if(d[1]<n)return;l=[(n-S)/T,n]}else if($<p){if(!d)d=[e,T*e+S];else if(d[0]>=i)return;l=[i,T*i+S]}else{if(!d)d=[i,T*i+S];else if(d[0]<e)return;l=[e,T*e+S]}return t[0]=d,t[1]=l,!0}function clipEdges(t,e,n,i){for(var u=edges.length,l;u--;)(!connectEdge(l=edges[u],t,e,n,i)||!clipEdge(l,t,e,n,i)||!(Math.abs(l[0][0]-l[1][0])>epsilon||Math.abs(l[0][1]-l[1][1])>epsilon))&&delete edges[u]}function createCell(t){return cells[t.index]={site:t,halfedges:[]}}function cellHalfedgeAngle(t,e){var n=t.site,i=e.left,u=e.right;return n===u&&(u=i,i=n),u?Math.atan2(u[1]-i[1],u[0]-i[0]):(n===i?(i=e[1],u=e[0]):(i=e[0],u=e[1]),Math.atan2(i[0]-u[0],u[1]-i[1]))}function cellHalfedgeStart(t,e){return e[+(e.left!==t.site)]}function cellHalfedgeEnd(t,e){return e[+(e.left===t.site)]}function sortCellHalfedges(){for(var t=0,e=cells.length,n,i,u,l;t<e;++t)if((n=cells[t])&&(l=(i=n.halfedges).length)){var d=new Array(l),g=new Array(l);for(u=0;u<l;++u)d[u]=u,g[u]=cellHalfedgeAngle(n,edges[i[u]]);for(d.sort(function(_,b){return g[b]-g[_]}),u=0;u<l;++u)g[u]=i[d[u]];for(u=0;u<l;++u)i[u]=g[u]}}function clipCells(t,e,n,i){var u=cells.length,l,d,g,_,b,$,w,p,I,v,T,S,P=!0;for(l=0;l<u;++l)if(d=cells[l]){for(g=d.site,b=d.halfedges,_=b.length;_--;)edges[b[_]]||b.splice(_,1);for(_=0,$=b.length;_<$;)v=cellHalfedgeEnd(d,edges[b[_]]),T=v[0],S=v[1],w=cellHalfedgeStart(d,edges[b[++_%$]]),p=w[0],I=w[1],(Math.abs(T-p)>epsilon||Math.abs(S-I)>epsilon)&&(b.splice(_,0,edges.push(createBorderEdge(g,v,Math.abs(T-t)<epsilon&&i-S>epsilon?[t,Math.abs(p-t)<epsilon?I:i]:Math.abs(S-i)<epsilon&&n-T>epsilon?[Math.abs(I-i)<epsilon?p:n,i]:Math.abs(T-n)<epsilon&&S-e>epsilon?[n,Math.abs(p-n)<epsilon?I:e]:Math.abs(S-e)<epsilon&&T-t>epsilon?[Math.abs(I-e)<epsilon?p:t,e]:null))-1),++$);$&&(P=!1)}if(P){var R,O,V,q=1/0;for(l=0,P=null;l<u;++l)(d=cells[l])&&(g=d.site,R=g[0]-t,O=g[1]-e,V=R*R+O*O,V<q&&(q=V,P=d));if(P){var et=[t,e],nt=[t,i],lt=[n,i],it=[n,e];P.halfedges.push(edges.push(createBorderEdge(g=P.site,et,nt))-1,edges.push(createBorderEdge(g,nt,lt))-1,edges.push(createBorderEdge(g,lt,it))-1,edges.push(createBorderEdge(g,it,et))-1)}}for(l=0;l<u;++l)(d=cells[l])&&(d.halfedges.length||delete cells[l])}var circlePool=[],firstCircle;function Circle(){RedBlackNode(this),this.x=this.y=this.arc=this.site=this.cy=null}function attachCircle(t){var e=t.P,n=t.N;if(!(!e||!n)){var i=e.site,u=t.site,l=n.site;if(i!==l){var d=u[0],g=u[1],_=i[0]-d,b=i[1]-g,$=l[0]-d,w=l[1]-g,p=2*(_*w-b*$);if(!(p>=-1e-12)){var I=_*_+b*b,v=$*$+w*w,T=(w*I-b*v)/p,S=(_*v-$*I)/p,P=circlePool.pop()||new Circle;P.arc=t,P.site=u,P.x=T+d,P.y=(P.cy=S+g)+Math.sqrt(T*T+S*S),t.circle=P;for(var R=null,O=circles._;O;)if(P.y<O.y||P.y===O.y&&P.x<=O.x)if(O.L)O=O.L;else{R=O.P;break}else if(O.R)O=O.R;else{R=O;break}circles.insert(R,P),R||(firstCircle=P)}}}}function detachCircle(t){var e=t.circle;e&&(e.P||(firstCircle=e.N),circles.remove(e),circlePool.push(e),RedBlackNode(e),t.circle=null)}var beachPool=[];function Beach(){RedBlackNode(this),this.edge=this.site=this.circle=null}function createBeach(t){var e=beachPool.pop()||new Beach;return e.site=t,e}function detachBeach(t){detachCircle(t),beaches.remove(t),beachPool.push(t),RedBlackNode(t)}function removeBeach(t){var e=t.circle,n=e.x,i=e.cy,u=[n,i],l=t.P,d=t.N,g=[t];detachBeach(t);for(var _=l;_.circle&&Math.abs(n-_.circle.x)<epsilon&&Math.abs(i-_.circle.cy)<epsilon;)l=_.P,g.unshift(_),detachBeach(_),_=l;g.unshift(_),detachCircle(_);for(var b=d;b.circle&&Math.abs(n-b.circle.x)<epsilon&&Math.abs(i-b.circle.cy)<epsilon;)d=b.N,g.push(b),detachBeach(b),b=d;g.push(b),detachCircle(b);var $=g.length,w;for(w=1;w<$;++w)b=g[w],_=g[w-1],setEdgeEnd(b.edge,_.site,b.site,u);_=g[0],b=g[$-1],b.edge=createEdge(_.site,b.site,null,u),attachCircle(_),attachCircle(b)}function addBeach(t){for(var e=t[0],n=t[1],i,u,l,d,g=beaches._;g;)if(l=leftBreakPoint(g,n)-e,l>epsilon)g=g.L;else if(d=e-rightBreakPoint(g,n),d>epsilon){if(!g.R){i=g;break}g=g.R}else{l>-epsilon?(i=g.P,u=g):d>-epsilon?(i=g,u=g.N):i=u=g;break}createCell(t);var _=createBeach(t);if(beaches.insert(i,_),!(!i&&!u)){if(i===u){detachCircle(i),u=createBeach(i.site),beaches.insert(_,u),_.edge=u.edge=createEdge(i.site,_.site),attachCircle(i),attachCircle(u);return}if(!u){_.edge=createEdge(i.site,_.site);return}detachCircle(i),detachCircle(u);var b=i.site,$=b[0],w=b[1],p=t[0]-$,I=t[1]-w,v=u.site,T=v[0]-$,S=v[1]-w,P=2*(p*S-I*T),R=p*p+I*I,O=T*T+S*S,V=[(S*R-I*O)/P+$,(p*O-T*R)/P+w];setEdgeEnd(u.edge,b,v,V),_.edge=createEdge(b,t,null,V),u.edge=createEdge(t,v,null,V),attachCircle(i),attachCircle(u)}}function leftBreakPoint(t,e){var n=t.site,i=n[0],u=n[1],l=u-e;if(!l)return i;var d=t.P;if(!d)return-1/0;n=d.site;var g=n[0],_=n[1],b=_-e;if(!b)return g;var $=g-i,w=1/l-1/b,p=$/b;return w?(-p+Math.sqrt(p*p-2*w*($*$/(-2*b)-_+b/2+u-l/2)))/w+i:(i+g)/2}function rightBreakPoint(t,e){var n=t.N;if(n)return leftBreakPoint(n,e);var i=t.site;return i[1]===e?i[0]:1/0}var epsilon=1e-6,beaches,cells,circles,edges;function triangleArea(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function lexicographic(t,e){return e[1]-t[1]||e[0]-t[0]}function Diagram(t,e){var n=t.sort(lexicographic).pop(),i,u,l;for(edges=[],cells=new Array(t.length),beaches=new RedBlackTree,circles=new RedBlackTree;;)if(l=firstCircle,n&&(!l||n[1]<l.y||n[1]===l.y&&n[0]<l.x))(n[0]!==i||n[1]!==u)&&(addBeach(n),i=n[0],u=n[1]),n=t.pop();else if(l)removeBeach(l.arc);else break;if(sortCellHalfedges(),e){var d=+e[0][0],g=+e[0][1],_=+e[1][0],b=+e[1][1];clipEdges(d,g,_,b),clipCells(d,g,_,b)}this.edges=edges,this.cells=cells,beaches=circles=edges=cells=null}Diagram.prototype={constructor:Diagram,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(i){return cellHalfedgeStart(e,t[i])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,i){if(g=(l=n.halfedges).length)for(var u=n.site,l,d=-1,g,_,b=e[l[g-1]],$=b.left===u?b.right:b.left;++d<g;)_=$,b=e[l[d]],$=b.left===u?b.right:b.left,_&&$&&i<_.index&&i<$.index&&triangleArea(u,_,$)<0&&t.push([u.data,_.data,$.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var i=this,u,l=i._found||0,d=i.cells.length,g;!(g=i.cells[l]);)if(++l>=d)return null;var _=t-g.site[0],b=e-g.site[1],$=_*_+b*b;do g=i.cells[u=l],l=null,g.halfedges.forEach(function(w){var p=i.edges[w],I=p.left;if(!((I===g.site||!I)&&!(I=p.right))){var v=t-I[0],T=e-I[1],S=v*v+T*T;S<$&&($=S,l=I.index)}});while(l!==null);return i._found=u,n==null||$<=n*n?g.site:null}};function voronoi(){var t=x,e=y,n=null;function i(u){return new Diagram(u.map(function(l,d){var g=[Math.round(t(l,d,u)/epsilon)*epsilon,Math.round(e(l,d,u)/epsilon)*epsilon];return g.index=d,g.data=l,g}),n)}return i.polygons=function(u){return i(u).polygons()},i.links=function(u){return i(u).links()},i.triangles=function(u){return i(u).triangles()},i.x=function(u){return arguments.length?(t=typeof u=="function"?u:constant$1(+u),i):t},i.y=function(u){return arguments.length?(e=typeof u=="function"?u:constant$1(+u),i):e},i.extent=function(u){return arguments.length?(n=u==null?null:[[+u[0][0],+u[0][1]],[+u[1][0],+u[1][1]]],i):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},i.size=function(u){return arguments.length?(n=u==null?null:[[0,0],[+u[0],+u[1]]],i):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},i}function constant(t){return function(){return t}}function ZoomEvent(t,e,n){this.target=t,this.type=e,this.transform=n}function Transform(t,e,n){this.k=t,this.x=e,this.y=n}Transform.prototype={constructor:Transform,scale:function(t){return t===1?this:new Transform(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Transform(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform(1,0,0);transform.prototype=Transform.prototype;function transform(t){for(;!t.__zoom;)if(!(t=t.parentNode))return identity;return t.__zoom}function nopropagation(){event.stopImmediatePropagation()}function noevent(){event.preventDefault(),event.stopImmediatePropagation()}function defaultFilter(){return!event.ctrlKey&&!event.button}function defaultExtent(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(){return-event.deltaY*(event.deltaMode===1?.05:event.deltaMode?1:.002)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(t,e,n){var i=t.invertX(e[0][0])-n[0][0],u=t.invertX(e[1][0])-n[1][0],l=t.invertY(e[0][1])-n[0][1],d=t.invertY(e[1][1])-n[1][1];return t.translate(u>i?(i+u)/2:Math.min(0,i)||Math.max(0,u),d>l?(l+d)/2:Math.min(0,l)||Math.max(0,d))}function zoom(){var t=defaultFilter,e=defaultExtent,n=defaultConstrain,i=defaultWheelDelta,u=defaultTouchable,l=[0,1/0],d=[[-1/0,-1/0],[1/0,1/0]],g=250,_=interpolateZoom,b=dispatch("start","zoom","end"),$,w,p=500,I=150,v=0;function T(U){U.property("__zoom",defaultTransform).on("wheel.zoom",et).on("mousedown.zoom",nt).on("dblclick.zoom",lt).filter(u).on("touchstart.zoom",it).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",ct).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}T.transform=function(U,st,yt){var ut=U.selection?U.selection():U;ut.property("__zoom",defaultTransform),U!==ut?O(U,st,yt):ut.interrupt().each(function(){V(this,arguments).start().zoom(null,typeof st=="function"?st.apply(this,arguments):st).end()})},T.scaleBy=function(U,st,yt){T.scaleTo(U,function(){var ut=this.__zoom.k,mt=typeof st=="function"?st.apply(this,arguments):st;return ut*mt},yt)},T.scaleTo=function(U,st,yt){T.transform(U,function(){var ut=e.apply(this,arguments),mt=this.__zoom,$t=yt==null?R(ut):typeof yt=="function"?yt.apply(this,arguments):yt,wt=mt.invert($t),r=typeof st=="function"?st.apply(this,arguments):st;return n(P(S(mt,r),$t,wt),ut,d)},yt)},T.translateBy=function(U,st,yt){T.transform(U,function(){return n(this.__zoom.translate(typeof st=="function"?st.apply(this,arguments):st,typeof yt=="function"?yt.apply(this,arguments):yt),e.apply(this,arguments),d)})},T.translateTo=function(U,st,yt,ut){T.transform(U,function(){var mt=e.apply(this,arguments),$t=this.__zoom,wt=ut==null?R(mt):typeof ut=="function"?ut.apply(this,arguments):ut;return n(identity.translate(wt[0],wt[1]).scale($t.k).translate(typeof st=="function"?-st.apply(this,arguments):-st,typeof yt=="function"?-yt.apply(this,arguments):-yt),mt,d)},ut)};function S(U,st){return st=Math.max(l[0],Math.min(l[1],st)),st===U.k?U:new Transform(st,U.x,U.y)}function P(U,st,yt){var ut=st[0]-yt[0]*U.k,mt=st[1]-yt[1]*U.k;return ut===U.x&&mt===U.y?U:new Transform(U.k,ut,mt)}function R(U){return[(+U[0][0]+ +U[1][0])/2,(+U[0][1]+ +U[1][1])/2]}function O(U,st,yt){U.on("start.zoom",function(){V(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){V(this,arguments).end()}).tween("zoom",function(){var ut=this,mt=arguments,$t=V(ut,mt),wt=e.apply(ut,mt),r=yt==null?R(wt):typeof yt=="function"?yt.apply(ut,mt):yt,o=Math.max(wt[1][0]-wt[0][0],wt[1][1]-wt[0][1]),h=ut.__zoom,m=typeof st=="function"?st.apply(ut,mt):st,L=_(h.invert(r).concat(o/h.k),m.invert(r).concat(o/m.k));return function(N){if(N===1)N=m;else{var G=L(N),H=o/G[2];N=new Transform(H,r[0]-G[0]*H,r[1]-G[1]*H)}$t.zoom(null,N)}})}function V(U,st,yt){return!yt&&U.__zooming||new q(U,st)}function q(U,st){this.that=U,this.args=st,this.active=0,this.extent=e.apply(U,st),this.taps=0}q.prototype={start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(U,st){return this.mouse&&U!=="mouse"&&(this.mouse[1]=st.invert(this.mouse[0])),this.touch0&&U!=="touch"&&(this.touch0[1]=st.invert(this.touch0[0])),this.touch1&&U!=="touch"&&(this.touch1[1]=st.invert(this.touch1[0])),this.that.__zoom=st,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(U){customEvent(new ZoomEvent(T,U,this.that.__zoom),b.apply,b,[U,this.that,this.args])}};function et(){if(!t.apply(this,arguments))return;var U=V(this,arguments),st=this.__zoom,yt=Math.max(l[0],Math.min(l[1],st.k*Math.pow(2,i.apply(this,arguments)))),ut=mouse(this);if(U.wheel)(U.mouse[0][0]!==ut[0]||U.mouse[0][1]!==ut[1])&&(U.mouse[1]=st.invert(U.mouse[0]=ut)),clearTimeout(U.wheel);else{if(st.k===yt)return;U.mouse=[ut,st.invert(ut)],interrupt(this),U.start()}noevent(),U.wheel=setTimeout(mt,I),U.zoom("mouse",n(P(S(st,yt),U.mouse[0],U.mouse[1]),U.extent,d));function mt(){U.wheel=null,U.end()}}function nt(){if(w||!t.apply(this,arguments))return;var U=V(this,arguments,!0),st=select(event.view).on("mousemove.zoom",$t,!0).on("mouseup.zoom",wt,!0),yt=mouse(this),ut=event.clientX,mt=event.clientY;dragDisable(event.view),nopropagation(),U.mouse=[yt,this.__zoom.invert(yt)],interrupt(this),U.start();function $t(){if(noevent(),!U.moved){var r=event.clientX-ut,o=event.clientY-mt;U.moved=r*r+o*o>v}U.zoom("mouse",n(P(U.that.__zoom,U.mouse[0]=mouse(U.that),U.mouse[1]),U.extent,d))}function wt(){st.on("mousemove.zoom mouseup.zoom",null),yesdrag(event.view,U.moved),noevent(),U.end()}}function lt(){if(t.apply(this,arguments)){var U=this.__zoom,st=mouse(this),yt=U.invert(st),ut=U.k*(event.shiftKey?.5:2),mt=n(P(S(U,ut),st,yt),e.apply(this,arguments),d);noevent(),g>0?select(this).transition().duration(g).call(O,mt,st):select(this).call(T.transform,mt)}}function it(){if(t.apply(this,arguments)){var U=event.touches,st=U.length,yt=V(this,arguments,event.changedTouches.length===st),ut,mt,$t,wt;for(nopropagation(),mt=0;mt<st;++mt)$t=U[mt],wt=touch(this,U,$t.identifier),wt=[wt,this.__zoom.invert(wt),$t.identifier],yt.touch0?!yt.touch1&&yt.touch0[2]!==wt[2]&&(yt.touch1=wt,yt.taps=0):(yt.touch0=wt,ut=!0,yt.taps=1+!!$);$&&($=clearTimeout($)),ut&&(yt.taps<2&&($=setTimeout(function(){$=null},p)),interrupt(this),yt.start())}}function F(){if(this.__zooming){var U=V(this,arguments),st=event.changedTouches,yt=st.length,ut,mt,$t,wt;for(noevent(),$&&($=clearTimeout($)),U.taps=0,ut=0;ut<yt;++ut)mt=st[ut],$t=touch(this,st,mt.identifier),U.touch0&&U.touch0[2]===mt.identifier?U.touch0[0]=$t:U.touch1&&U.touch1[2]===mt.identifier&&(U.touch1[0]=$t);if(mt=U.that.__zoom,U.touch1){var r=U.touch0[0],o=U.touch0[1],h=U.touch1[0],m=U.touch1[1],L=(L=h[0]-r[0])*L+(L=h[1]-r[1])*L,N=(N=m[0]-o[0])*N+(N=m[1]-o[1])*N;mt=S(mt,Math.sqrt(L/N)),$t=[(r[0]+h[0])/2,(r[1]+h[1])/2],wt=[(o[0]+m[0])/2,(o[1]+m[1])/2]}else if(U.touch0)$t=U.touch0[0],wt=U.touch0[1];else return;U.zoom("touch",n(P(mt,$t,wt),U.extent,d))}}function ct(){if(this.__zooming){var U=V(this,arguments),st=event.changedTouches,yt=st.length,ut,mt;for(nopropagation(),w&&clearTimeout(w),w=setTimeout(function(){w=null},p),ut=0;ut<yt;++ut)mt=st[ut],U.touch0&&U.touch0[2]===mt.identifier?delete U.touch0:U.touch1&&U.touch1[2]===mt.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2){var $t=select(this).on("dblclick.zoom");$t&&$t.apply(this,arguments)}}}return T.wheelDelta=function(U){return arguments.length?(i=typeof U=="function"?U:constant(+U),T):i},T.filter=function(U){return arguments.length?(t=typeof U=="function"?U:constant(!!U),T):t},T.touchable=function(U){return arguments.length?(u=typeof U=="function"?U:constant(!!U),T):u},T.extent=function(U){return arguments.length?(e=typeof U=="function"?U:constant([[+U[0][0],+U[0][1]],[+U[1][0],+U[1][1]]]),T):e},T.scaleExtent=function(U){return arguments.length?(l[0]=+U[0],l[1]=+U[1],T):[l[0],l[1]]},T.translateExtent=function(U){return arguments.length?(d[0][0]=+U[0][0],d[1][0]=+U[1][0],d[0][1]=+U[0][1],d[1][1]=+U[1][1],T):[[d[0][0],d[0][1]],[d[1][0],d[1][1]]]},T.constrain=function(U){return arguments.length?(n=U,T):n},T.duration=function(U){return arguments.length?(g=+U,T):g},T.interpolate=function(U){return arguments.length?(_=U,T):_},T.on=function(){var U=b.on.apply(b,arguments);return U===b?T:U},T.clickDistance=function(U){return arguments.length?(v=(U=+U)*U,T):Math.sqrt(v)},T}const d3$1=Object.freeze(Object.defineProperty({__proto__:null,FormatSpecifier,active,arc,area,areaRadial,ascending:ascending$3,autoType,axisBottom,axisLeft,axisRight,axisTop,bisect:bisectRight,bisectLeft,bisectRight,bisector,blob,brush,brushSelection,brushX,brushY,buffer,chord,clientPoint:point$5,cluster,color,contourDensity:density,contours,create:create$1,creator,cross:cross$2,csv,csvFormat,csvFormatBody,csvFormatRow,csvFormatRows,csvFormatValue,csvParse,csvParseRows,cubehelix:cubehelix$3,curveBasis:basis,curveBasisClosed:basisClosed,curveBasisOpen:basisOpen,curveBundle:bundle,curveCardinal:cardinal,curveCardinalClosed:cardinalClosed,curveCardinalOpen:cardinalOpen,curveCatmullRom:catmullRom,curveCatmullRomClosed:catmullRomClosed,curveCatmullRomOpen:catmullRomOpen,curveLinear,curveLinearClosed:linearClosed,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural:natural,curveStep:step,curveStepAfter:stepAfter,curveStepBefore:stepBefore,customEvent,descending:descending$2,deviation,dispatch,drag,dragDisable,dragEnable:yesdrag,dsv,dsvFormat,easeBack:backInOut,easeBackIn:backIn,easeBackInOut:backInOut,easeBackOut:backOut,easeBounce:bounceOut,easeBounceIn:bounceIn,easeBounceInOut:bounceInOut,easeBounceOut:bounceOut,easeCircle:circleInOut,easeCircleIn:circleIn,easeCircleInOut:circleInOut,easeCircleOut:circleOut,easeCubic:cubicInOut,easeCubicIn:cubicIn,easeCubicInOut:cubicInOut,easeCubicOut:cubicOut,easeElastic:elasticOut,easeElasticIn:elasticIn,easeElasticInOut:elasticInOut,easeElasticOut:elasticOut,easeExp:expInOut,easeExpIn:expIn,easeExpInOut:expInOut,easeExpOut:expOut,easeLinear:linear$1,easePoly:polyInOut,easePolyIn:polyIn,easePolyInOut:polyInOut,easePolyOut:polyOut,easeQuad:quadInOut,easeQuadIn:quadIn,easeQuadInOut:quadInOut,easeQuadOut:quadOut,easeSin:sinInOut,easeSinIn:sinIn,easeSinInOut:sinInOut,easeSinOut:sinOut,entries,get event(){return event},extent:extent$1,forceCenter:center,forceCollide:collide,forceLink:link$2,forceManyBody:manyBody,forceRadial:radial,forceSimulation:simulation,forceX:x$2,forceY:y$2,get format(){return format},formatDefaultLocale:defaultLocale$1,formatLocale:formatLocale$1,get formatPrefix(){return formatPrefix},formatSpecifier,geoAlbers:albers,geoAlbersUsa:albersUsa,geoArea:area$2,geoAzimuthalEqualArea:azimuthalEqualArea,geoAzimuthalEqualAreaRaw:azimuthalEqualAreaRaw,geoAzimuthalEquidistant:azimuthalEquidistant,geoAzimuthalEquidistantRaw:azimuthalEquidistantRaw,geoBounds:bounds,geoCentroid:centroid$1,geoCircle:circle$2,geoClipAntimeridian:clipAntimeridian,geoClipCircle:clipCircle,geoClipExtent:extent,geoClipRectangle:clipRectangle,geoConicConformal:conicConformal,geoConicConformalRaw:conicConformalRaw,geoConicEqualArea:conicEqualArea,geoConicEqualAreaRaw:conicEqualAreaRaw,geoConicEquidistant:conicEquidistant,geoConicEquidistantRaw:conicEquidistantRaw,geoContains:contains$1,geoDistance:distance,geoEqualEarth:equalEarth,geoEqualEarthRaw:equalEarthRaw,geoEquirectangular:equirectangular,geoEquirectangularRaw:equirectangularRaw,geoGnomonic:gnomonic,geoGnomonicRaw:gnomonicRaw,geoGraticule:graticule,geoGraticule10:graticule10,geoIdentity:identity$4,geoInterpolate:interpolate,geoLength:length$1,geoMercator:mercator,geoMercatorRaw:mercatorRaw,geoNaturalEarth1:naturalEarth1,geoNaturalEarth1Raw:naturalEarth1Raw,geoOrthographic:orthographic,geoOrthographicRaw:orthographicRaw,geoPath:index$2,geoProjection:projection,geoProjectionMutator:projectionMutator,geoRotation:rotation,geoStereographic:stereographic,geoStereographicRaw:stereographicRaw,geoStream,geoTransform:transform$1,geoTransverseMercator:transverseMercator,geoTransverseMercatorRaw:transverseMercatorRaw,gray,hcl:hcl$2,hierarchy,histogram,hsl:hsl$2,html,image,interpolate:interpolateValue,interpolateArray:array$2,interpolateBasis:basis$2,interpolateBasisClosed:basisClosed$1,interpolateBlues:Blues,interpolateBrBG:BrBG,interpolateBuGn:BuGn,interpolateBuPu:BuPu,interpolateCividis:cividis,interpolateCool:cool,interpolateCubehelix:cubehelix$2,interpolateCubehelixDefault:cubehelix,interpolateCubehelixLong:cubehelixLong,interpolateDate:date$1,interpolateDiscrete:discrete,interpolateGnBu:GnBu,interpolateGreens:Greens,interpolateGreys:Greys,interpolateHcl:hcl$1,interpolateHclLong:hclLong,interpolateHsl:hsl$1,interpolateHslLong:hslLong,interpolateHue:hue,interpolateInferno:inferno,interpolateLab:lab,interpolateMagma:magma,interpolateNumber,interpolateNumberArray:numberArray,interpolateObject:object$1,interpolateOrRd:OrRd,interpolateOranges:Oranges,interpolatePRGn:PRGn,interpolatePiYG:PiYG,interpolatePlasma:plasma,interpolatePuBu:PuBu,interpolatePuBuGn:PuBuGn,interpolatePuOr:PuOr,interpolatePuRd:PuRd,interpolatePurples:Purples,interpolateRainbow:rainbow,interpolateRdBu:RdBu,interpolateRdGy:RdGy,interpolateRdPu:RdPu,interpolateRdYlBu:RdYlBu,interpolateRdYlGn:RdYlGn,interpolateReds:Reds,interpolateRgb,interpolateRgbBasis:rgbBasis,interpolateRgbBasisClosed:rgbBasisClosed,interpolateRound,interpolateSinebow:sinebow,interpolateSpectral:Spectral,interpolateString,interpolateTransformCss,interpolateTransformSvg,interpolateTurbo:turbo,interpolateViridis:viridis,interpolateWarm:warm,interpolateYlGn:YlGn,interpolateYlGnBu:YlGnBu,interpolateYlOrBr:YlOrBr,interpolateYlOrRd:YlOrRd,interpolateZoom,interrupt,interval,isoFormat:formatIso,isoParse:parseIso,json,keys,lab:lab$1,lch,line,lineRadial:lineRadial$1,linkHorizontal,linkRadial,linkVertical,local:local$1,map:map$2,matcher,max:max$2,mean,median,merge,min:min$1,mouse,namespace,namespaces,nest,now,pack:index$1,packEnclose:enclose,packSiblings:siblings,pairs,partition,path,permute,pie,piecewise,pointRadial,polygonArea:area$1,polygonCentroid:centroid,polygonContains:contains,polygonHull:hull,polygonLength:length,precisionFixed,precisionPrefix,precisionRound,quadtree,quantile:threshold$1,quantize:quantize$1,radialArea:areaRadial,radialLine:lineRadial$1,randomBates:bates,randomExponential:exponential,randomIrwinHall:irwinHall,randomLogNormal:logNormal,randomNormal:normal,randomUniform:uniform,range:sequence,rgb,ribbon,scaleBand:band,scaleDiverging:diverging$1,scaleDivergingLog:divergingLog,scaleDivergingPow:divergingPow,scaleDivergingSqrt:divergingSqrt,scaleDivergingSymlog:divergingSymlog,scaleIdentity:identity$2,scaleImplicit:implicit,scaleLinear:linear,scaleLog:log,scaleOrdinal:ordinal,scalePoint:point$4,scalePow:pow,scaleQuantile:quantile,scaleQuantize:quantize,scaleSequential:sequential,scaleSequentialLog:sequentialLog,scaleSequentialPow:sequentialPow,scaleSequentialQuantile:sequentialQuantile,scaleSequentialSqrt:sequentialSqrt,scaleSequentialSymlog:sequentialSymlog,scaleSqrt:sqrt$1,scaleSymlog:symlog,scaleThreshold:threshold,scaleTime:time,scaleUtc:utcTime,scan,schemeAccent:Accent,schemeBlues:scheme$5,schemeBrBG:scheme$q,schemeBuGn:scheme$h,schemeBuPu:scheme$g,schemeCategory10:category10,schemeDark2:Dark2,schemeGnBu:scheme$f,schemeGreens:scheme$4,schemeGreys:scheme$3,schemeOrRd:scheme$e,schemeOranges:scheme,schemePRGn:scheme$p,schemePaired:Paired,schemePastel1:Pastel1,schemePastel2:Pastel2,schemePiYG:scheme$o,schemePuBu:scheme$c,schemePuBuGn:scheme$d,schemePuOr:scheme$n,schemePuRd:scheme$b,schemePurples:scheme$2,schemeRdBu:scheme$m,schemeRdGy:scheme$l,schemeRdPu:scheme$a,schemeRdYlBu:scheme$k,schemeRdYlGn:scheme$j,schemeReds:scheme$1,schemeSet1:Set1,schemeSet2:Set2,schemeSet3:Set3,schemeSpectral:scheme$i,schemeTableau10:Tableau10,schemeYlGn:scheme$8,schemeYlGnBu:scheme$9,schemeYlOrBr:scheme$7,schemeYlOrRd:scheme$6,select,selectAll,selection,selector,selectorAll,set,shuffle:shuffle$1,stack,stackOffsetDiverging:diverging,stackOffsetExpand:expand,stackOffsetNone:none$1,stackOffsetSilhouette:silhouette,stackOffsetWiggle:wiggle,stackOrderAppearance:appearance,stackOrderAscending:ascending,stackOrderDescending:descending,stackOrderInsideOut:insideOut,stackOrderNone:none,stackOrderReverse:reverse,stratify,style:styleValue,sum:sum$2,svg,symbol,symbolCircle:circle,symbolCross:cross,symbolDiamond:diamond,symbolSquare:square,symbolStar:star,symbolTriangle:triangle,symbolWye:wye,symbols,text,thresholdFreedmanDiaconis:freedmanDiaconis,thresholdScott:scott,thresholdSturges,tickFormat,tickIncrement,tickStep,ticks,timeDay:day,timeDays:days,get timeFormat(){return timeFormat},timeFormatDefaultLocale:defaultLocale,timeFormatLocale:formatLocale,timeFriday:friday,timeFridays:fridays,timeHour:hour,timeHours:hours,timeInterval:newInterval,timeMillisecond:millisecond,timeMilliseconds:milliseconds,timeMinute:minute,timeMinutes:minutes,timeMonday:monday,timeMondays:mondays,timeMonth:month,timeMonths:months,get timeParse(){return timeParse},timeSaturday:saturday,timeSaturdays:saturdays,timeSecond:second,timeSeconds:seconds,timeSunday:sunday,timeSundays:sundays,timeThursday:thursday,timeThursdays:thursdays,timeTuesday:tuesday,timeTuesdays:tuesdays,timeWednesday:wednesday,timeWednesdays:wednesdays,timeWeek:sunday,timeWeeks:sundays,timeYear:year,timeYears:years,timeout,timer,timerFlush,touch,touches,transition,transpose,tree,treemap:index,treemapBinary:binary,treemapDice,treemapResquarify:resquarify,treemapSlice,treemapSliceDice:sliceDice,treemapSquarify:squarify,tsv,tsvFormat,tsvFormatBody,tsvFormatRow,tsvFormatRows,tsvFormatValue,tsvParse,tsvParseRows,utcDay,utcDays,get utcFormat(){return utcFormat},utcFriday,utcFridays,utcHour,utcHours,utcMillisecond:millisecond,utcMilliseconds:milliseconds,utcMinute,utcMinutes,utcMonday,utcMondays,utcMonth,utcMonths,get utcParse(){return utcParse},utcSaturday,utcSaturdays,utcSecond:second,utcSeconds:seconds,utcSunday,utcSundays,utcThursday,utcThursdays,utcTuesday,utcTuesdays,utcWednesday,utcWednesdays,utcWeek:utcSunday,utcWeeks:utcSundays,utcYear,utcYears,values,variance,version,voronoi,window:defaultView,xml,zip,zoom,zoomIdentity:identity,zoomTransform:transform},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(d3$1);/* @license C3.js v0.7.20 | (c) C3 Team and other contributors | http://c3js.org/ */var c3$2=c3$3.exports,hasRequiredC3;function requireC3(){return hasRequiredC3||(hasRequiredC3=1,(function(t,e){(function(n,i){t.exports=i()})(c3$2,(function(){function n(r){var o=this;o.d3=window.d3?window.d3:typeof commonjsRequire!="undefined"?require$$0:void 0,o.api=r,o.config=o.getDefaultConfig(),o.data={},o.cache={},o.axes={}}function i(r){this.internal=new n(this),this.internal.loadConfig(r),this.internal.beforeInit(r),this.internal.init(),this.internal.afterInit(r),(function o(h,m,L){Object.keys(h).forEach(function(N){m[N]=h[N].bind(L),Object.keys(h[N]).length>0&&o(h[N],m[N],L)})})(i.prototype,this,this)}var u=function(r){return Math.ceil(r)+.5},l=function(r){return Math.ceil(r/10)*10},d=function(r){return r[1]-r[0]},g=function(r,o,h){return p(r[o])?r[o]:h},_=function(r){var o=b(r),h=[r.pathSegList.getItem(0),r.pathSegList.getItem(1)],m=h[0].x,L=Math.min(h[0].y,h[1].y);return{x:m,y:L,width:o.width,height:o.height}},b=function(r){try{return r.getBBox()}catch(o){return{x:0,y:0,width:0,height:0}}},$=function(r,o){var h=!1;return Object.keys(r).forEach(function(m){r[m]===o&&(h=!0)}),h},w=function(r){return Array.isArray(r)},p=function(r){return typeof r!="undefined"},I=function(r){return typeof r=="undefined"||r===null||S(r)&&r.length===0||typeof r=="object"&&Object.keys(r).length===0},v=function(r){return typeof r=="function"},T=function(r){return typeof r=="number"},S=function(r){return typeof r=="string"},P=function(r){return typeof r=="undefined"},R=function(r){return r||r===0},O=function(r){return!I(r)},V=function(r){return typeof r=="string"?r.replace(/</g,"&lt;").replace(/>/g,"&gt;"):r},q=function(r){return Array.isArray(r)?[].concat.apply([],r):[]},et=function(r,o,h){var m=o.x-h,L=o.x+o.width+h,N=o.y+o.height+h,G=o.y-h;return m<r[0]&&r[0]<L&&G<r[1]&&r[1]<N},nt=function(r){typeof r=="undefined"&&(r=window.navigator.userAgent);var o=r.indexOf("MSIE ");return o>0?parseInt(r.substring(o+5,r.indexOf(".",o)),10):(o=r.indexOf("Trident/"),o>0?(o=r.indexOf("rv:"),parseInt(r.substring(o+3,r.indexOf(".",o)),10)):!1)},lt=function(r){var o=nt();return typeof r=="undefined"?!!o:r===o};function it(r,o){var h=this;h.component=r,h.params=o||{},h.d3=r.d3,h.scale=h.d3.scaleLinear(),h.range,h.orient="bottom",h.innerTickSize=6,h.outerTickSize=this.params.withOuterTick?6:0,h.tickPadding=3,h.tickValues=null,h.tickFormat,h.tickArguments,h.tickOffset=0,h.tickCulling=!0,h.tickCentered,h.tickTextCharSize,h.tickTextRotate=h.params.tickTextRotate,h.tickLength,h.axis=h.generateAxis()}it.prototype.axisX=function(r,o,h){r.attr("transform",function(m){return"translate("+Math.ceil(o(m)+h)+", 0)"})},it.prototype.axisY=function(r,o){r.attr("transform",function(h){return"translate(0,"+Math.ceil(o(h))+")"})},it.prototype.scaleExtent=function(r){var o=r[0],h=r[r.length-1];return o<h?[o,h]:[h,o]},it.prototype.generateTicks=function(r){var o=this,h,m,L=[];if(r.ticks)return r.ticks.apply(r,o.tickArguments);for(m=r.domain(),h=Math.ceil(m[0]);h<m[1];h++)L.push(h);return L.length>0&&L[0]>0&&L.unshift(L[0]-(L[1]-L[0])),L},it.prototype.copyScale=function(){var r=this,o=r.scale.copy(),h;return r.params.isCategory&&(h=r.scale.domain(),o.domain([h[0],h[1]-1])),o},it.prototype.textFormatted=function(r){var o=this,h=o.tickFormat?o.tickFormat(r):r;return typeof h!="undefined"?h:""},it.prototype.updateRange=function(){var r=this;return r.range=r.scale.rangeExtent?r.scale.rangeExtent():r.scaleExtent(r.scale.range()),r.range},it.prototype.updateTickTextCharSize=function(r){var o=this;if(o.tickTextCharSize)return o.tickTextCharSize;var h={h:11.5,w:5.5};return r.select("text").text(function(m){return o.textFormatted(m)}).each(function(m){var L=b(this),N=o.textFormatted(m),G=L.height,H=N?L.width/N.length:void 0;G&&H&&(h.h=G,h.w=H)}).text(""),o.tickTextCharSize=h,h},it.prototype.isVertical=function(){return this.orient==="left"||this.orient==="right"},it.prototype.tspanData=function(r,o,h){var m=this,L=m.params.tickMultiline?m.splitTickText(r,h):[].concat(m.textFormatted(r));return m.params.tickMultiline&&m.params.tickMultilineMax>0&&(L=m.ellipsify(L,m.params.tickMultilineMax)),L.map(function(N){return{index:o,splitted:N,length:L.length}})},it.prototype.splitTickText=function(r,o){var h=this,m=h.textFormatted(r),L=h.params.tickWidth,N,G,H,W=[];if(Object.prototype.toString.call(m)==="[object Array]")return m;(!L||L<=0)&&(L=h.isVertical()?95:h.params.isCategory?Math.ceil(o(1)-o(0))-12:110);function z(Q,Z){G=void 0;for(var ot=1;ot<Z.length;ot++)if(Z.charAt(ot)===" "&&(G=ot),N=Z.substr(0,ot+1),H=h.tickTextCharSize.w*N.length,L<H)return z(Q.concat(Z.substr(0,G||ot)),Z.slice(G?G+1:ot));return Q.concat(Z)}return z(W,m+"")},it.prototype.ellipsify=function(r,o){if(r.length<=o)return r;for(var h=r.slice(0,o),m=3,L=o-1;L>=0;L--){var N=h[L].length;if(h[L]=h[L].substr(0,N-m).padEnd(N,"."),m-=N,m<=0)break}return h},it.prototype.updateTickLength=function(){var r=this;r.tickLength=Math.max(r.innerTickSize,0)+r.tickPadding},it.prototype.lineY2=function(r){var o=this,h=o.scale(r)+(o.tickCentered?0:o.tickOffset);return o.range[0]<h&&h<o.range[1]?o.innerTickSize:0},it.prototype.textY=function(){var r=this,o=r.tickTextRotate;return o?11.5-2.5*(o/15)*(o>0?1:-1):r.tickLength},it.prototype.textTransform=function(){var r=this,o=r.tickTextRotate;return o?"rotate("+o+")":""},it.prototype.textTextAnchor=function(){var r=this,o=r.tickTextRotate;return o?o>0?"start":"end":"middle"},it.prototype.tspanDx=function(){var r=this,o=r.tickTextRotate;return o?8*Math.sin(Math.PI*(o/180)):0},it.prototype.tspanDy=function(r,o){var h=this,m=h.tickTextCharSize.h;return o===0&&(h.isVertical()?m=-((r.length-1)*(h.tickTextCharSize.h/2)-3):m=".71em"),m},it.prototype.generateAxis=function(){var r=this,o=r.d3,h=r.params;function m(L,N){var G;return L.each(function(){var H=m.g=o.select(this),W=this.__chart__||r.scale,z=this.__chart__=r.copyScale(),Q=r.tickValues?r.tickValues:r.generateTicks(z),Z=H.selectAll(".tick").data(Q,z),ot=Z.enter().insert("g",".domain").attr("class","tick").style("opacity",1e-6),J=Z.exit().remove(),ht=Z.merge(ot),ft,vt,xt;h.isCategory?(r.tickOffset=Math.ceil((z(1)-z(0))/2),vt=r.tickCentered?0:r.tickOffset,xt=r.tickCentered?r.tickOffset:0):r.tickOffset=vt=0,r.updateRange(),r.updateTickLength(),r.updateTickTextCharSize(H.select(".tick"));var Tt=ht.select("line").merge(ot.append("line")),St=ht.select("text").merge(ot.append("text")),Pt=ht.selectAll("text").selectAll("tspan").data(function(gt,bt){return r.tspanData(gt,bt,z)}),Lt=Pt.enter().append("tspan"),tt=Lt.merge(Pt).text(function(gt){return gt.splitted});Pt.exit().remove();var rt=H.selectAll(".domain").data([0]),at=rt.enter().append("path").merge(rt).attr("class","domain");switch(r.orient){case"bottom":{ft=r.axisX,Tt.attr("x1",vt).attr("x2",vt).attr("y2",function(gt,bt){return r.lineY2(gt,bt)}),St.attr("x",0).attr("y",function(gt,bt){return r.textY(gt,bt)}).attr("transform",function(gt,bt){return r.textTransform(gt,bt)}).style("text-anchor",function(gt,bt){return r.textTextAnchor(gt,bt)}),tt.attr("x",0).attr("dy",function(gt,bt){return r.tspanDy(gt,bt)}).attr("dx",function(gt,bt){return r.tspanDx(gt,bt)}),at.attr("d","M"+r.range[0]+","+r.outerTickSize+"V0H"+r.range[1]+"V"+r.outerTickSize);break}case"top":{ft=r.axisX,Tt.attr("x1",vt).attr("x2",vt).attr("y2",function(gt,bt){return-1*r.lineY2(gt,bt)}),St.attr("x",0).attr("y",function(gt,bt){return-1*r.textY(gt,bt)-(h.isCategory?2:r.tickLength-2)}).attr("transform",function(gt,bt){return r.textTransform(gt,bt)}).style("text-anchor",function(gt,bt){return r.textTextAnchor(gt,bt)}),tt.attr("x",0).attr("dy",function(gt,bt){return r.tspanDy(gt,bt)}).attr("dx",function(gt,bt){return r.tspanDx(gt,bt)}),at.attr("d","M"+r.range[0]+","+-r.outerTickSize+"V0H"+r.range[1]+"V"+-r.outerTickSize);break}case"left":{ft=r.axisY,Tt.attr("x2",-r.innerTickSize).attr("y1",xt).attr("y2",xt),St.attr("x",-r.tickLength).attr("y",r.tickOffset).style("text-anchor","end"),tt.attr("x",-r.tickLength).attr("dy",function(gt,bt){return r.tspanDy(gt,bt)}),at.attr("d","M"+-r.outerTickSize+","+r.range[0]+"H0V"+r.range[1]+"H"+-r.outerTickSize);break}case"right":{ft=r.axisY,Tt.attr("x2",r.innerTickSize).attr("y1",xt).attr("y2",xt),St.attr("x",r.tickLength).attr("y",r.tickOffset).style("text-anchor","start"),tt.attr("x",r.tickLength).attr("dy",function(gt,bt){return r.tspanDy(gt,bt)}),at.attr("d","M"+r.outerTickSize+","+r.range[0]+"H0V"+r.range[1]+"H"+r.outerTickSize);break}}if(z.rangeBand){var dt=z,pt=dt.rangeBand()/2;W=z=function(gt){return dt(gt)+pt}}else W.rangeBand?W=z:J.call(ft,z,r.tickOffset);ot.call(ft,W,r.tickOffset),G=(N?ht.transition(N):ht).style("opacity",1).call(ft,z,r.tickOffset)}),G}return m.scale=function(L){return arguments.length?(r.scale=L,m):r.scale},m.orient=function(L){return arguments.length?(r.orient=L in{top:1,right:1,bottom:1,left:1}?L+"":"bottom",m):r.orient},m.tickFormat=function(L){return arguments.length?(r.tickFormat=L,m):r.tickFormat},m.tickCentered=function(L){return arguments.length?(r.tickCentered=L,m):r.tickCentered},m.tickOffset=function(){return r.tickOffset},m.tickInterval=function(){var L,N;return h.isCategory?L=r.tickOffset*2:(N=m.g.select("path.domain").node().getTotalLength()-r.outerTickSize*2,L=N/m.g.selectAll("line").size()),L===1/0?0:L},m.ticks=function(){return arguments.length?(r.tickArguments=arguments,m):r.tickArguments},m.tickCulling=function(L){return arguments.length?(r.tickCulling=L,m):r.tickCulling},m.tickValues=function(L){if(typeof L=="function")r.tickValues=function(){return L(r.scale.domain())};else{if(!arguments.length)return r.tickValues;r.tickValues=L}return m},m};var F={target:"c3-target",chart:"c3-chart",chartLine:"c3-chart-line",chartLines:"c3-chart-lines",chartBar:"c3-chart-bar",chartBars:"c3-chart-bars",chartText:"c3-chart-text",chartTexts:"c3-chart-texts",chartArc:"c3-chart-arc",chartArcs:"c3-chart-arcs",chartArcsTitle:"c3-chart-arcs-title",chartArcsBackground:"c3-chart-arcs-background",chartArcsGaugeUnit:"c3-chart-arcs-gauge-unit",chartArcsGaugeMax:"c3-chart-arcs-gauge-max",chartArcsGaugeMin:"c3-chart-arcs-gauge-min",selectedCircle:"c3-selected-circle",selectedCircles:"c3-selected-circles",eventRect:"c3-event-rect",eventRects:"c3-event-rects",eventRectsSingle:"c3-event-rects-single",eventRectsMultiple:"c3-event-rects-multiple",zoomRect:"c3-zoom-rect",brush:"c3-brush",dragZoom:"c3-drag-zoom",focused:"c3-focused",defocused:"c3-defocused",region:"c3-region",regions:"c3-regions",title:"c3-title",tooltipContainer:"c3-tooltip-container",tooltip:"c3-tooltip",tooltipName:"c3-tooltip-name",shape:"c3-shape",shapes:"c3-shapes",line:"c3-line",lines:"c3-lines",bar:"c3-bar",bars:"c3-bars",circle:"c3-circle",circles:"c3-circles",arc:"c3-arc",arcLabelLine:"c3-arc-label-line",arcs:"c3-arcs",area:"c3-area",areas:"c3-areas",empty:"c3-empty",text:"c3-text",texts:"c3-texts",gaugeValue:"c3-gauge-value",grid:"c3-grid",gridLines:"c3-grid-lines",xgrid:"c3-xgrid",xgrids:"c3-xgrids",xgridLine:"c3-xgrid-line",xgridLines:"c3-xgrid-lines",xgridFocus:"c3-xgrid-focus",ygrid:"c3-ygrid",ygrids:"c3-ygrids",ygridLine:"c3-ygrid-line",ygridLines:"c3-ygrid-lines",colorScale:"c3-colorscale",stanfordElements:"c3-stanford-elements",stanfordLine:"c3-stanford-line",stanfordLines:"c3-stanford-lines",stanfordRegion:"c3-stanford-region",stanfordRegions:"c3-stanford-regions",stanfordText:"c3-stanford-text",stanfordTexts:"c3-stanford-texts",axis:"c3-axis",axisX:"c3-axis-x",axisXLabel:"c3-axis-x-label",axisY:"c3-axis-y",axisYLabel:"c3-axis-y-label",axisY2:"c3-axis-y2",axisY2Label:"c3-axis-y2-label",legendBackground:"c3-legend-background",legendItem:"c3-legend-item",legendItemEvent:"c3-legend-item-event",legendItemTile:"c3-legend-item-tile",legendItemHidden:"c3-legend-item-hidden",legendItemFocused:"c3-legend-item-focused",dragarea:"c3-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"},ct=(function(){function r(o){this.owner=o,this.d3=o.d3,this.internal=it}return r})(),U=ct;U.prototype.init=function(){var o=this.owner,h=o.config,m=o.main;o.axes.x=m.append("g").attr("class",F.axis+" "+F.axisX).attr("clip-path",h.axis_x_inner?"":o.clipPathForXAxis).attr("transform",o.getTranslate("x")).style("visibility",h.axis_x_show?"visible":"hidden"),o.axes.x.append("text").attr("class",F.axisXLabel).attr("transform",h.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),o.axes.y=m.append("g").attr("class",F.axis+" "+F.axisY).attr("clip-path",h.axis_y_inner?"":o.clipPathForYAxis).attr("transform",o.getTranslate("y")).style("visibility",h.axis_y_show?"visible":"hidden"),o.axes.y.append("text").attr("class",F.axisYLabel).attr("transform",h.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),o.axes.y2=m.append("g").attr("class",F.axis+" "+F.axisY2).attr("transform",o.getTranslate("y2")).style("visibility",h.axis_y2_show?"visible":"hidden"),o.axes.y2.append("text").attr("class",F.axisY2Label).attr("transform",h.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},U.prototype.getXAxis=function(o,h,m,L,N,G,H){var W=this.owner,z=W.config,Q={isCategory:W.isCategorized(),withOuterTick:N,tickMultiline:z.axis_x_tick_multiline,tickMultilineMax:z.axis_x_tick_multiline?Number(z.axis_x_tick_multilineMax):0,tickWidth:z.axis_x_tick_width,tickTextRotate:H?0:z.axis_x_tick_rotate,withoutTransition:G},Z=new this.internal(this,Q).axis.scale(o).orient(h);return W.isTimeSeries()&&L&&typeof L!="function"&&(L=L.map(function(ot){return W.parseDate(ot)})),Z.tickFormat(m).tickValues(L),W.isCategorized()&&(Z.tickCentered(z.axis_x_tick_centered),I(z.axis_x_tick_culling)&&(z.axis_x_tick_culling=!1)),Z},U.prototype.updateXAxisTickValues=function(o,h){var m=this.owner,L=m.config,N;return(L.axis_x_tick_fit||L.axis_x_tick_count)&&(N=this.generateTickValues(m.mapTargetsToUniqueXs(o),L.axis_x_tick_count,m.isTimeSeries())),h?h.tickValues(N):(m.xAxis.tickValues(N),m.subXAxis.tickValues(N)),N},U.prototype.getYAxis=function(o,h,m,L,N,G,H){var W=this.owner,z=W.config,Q=z["axis_"+o+"_tick_format"];!Q&&W.isAxisNormalized(o)&&(Q=function(ot){return ot+"%"});var Z=new this.internal(this,{withOuterTick:N,withoutTransition:G,tickTextRotate:H?0:z.axis_y_tick_rotate}).axis.scale(h).orient(m);return Q&&Z.tickFormat(Q),W.isTimeSeriesY()?Z.ticks(z.axis_y_tick_time_type,z.axis_y_tick_time_interval):Z.tickValues(L),Z},U.prototype.getId=function(o){var h=this.owner.config;return o in h.data_axes?h.data_axes[o]:"y"},U.prototype.getXAxisTickFormat=function(){var o=this.owner,h=o.config,m=o.isTimeSeries()?o.defaultAxisTimeFormat:o.isCategorized()?o.categoryName:function(L){return L};return h.axis_x_tick_format&&(v(h.axis_x_tick_format)?m=h.axis_x_tick_format:o.isTimeSeries()&&(m=function(L){return L?o.axisTimeFormat(h.axis_x_tick_format)(L):""})),v(m)?function(L){return m.call(o,L)}:m},U.prototype.getTickValues=function(o,h){return o||(h?h.tickValues():void 0)},U.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},U.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},U.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},U.prototype.getLabelOptionByAxisId=function(o){var h=this.owner,m=h.config,L;return o==="y"?L=m.axis_y_label:o==="y2"?L=m.axis_y2_label:o==="x"&&(L=m.axis_x_label),L},U.prototype.getLabelText=function(o){var h=this.getLabelOptionByAxisId(o);return S(h)?h:h?h.text:null},U.prototype.setLabelText=function(o,h){var m=this.owner,L=m.config,N=this.getLabelOptionByAxisId(o);S(N)?o==="y"?L.axis_y_label=h:o==="y2"?L.axis_y2_label=h:o==="x"&&(L.axis_x_label=h):N&&(N.text=h)},U.prototype.getLabelPosition=function(o,h){var m=this.getLabelOptionByAxisId(o),L=m&&typeof m=="object"&&m.position?m.position:h;return{isInner:L.indexOf("inner")>=0,isOuter:L.indexOf("outer")>=0,isLeft:L.indexOf("left")>=0,isCenter:L.indexOf("center")>=0,isRight:L.indexOf("right")>=0,isTop:L.indexOf("top")>=0,isMiddle:L.indexOf("middle")>=0,isBottom:L.indexOf("bottom")>=0}},U.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},U.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},U.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},U.prototype.getLabelPositionById=function(o){return o==="y2"?this.getY2AxisLabelPosition():o==="y"?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},U.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},U.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},U.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},U.prototype.xForAxisLabel=function(o,h){var m=this.owner;return o?h.isLeft?0:h.isCenter?m.width/2:m.width:h.isBottom?-m.height:h.isMiddle?-m.height/2:0},U.prototype.dxForAxisLabel=function(o,h){return o?h.isLeft?"0.5em":h.isRight?"-0.5em":"0":h.isTop?"-0.5em":h.isBottom?"0.5em":"0"},U.prototype.textAnchorForAxisLabel=function(o,h){return o?h.isLeft?"start":h.isCenter?"middle":"end":h.isBottom?"start":h.isMiddle?"middle":"end"},U.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},U.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},U.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},U.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},U.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},U.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},U.prototype.dyForXAxisLabel=function(){var o=this.owner,h=o.config,m=this.getXAxisLabelPosition();return h.axis_rotated?m.isInner?"1.2em":-25-(o.config.axis_x_inner?0:this.getMaxTickWidth("x")):m.isInner?"-0.5em":o.getHorizontalAxisHeight("x")-10},U.prototype.dyForYAxisLabel=function(){var o=this.owner,h=this.getYAxisLabelPosition();return o.config.axis_rotated?h.isInner?"-0.5em":"3em":h.isInner?"1.2em":-10-(o.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},U.prototype.dyForY2AxisLabel=function(){var o=this.owner,h=this.getY2AxisLabelPosition();return o.config.axis_rotated?h.isInner?"1.2em":"-2.2em":h.isInner?"-0.5em":15+(o.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},U.prototype.textAnchorForXAxisLabel=function(){var o=this.owner;return this.textAnchorForAxisLabel(!o.config.axis_rotated,this.getXAxisLabelPosition())},U.prototype.textAnchorForYAxisLabel=function(){var o=this.owner;return this.textAnchorForAxisLabel(o.config.axis_rotated,this.getYAxisLabelPosition())},U.prototype.textAnchorForY2AxisLabel=function(){var o=this.owner;return this.textAnchorForAxisLabel(o.config.axis_rotated,this.getY2AxisLabelPosition())},U.prototype.getMaxTickWidth=function(o,h){var m=this.owner,L=0,N,G,H,W,z;return h&&m.currentMaxTickWidths[o]||(m.svg&&(N=m.filterTargetsToShow(m.data.targets),o==="y"?(G=m.y.copy().domain(m.getYDomain(N,"y")),H=this.getYAxis(o,G,m.yOrient,m.yAxisTickValues,!1,!0,!0)):o==="y2"?(G=m.y2.copy().domain(m.getYDomain(N,"y2")),H=this.getYAxis(o,G,m.y2Orient,m.y2AxisTickValues,!1,!0,!0)):(G=m.x.copy().domain(m.getXDomain(N)),H=this.getXAxis(G,m.xOrient,m.xAxisTickFormat,m.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(N,H)),W=m.d3.select("body").append("div").classed("c3",!0),z=W.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),z.append("g").call(H).each(function(){m.d3.select(this).selectAll("text").each(function(){var Q=b(this);L<Q.width&&(L=Q.width)}),W.remove()})),m.currentMaxTickWidths[o]=L<=0?m.currentMaxTickWidths[o]:L),m.currentMaxTickWidths[o]},U.prototype.updateLabels=function(o){var h=this.owner,m=h.main.select("."+F.axisX+" ."+F.axisXLabel),L=h.main.select("."+F.axisY+" ."+F.axisYLabel),N=h.main.select("."+F.axisY2+" ."+F.axisY2Label);(o?m.transition():m).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(o?L.transition():L).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(o?N.transition():N).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this))},U.prototype.getPadding=function(o,h,m,L){var N=typeof o=="number"?o:o[h];return R(N)?o.unit==="ratio"?o[h]*L:this.convertPixelsToAxisPadding(N,L):m},U.prototype.convertPixelsToAxisPadding=function(o,h){var m=this.owner,L=m.config.axis_rotated?m.width:m.height;return h*(o/L)},U.prototype.generateTickValues=function(o,h,m){var L=o,N,G,H,W,z,Q,Z;if(h){if(N=v(h)?h():h,N===1)L=[o[0]];else if(N===2)L=[o[0],o[o.length-1]];else if(N>2){for(W=N-2,G=o[0],H=o[o.length-1],z=(H-G)/(W+1),L=[G],Q=0;Q<W;Q++)Z=+G+z*(Q+1),L.push(m?new Date(Z):Z);L.push(H)}}return m||(L=L.sort(function(ot,J){return ot-J})),L},U.prototype.generateTransitions=function(o){var h=this.owner,m=h.axes;return{axisX:o?m.x.transition().duration(o):m.x,axisY:o?m.y.transition().duration(o):m.y,axisY2:o?m.y2.transition().duration(o):m.y2,axisSubX:o?m.subx.transition().duration(o):m.subx}},U.prototype.redraw=function(o,h){var m=this.owner,L=o?m.d3.transition().duration(o):null;m.axes.x.style("opacity",h?0:1).call(m.xAxis,L),m.axes.y.style("opacity",h?0:1).call(m.yAxis,L),m.axes.y2.style("opacity",h?0:1).call(m.y2Axis,L),m.axes.subx.style("opacity",h?0:1).call(m.subXAxis,L)};var st={version:"0.7.20",chart:{fn:i.prototype,internal:{fn:n.prototype,axis:{fn:ct.prototype,internal:{fn:it.prototype}}}},generate:function(r){return new i(r)}};n.prototype.beforeInit=function(){},n.prototype.afterInit=function(){},n.prototype.init=function(){var r=this,o=r.config;if(r.initParams(),o.data_url)r.convertUrlToData(o.data_url,o.data_mimeType,o.data_headers,o.data_keys,r.initWithData);else if(o.data_json)r.initWithData(r.convertJsonToData(o.data_json,o.data_keys));else if(o.data_rows)r.initWithData(r.convertRowsToData(o.data_rows));else if(o.data_columns)r.initWithData(r.convertColumnsToData(o.data_columns));else throw Error("url or json or rows or columns is required.")},n.prototype.initParams=function(){var r=this,o=r.d3,h=r.config;r.clipId="c3-"+new Date().valueOf()+"-clip",r.clipIdForXAxis=r.clipId+"-xaxis",r.clipIdForYAxis=r.clipId+"-yaxis",r.clipIdForGrid=r.clipId+"-grid",r.clipIdForSubchart=r.clipId+"-subchart",r.clipPath=r.getClipPath(r.clipId),r.clipPathForXAxis=r.getClipPath(r.clipIdForXAxis),r.clipPathForYAxis=r.getClipPath(r.clipIdForYAxis),r.clipPathForGrid=r.getClipPath(r.clipIdForGrid),r.clipPathForSubchart=r.getClipPath(r.clipIdForSubchart),r.dragStart=null,r.dragging=!1,r.flowing=!1,r.cancelClick=!1,r.mouseover=void 0,r.transiting=!1,r.color=r.generateColor(),r.levelColor=r.generateLevelColor(),r.dataTimeParse=(h.data_xLocaltime?o.timeParse:o.utcParse)(r.config.data_xFormat),r.axisTimeFormat=h.axis_x_localtime?o.timeFormat:o.utcFormat,r.defaultAxisTimeFormat=function(m){return m.getMilliseconds()?o.timeFormat(".%L")(m):m.getSeconds()?o.timeFormat(":%S")(m):m.getMinutes()?o.timeFormat("%I:%M")(m):m.getHours()?o.timeFormat("%I %p")(m):m.getDay()&&m.getDate()!==1||m.getDate()!==1||m.getMonth()?o.timeFormat("%-m/%-d")(m):o.timeFormat("%Y/%-m/%-d")(m)},r.hiddenTargetIds=[],r.hiddenLegendIds=[],r.focusedTargetIds=[],r.defocusedTargetIds=[],r.xOrient=h.axis_rotated?h.axis_x_inner?"right":"left":h.axis_x_inner?"top":"bottom",r.yOrient=h.axis_rotated?h.axis_y_inner?"top":"bottom":h.axis_y_inner?"right":"left",r.y2Orient=h.axis_rotated?h.axis_y2_inner?"bottom":"top":h.axis_y2_inner?"left":"right",r.subXOrient=h.axis_rotated?"left":"bottom",r.isLegendRight=h.legend_position==="right",r.isLegendInset=h.legend_position==="inset",r.isLegendTop=h.legend_inset_anchor==="top-left"||h.legend_inset_anchor==="top-right",r.isLegendLeft=h.legend_inset_anchor==="top-left"||h.legend_inset_anchor==="bottom-left",r.legendStep=0,r.legendItemWidth=0,r.legendItemHeight=0,r.currentMaxTickWidths={x:0,y:0,y2:0},r.rotated_padding_left=30,r.rotated_padding_right=h.axis_rotated&&!h.axis_x_show?0:30,r.rotated_padding_top=5,r.withoutFadeIn={},r.intervalForObserveInserted=void 0,r.axes.subx=o.selectAll([])},n.prototype.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText()},n.prototype.initWithData=function(r){var o=this,h=o.d3,m=o.config,L,N,G=!0;o.axis=new ct(o),m.bindto?typeof m.bindto.node=="function"?o.selectChart=m.bindto:o.selectChart=h.select(m.bindto):o.selectChart=h.selectAll([]),o.selectChart.empty()&&(o.selectChart=h.select(document.createElement("div")).style("opacity",0),o.observeInserted(o.selectChart),G=!1),o.selectChart.html("").classed("c3",!0),o.data.xs={},o.data.targets=o.convertDataToTargets(r),m.data_filter&&(o.data.targets=o.data.targets.filter(m.data_filter)),m.data_hide&&o.addHiddenTargetIds(m.data_hide===!0?o.mapToIds(o.data.targets):m.data_hide),m.legend_hide&&o.addHiddenLegendIds(m.legend_hide===!0?o.mapToIds(o.data.targets):m.legend_hide),o.isStanfordGraphType()&&o.initStanfordData(),o.updateSizes(),o.updateScales(),o.x.domain(h.extent(o.getXDomain(o.data.targets))),o.y.domain(o.getYDomain(o.data.targets,"y")),o.y2.domain(o.getYDomain(o.data.targets,"y2")),o.subX.domain(o.x.domain()),o.subY.domain(o.y.domain()),o.subY2.domain(o.y2.domain()),o.orgXDomain=o.x.domain(),o.svg=o.selectChart.append("svg").style("overflow","hidden").on("mouseenter",function(){return m.onmouseover.call(o)}).on("mouseleave",function(){return m.onmouseout.call(o)}),o.config.svg_classname&&o.svg.attr("class",o.config.svg_classname),L=o.svg.append("defs"),o.clipChart=o.appendClip(L,o.clipId),o.clipXAxis=o.appendClip(L,o.clipIdForXAxis),o.clipYAxis=o.appendClip(L,o.clipIdForYAxis),o.clipGrid=o.appendClip(L,o.clipIdForGrid),o.clipSubchart=o.appendClip(L,o.clipIdForSubchart),o.updateSvgSize(),N=o.main=o.svg.append("g").attr("transform",o.getTranslate("main")),o.initPie&&o.initPie(),o.initDragZoom&&o.initDragZoom(),m.subchart_show&&o.initSubchart&&o.initSubchart(),o.initTooltip&&o.initTooltip(),o.initLegend&&o.initLegend(),o.initTitle&&o.initTitle(),o.initZoom&&o.initZoom(),o.isStanfordGraphType()&&o.drawColorScale(),m.subchart_show&&o.initSubchartBrush&&o.initSubchartBrush(),N.append("text").attr("class",F.text+" "+F.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),o.initRegion(),o.initGrid(),N.append("g").attr("clip-path",o.clipPath).attr("class",F.chart),m.grid_lines_front&&o.initGridLines(),o.initStanfordElements(),o.initEventRect(),o.initChartElements(),o.axis.init(),o.updateTargets(o.data.targets),m.axis_x_selection&&o.brush.selectionAsValue(o.getDefaultSelection()),G&&(o.updateDimension(),o.config.oninit.call(o),o.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1})),o.bindResize(),o.bindWindowFocus(),o.api.element=o.selectChart.node()},n.prototype.smoothLines=function(r,o){var h=this;o==="grid"&&r.each(function(){var m=h.d3.select(this),L=m.attr("x1"),N=m.attr("x2"),G=m.attr("y1"),H=m.attr("y2");m.attr({x1:Math.ceil(L),x2:Math.ceil(N),y1:Math.ceil(G),y2:Math.ceil(H)})})},n.prototype.updateSizes=function(){var r=this,o=r.config,h=r.legend?r.getLegendHeight():0,m=r.legend?r.getLegendWidth():0,L=r.isLegendRight||r.isLegendInset?0:h,N=r.hasArcType(),G=o.axis_rotated||N?0:r.getHorizontalAxisHeight("x"),H=o.axis_rotated||N?0:r.getHorizontalAxisHeight("x",!0),W=o.subchart_show&&!N?o.subchart_size_height+H:0;r.currentWidth=r.getCurrentWidth(),r.currentHeight=r.getCurrentHeight(),r.margin=o.axis_rotated?{top:r.getHorizontalAxisHeight("y2")+r.getCurrentPaddingTop(),right:N?0:r.getCurrentPaddingRight(),bottom:r.getHorizontalAxisHeight("y")+L+r.getCurrentPaddingBottom(),left:W+(N?0:r.getCurrentPaddingLeft())}:{top:4+r.getCurrentPaddingTop(),right:N?0:r.getCurrentPaddingRight(),bottom:G+W+L+r.getCurrentPaddingBottom(),left:N?0:r.getCurrentPaddingLeft()},r.margin2=o.axis_rotated?{top:r.margin.top,right:NaN,bottom:20+L,left:r.rotated_padding_left}:{top:r.currentHeight-W-L,right:NaN,bottom:H+L,left:r.margin.left},r.margin3={top:0,right:NaN,bottom:0,left:0},r.updateSizeForLegend&&r.updateSizeForLegend(h,m),r.width=r.currentWidth-r.margin.left-r.margin.right,r.height=r.currentHeight-r.margin.top-r.margin.bottom,r.width<0&&(r.width=0),r.height<0&&(r.height=0),r.width2=o.axis_rotated?r.margin.left-r.rotated_padding_left-r.rotated_padding_right:r.width,r.height2=o.axis_rotated?r.height:r.currentHeight-r.margin2.top-r.margin2.bottom,r.width2<0&&(r.width2=0),r.height2<0&&(r.height2=0),r.arcWidth=r.width-(r.isLegendRight?m+10:0),r.arcHeight=r.height-(r.isLegendRight?0:10),r.hasType("gauge")&&!o.gauge_fullCircle&&(r.arcHeight+=r.height-r.getGaugeLabelHeight()),r.updateRadius&&r.updateRadius(),r.isLegendRight&&N&&(r.margin3.left=r.arcWidth/2+r.radiusExpanded*1.1)},n.prototype.updateTargets=function(r){var o=this,h=o.config;o.updateTargetsForText(r),o.updateTargetsForBar(r),o.updateTargetsForLine(r),o.hasArcType()&&o.updateTargetsForArc&&o.updateTargetsForArc(r),h.subchart_show&&o.updateTargetsForSubchart&&o.updateTargetsForSubchart(r),o.showTargets()},n.prototype.showTargets=function(){var r=this;r.svg.selectAll("."+F.target).filter(function(o){return r.isTargetToShow(o.id)}).transition().duration(r.config.transition_duration).style("opacity",1)},n.prototype.redraw=function(r,o){var h=this,m=h.main,L=h.d3,N=h.config,G=h.getShapeIndices(h.isAreaType),H=h.getShapeIndices(h.isBarType),W=h.getShapeIndices(h.isLineType),z,Q,Z,ot,J,ht,ft,vt,xt,Tt,St,Pt,Lt,tt=h.hasArcType(),rt,at,dt,pt,gt,bt,Ct,Mt,kt,It,Rt,Nt,Et=h.filterTargetsToShow(h.data.targets),_t,At,Ot,Vt,Yt=h.xv.bind(h),Ft,Gt;if(r=r||{},z=g(r,"withY",!0),Q=g(r,"withSubchart",!0),Z=g(r,"withTransition",!0),ht=g(r,"withTransform",!1),ft=g(r,"withUpdateXDomain",!1),vt=g(r,"withUpdateOrgXDomain",!1),xt=g(r,"withTrimXDomain",!0),Lt=g(r,"withUpdateXAxis",ft),Tt=g(r,"withLegend",!1),St=g(r,"withEventRect",!0),Pt=g(r,"withDimension",!0),ot=g(r,"withTransitionForExit",Z),J=g(r,"withTransitionForAxis",Z),bt=Z?N.transition_duration:0,Ct=ot?bt:0,Mt=J?bt:0,o=o||h.axis.generateTransitions(Mt),Tt&&N.legend_show?h.updateLegend(h.mapToIds(h.data.targets),r,o):Pt&&h.updateDimension(!0),h.isCategorized()&&Et.length===0&&h.x.domain([0,h.axes.x.selectAll(".tick").size()]),Et.length?(h.updateXDomain(Et,ft,vt,xt),N.axis_x_tick_values||(_t=h.axis.updateXAxisTickValues(Et))):(h.xAxis.tickValues([]),h.subXAxis.tickValues([])),N.zoom_rescale&&!r.flow&&(Vt=h.x.orgDomain()),h.y.domain(h.getYDomain(Et,"y",Vt)),h.y2.domain(h.getYDomain(Et,"y2",Vt)),!N.axis_y_tick_values&&N.axis_y_tick_count&&h.yAxis.tickValues(h.axis.generateTickValues(h.y.domain(),N.axis_y_tick_count)),!N.axis_y2_tick_values&&N.axis_y2_tick_count&&h.y2Axis.tickValues(h.axis.generateTickValues(h.y2.domain(),N.axis_y2_tick_count)),h.axis.redraw(Mt,tt),h.axis.updateLabels(Z),(ft||Lt)&&Et.length)if(N.axis_x_tick_culling&&_t){for(At=1;At<_t.length;At++)if(_t.length/At<N.axis_x_tick_culling_max){Ot=At;break}h.svg.selectAll("."+F.axisX+" .tick text").each(function(Dt){var Ht=_t.indexOf(Dt);Ht>=0&&L.select(this).style("display",Ht%Ot?"none":"block")})}else h.svg.selectAll("."+F.axisX+" .tick text").style("display","block");rt=h.generateDrawArea?h.generateDrawArea(G,!1):void 0,at=h.generateDrawBar?h.generateDrawBar(H):void 0,dt=h.generateDrawLine?h.generateDrawLine(W,!1):void 0,pt=h.generateXYForText(G,H,W,!0),gt=h.generateXYForText(G,H,W,!1),h.updateCircleY(),Ft=(h.config.axis_rotated?h.circleY:h.circleX).bind(h),Gt=(h.config.axis_rotated?h.circleX:h.circleY).bind(h),z&&(h.subY.domain(h.getYDomain(Et,"y")),h.subY2.domain(h.getYDomain(Et,"y2"))),h.updateXgridFocus(),m.select("text."+F.text+"."+F.empty).attr("x",h.width/2).attr("y",h.height/2).text(N.data_empty_label_text).transition().style("opacity",Et.length?0:1),St&&h.redrawEventRect(),h.updateGrid(bt),h.updateStanfordElements(bt),h.updateRegion(bt),h.updateBar(Ct),h.updateLine(Ct),h.updateArea(Ct),h.updateCircle(Ft,Gt),h.hasDataLabel()&&h.updateText(pt,gt,Ct),h.redrawTitle&&h.redrawTitle(),h.redrawArc&&h.redrawArc(bt,Ct,ht),N.subchart_show&&h.redrawSubchart&&h.redrawSubchart(Q,o,bt,Ct,G,H,W),h.isStanfordGraphType()&&h.drawColorScale(),m.selectAll("."+F.selectedCircles).filter(h.isBarType.bind(h)).selectAll("circle").remove(),r.flow&&(Rt=h.generateFlow({targets:Et,flow:r.flow,duration:r.flow.duration,drawBar:at,drawLine:dt,drawArea:rt,cx:Ft,cy:Gt,xv:Yt,xForText:pt,yForText:gt})),bt&&h.isTabVisible()?(Nt=L.transition().duration(bt),kt=[],[h.redrawBar(at,!0,Nt),h.redrawLine(dt,!0,Nt),h.redrawArea(rt,!0,Nt),h.redrawCircle(Ft,Gt,!0,Nt),h.redrawText(pt,gt,r.flow,!0,Nt),h.redrawRegion(!0,Nt),h.redrawGrid(!0,Nt)].forEach(function(Dt){Dt.forEach(function(Ht){kt.push(Ht)})}),It=h.generateWait(),kt.forEach(function(Dt){It.add(Dt)}),It(function(){Rt&&Rt(),N.onrendered&&N.onrendered.call(h)})):(h.redrawBar(at),h.redrawLine(dt),h.redrawArea(rt),h.redrawCircle(Ft,Gt),h.redrawText(pt,gt,r.flow),h.redrawRegion(),h.redrawGrid(),Rt&&Rt(),N.onrendered&&N.onrendered.call(h)),h.mapToIds(h.data.targets).forEach(function(Dt){h.withoutFadeIn[Dt]=!0})},n.prototype.updateAndRedraw=function(r){var o=this,h=o.config,m;r=r||{},r.withTransition=g(r,"withTransition",!0),r.withTransform=g(r,"withTransform",!1),r.withLegend=g(r,"withLegend",!1),r.withUpdateXDomain=g(r,"withUpdateXDomain",!0),r.withUpdateOrgXDomain=g(r,"withUpdateOrgXDomain",!0),r.withTransitionForExit=!1,r.withTransitionForTransform=g(r,"withTransitionForTransform",r.withTransition),o.updateSizes(),r.withLegend&&h.legend_show||(m=o.axis.generateTransitions(r.withTransitionForAxis?h.transition_duration:0),o.updateScales(),o.updateSvgSize(),o.transformAll(r.withTransitionForTransform,m)),o.redraw(r,m)},n.prototype.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},n.prototype.isTimeSeries=function(){return this.config.axis_x_type==="timeseries"},n.prototype.isCategorized=function(){return this.config.axis_x_type.indexOf("categor")>=0},n.prototype.isCustomX=function(){var r=this,o=r.config;return!r.isTimeSeries()&&(o.data_x||O(o.data_xs))},n.prototype.isTimeSeriesY=function(){return this.config.axis_y_type==="timeseries"},n.prototype.getTranslate=function(r){var o=this,h=o.config,m,L;return r==="main"?(m=u(o.margin.left),L=u(o.margin.top)):r==="context"?(m=u(o.margin2.left),L=u(o.margin2.top)):r==="legend"?(m=o.margin3.left,L=o.margin3.top):r==="x"?(m=0,L=h.axis_rotated?0:o.height):r==="y"?(m=0,L=h.axis_rotated?o.height:0):r==="y2"?(m=h.axis_rotated?0:o.width,L=h.axis_rotated?1:0):r==="subx"?(m=0,L=h.axis_rotated?0:o.height2):r==="arc"&&(m=o.arcWidth/2,L=o.arcHeight/2-(o.hasType("gauge")?6:0)),"translate("+m+","+L+")"},n.prototype.initialOpacity=function(r){return r.value!==null&&this.withoutFadeIn[r.id]?1:0},n.prototype.initialOpacityForCircle=function(r){return r.value!==null&&this.withoutFadeIn[r.id]?this.opacityForCircle(r):0},n.prototype.opacityForCircle=function(r){var o=v(this.config.point_show)?this.config.point_show(r):this.config.point_show,h=o||this.isStanfordType(r)?1:0;return R(r.value)?this.isScatterType(r)?.5:h:0},n.prototype.opacityForText=function(){return this.hasDataLabel()?1:0},n.prototype.xx=function(r){return r?this.x(r.x):null},n.prototype.xvCustom=function(r,o){var h=this,m=o?r[o]:r.value;return h.isTimeSeries()?m=h.parseDate(r.value):h.isCategorized()&&typeof r.value=="string"&&(m=h.config.axis_x_categories.indexOf(r.value)),Math.ceil(h.x(m))},n.prototype.yvCustom=function(r,o){var h=this,m=r.axis&&r.axis==="y2"?h.y2:h.y,L=o?r[o]:r.value;return Math.ceil(m(L))},n.prototype.xv=function(r){var o=this,h=r.value;return o.isTimeSeries()?h=o.parseDate(r.value):o.isCategorized()&&typeof r.value=="string"&&(h=o.config.axis_x_categories.indexOf(r.value)),Math.ceil(o.x(h))},n.prototype.yv=function(r){var o=this,h=r.axis&&r.axis==="y2"?o.y2:o.y;return Math.ceil(h(r.value))},n.prototype.subxx=function(r){return r?this.subX(r.x):null},n.prototype.transformMain=function(r,o){var h=this,m,L,N;o&&o.axisX?m=o.axisX:(m=h.main.select("."+F.axisX),r&&(m=m.transition())),o&&o.axisY?L=o.axisY:(L=h.main.select("."+F.axisY),r&&(L=L.transition())),o&&o.axisY2?N=o.axisY2:(N=h.main.select("."+F.axisY2),r&&(N=N.transition())),(r?h.main.transition():h.main).attr("transform",h.getTranslate("main")),m.attr("transform",h.getTranslate("x")),L.attr("transform",h.getTranslate("y")),N.attr("transform",h.getTranslate("y2")),h.main.select("."+F.chartArcs).attr("transform",h.getTranslate("arc"))},n.prototype.transformAll=function(r,o){var h=this;h.transformMain(r,o),h.config.subchart_show&&h.transformContext(r,o),h.legend&&h.transformLegend(r)},n.prototype.updateSvgSize=function(){var r=this,o=r.svg.select("."+F.brush+" .overlay");r.svg.attr("width",r.currentWidth).attr("height",r.currentHeight),r.svg.selectAll(["#"+r.clipId,"#"+r.clipIdForGrid]).select("rect").attr("width",r.width).attr("height",r.height),r.svg.select("#"+r.clipIdForXAxis).select("rect").attr("x",r.getXAxisClipX.bind(r)).attr("y",r.getXAxisClipY.bind(r)).attr("width",r.getXAxisClipWidth.bind(r)).attr("height",r.getXAxisClipHeight.bind(r)),r.svg.select("#"+r.clipIdForYAxis).select("rect").attr("x",r.getYAxisClipX.bind(r)).attr("y",r.getYAxisClipY.bind(r)).attr("width",r.getYAxisClipWidth.bind(r)).attr("height",r.getYAxisClipHeight.bind(r)),r.svg.select("#"+r.clipIdForSubchart).select("rect").attr("width",r.width).attr("height",o.size()&&o.attr("height")||0),r.selectChart.style("max-height",r.currentHeight+"px")},n.prototype.updateDimension=function(r){var o=this;r||(o.config.axis_rotated?(o.axes.x.call(o.xAxis),o.axes.subx.call(o.subXAxis)):(o.axes.y.call(o.yAxis),o.axes.y2.call(o.y2Axis))),o.updateSizes(),o.updateScales(),o.updateSvgSize(),o.transformAll(!1)},n.prototype.observeInserted=function(r){var o=this,h;if(typeof MutationObserver=="undefined"){window.console.error("MutationObserver not defined.");return}h=new MutationObserver(function(m){m.forEach(function(L){L.type==="childList"&&L.previousSibling&&(h.disconnect(),o.intervalForObserveInserted=window.setInterval(function(){r.node().parentNode&&(window.clearInterval(o.intervalForObserveInserted),o.updateDimension(),o.brush&&o.brush.update(),o.config.oninit.call(o),o.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),r.transition().style("opacity",1))},10))})}),h.observe(r.node(),{attributes:!0,childList:!0,characterData:!0})},n.prototype.bindResize=function(){var r=this,o=r.config;r.resizeFunction=r.generateResize(),r.resizeFunction.add(function(){o.onresize.call(r)}),o.resize_auto&&r.resizeFunction.add(function(){r.resizeTimeout!==void 0&&window.clearTimeout(r.resizeTimeout),r.resizeTimeout=window.setTimeout(function(){delete r.resizeTimeout,r.updateAndRedraw({withUpdateXDomain:!1,withUpdateOrgXDomain:!1,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),r.brush&&r.brush.update()},100)}),r.resizeFunction.add(function(){o.onresized.call(r)}),r.resizeIfElementDisplayed=function(){r.api==null||!r.api.element.offsetParent||r.resizeFunction()},window.addEventListener("resize",r.resizeIfElementDisplayed,!1)},n.prototype.bindWindowFocus=function(){var r=this;this.windowFocusHandler||(this.windowFocusHandler=function(){r.redraw()},window.addEventListener("focus",this.windowFocusHandler))},n.prototype.unbindWindowFocus=function(){window.removeEventListener("focus",this.windowFocusHandler),delete this.windowFocusHandler},n.prototype.generateResize=function(){var r=[];function o(){r.forEach(function(h){h()})}return o.add=function(h){r.push(h)},o.remove=function(h){for(var m=0;m<r.length;m++)if(r[m]===h){r.splice(m,1);break}},o},n.prototype.endall=function(r,o){var h=0;r.each(function(){++h}).on("end",function(){--h||o.apply(this,arguments)})},n.prototype.generateWait=function(){var r=this,o=[],h=function(m){var L=setInterval(function(){if(r.isTabVisible()){var N=0;o.forEach(function(G){if(G.empty()){N+=1;return}try{G.transition()}catch(H){N+=1}}),N===o.length&&(clearInterval(L),m&&m())}},50)};return h.add=function(m){o.push(m)},h},n.prototype.parseDate=function(r){var o=this,h;return r instanceof Date?h=r:typeof r=="string"?h=o.dataTimeParse(r):typeof r=="object"?h=new Date(+r):typeof r=="number"&&!isNaN(r)&&(h=new Date(+r)),(!h||isNaN(+h))&&window.console.error("Failed to parse x '"+r+"' to Date object"),h},n.prototype.isTabVisible=function(){return!document.hidden},n.prototype.getPathBox=_,n.prototype.CLASS=F,(function(){"SVGPathSeg"in window||(window.SVGPathSeg=function(r,o,h){this.pathSegType=r,this.pathSegTypeAsLetter=o,this._owningPathSegList=h},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(r){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",r)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(r,o,h){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",r),this._x=o,this._y=h},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(r,o,h){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",r),this._x=o,this._y=h},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(r,o,h){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",r),this._x=o,this._y=h},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(r,o,h){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",r),this._x=o,this._y=h},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(r,o,h,m,L,N,G){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",r),this._x=o,this._y=h,this._x1=m,this._y1=L,this._x2=N,this._y2=G},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(r){this._x1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(r){this._y1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(r){this._x2=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(r){this._y2=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(r,o,h,m,L,N,G){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",r),this._x=o,this._y=h,this._x1=m,this._y1=L,this._x2=N,this._y2=G},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(r){this._x1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(r){this._y1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(r){this._x2=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(r){this._y2=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(r,o,h,m,L){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",r),this._x=o,this._y=h,this._x1=m,this._y1=L},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(r){this._x1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(r){this._y1=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(r,o,h,m,L){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",r),this._x=o,this._y=h,this._x1=m,this._y1=L},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(r){this._x1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(r){this._y1=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(r,o,h,m,L,N,G,H){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",r),this._x=o,this._y=h,this._r1=m,this._r2=L,this._angle=N,this._largeArcFlag=G,this._sweepFlag=H},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(r){this._r1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(r){this._r2=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(r){this._angle=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(r){this._largeArcFlag=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(r){this._sweepFlag=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(r,o,h,m,L,N,G,H){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",r),this._x=o,this._y=h,this._r1=m,this._r2=L,this._angle=N,this._largeArcFlag=G,this._sweepFlag=H},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(r){this._r1=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(r){this._r2=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(r){this._angle=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(r){this._largeArcFlag=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(r){this._sweepFlag=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(r,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",r),this._x=o},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(r,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",r),this._x=o},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(r,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",r),this._y=o},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(r,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",r),this._y=o},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(r,o,h,m,L){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",r),this._x=o,this._y=h,this._x2=m,this._y2=L},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(r){this._x2=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(r){this._y2=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(r,o,h,m,L){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",r),this._x=o,this._y=h,this._x2=m,this._y2=L},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(r){this._x2=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(r){this._y2=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(r,o,h){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",r),this._x=o,this._y=h},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(r,o,h){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",r),this._x=o,this._y=h},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(r){this._x=r,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(r){this._y=r,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(r,o){return new window.SVGPathSegMovetoAbs(void 0,r,o)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(r,o){return new window.SVGPathSegMovetoRel(void 0,r,o)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(r,o){return new window.SVGPathSegLinetoAbs(void 0,r,o)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(r,o){return new window.SVGPathSegLinetoRel(void 0,r,o)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(r,o,h,m,L,N){return new window.SVGPathSegCurvetoCubicAbs(void 0,r,o,h,m,L,N)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(r,o,h,m,L,N){return new window.SVGPathSegCurvetoCubicRel(void 0,r,o,h,m,L,N)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(r,o,h,m){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,r,o,h,m)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(r,o,h,m){return new window.SVGPathSegCurvetoQuadraticRel(void 0,r,o,h,m)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(r,o,h,m,L,N,G){return new window.SVGPathSegArcAbs(void 0,r,o,h,m,L,N,G)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(r,o,h,m,L,N,G){return new window.SVGPathSegArcRel(void 0,r,o,h,m,L,N,G)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(r){return new window.SVGPathSegLinetoHorizontalAbs(void 0,r)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(r){return new window.SVGPathSegLinetoHorizontalRel(void 0,r)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(r){return new window.SVGPathSegLinetoVerticalAbs(void 0,r)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(r){return new window.SVGPathSegLinetoVerticalRel(void 0,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(r,o,h,m){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,r,o,h,m)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(r,o,h,m){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,r,o,h,m)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(r,o){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,r,o)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(r,o){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,r,o)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(r){if(r===void 0||!isFinite(r))throw"Invalid arguments.";var o=document.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d",this.getAttribute("d"));var h=o.pathSegList.numberOfItems-1;if(h<=0)return 0;do{if(o.pathSegList.removeItem(h),r>o.getTotalLength())break;h--}while(h>0);return h})),"SVGPathSegList"in window||(window.SVGPathSegList=function(r){this._pathElement=r,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(r){if(this._pathElement){var o=!1;r.forEach(function(h){h.attributeName=="d"&&(o=!0)}),o&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(r){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(r){r._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(r){return this._checkPathSynchronizedToList(),this._list=[r],r._owningPathSegList=this,this._writeListToPath(),r},window.SVGPathSegList.prototype._checkValidIndex=function(r){if(isNaN(r)||r<0||r>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(r){return this._checkPathSynchronizedToList(),this._checkValidIndex(r),this._list[r]},window.SVGPathSegList.prototype.insertItemBefore=function(r,o){return this._checkPathSynchronizedToList(),o>this.numberOfItems&&(o=this.numberOfItems),r._owningPathSegList&&(r=r.clone()),this._list.splice(o,0,r),r._owningPathSegList=this,this._writeListToPath(),r},window.SVGPathSegList.prototype.replaceItem=function(r,o){return this._checkPathSynchronizedToList(),r._owningPathSegList&&(r=r.clone()),this._checkValidIndex(o),this._list[o]=r,r._owningPathSegList=this,this._writeListToPath(),r},window.SVGPathSegList.prototype.removeItem=function(r){this._checkPathSynchronizedToList(),this._checkValidIndex(r);var o=this._list[r];return this._list.splice(r,1),this._writeListToPath(),o},window.SVGPathSegList.prototype.appendItem=function(r){return this._checkPathSynchronizedToList(),r._owningPathSegList&&(r=r.clone()),this._list.push(r),r._owningPathSegList=this,this._writeListToPath(),r},window.SVGPathSegList._pathSegArrayAsString=function(r){var o="",h=!0;return r.forEach(function(m){h?(h=!1,o+=m._asPathString()):o+=" "+m._asPathString()}),o},window.SVGPathSegList.prototype._parsePath=function(r){if(!r||r.length==0)return[];var o=this,h=function(){this.pathSegList=[]};h.prototype.appendSegment=function(H){this.pathSegList.push(H)};var m=function(H){this._string=H,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()};m.prototype._isCurrentSpace=function(){var H=this._string[this._currentIndex];return H<=" "&&(H==" "||H==`
`||H=="	"||H=="\r"||H=="\f")},m.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},m.prototype._skipOptionalSpacesOrDelimiter=function(){return this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&this._string.charAt(this._currentIndex)!=","?!1:(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)==","&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},m.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},m.prototype.peekSegmentType=function(){var H=this._string[this._currentIndex];return this._pathSegTypeFromChar(H)},m.prototype._pathSegTypeFromChar=function(H){switch(H){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},m.prototype._nextCommandHelper=function(H,W){return(H=="+"||H=="-"||H=="."||H>="0"&&H<="9")&&W!=window.SVGPathSeg.PATHSEG_CLOSEPATH?W==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:W==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:W:window.SVGPathSeg.PATHSEG_UNKNOWN},m.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var H=this.peekSegmentType();return H==window.SVGPathSeg.PATHSEG_MOVETO_ABS||H==window.SVGPathSeg.PATHSEG_MOVETO_REL},m.prototype._parseNumber=function(){var H=0,W=0,z=1,Q=0,Z=1,ot=1,J=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="+"?this._currentIndex++:this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="-"&&(this._currentIndex++,Z=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")&&this._string.charAt(this._currentIndex)!=".")){for(var ht=this._currentIndex;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=ht)for(var ft=this._currentIndex-1,vt=1;ft>=ht;)W+=vt*(this._string.charAt(ft--)-"0"),vt*=10;if(this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)=="."){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)z*=10,Q+=(this._string.charAt(this._currentIndex)-"0")/z,this._currentIndex+=1}if(this._currentIndex!=J&&this._currentIndex+1<this._endIndex&&(this._string.charAt(this._currentIndex)=="e"||this._string.charAt(this._currentIndex)=="E")&&this._string.charAt(this._currentIndex+1)!="x"&&this._string.charAt(this._currentIndex+1)!="m"){if(this._currentIndex++,this._string.charAt(this._currentIndex)=="+"?this._currentIndex++:this._string.charAt(this._currentIndex)=="-"&&(this._currentIndex++,ot=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||this._string.charAt(this._currentIndex)>"9")return;for(;this._currentIndex<this._endIndex&&this._string.charAt(this._currentIndex)>="0"&&this._string.charAt(this._currentIndex)<="9";)H*=10,H+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var xt=W+Q;if(xt*=Z,H&&(xt*=Math.pow(10,ot*H)),J!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),xt}},m.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var H=!1,W=this._string.charAt(this._currentIndex++);if(W=="0")H=!1;else if(W=="1")H=!0;else return;return this._skipOptionalSpacesOrDelimiter(),H}},m.prototype.parseSegment=function(){var H=this._string[this._currentIndex],W=this._pathSegTypeFromChar(H);if(W==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN||(W=this._nextCommandHelper(H,this._previousCommand),W==window.SVGPathSeg.PATHSEG_UNKNOWN))return null}else this._currentIndex++;switch(this._previousCommand=W,W){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(o,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(o,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(o,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(o,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(o,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(o,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(o,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(o,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(o);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var z={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(o,z.x,z.y,z.x1,z.y1,z.x2,z.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:var z={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicAbs(o,z.x,z.y,z.x1,z.y1,z.x2,z.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:var z={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothRel(o,z.x,z.y,z.x2,z.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:var z={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothAbs(o,z.x,z.y,z.x2,z.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:var z={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticRel(o,z.x,z.y,z.x1,z.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:var z={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticAbs(o,z.x,z.y,z.x1,z.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(o,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(o,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:var z={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcRel(o,z.x,z.y,z.x1,z.y1,z.arcAngle,z.arcLarge,z.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:var z={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcAbs(o,z.x,z.y,z.x1,z.y1,z.arcAngle,z.arcLarge,z.arcSweep);default:throw"Unknown path seg type."}};var L=new h,N=new m(r);if(!N.initialCommandIsMoveTo())return[];for(;N.hasMoreData();){var G=N.parseSegment();if(!G)return[];L.appendSegment(G)}return L.pathSegList})})(),String.prototype.padEnd||(String.prototype.padEnd=function(o,h){return o=o>>0,h=String(typeof h!="undefined"?h:" "),this.length>o?String(this):(o=o-this.length,o>h.length&&(h+=h.repeat(o/h.length)),String(this)+h.slice(0,o))}),typeof Object.assign!="function"&&Object.defineProperty(Object,"assign",{value:function(o,h){if(o==null)throw new TypeError("Cannot convert undefined or null to object");for(var m=Object(o),L=1;L<arguments.length;L++){var N=arguments[L];if(N!=null)for(var G in N)Object.prototype.hasOwnProperty.call(N,G)&&(m[G]=N[G])}return m},writable:!0,configurable:!0}),i.prototype.axis=function(){},i.prototype.axis.labels=function(r){var o=this.internal;arguments.length&&(Object.keys(r).forEach(function(h){o.axis.setLabelText(h,r[h])}),o.axis.updateLabels())},i.prototype.axis.max=function(r){var o=this.internal,h=o.config;if(arguments.length)typeof r=="object"?(R(r.x)&&(h.axis_x_max=r.x),R(r.y)&&(h.axis_y_max=r.y),R(r.y2)&&(h.axis_y2_max=r.y2)):h.axis_y_max=h.axis_y2_max=r,o.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:h.axis_x_max,y:h.axis_y_max,y2:h.axis_y2_max}},i.prototype.axis.min=function(r){var o=this.internal,h=o.config;if(arguments.length)typeof r=="object"?(R(r.x)&&(h.axis_x_min=r.x),R(r.y)&&(h.axis_y_min=r.y),R(r.y2)&&(h.axis_y2_min=r.y2)):h.axis_y_min=h.axis_y2_min=r,o.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0});else return{x:h.axis_x_min,y:h.axis_y_min,y2:h.axis_y2_min}},i.prototype.axis.range=function(r){if(arguments.length)p(r.max)&&this.axis.max(r.max),p(r.min)&&this.axis.min(r.min);else return{max:this.axis.max(),min:this.axis.min()}},i.prototype.axis.types=function(r){var o=this.internal;if(r===void 0)return{y:o.config.axis_y_type,y2:o.config.axis_y2_type};p(r.y)&&(o.config.axis_y_type=r.y),p(r.y2)&&(o.config.axis_y2_type=r.y2),o.updateScales(),o.redraw()},i.prototype.category=function(r,o){var h=this.internal,m=h.config;return arguments.length>1&&(m.axis_x_categories[r]=o,h.redraw()),m.axis_x_categories[r]},i.prototype.categories=function(r){var o=this.internal,h=o.config;return arguments.length&&(h.axis_x_categories=r,o.redraw()),h.axis_x_categories},i.prototype.resize=function(r){var o=this.internal,h=o.config;h.size_width=r?r.width:null,h.size_height=r?r.height:null,this.flush()},i.prototype.flush=function(){var r=this.internal;r.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},i.prototype.destroy=function(){var r=this.internal;return window.clearInterval(r.intervalForObserveInserted),r.resizeTimeout!==void 0&&window.clearTimeout(r.resizeTimeout),window.removeEventListener("resize",r.resizeIfElementDisplayed),r.resizeFunction.remove(),r.unbindWindowFocus(),r.selectChart.classed("c3",!1).html(""),Object.keys(r).forEach(function(o){r[o]=null}),null},i.prototype.color=function(r){var o=this.internal;return o.color(r)},i.prototype.data=function(r){var o=this.internal.data.targets;return typeof r=="undefined"?o:o.filter(function(h){return[].concat(r).indexOf(h.id)>=0})},i.prototype.data.shown=function(r){return this.internal.filterTargetsToShow(this.data(r))},i.prototype.data.values=function(r,o){o===void 0&&(o=!0);var h=null;if(r){var m=this.data(r);m&&w(m)&&(h=m.reduce(function(L,N){var G=N.values.map(function(H){return H.value});return o?L=L.concat(G):L.push(G),L},[]))}return h},i.prototype.data.names=function(r){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",r)},i.prototype.data.colors=function(r){return this.internal.updateDataAttributes("colors",r)},i.prototype.data.axes=function(r){return this.internal.updateDataAttributes("axes",r)},i.prototype.data.stackNormalized=function(r){if(r===void 0)return this.internal.isStackNormalized();this.internal.config.data_stack_normalize=!!r,this.internal.redraw()},i.prototype.donut=function(){},i.prototype.donut.padAngle=function(r){if(r===void 0)return this.internal.config.donut_padAngle;this.internal.config.donut_padAngle=r,this.flush()},i.prototype.flow=function(r){var o=this.internal,h,m,L=[],N=o.getMaxDataCount(),G,H,W,z=0,Q=0,Z,ot;if(r.json)m=o.convertJsonToData(r.json,r.keys);else if(r.rows)m=o.convertRowsToData(r.rows);else if(r.columns)m=o.convertColumnsToData(r.columns);else return;h=o.convertDataToTargets(m,!0),o.data.targets.forEach(function(J){var ht=!1,ft,vt;for(ft=0;ft<h.length;ft++)if(J.id===h[ft].id){for(ht=!0,J.values[J.values.length-1]&&(Q=J.values[J.values.length-1].index+1),z=h[ft].values.length,vt=0;vt<z;vt++)h[ft].values[vt].index=Q+vt,o.isTimeSeries()||(h[ft].values[vt].x=Q+vt);J.values=J.values.concat(h[ft].values),h.splice(ft,1);break}ht||L.push(J.id)}),o.data.targets.forEach(function(J){var ht,ft;for(ht=0;ht<L.length;ht++)if(J.id===L[ht])for(Q=J.values[J.values.length-1].index+1,ft=0;ft<z;ft++)J.values.push({id:J.id,index:Q+ft,x:o.isTimeSeries()?o.getOtherTargetX(Q+ft):Q+ft,value:null})}),o.data.targets.length&&h.forEach(function(J){var ht,ft=[];for(ht=o.data.targets[0].values[0].index;ht<Q;ht++)ft.push({id:J.id,index:ht,x:o.isTimeSeries()?o.getOtherTargetX(ht):ht,value:null});J.values.forEach(function(vt){vt.index+=Q,o.isTimeSeries()||(vt.x+=Q)}),J.values=ft.concat(J.values)}),o.data.targets=o.data.targets.concat(h),o.getMaxDataCount(),H=o.data.targets[0],W=H.values[0],p(r.to)?(z=0,ot=o.isTimeSeries()?o.parseDate(r.to):r.to,H.values.forEach(function(J){J.x<ot&&z++})):p(r.length)&&(z=r.length),N?N===1&&o.isTimeSeries()&&(Z=(H.values[H.values.length-1].x-W.x)/2,G=[new Date(+W.x-Z),new Date(+W.x+Z)],o.updateXDomain(null,!0,!0,!1,G)):(o.isTimeSeries()?H.values.length>1?Z=H.values[H.values.length-1].x-W.x:Z=W.x-o.getXDomain(o.data.targets)[0]:Z=1,G=[W.x-Z,W.x],o.updateXDomain(null,!0,!0,!1,G)),o.updateTargets(o.data.targets),o.redraw({flow:{index:W.index,length:z,duration:R(r.duration)?r.duration:o.config.transition_duration,done:r.done,orgDataCount:N},withLegend:!0,withTransition:N>1,withTrimXDomain:!1,withUpdateXAxis:!0})},n.prototype.generateFlow=function(r){var o=this,h=o.config,m=o.d3;return function(){var L=r.targets,N=r.flow,G=r.drawBar,H=r.drawLine,W=r.drawArea,z=r.cx,Q=r.cy,Z=r.xv,ot=r.xForText,J=r.yForText,ht=r.duration,ft,vt=1,xt,Tt=N.index,St=N.length,Pt=o.getValueOnIndex(o.data.targets[0].values,Tt),Lt=o.getValueOnIndex(o.data.targets[0].values,Tt+St),tt=o.x.domain(),rt,at=N.duration||ht,dt=N.done||function(){},pt=o.generateWait(),gt,bt,Ct,Mt,kt,It,Rt,Nt;o.flowing=!0,o.data.targets.forEach(function(_t){_t.values.splice(0,St)}),rt=o.updateXDomain(L,!0,!0),o.updateXGrid&&o.updateXGrid(!0),gt=o.xgrid||m.selectAll([]),bt=o.xgridLines||m.selectAll([]),Ct=o.mainRegion||m.selectAll([]),Mt=o.mainText||m.selectAll([]),kt=o.mainBar||m.selectAll([]),It=o.mainLine||m.selectAll([]),Rt=o.mainArea||m.selectAll([]),Nt=o.mainCircle||m.selectAll([]),N.orgDataCount?N.orgDataCount===1||(Pt&&Pt.x)===(Lt&&Lt.x)||o.isTimeSeries()?ft=o.x(tt[0])-o.x(rt[0]):ft=o.x(Pt.x)-o.x(Lt.x):o.data.targets[0].values.length!==1?ft=o.x(tt[0])-o.x(rt[0]):o.isTimeSeries()?(Pt=o.getValueOnIndex(o.data.targets[0].values,0),Lt=o.getValueOnIndex(o.data.targets[0].values,o.data.targets[0].values.length-1),ft=o.x(Pt.x)-o.x(Lt.x)):ft=d(rt)/2,vt=d(tt)/d(rt),xt="translate("+ft+",0) scale("+vt+",1)",o.hideXGridFocus();var Et=m.transition().ease(m.easeLinear).duration(at);pt.add(o.xAxis(o.axes.x,Et)),pt.add(kt.transition(Et).attr("transform",xt)),pt.add(It.transition(Et).attr("transform",xt)),pt.add(Rt.transition(Et).attr("transform",xt)),pt.add(Nt.transition(Et).attr("transform",xt)),pt.add(Mt.transition(Et).attr("transform",xt)),pt.add(Ct.filter(o.isRegionOnX).transition(Et).attr("transform",xt)),pt.add(gt.transition(Et).attr("transform",xt)),pt.add(bt.transition(Et).attr("transform",xt)),pt(function(){var _t,At=[],Ot=[];if(St){for(_t=0;_t<St;_t++)At.push("."+F.shape+"-"+(Tt+_t)),Ot.push("."+F.text+"-"+(Tt+_t));o.svg.selectAll("."+F.shapes).selectAll(At).remove(),o.svg.selectAll("."+F.texts).selectAll(Ot).remove(),o.svg.select("."+F.xgrid).remove()}gt.attr("transform",null).attr("x1",o.xgridAttr.x1).attr("x2",o.xgridAttr.x2).attr("y1",o.xgridAttr.y1).attr("y2",o.xgridAttr.y2).style("opacity",o.xgridAttr.opacity),bt.attr("transform",null),bt.select("line").attr("x1",h.axis_rotated?0:Z).attr("x2",h.axis_rotated?o.width:Z),bt.select("text").attr("x",h.axis_rotated?o.width:0).attr("y",Z),kt.attr("transform",null).attr("d",G),It.attr("transform",null).attr("d",H),Rt.attr("transform",null).attr("d",W),Nt.attr("transform",null).attr("cx",z).attr("cy",Q),Mt.attr("transform",null).attr("x",ot).attr("y",J).style("fill-opacity",o.opacityForText.bind(o)),Ct.attr("transform",null),Ct.filter(o.isRegionOnX).attr("x",o.regionX.bind(o)).attr("width",o.regionWidth.bind(o)),dt(),o.flowing=!1})}},i.prototype.focus=function(r){var o=this.internal,h;r=o.mapToTargetIds(r),h=o.svg.selectAll(o.selectorTargets(r.filter(o.isTargetToShow,o))),this.revert(),this.defocus(),h.classed(F.focused,!0).classed(F.defocused,!1),o.hasArcType()&&o.expandArc(r),o.toggleFocusLegend(r,!0),o.focusedTargetIds=r,o.defocusedTargetIds=o.defocusedTargetIds.filter(function(m){return r.indexOf(m)<0})},i.prototype.defocus=function(r){var o=this.internal,h;r=o.mapToTargetIds(r),h=o.svg.selectAll(o.selectorTargets(r.filter(o.isTargetToShow,o))),h.classed(F.focused,!1).classed(F.defocused,!0),o.hasArcType()&&o.unexpandArc(r),o.toggleFocusLegend(r,!1),o.focusedTargetIds=o.focusedTargetIds.filter(function(m){return r.indexOf(m)<0}),o.defocusedTargetIds=r},i.prototype.revert=function(r){var o=this.internal,h;r=o.mapToTargetIds(r),h=o.svg.selectAll(o.selectorTargets(r)),h.classed(F.focused,!1).classed(F.defocused,!1),o.hasArcType()&&o.unexpandArc(r),o.config.legend_show&&(o.showLegend(r.filter(o.isLegendToShow.bind(o))),o.legend.selectAll(o.selectorLegends(r)).filter(function(){return o.d3.select(this).classed(F.legendItemFocused)}).classed(F.legendItemFocused,!1)),o.focusedTargetIds=[],o.defocusedTargetIds=[]},i.prototype.xgrids=function(r){var o=this.internal,h=o.config;return r&&(h.grid_x_lines=r,o.redrawWithoutRescale()),h.grid_x_lines},i.prototype.xgrids.add=function(r){var o=this.internal;return this.xgrids(o.config.grid_x_lines.concat(r||[]))},i.prototype.xgrids.remove=function(r){var o=this.internal;o.removeGridLines(r,!0)},i.prototype.ygrids=function(r){var o=this.internal,h=o.config;return r&&(h.grid_y_lines=r,o.redrawWithoutRescale()),h.grid_y_lines},i.prototype.ygrids.add=function(r){var o=this.internal;return this.ygrids(o.config.grid_y_lines.concat(r||[]))},i.prototype.ygrids.remove=function(r){var o=this.internal;o.removeGridLines(r,!1)},i.prototype.groups=function(r){var o=this.internal,h=o.config;return P(r)||(h.data_groups=r,o.redraw()),h.data_groups},i.prototype.legend=function(){},i.prototype.legend.show=function(r){var o=this.internal;o.showLegend(o.mapToTargetIds(r)),o.updateAndRedraw({withLegend:!0})},i.prototype.legend.hide=function(r){var o=this.internal;o.hideLegend(o.mapToTargetIds(r)),o.updateAndRedraw({withLegend:!1})},i.prototype.load=function(r){var o=this.internal,h=o.config;if(r.xs&&o.addXs(r.xs),"names"in r&&i.prototype.data.names.bind(this)(r.names),"classes"in r&&Object.keys(r.classes).forEach(function(m){h.data_classes[m]=r.classes[m]}),"categories"in r&&o.isCategorized()&&(h.axis_x_categories=r.categories),"axes"in r&&Object.keys(r.axes).forEach(function(m){h.data_axes[m]=r.axes[m]}),"colors"in r&&Object.keys(r.colors).forEach(function(m){h.data_colors[m]=r.colors[m]}),"cacheIds"in r&&o.hasCaches(r.cacheIds)){o.load(o.getCaches(r.cacheIds),r.done);return}r.unload?o.unload(o.mapToTargetIds(r.unload===!0?null:r.unload),function(){o.loadFromArgs(r)}):o.loadFromArgs(r)},i.prototype.unload=function(r){var o=this.internal;r=r||{},r instanceof Array?r={ids:r}:typeof r=="string"&&(r={ids:[r]}),o.unload(o.mapToTargetIds(r.ids),function(){o.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),r.done&&r.done()})},i.prototype.pie=function(){},i.prototype.pie.padAngle=function(r){if(r===void 0)return this.internal.config.pie_padAngle;this.internal.config.pie_padAngle=r,this.flush()},i.prototype.regions=function(r){var o=this.internal,h=o.config;return r&&(h.regions=r,o.redrawWithoutRescale()),h.regions},i.prototype.regions.add=function(r){var o=this.internal,h=o.config;return r&&(h.regions=h.regions.concat(r),o.redrawWithoutRescale()),h.regions},i.prototype.regions.remove=function(r){var o=this.internal,h=o.config,m,L,N;return r=r||{},m=g(r,"duration",h.transition_duration),L=g(r,"classes",[F.region]),N=o.main.select("."+F.regions).selectAll(L.map(function(G){return"."+G})),(m?N.transition().duration(m):N).style("opacity",0).remove(),h.regions=h.regions.filter(function(G){var H=!1;return G.class?(G.class.split(" ").forEach(function(W){L.indexOf(W)>=0&&(H=!0)}),!H):!0}),h.regions},i.prototype.selected=function(r){var o=this.internal,h=o.d3;return o.main.selectAll("."+F.shapes+o.getTargetSelectorSuffix(r)).selectAll("."+F.shape).filter(function(){return h.select(this).classed(F.SELECTED)}).nodes().map(function(m){var L=m.__data__;return L.data?L.data:L})},i.prototype.select=function(r,o,h){var m=this.internal,L=m.d3,N=m.config;N.data_selection_enabled&&m.main.selectAll("."+F.shapes).selectAll("."+F.shape).each(function(G,H){var W=L.select(this),z=G.data?G.data.id:G.id,Q=m.getToggle(this,G).bind(m),Z=N.data_selection_grouped||!r||r.indexOf(z)>=0,ot=!o||o.indexOf(H)>=0,J=W.classed(F.SELECTED);W.classed(F.line)||W.classed(F.area)||(Z&&ot?N.data_selection_isselectable(G)&&!J&&Q(!0,W.classed(F.SELECTED,!0),G,H):p(h)&&h&&J&&Q(!1,W.classed(F.SELECTED,!1),G,H))})},i.prototype.unselect=function(r,o){var h=this.internal,m=h.d3,L=h.config;L.data_selection_enabled&&h.main.selectAll("."+F.shapes).selectAll("."+F.shape).each(function(N,G){var H=m.select(this),W=N.data?N.data.id:N.id,z=h.getToggle(this,N).bind(h),Q=L.data_selection_grouped||!r||r.indexOf(W)>=0,Z=!o||o.indexOf(G)>=0,ot=H.classed(F.SELECTED);H.classed(F.line)||H.classed(F.area)||Q&&Z&&L.data_selection_isselectable(N)&&ot&&z(!1,H.classed(F.SELECTED,!1),N,G)})},i.prototype.show=function(r,o){var h=this.internal,m;r=h.mapToTargetIds(r),o=o||{},h.removeHiddenTargetIds(r),m=h.svg.selectAll(h.selectorTargets(r)),m.transition().style("display",lt()?"block":"initial","important").style("opacity",1,"important").call(h.endall,function(){m.style("opacity",null).style("opacity",1)}),o.withLegend&&h.showLegend(r),h.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},i.prototype.hide=function(r,o){var h=this.internal,m;r=h.mapToTargetIds(r),o=o||{},h.addHiddenTargetIds(r),m=h.svg.selectAll(h.selectorTargets(r)),m.transition().style("opacity",0,"important").call(h.endall,function(){m.style("opacity",null).style("opacity",0),m.style("display","none")}),o.withLegend&&h.hideLegend(r),h.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},i.prototype.toggle=function(r,o){var h=this,m=this.internal;m.mapToTargetIds(r).forEach(function(L){m.isTargetToShow(L)?h.hide(L,o):h.show(L,o)})},i.prototype.subchart=function(){},i.prototype.subchart.isShown=function(){var r=this.internal;return r.config.subchart_show},i.prototype.subchart.show=function(){var r=this.internal;r.config.subchart_show||(r.config.subchart_show=!0,r.initSubchart(),r.updateDimension(),r.initSubchartBrush(),r.updateTargetsForSubchart(r.getTargets()),r.mapToIds(r.data.targets).forEach(function(o){r.withoutFadeIn[o]=!1}),r.updateAndRedraw(),r.showTargets())},i.prototype.subchart.hide=function(){var r=this.internal;r.config.subchart_show&&(r.config.subchart_show=!1,r.removeSubchart(),r.redraw())},i.prototype.tooltip=function(){},i.prototype.tooltip.show=function(r){var o=this.internal,h,m,L={};r.mouse?L=r.mouse:(r.data?m=r.data:typeof r.x!="undefined"&&(r.id?h=o.data.targets.filter(function(N){return N.id===r.id}):h=o.data.targets,m=o.filterByX(h,r.x).slice(0,1)[0]),L=m?o.getMousePosition(m):null),o.dispatchEvent("mousemove",L),o.config.tooltip_onshow.call(o,m)},i.prototype.tooltip.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},i.prototype.transform=function(r,o){var h=this.internal,m=["pie","donut"].indexOf(r)>=0?{withTransform:!0}:null;h.transformTo(o,r,m)},n.prototype.transformTo=function(r,o,h){var m=this,L=!m.hasArcType(),N=h||{withTransitionForAxis:L};N.withTransitionForTransform=!1,m.transiting=!1,m.setTargetType(r,o),m.updateTargets(m.data.targets),m.updateAndRedraw(N)},i.prototype.x=function(r){var o=this.internal;return arguments.length&&(o.updateTargetX(o.data.targets,r),o.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),o.data.xs},i.prototype.xs=function(r){var o=this.internal;return arguments.length&&(o.updateTargetXs(o.data.targets,r),o.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),o.data.xs},i.prototype.zoom=function(r){var o=this.internal;return r?(o.isTimeSeries()&&(r=r.map(function(h){return o.parseDate(h)})),o.config.subchart_show?o.brush.selectionAsValue(r,!0):(o.updateXDomain(null,!0,!1,!1,r),o.redraw({withY:o.config.zoom_rescale,withSubchart:!1})),o.config.zoom_onzoom.call(this,o.x.orgDomain()),r):o.x.domain()},i.prototype.zoom.enable=function(r){var o=this.internal;o.config.zoom_enabled=r,o.updateAndRedraw()},i.prototype.unzoom=function(){var r=this.internal;r.config.subchart_show?r.brush.clear():(r.updateXDomain(null,!0,!1,!1,r.subX.domain()),r.redraw({withY:r.config.zoom_rescale,withSubchart:!1}))},i.prototype.zoom.max=function(r){var o=this.internal,h=o.config,m=o.d3;if(r===0||r)h.zoom_x_max=m.max([o.orgXDomain[1],r]);else return h.zoom_x_max},i.prototype.zoom.min=function(r){var o=this.internal,h=o.config,m=o.d3;if(r===0||r)h.zoom_x_min=m.min([o.orgXDomain[0],r]);else return h.zoom_x_min},i.prototype.zoom.range=function(r){if(arguments.length)p(r.max)&&this.domain.max(r.max),p(r.min)&&this.domain.min(r.min);else return{max:this.domain.max(),min:this.domain.min()}},n.prototype.initPie=function(){var r=this,o=r.d3;r.pie=o.pie().padAngle(this.getPadAngle.bind(this)).value(function(L){return L.values.reduce(function(N,G){return N+G.value},0)});var h=r.getOrderFunction();if(h&&(r.isOrderAsc()||r.isOrderDesc())){var m=h;h=function(L,N){return m(L,N)*-1}}r.pie.sort(h||null)},n.prototype.updateRadius=function(){var r=this,o=r.config,h=o.gauge_width||o.donut_width,m=r.filterTargetsToShow(r.data.targets).length*r.config.gauge_arcs_minWidth;r.radiusExpanded=Math.min(r.arcWidth,r.arcHeight)/2*(r.hasType("gauge")?.85:1),r.radius=r.radiusExpanded*.95,r.innerRadiusRatio=h?(r.radius-h)/r.radius:.6,r.innerRadius=r.hasType("donut")||r.hasType("gauge")?r.radius*r.innerRadiusRatio:0,r.gaugeArcWidth=h||(m<=r.radius-r.innerRadius?r.radius-r.innerRadius:m<=r.radius?m:r.radius)},n.prototype.getPadAngle=function(){return this.hasType("pie")?this.config.pie_padAngle||0:this.hasType("donut")&&this.config.donut_padAngle||0},n.prototype.updateArc=function(){var r=this;r.svgArc=r.getSvgArc(),r.svgArcExpanded=r.getSvgArcExpanded(),r.svgArcExpandedSub=r.getSvgArcExpanded(.98)},n.prototype.updateAngle=function(r){var o=this,h=o.config,m=!1,L=0,N,G,H,W;return h?(o.pie(o.filterTargetsToShow(o.data.targets)).forEach(function(z){!m&&z.data.id===r.data.id&&(m=!0,r=z,r.index=L),L++}),isNaN(r.startAngle)&&(r.startAngle=0),isNaN(r.endAngle)&&(r.endAngle=r.startAngle),o.isGaugeType(r.data)&&(N=h.gauge_min,G=h.gauge_max,H=Math.PI*(h.gauge_fullCircle?2:1)/(G-N),W=r.value<N?0:r.value<G?r.value-N:G-N,r.startAngle=h.gauge_startingAngle,r.endAngle=r.startAngle+H*W),m?r:null):null},n.prototype.getSvgArc=function(){var r=this,o=r.hasType("gauge"),h=r.gaugeArcWidth/r.filterTargetsToShow(r.data.targets).length,m=r.d3.arc().outerRadius(function(N){return o?r.radius-h*N.index:r.radius}).innerRadius(function(N){return o?r.radius-h*(N.index+1):r.innerRadius}),L=function(N,G){var H;return G?m(N):(H=r.updateAngle(N),H?m(H):"M 0 0")};return L.centroid=m.centroid,L},n.prototype.getSvgArcExpanded=function(r){r=r||1;var o=this,h=o.hasType("gauge"),m=o.gaugeArcWidth/o.filterTargetsToShow(o.data.targets).length,L=Math.min(o.radiusExpanded*r-o.radius,m*.8-(1-r)*100),N=o.d3.arc().outerRadius(function(G){return h?o.radius-m*G.index+L:o.radiusExpanded*r}).innerRadius(function(G){return h?o.radius-m*(G.index+1):o.innerRadius});return function(G){var H=o.updateAngle(G);return H?N(H):"M 0 0"}},n.prototype.getArc=function(r,o,h){return h||this.isArcType(r.data)?this.svgArc(r,o):"M 0 0"},n.prototype.transformForArcLabel=function(r){var o=this,h=o.config,m=o.updateAngle(r),L,N,G,H,W,z="",Q=o.hasType("gauge");if(m&&!Q)L=this.svgArc.centroid(m),N=isNaN(L[0])?0:L[0],G=isNaN(L[1])?0:L[1],H=Math.sqrt(N*N+G*G),o.hasType("donut")&&h.donut_label_ratio?W=v(h.donut_label_ratio)?h.donut_label_ratio(r,o.radius,H):h.donut_label_ratio:o.hasType("pie")&&h.pie_label_ratio?W=v(h.pie_label_ratio)?h.pie_label_ratio(r,o.radius,H):h.pie_label_ratio:W=o.radius&&H?(36/o.radius>.375?1.175-36/o.radius:.8)*o.radius/H:0,z="translate("+N*W+","+G*W+")";else if(m&&Q&&o.filterTargetsToShow(o.data.targets).length>1){var Z=Math.sin(m.endAngle-Math.PI/2);N=Math.cos(m.endAngle-Math.PI/2)*(o.radiusExpanded+25),G=Z*(o.radiusExpanded+15-Math.abs(Z*10))+3,z="translate("+N+","+G+")"}return z},n.prototype.getArcRatio=function(r){return this.getRatio("arc",r)},n.prototype.convertToArcData=function(r){return this.addName({id:r.data.id,value:r.value,ratio:this.getRatio("arc",r),index:r.index})},n.prototype.textForArcLabel=function(r){var o=this,h,m,L,N,G;return!o.shouldShowArcLabel()||(h=o.updateAngle(r),m=h?h.value:null,L=o.getRatio("arc",h),N=r.data.id,!o.hasType("gauge")&&!o.meetsArcLabelThreshold(L))?"":(G=o.getArcLabelFormat(),G?G(m,L,N):o.defaultArcValueFormat(m,L))},n.prototype.textForGaugeMinMax=function(r,o){var h=this,m=h.getGaugeLabelExtents();return m?m(r,o):r},n.prototype.expandArc=function(r){var o=this,h;if(o.transiting){h=window.setInterval(function(){o.transiting||(window.clearInterval(h),o.legend.selectAll(".c3-legend-item-focused").size()>0&&o.expandArc(r))},10);return}r=o.mapToTargetIds(r),o.svg.selectAll(o.selectorTargets(r,"."+F.chartArc)).each(function(m){o.shouldExpand(m.data.id)&&o.d3.select(this).selectAll("path").transition().duration(o.expandDuration(m.data.id)).attr("d",o.svgArcExpanded).transition().duration(o.expandDuration(m.data.id)*2).attr("d",o.svgArcExpandedSub).each(function(L){o.isDonutType(L.data)})})},n.prototype.unexpandArc=function(r){var o=this;o.transiting||(r=o.mapToTargetIds(r),o.svg.selectAll(o.selectorTargets(r,"."+F.chartArc)).selectAll("path").transition().duration(function(h){return o.expandDuration(h.data.id)}).attr("d",o.svgArc),o.svg.selectAll("."+F.arc))},n.prototype.expandDuration=function(r){var o=this,h=o.config;return o.isDonutType(r)?h.donut_expand_duration:o.isGaugeType(r)?h.gauge_expand_duration:o.isPieType(r)?h.pie_expand_duration:50},n.prototype.shouldExpand=function(r){var o=this,h=o.config;return o.isDonutType(r)&&h.donut_expand||o.isGaugeType(r)&&h.gauge_expand||o.isPieType(r)&&h.pie_expand},n.prototype.shouldShowArcLabel=function(){var r=this,o=r.config,h=!0;return r.hasType("donut")?h=o.donut_label_show:r.hasType("pie")&&(h=o.pie_label_show),h},n.prototype.meetsArcLabelThreshold=function(r){var o=this,h=o.config,m=o.hasType("donut")?h.donut_label_threshold:h.pie_label_threshold;return r>=m},n.prototype.getArcLabelFormat=function(){var r=this,o=r.config,h=o.pie_label_format;return r.hasType("gauge")?h=o.gauge_label_format:r.hasType("donut")&&(h=o.donut_label_format),h},n.prototype.getGaugeLabelExtents=function(){var r=this,o=r.config;return o.gauge_label_extents},n.prototype.getArcTitle=function(){var r=this;return r.hasType("donut")?r.config.donut_title:""},n.prototype.updateTargetsForArc=function(r){var o=this,h=o.main,m,L,N=o.classChartArc.bind(o),G=o.classArcs.bind(o),H=o.classFocus.bind(o);m=h.select("."+F.chartArcs).selectAll("."+F.chartArc).data(o.pie(r)).attr("class",function(W){return N(W)+H(W.data)}),L=m.enter().append("g").attr("class",N),L.append("g").attr("class",G),L.append("text").attr("dy",o.hasType("gauge")?"-.1em":".35em").style("opacity",0).style("text-anchor","middle").style("pointer-events","none")},n.prototype.initArc=function(){var r=this;r.arcs=r.main.select("."+F.chart).append("g").attr("class",F.chartArcs).attr("transform",r.getTranslate("arc")),r.arcs.append("text").attr("class",F.chartArcsTitle).style("text-anchor","middle").text(r.getArcTitle())},n.prototype.redrawArc=function(r,o,h){var m=this,L=m.d3,N=m.config,G=m.main,H,W,z,Q,Z=m.hasType("gauge");if(H=G.selectAll("."+F.arcs).selectAll("."+F.arc).data(m.arcData.bind(m)),W=H.enter().append("path").attr("class",m.classArc.bind(m)).style("fill",function(ht){return m.color(ht.data)}).style("cursor",function(ht){return N.interaction_enabled&&N.data_selection_isselectable(ht)?"pointer":null}).each(function(ht){m.isGaugeType(ht.data)&&(ht.startAngle=ht.endAngle=N.gauge_startingAngle),this._current=ht}).merge(H),Z&&(z=G.selectAll("."+F.arcs).selectAll("."+F.arcLabelLine).data(m.arcData.bind(m)),Q=z.enter().append("rect").attr("class",function(ht){return F.arcLabelLine+" "+F.target+" "+F.target+"-"+ht.data.id}).merge(z),m.filterTargetsToShow(m.data.targets).length===1?Q.style("display","none"):Q.style("fill",function(ht){return m.levelColor?m.levelColor(ht.data.values.reduce(function(ft,vt){return ft+vt.value},0)):m.color(ht.data)}).style("display",N.gauge_labelLine_show?"":"none").each(function(ht){var ft=0,vt=2,xt=0,Tt=0,St="";if(m.hiddenTargetIds.indexOf(ht.data.id)<0){var Pt=m.updateAngle(ht),Lt=m.gaugeArcWidth/m.filterTargetsToShow(m.data.targets).length*(Pt.index+1),tt=Pt.endAngle-Math.PI/2,rt=m.radius-Lt,at=tt-(rt===0?0:1/rt);ft=m.radiusExpanded-m.radius+Lt,xt=Math.cos(at)*rt,Tt=Math.sin(at)*rt,St="rotate("+tt*180/Math.PI+", "+xt+", "+Tt+")"}L.select(this).attr("x",xt).attr("y",Tt).attr("width",ft).attr("height",vt).attr("transform",St).style("stroke-dasharray","0, "+(ft+vt)+", 0")})),W.attr("transform",function(ht){return!m.isGaugeType(ht.data)&&h?"scale(0)":""}).on("mouseover",N.interaction_enabled?function(ht){var ft,vt;m.transiting||(ft=m.updateAngle(ht),ft&&(vt=m.convertToArcData(ft),m.expandArc(ft.data.id),m.api.focus(ft.data.id),m.toggleFocusLegend(ft.data.id,!0),m.config.data_onmouseover(vt,this)))}:null).on("mousemove",N.interaction_enabled?function(ht){var ft=m.updateAngle(ht),vt,xt;ft&&(vt=m.convertToArcData(ft),xt=[vt],m.showTooltip(xt,this))}:null).on("mouseout",N.interaction_enabled?function(ht){var ft,vt;m.transiting||(ft=m.updateAngle(ht),ft&&(vt=m.convertToArcData(ft),m.unexpandArc(ft.data.id),m.api.revert(),m.revertLegend(),m.hideTooltip(),m.config.data_onmouseout(vt,this)))}:null).on("click",N.interaction_enabled?function(ht,ft){var vt=m.updateAngle(ht),xt;vt&&(xt=m.convertToArcData(vt),m.toggleShape&&m.toggleShape(this,xt,ft),m.config.data_onclick.call(m.api,xt,this))}:null).each(function(){m.transiting=!0}).transition().duration(r).attrTween("d",function(ht){var ft=m.updateAngle(ht),vt;return ft?(isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle),vt=L.interpolate(this._current,ft),this._current=vt(0),function(xt){if(m.config===null)return"M 0 0";var Tt=vt(xt);return Tt.data=ht.data,m.getArc(Tt,!0)}):function(){return"M 0 0"}}).attr("transform",h?"scale(1)":"").style("fill",function(ht){return m.levelColor?m.levelColor(ht.data.values.reduce(function(ft,vt){return ft+vt.value},0)):m.color(ht.data.id)}).call(m.endall,function(){m.transiting=!1}),H.exit().transition().duration(o).style("opacity",0).remove(),G.selectAll("."+F.chartArc).select("text").style("opacity",0).attr("class",function(ht){return m.isGaugeType(ht.data)?F.gaugeValue:""}).text(m.textForArcLabel.bind(m)).attr("transform",m.transformForArcLabel.bind(m)).style("font-size",function(ht){return m.isGaugeType(ht.data)&&m.filterTargetsToShow(m.data.targets).length===1?Math.round(m.radius/5)+"px":""}).transition().duration(r).style("opacity",function(ht){return m.isTargetToShow(ht.data.id)&&m.isArcType(ht.data)?1:0}),G.select("."+F.chartArcsTitle).style("opacity",m.hasType("donut")||Z?1:0),Z){var ot=0,J=m.arcs.select("g."+F.chartArcsBackground).selectAll("path."+F.chartArcsBackground).data(m.data.targets);J.enter().append("path").attr("class",function(ht,ft){return F.chartArcsBackground+" "+F.chartArcsBackground+"-"+ft}).merge(J).attr("d",function(ht){if(m.hiddenTargetIds.indexOf(ht.id)>=0)return"M 0 0";var ft={data:[{value:N.gauge_max}],startAngle:N.gauge_startingAngle,endAngle:-1*N.gauge_startingAngle*(N.gauge_fullCircle?Math.PI:1),index:ot++};return m.getArc(ft,!0,!0)}),J.exit().remove(),m.arcs.select("."+F.chartArcsGaugeUnit).attr("dy",".75em").text(N.gauge_label_show?N.gauge_units:""),m.arcs.select("."+F.chartArcsGaugeMin).attr("dx",-1*(m.innerRadius+(m.radius-m.innerRadius)/(N.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(N.gauge_label_show?m.textForGaugeMinMax(N.gauge_min,!1):""),m.arcs.select("."+F.chartArcsGaugeMax).attr("dx",m.innerRadius+(m.radius-m.innerRadius)/(N.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(N.gauge_label_show?m.textForGaugeMinMax(N.gauge_max,!0):"")}},n.prototype.initGauge=function(){var r=this.arcs;this.hasType("gauge")&&(r.append("g").attr("class",F.chartArcsBackground),r.append("text").attr("class",F.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),r.append("text").attr("class",F.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),r.append("text").attr("class",F.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},n.prototype.getGaugeLabelHeight=function(){return this.config.gauge_label_show?20:0},n.prototype.addToCache=function(r,o){this.cache["$"+r]=o},n.prototype.getFromCache=function(r){return this.cache["$"+r]},n.prototype.resetCache=function(){var r=this;Object.keys(this.cache).filter(function(o){return/^\$/.test(o)}).forEach(function(o){delete r.cache[o]})},n.prototype.hasCaches=function(r){for(var o=0;o<r.length;o++)if(!(r[o]in this.cache))return!1;return!0},n.prototype.addCache=function(r,o){this.cache[r]=this.cloneTarget(o)},n.prototype.getCaches=function(r){var o=[],h;for(h=0;h<r.length;h++)r[h]in this.cache&&o.push(this.cloneTarget(this.cache[r[h]]));return o},n.prototype.categoryName=function(r){var o=this.config;return r<o.axis_x_categories.length?o.axis_x_categories[r]:r},n.prototype.generateTargetClass=function(r){return r||r===0?("-"+r).replace(/\s/g,"-"):""},n.prototype.generateClass=function(r,o){return" "+r+" "+r+this.generateTargetClass(o)},n.prototype.classText=function(r){return this.generateClass(F.text,r.index)},n.prototype.classTexts=function(r){return this.generateClass(F.texts,r.id)},n.prototype.classShape=function(r){return this.generateClass(F.shape,r.index)},n.prototype.classShapes=function(r){return this.generateClass(F.shapes,r.id)},n.prototype.classLine=function(r){return this.classShape(r)+this.generateClass(F.line,r.id)},n.prototype.classLines=function(r){return this.classShapes(r)+this.generateClass(F.lines,r.id)},n.prototype.classCircle=function(r){return this.classShape(r)+this.generateClass(F.circle,r.index)},n.prototype.classCircles=function(r){return this.classShapes(r)+this.generateClass(F.circles,r.id)},n.prototype.classBar=function(r){return this.classShape(r)+this.generateClass(F.bar,r.index)},n.prototype.classBars=function(r){return this.classShapes(r)+this.generateClass(F.bars,r.id)},n.prototype.classArc=function(r){return this.classShape(r.data)+this.generateClass(F.arc,r.data.id)},n.prototype.classArcs=function(r){return this.classShapes(r.data)+this.generateClass(F.arcs,r.data.id)},n.prototype.classArea=function(r){return this.classShape(r)+this.generateClass(F.area,r.id)},n.prototype.classAreas=function(r){return this.classShapes(r)+this.generateClass(F.areas,r.id)},n.prototype.classRegion=function(r,o){return this.generateClass(F.region,o)+" "+("class"in r?r.class:"")},n.prototype.classEvent=function(r){return this.generateClass(F.eventRect,r.index)},n.prototype.classTarget=function(r){var o=this,h=o.config.data_classes[r],m="";return h&&(m=" "+F.target+"-"+h),o.generateClass(F.target,r)+m},n.prototype.classFocus=function(r){return this.classFocused(r)+this.classDefocused(r)},n.prototype.classFocused=function(r){return" "+(this.focusedTargetIds.indexOf(r.id)>=0?F.focused:"")},n.prototype.classDefocused=function(r){return" "+(this.defocusedTargetIds.indexOf(r.id)>=0?F.defocused:"")},n.prototype.classChartText=function(r){return F.chartText+this.classTarget(r.id)},n.prototype.classChartLine=function(r){return F.chartLine+this.classTarget(r.id)},n.prototype.classChartBar=function(r){return F.chartBar+this.classTarget(r.id)},n.prototype.classChartArc=function(r){return F.chartArc+this.classTarget(r.data.id)},n.prototype.getTargetSelectorSuffix=function(r){var o=this.generateTargetClass(r);return window.CSS&&window.CSS.escape?window.CSS.escape(o):o.replace(/([?!@#$%^&*()=+,.<>'":;\[\]\/|~`{}\\])/g,"\\$1")},n.prototype.selectorTarget=function(r,o){return(o||"")+"."+F.target+this.getTargetSelectorSuffix(r)},n.prototype.selectorTargets=function(r,o){var h=this;return r=r||[],r.length?r.map(function(m){return h.selectorTarget(m,o)}):null},n.prototype.selectorLegend=function(r){return"."+F.legendItem+this.getTargetSelectorSuffix(r)},n.prototype.selectorLegends=function(r){var o=this;return r&&r.length?r.map(function(h){return o.selectorLegend(h)}):null},n.prototype.getClipPath=function(r){return"url("+(lt(9)?"":document.URL.split("#")[0])+"#"+r+")"},n.prototype.appendClip=function(r,o){return r.append("clipPath").attr("id",o).append("rect")},n.prototype.getAxisClipX=function(r){var o=Math.max(30,this.margin.left);return r?-(1+o):-(o-1)},n.prototype.getAxisClipY=function(r){return r?-20:-this.margin.top},n.prototype.getXAxisClipX=function(){var r=this;return r.getAxisClipX(!r.config.axis_rotated)},n.prototype.getXAxisClipY=function(){var r=this;return r.getAxisClipY(!r.config.axis_rotated)},n.prototype.getYAxisClipX=function(){var r=this;return r.config.axis_y_inner?-1:r.getAxisClipX(r.config.axis_rotated)},n.prototype.getYAxisClipY=function(){var r=this;return r.getAxisClipY(r.config.axis_rotated)},n.prototype.getAxisClipWidth=function(r){var o=this,h=Math.max(30,o.margin.left),m=Math.max(30,o.margin.right);return r?o.width+2+h+m:o.margin.left+20},n.prototype.getAxisClipHeight=function(r){return(r?this.margin.bottom:this.margin.top+this.height)+20},n.prototype.getXAxisClipWidth=function(){var r=this;return r.getAxisClipWidth(!r.config.axis_rotated)},n.prototype.getXAxisClipHeight=function(){var r=this;return r.getAxisClipHeight(!r.config.axis_rotated)},n.prototype.getYAxisClipWidth=function(){var r=this;return r.getAxisClipWidth(r.config.axis_rotated)+(r.config.axis_y_inner?20:0)},n.prototype.getYAxisClipHeight=function(){var r=this;return r.getAxisClipHeight(r.config.axis_rotated)},n.prototype.generateColor=function(){var r=this,o=r.config,h=r.d3,m=o.data_colors,L=O(o.color_pattern)?o.color_pattern:h.schemeCategory10,N=o.data_color,G=[];return function(H){var W=H.id||H.data&&H.data.id||H,z;return m[W]instanceof Function?z=m[W](H):m[W]?z=m[W]:(G.indexOf(W)<0&&G.push(W),z=L[G.indexOf(W)%L.length],m[W]=z),N instanceof Function?N(z,H):z}},n.prototype.generateLevelColor=function(){var r=this,o=r.config,h=o.color_pattern,m=o.color_threshold,L=m.unit==="value",N=m.values&&m.values.length?m.values:[],G=m.max||100;return O(m)&&O(h)?function(H){var W,z,Q=h[h.length-1];for(W=0;W<N.length;W++)if(z=L?H:H*100/G,z<N[W]){Q=h[W];break}return Q}:null},n.prototype.getDefaultConfig=function(){var r={bindto:"#chart",svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_initialRange:void 0,zoom_type:"scroll",zoom_disableDefaultBehavior:!1,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_brighten:!0,interaction_enabled:!0,onmouseover:function(){},onmouseout:function(){},onresize:function(){},onresized:function(){},oninit:function(){},onrendered:function(){},transition_duration:350,data_epochs:"epochs",data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(o){return o},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_type:void 0,data_types:{},data_labels:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_stack_normalize:!1,data_onclick:function(){},data_onmouseover:function(){},data_onmouseout:function(){},data_onselected:function(){},data_onunselected:function(){},data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onmouseover:void 0,legend_item_onmouseout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_width:10,legend_item_tile_height:10,axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_multilineMax:0,axis_x_tick_width:null,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_selection:void 0,axis_x_label:{},axis_x_inner:void 0,axis_y_show:!0,axis_y_type:"linear",axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:void 0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_type:void 0,axis_y_tick_time_interval:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_type:"linear",axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:void 0,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!1,grid_y_lines:[],grid_y_ticks:10,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:2.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,line_connectNull:!1,line_step_type:"step",bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bar_space:0,area_zerobased:!0,area_above:!1,pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_expand:{},pie_expand_duration:50,pie_padAngle:0,gauge_fullCircle:!1,gauge_label_show:!0,gauge_labelLine_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_arcs_minWidth:5,gauge_expand:{},gauge_expand_duration:50,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,donut_padAngle:0,spline_interpolation_type:"cardinal",stanford_lines:[],stanford_regions:[],stanford_texts:[],stanford_scaleMin:void 0,stanford_scaleMax:void 0,stanford_scaleWidth:void 0,stanford_scaleFormat:void 0,stanford_scaleValues:void 0,stanford_colors:void 0,stanford_padding:{top:0,right:0,bottom:0,left:0},regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_order:void 0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_horizontal:void 0,tooltip_position:void 0,tooltip_contents:function(o,h,m,L){return this.getTooltipContent?this.getTooltipContent(o,h,m,L):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{top:"0px",left:"50px"},tooltip_onshow:function(){},tooltip_onhide:function(){},title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center"};return Object.keys(this.additionalConfig).forEach(function(o){r[o]=this.additionalConfig[o]},this),r},n.prototype.additionalConfig={},n.prototype.loadConfig=function(r){var o=this.config,h,m,L;function N(){var G=m.shift();return G&&h&&typeof h=="object"&&G in h?(h=h[G],N()):G?void 0:h}Object.keys(o).forEach(function(G){h=r,m=G.split("_"),L=N(),p(L)&&(o[G]=L)})},n.prototype.convertUrlToData=function(r,o,h,m,L){var N=this,G=o||"csv",H,W;G==="json"?(H=N.d3.json,W=N.convertJsonToData):G==="tsv"?(H=N.d3.tsv,W=N.convertXsvToData):(H=N.d3.csv,W=N.convertXsvToData),H(r,h).then(function(z){L.call(N,W.call(N,z,m))}).catch(function(z){throw z})},n.prototype.convertXsvToData=function(r){var o=r.columns,h=r;return h.length===0?{keys:o,rows:[o.reduce(function(m,L){var N;return Object.assign(m,(N={},N[L]=null,N))},{})]}:{keys:o,rows:[].concat(r)}},n.prototype.convertJsonToData=function(r,o){var h=this,m=[],L,N;return o?(o.x?(L=o.value.concat(o.x),h.config.data_x=o.x):L=o.value,m.push(L),r.forEach(function(G){var H=[];L.forEach(function(W){var z=h.findValueInJson(G,W);P(z)&&(z=null),H.push(z)}),m.push(H)}),N=h.convertRowsToData(m)):(Object.keys(r).forEach(function(G){m.push([G].concat(r[G]))}),N=h.convertColumnsToData(m)),N},n.prototype.findValueInJson=function(r,o){if(o in r)return r[o];o=o.replace(/\[(\w+)\]/g,".$1"),o=o.replace(/^\./,"");for(var h=o.split("."),m=0;m<h.length;++m){var L=h[m];if(L in r)r=r[L];else return}return r},n.prototype.convertRowsToData=function(r){for(var o=[],h=r[0],m=1;m<r.length;m++){for(var L={},N=0;N<r[m].length;N++){if(P(r[m][N]))throw new Error("Source data is missing a component at ("+m+","+N+")!");L[h[N]]=r[m][N]}o.push(L)}return{keys:h,rows:o}},n.prototype.convertColumnsToData=function(r){for(var o=[],h=[],m=0;m<r.length;m++){for(var L=r[m][0],N=1;N<r[m].length;N++){if(P(o[N-1])&&(o[N-1]={}),P(r[m][N]))throw new Error("Source data is missing a component at ("+m+","+N+")!");o[N-1][L]=r[m][N]}h.push(L)}return{keys:h,rows:o}},n.prototype.convertDataToTargets=function(r,o){var h=this,m=h.config,L,N,G,H,W;if(w(r)?H=Object.keys(r[0]):(H=r.keys,r=r.rows),G=H.filter(h.isX,h),!h.isStanfordGraphType())N=H.filter(h.isNotX,h);else if(W=H.filter(h.isEpochs,h),N=H.filter(h.isNotXAndNotEpochs,h),G.length!==1||W.length!==1||N.length!==1)throw new Error("You must define the 'x' key name and the 'epochs' for Stanford Diagrams");return N.forEach(function(z){var Q=h.getXKey(z);h.isCustomX()||h.isTimeSeries()?G.indexOf(Q)>=0?h.data.xs[z]=(o&&h.data.xs[z]?h.data.xs[z]:[]).concat(r.map(function(Z){return Z[Q]}).filter(R).map(function(Z,ot){return h.generateTargetX(Z,z,ot)})):m.data_x?h.data.xs[z]=h.getOtherTargetXs():O(m.data_xs)&&(h.data.xs[z]=h.getXValuesOfXKey(Q,h.data.targets)):h.data.xs[z]=r.map(function(Z,ot){return ot})}),N.forEach(function(z){if(!h.data.xs[z])throw new Error('x is not defined for id = "'+z+'".')}),L=N.map(function(z,Q){var Z=m.data_idConverter(z);return{id:Z,id_org:z,values:r.map(function(ot,J){var ht=h.getXKey(z),ft=ot[ht],vt=ot[z]!==null&&!isNaN(ot[z])?+ot[z]:null,xt,Tt;return h.isCustomX()&&h.isCategorized()&&!P(ft)?(Q===0&&J===0&&(m.axis_x_categories=[]),xt=m.axis_x_categories.indexOf(ft),xt===-1&&(xt=m.axis_x_categories.length,m.axis_x_categories.push(ft))):xt=h.generateTargetX(ft,z,J),(P(ot[z])||h.data.xs[z].length<=J)&&(xt=void 0),Tt={x:xt,value:vt,id:Z},h.isStanfordGraphType()&&(Tt.epochs=ot[W]),Tt}).filter(function(ot){return p(ot.x)})}}),L.forEach(function(z){var Q;m.data_xSort&&(z.values=z.values.sort(function(Z,ot){var J=Z.x||Z.x===0?Z.x:1/0,ht=ot.x||ot.x===0?ot.x:1/0;return J-ht})),Q=0,z.values.forEach(function(Z){Z.index=Q++}),h.data.xs[z.id].sort(function(Z,ot){return Z-ot})}),h.hasNegativeValue=h.hasNegativeValueInTargets(L),h.hasPositiveValue=h.hasPositiveValueInTargets(L),m.data_type&&h.setTargetType(h.mapToIds(L).filter(function(z){return!(z in m.data_types)}),m.data_type),L.forEach(function(z){h.addCache(z.id_org,z)}),L},n.prototype.isEpochs=function(r){var o=this,h=o.config;return h.data_epochs&&r===h.data_epochs},n.prototype.isX=function(r){var o=this,h=o.config;return h.data_x&&r===h.data_x||O(h.data_xs)&&$(h.data_xs,r)},n.prototype.isNotX=function(r){return!this.isX(r)},n.prototype.isNotXAndNotEpochs=function(r){return!this.isX(r)&&!this.isEpochs(r)},n.prototype.isStackNormalized=function(){return this.config.data_stack_normalize&&this.config.data_groups.length>0},n.prototype.isAxisNormalized=function(r){var o=this;return o.isStackNormalized()?o.data.targets.filter(function(h){return o.axis.getId(h.id)===r}).some(function(h){return o.isTargetNormalized(h.id)}):!1},n.prototype.isTargetNormalized=function(r){var o=this;return o.isStackNormalized()&&o.config.data_groups.some(function(h){return h.includes(r)})},n.prototype.getXKey=function(r){var o=this,h=o.config;return h.data_x?h.data_x:O(h.data_xs)?h.data_xs[r]:null},n.prototype.getTotalPerIndex=function(r){var o=this;if(!o.isStackNormalized())return null;var h=o.getFromCache("getTotalPerIndex");if(h!==void 0)return h[r];var m={y:[],y2:[]};return o.data.targets.filter(function(L){return o.isTargetNormalized(L.id)}).filter(function(L){return o.isTargetToShow(L.id)}).forEach(function(L){var N=m[o.axis.getId(L.id)];L.values.forEach(function(G,H){N[H]||(N[H]=0),N[H]+=T(G.value)?G.value:0})}),o.addToCache("getTotalPerIndex",m),m[r]},n.prototype.getTotalDataSum=function(){var r=this,o=r.getFromCache("getTotalDataSum");if(o!==void 0)return o;var h=q(r.data.targets.filter(function(m){return r.isTargetToShow(m.id)}).map(function(m){return m.values})).map(function(m){return m.value}).reduce(function(m,L){return m+L},0);return r.addToCache("getTotalDataSum",h),h},n.prototype.getXValuesOfXKey=function(r,o){var h=this,m,L=o&&O(o)?h.mapToIds(o):[];return L.forEach(function(N){h.getXKey(N)===r&&(m=h.data.xs[N])}),m},n.prototype.getXValue=function(r,o){var h=this;return r in h.data.xs&&h.data.xs[r]&&R(h.data.xs[r][o])?h.data.xs[r][o]:o},n.prototype.getOtherTargetXs=function(){var r=this,o=Object.keys(r.data.xs);return o.length?r.data.xs[o[0]]:null},n.prototype.getOtherTargetX=function(r){var o=this.getOtherTargetXs();return o&&r<o.length?o[r]:null},n.prototype.addXs=function(r){var o=this;Object.keys(r).forEach(function(h){o.config.data_xs[h]=r[h]})},n.prototype.addName=function(r){var o=this,h;return r&&(h=o.config.data_names[r.id],r.name=h!==void 0?h:r.id),r},n.prototype.getValueOnIndex=function(r,o){var h=r.filter(function(m){return m.index===o});return h.length?h[0]:null},n.prototype.updateTargetX=function(r,o){var h=this;r.forEach(function(m){m.values.forEach(function(L,N){L.x=h.generateTargetX(o[N],m.id,N)}),h.data.xs[m.id]=o})},n.prototype.updateTargetXs=function(r,o){var h=this;r.forEach(function(m){o[m.id]&&h.updateTargetX([m],o[m.id])})},n.prototype.generateTargetX=function(r,o,h){var m=this,L;return m.isTimeSeries()?L=r?m.parseDate(r):m.parseDate(m.getXValue(o,h)):m.isCustomX()&&!m.isCategorized()?L=R(r)?+r:m.getXValue(o,h):L=h,L},n.prototype.cloneTarget=function(r){return{id:r.id,id_org:r.id_org,values:r.values.map(function(o){return{x:o.x,value:o.value,id:o.id}})}},n.prototype.getMaxDataCount=function(){var r=this;return r.d3.max(r.data.targets,function(o){return o.values.length})},n.prototype.mapToIds=function(r){return r.map(function(o){return o.id})},n.prototype.mapToTargetIds=function(r){var o=this;return r?[].concat(r):o.mapToIds(o.data.targets)},n.prototype.hasTarget=function(r,o){var h=this.mapToIds(r),m;for(m=0;m<h.length;m++)if(h[m]===o)return!0;return!1},n.prototype.isTargetToShow=function(r){return this.hiddenTargetIds.indexOf(r)<0},n.prototype.isLegendToShow=function(r){return this.hiddenLegendIds.indexOf(r)<0},n.prototype.getTargetsToShow=function(){var r=this;return r.filterTargetsToShow(r.data.targets)},n.prototype.filterTargetsToShow=function(r){var o=this;return r.filter(function(h){return o.isTargetToShow(h.id)})},n.prototype.getTargets=function(){var r=this;return r.data.targets},n.prototype.mapTargetsToUniqueXs=function(r){var o=this,h=o.d3.set(o.d3.merge(r.map(function(m){return m.values.map(function(L){return+L.x})}))).values();return h=o.isTimeSeries()?h.map(function(m){return new Date(+m)}):h.map(function(m){return+m}),h.sort(function(m,L){return m<L?-1:m>L?1:m>=L?0:NaN})},n.prototype.addHiddenTargetIds=function(r){r=r instanceof Array?r:new Array(r);for(var o=0;o<r.length;o++)this.hiddenTargetIds.indexOf(r[o])<0&&(this.hiddenTargetIds=this.hiddenTargetIds.concat(r[o]));this.resetCache()},n.prototype.removeHiddenTargetIds=function(r){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(o){return r.indexOf(o)<0}),this.resetCache()},n.prototype.addHiddenLegendIds=function(r){r=r instanceof Array?r:new Array(r);for(var o=0;o<r.length;o++)this.hiddenLegendIds.indexOf(r[o])<0&&(this.hiddenLegendIds=this.hiddenLegendIds.concat(r[o]))},n.prototype.removeHiddenLegendIds=function(r){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(o){return r.indexOf(o)<0})},n.prototype.getValuesAsIdKeyed=function(r){var o={};return r.forEach(function(h){o[h.id]=[],h.values.forEach(function(m){o[h.id].push(m.value)})}),o},n.prototype.checkValueInTargets=function(r,o){var h=Object.keys(r),m,L,N;for(m=0;m<h.length;m++)for(N=r[h[m]].values,L=0;L<N.length;L++)if(o(N[L].value))return!0;return!1},n.prototype.hasNegativeValueInTargets=function(r){return this.checkValueInTargets(r,function(o){return o<0})},n.prototype.hasPositiveValueInTargets=function(r){return this.checkValueInTargets(r,function(o){return o>0})},n.prototype.isOrderDesc=function(){var r=this.config;return typeof r.data_order=="string"&&r.data_order.toLowerCase()==="desc"},n.prototype.isOrderAsc=function(){var r=this.config;return typeof r.data_order=="string"&&r.data_order.toLowerCase()==="asc"},n.prototype.getOrderFunction=function(){var r=this,o=r.config,h=r.isOrderAsc(),m=r.isOrderDesc();if(h||m){var L=function(G,H){return G+Math.abs(H.value)};return function(G,H){var W=G.values.reduce(L,0),z=H.values.reduce(L,0);return h?z-W:W-z}}else{if(v(o.data_order))return o.data_order;if(w(o.data_order)){var N=o.data_order;return function(G,H){return N.indexOf(G.id)-N.indexOf(H.id)}}}},n.prototype.orderTargets=function(r){var o=this.getOrderFunction();return o&&r.sort(o),r},n.prototype.filterByIndex=function(r,o){return this.d3.merge(r.map(function(h){return h.values.filter(function(m){return m.index===o})}))},n.prototype.filterByX=function(r,o){return this.d3.merge(r.map(function(h){return h.values})).filter(function(h){return h.x-o===0})},n.prototype.filterRemoveNull=function(r){return r.filter(function(o){return R(o.value)})},n.prototype.filterByXDomain=function(r,o){return r.map(function(h){return{id:h.id,id_org:h.id_org,values:h.values.filter(function(m){return o[0]<=m.x&&m.x<=o[1]})}})},n.prototype.hasDataLabel=function(){var r=this.config;return typeof r.data_labels=="boolean"&&r.data_labels?!0:!!(typeof r.data_labels=="object"&&O(r.data_labels))},n.prototype.getDataLabelLength=function(r,o,h){var m=this,L=[0,0],N=1.3;return m.selectChart.select("svg").selectAll(".dummy").data([r,o]).enter().append("text").text(function(G){return m.dataLabelFormat(G.id)(G)}).each(function(G,H){L[H]=b(this)[h]*N}).remove(),L},n.prototype.isNoneArc=function(r){return this.hasTarget(this.data.targets,r.id)},n.prototype.isArc=function(r){return"data"in r&&this.hasTarget(this.data.targets,r.data.id)},n.prototype.findClosestFromTargets=function(r,o){var h=this,m=r.map(function(L){return h.findClosest(L.values,o,h.config.tooltip_horizontal?h.horizontalDistance.bind(h):h.dist.bind(h),h.config.point_sensitivity)}).filter(function(L){return L});if(m.length!==0)return m.length===1?m[0]:h.findClosest(m,o,h.dist.bind(h))},n.prototype.findClosestFromTargetsByX=function(r,o){var h,m;return r.forEach(function(L){L.values.forEach(function(N){var G=Math.abs(o-N.x);(m===void 0||G<m)&&(h=N,m=G)})}),h},n.prototype.findClosest=function(r,o,h,m){m===void 0&&(m=1/0);var L=this,N;return r.filter(function(G){return G&&L.isBarType(G.id)}).forEach(function(G){if(!N){var H=L.main.select("."+F.bars+L.getTargetSelectorSuffix(G.id)+" ."+F.bar+"-"+G.index).node();L.isWithinBar(o,H)&&(N=G)}}),r.filter(function(G){return G&&!L.isBarType(G.id)}).forEach(function(G){var H=h(G,o);H<m&&(m=H,N=G)}),N},n.prototype.dist=function(r,o){var h=this,m=h.config,L=m.axis_rotated?1:0,N=m.axis_rotated?0:1,G=h.circleY(r,r.index),H=h.x(r.x);return Math.sqrt(Math.pow(H-o[L],2)+Math.pow(G-o[N],2))},n.prototype.horizontalDistance=function(r,o){var h=this,m=h.config,L=m.axis_rotated?1:0,N=h.x(r.x);return Math.abs(N-o[L])},n.prototype.convertValuesToStep=function(r){var o=[].concat(r),h;if(!this.isCategorized())return r;for(h=r.length+1;0<h;h--)o[h]=o[h-1];return o[0]={x:o[0].x-1,value:o[0].value,id:o[0].id},o[r.length+1]={x:o[r.length].x+1,value:o[r.length].value,id:o[r.length].id},o},n.prototype.getRatio=function(r,o,h){h===void 0&&(h=!1);var m=this,L=m.api,N=0;if(o&&L.data.shown.call(L).length){if(N=o.ratio||o.value,r==="arc")if(m.hasType("gauge"))N=(o.endAngle-o.startAngle)/(Math.PI*(m.config.gauge_fullCircle?2:1));else{var G=m.getTotalDataSum();N=o.value/G}else if(r==="index"){var G=m.getTotalPerIndex(m.axis.getId(o.id));o.ratio=T(o.value)&&G&&G[o.index]>0?o.value/G[o.index]:0,N=o.ratio}}return h&&N?N*100:N},n.prototype.updateDataAttributes=function(r,o){var h=this,m=h.config,L=m["data_"+r];return typeof o=="undefined"||(Object.keys(o).forEach(function(N){L[N]=o[N]}),h.redraw({withLegend:!0})),L},n.prototype.load=function(r,o){var h=this;r&&(o.filter&&(r=r.filter(o.filter)),(o.type||o.types)&&r.forEach(function(m){var L=o.types&&o.types[m.id]?o.types[m.id]:o.type;h.setTargetType(m.id,L)}),h.data.targets.forEach(function(m){for(var L=0;L<r.length;L++)if(m.id===r[L].id){m.values=r[L].values,r.splice(L,1);break}}),h.data.targets=h.data.targets.concat(r)),h.updateTargets(h.data.targets),h.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),o.done&&o.done()},n.prototype.loadFromArgs=function(r){var o=this;o.resetCache(),r.data?o.load(o.convertDataToTargets(r.data),r):r.url?o.convertUrlToData(r.url,r.mimeType,r.headers,r.keys,function(h){o.load(o.convertDataToTargets(h),r)}):r.json?o.load(o.convertDataToTargets(o.convertJsonToData(r.json,r.keys)),r):r.rows?o.load(o.convertDataToTargets(o.convertRowsToData(r.rows)),r):r.columns?o.load(o.convertDataToTargets(o.convertColumnsToData(r.columns)),r):o.load(null,r)},n.prototype.unload=function(r,o){var h=this;if(h.resetCache(),o||(o=function(){}),r=r.filter(function(m){return h.hasTarget(h.data.targets,m)}),!r||r.length===0){o();return}h.svg.selectAll(r.map(function(m){return h.selectorTarget(m)})).transition().style("opacity",0).remove().call(h.endall,o),r.forEach(function(m){h.withoutFadeIn[m]=!1,h.legend&&h.legend.selectAll("."+F.legendItem+h.getTargetSelectorSuffix(m)).remove(),h.data.targets=h.data.targets.filter(function(L){return L.id!==m})})},n.prototype.getYDomainMin=function(r){var o=this,h=o.config,m=o.mapToIds(r),L=o.getValuesAsIdKeyed(r),N,G,H,W,z,Q;if(h.data_groups.length>0){for(Q=o.hasNegativeValueInTargets(r),N=0;N<h.data_groups.length;N++)if(W=h.data_groups[N].filter(function(Z){return m.indexOf(Z)>=0}),W.length!==0)for(H=W[0],Q&&L[H]&&L[H].forEach(function(Z,ot){L[H][ot]=Z<0?Z:0}),G=1;G<W.length;G++)z=W[G],L[z]&&L[z].forEach(function(Z,ot){o.axis.getId(z)===o.axis.getId(H)&&L[H]&&!(Q&&+Z>0)&&(L[H][ot]+=+Z)})}return o.d3.min(Object.keys(L).map(function(Z){return o.d3.min(L[Z])}))},n.prototype.getYDomainMax=function(r){var o=this,h=o.config,m=o.mapToIds(r),L=o.getValuesAsIdKeyed(r),N,G,H,W,z,Q;if(h.data_groups.length>0){for(Q=o.hasPositiveValueInTargets(r),N=0;N<h.data_groups.length;N++)if(W=h.data_groups[N].filter(function(Z){return m.indexOf(Z)>=0}),W.length!==0)for(H=W[0],Q&&L[H]&&L[H].forEach(function(Z,ot){L[H][ot]=Z>0?Z:0}),G=1;G<W.length;G++)z=W[G],L[z]&&L[z].forEach(function(Z,ot){o.axis.getId(z)===o.axis.getId(H)&&L[H]&&!(Q&&+Z<0)&&(L[H][ot]+=+Z)})}return o.d3.max(Object.keys(L).map(function(Z){return o.d3.max(L[Z])}))},n.prototype.getYDomain=function(r,o,h){var m=this,L=m.config;if(m.isAxisNormalized(o))return[0,100];var N=r.filter(function(gt){return m.axis.getId(gt.id)===o}),G=h?m.filterByXDomain(N,h):N,H=o==="y2"?L.axis_y2_min:L.axis_y_min,W=o==="y2"?L.axis_y2_max:L.axis_y_max,z=m.getYDomainMin(G),Q=m.getYDomainMax(G),Z,ot,J,ht,ft=o==="y2"?L.axis_y2_center:L.axis_y_center,vt,xt,Tt,St,Pt,Lt,tt=m.hasType("bar",G)&&L.bar_zerobased||m.hasType("area",G)&&L.area_zerobased,rt=o==="y2"?L.axis_y2_inverted:L.axis_y_inverted,at=m.hasDataLabel()&&L.axis_rotated,dt=m.hasDataLabel()&&!L.axis_rotated;if(z=R(H)?H:R(W)?z<W?z:W-10:z,Q=R(W)?W:R(H)?H<Q?Q:H+10:Q,G.length===0)return o==="y2"?m.y2.domain():m.y.domain();if(isNaN(z)&&(z=0),isNaN(Q)&&(Q=z),z===Q&&(z<0?Q=0:z=0),Pt=z>=0&&Q>=0,Lt=z<=0&&Q<=0,(R(H)&&Pt||R(W)&&Lt)&&(tt=!1),tt&&(Pt&&(z=0),Lt&&(Q=0)),ot=Math.abs(Q-z),J=ht=ot*.1,typeof ft!="undefined"&&(vt=Math.max(Math.abs(z),Math.abs(Q)),Q=ft+vt,z=ft-vt),at)xt=m.getDataLabelLength(z,Q,"width"),Tt=d(m.y.range()),St=[xt[0]/Tt,xt[1]/Tt],J+=ot*(St[1]/(1-St[0]-St[1])),ht+=ot*(St[0]/(1-St[0]-St[1]));else if(dt){xt=m.getDataLabelLength(z,Q,"height");var pt=m.getY(L["axis_"+o+"_type"],[0,L.axis_rotated?m.width:m.height],[0,ot]);J+=pt(xt[1]),ht+=pt(xt[0])}return o==="y"&&O(L.axis_y_padding)&&(J=m.axis.getPadding(L.axis_y_padding,"top",J,ot),ht=m.axis.getPadding(L.axis_y_padding,"bottom",ht,ot)),o==="y2"&&O(L.axis_y2_padding)&&(J=m.axis.getPadding(L.axis_y2_padding,"top",J,ot),ht=m.axis.getPadding(L.axis_y2_padding,"bottom",ht,ot)),tt&&(Pt&&(ht=z),Lt&&(J=-Q)),Z=[z-ht,Q+J],rt?Z.reverse():Z},n.prototype.getXDomainMin=function(r){var o=this,h=o.config;return p(h.axis_x_min)?o.isTimeSeries()?this.parseDate(h.axis_x_min):h.axis_x_min:o.d3.min(r,function(m){return o.d3.min(m.values,function(L){return L.x})})},n.prototype.getXDomainMax=function(r){var o=this,h=o.config;return p(h.axis_x_max)?o.isTimeSeries()?this.parseDate(h.axis_x_max):h.axis_x_max:o.d3.max(r,function(m){return o.d3.max(m.values,function(L){return L.x})})},n.prototype.getXDomainPadding=function(r){var o=this,h=o.config,m=r[1]-r[0],L,N,G,H;return o.isCategorized()?N=0:o.hasType("bar")?(L=o.getMaxDataCount(),N=L>1?m/(L-1)/2:.5):N=m*.01,typeof h.axis_x_padding=="object"&&O(h.axis_x_padding)?(G=R(h.axis_x_padding.left)?h.axis_x_padding.left:N,H=R(h.axis_x_padding.right)?h.axis_x_padding.right:N):typeof h.axis_x_padding=="number"?G=H=h.axis_x_padding:G=H=N,{left:G,right:H}},n.prototype.getXDomain=function(r){var o=this,h=[o.getXDomainMin(r),o.getXDomainMax(r)],m=h[0],L=h[1],N=o.getXDomainPadding(h),G=0,H=0;return m-L===0&&!o.isCategorized()&&(o.isTimeSeries()?(m=new Date(m.getTime()*.5),L=new Date(L.getTime()*1.5)):(m=m===0?1:m*.5,L=L===0?-1:L*1.5)),(m||m===0)&&(G=o.isTimeSeries()?new Date(m.getTime()-N.left):m-N.left),(L||L===0)&&(H=o.isTimeSeries()?new Date(L.getTime()+N.right):L+N.right),[G,H]},n.prototype.updateXDomain=function(r,o,h,m,L){var N=this,G=N.config;return h&&(N.x.domain(L||N.d3.extent(N.getXDomain(r))),N.orgXDomain=N.x.domain(),G.zoom_enabled&&N.zoom.update(),N.subX.domain(N.x.domain()),N.brush&&N.brush.updateScale(N.subX)),o&&N.x.domain(L||(!N.brush||N.brush.empty()?N.orgXDomain:N.brush.selectionAsValue())),m&&N.x.domain(N.trimXDomain(N.x.orgDomain())),N.x.domain()},n.prototype.trimXDomain=function(r){var o=this.getZoomDomain(),h=o[0],m=o[1];return r[0]<=h&&(r[1]=+r[1]+(h-r[0]),r[0]=h),m<=r[1]&&(r[0]=+r[0]-(r[1]-m),r[1]=m),r},n.prototype.drag=function(r){var o=this,h=o.config,m=o.main,L=o.d3,N,G,H,W,z,Q,Z,ot;o.hasArcType()||h.data_selection_enabled&&h.data_selection_multiple&&(N=o.dragStart[0],G=o.dragStart[1],H=r[0],W=r[1],z=Math.min(N,H),Q=Math.max(N,H),Z=h.data_selection_grouped?o.margin.top:Math.min(G,W),ot=h.data_selection_grouped?o.height:Math.max(G,W),m.select("."+F.dragarea).attr("x",z).attr("y",Z).attr("width",Q-z).attr("height",ot-Z),m.selectAll("."+F.shapes).selectAll("."+F.shape).each(function(J,ht){if(h.data_selection_isselectable(J)){var ft=L.select(this),vt=ft.classed(F.SELECTED),xt=ft.classed(F.INCLUDED),Tt,St,Pt,Lt,tt,rt=!1,at;if(ft.classed(F.circle))Tt=ft.attr("cx")*1,St=ft.attr("cy")*1,tt=o.togglePoint,rt=z<Tt&&Tt<Q&&Z<St&&St<ot;else if(ft.classed(F.bar))at=_(this),Tt=at.x,St=at.y,Pt=at.width,Lt=at.height,tt=o.togglePath,rt=!(Q<Tt||Tt+Pt<z)&&!(ot<St||St+Lt<Z);else return;rt^xt&&(ft.classed(F.INCLUDED,!xt),ft.classed(F.SELECTED,!vt),tt.call(o,!vt,ft,J,ht))}}))},n.prototype.dragstart=function(r){var o=this,h=o.config;o.hasArcType()||h.data_selection_enabled&&(o.dragStart=r,o.main.select("."+F.chart).append("rect").attr("class",F.dragarea).style("opacity",.1),o.dragging=!0)},n.prototype.dragend=function(){var r=this,o=r.config;r.hasArcType()||o.data_selection_enabled&&(r.main.select("."+F.dragarea).transition().duration(100).style("opacity",0).remove(),r.main.selectAll("."+F.shape).classed(F.INCLUDED,!1),r.dragging=!1)},n.prototype.getYFormat=function(r){var o=this,h=r&&!o.hasType("gauge")?o.defaultArcValueFormat:o.yFormat,m=r&&!o.hasType("gauge")?o.defaultArcValueFormat:o.y2Format;return function(L,N,G){var H=o.axis.getId(G)==="y2"?m:h;return H.call(o,L,N)}},n.prototype.yFormat=function(r){var o=this,h=o.config,m=h.axis_y_tick_format?h.axis_y_tick_format:o.defaultValueFormat;return m(r)},n.prototype.y2Format=function(r){var o=this,h=o.config,m=h.axis_y2_tick_format?h.axis_y2_tick_format:o.defaultValueFormat;return m(r)},n.prototype.defaultValueFormat=function(r){return R(r)?+r:""},n.prototype.defaultArcValueFormat=function(r,o){return(o*100).toFixed(1)+"%"},n.prototype.dataLabelFormat=function(r){var o=this,h=o.config.data_labels,m,L=function(N){return R(N)?+N:""};return typeof h.format=="function"?m=h.format:typeof h.format=="object"?h.format[r]?m=h.format[r]===!0?L:h.format[r]:m=function(){return""}:m=L,m},n.prototype.initGrid=function(){var r=this,o=r.config,h=r.d3;r.grid=r.main.append("g").attr("clip-path",r.clipPathForGrid).attr("class",F.grid),o.grid_x_show&&r.grid.append("g").attr("class",F.xgrids),o.grid_y_show&&r.grid.append("g").attr("class",F.ygrids),o.grid_focus_show&&r.grid.append("g").attr("class",F.xgridFocus).append("line").attr("class",F.xgridFocus),r.xgrid=h.selectAll([]),o.grid_lines_front||r.initGridLines()},n.prototype.initGridLines=function(){var r=this,o=r.d3;r.gridLines=r.main.append("g").attr("clip-path",r.clipPathForGrid).attr("class",F.grid+" "+F.gridLines),r.gridLines.append("g").attr("class",F.xgridLines),r.gridLines.append("g").attr("class",F.ygridLines),r.xgridLines=o.selectAll([])},n.prototype.updateXGrid=function(r){var o=this,h=o.config,m=o.d3,L=o.generateGridData(h.grid_x_type,o.x),N=o.isCategorized()?o.xAxis.tickOffset():0;o.xgridAttr=h.axis_rotated?{x1:0,x2:o.width,y1:function(W){return o.x(W)-N},y2:function(W){return o.x(W)-N}}:{x1:function(W){return o.x(W)+N},x2:function(W){return o.x(W)+N},y1:0,y2:o.height},o.xgridAttr.opacity=function(){var W=+m.select(this).attr(h.axis_rotated?"y1":"x1");return W===(h.axis_rotated?o.height:0)?0:1};var G=o.main.select("."+F.xgrids).selectAll("."+F.xgrid).data(L),H=G.enter().append("line").attr("class",F.xgrid).attr("x1",o.xgridAttr.x1).attr("x2",o.xgridAttr.x2).attr("y1",o.xgridAttr.y1).attr("y2",o.xgridAttr.y2).style("opacity",0);o.xgrid=H.merge(G),r||o.xgrid.attr("x1",o.xgridAttr.x1).attr("x2",o.xgridAttr.x2).attr("y1",o.xgridAttr.y1).attr("y2",o.xgridAttr.y2).style("opacity",o.xgridAttr.opacity),G.exit().remove()},n.prototype.updateYGrid=function(){var r=this,o=r.config,h=r.yAxis.tickValues()||r.y.ticks(o.grid_y_ticks),m=r.main.select("."+F.ygrids).selectAll("."+F.ygrid).data(h),L=m.enter().append("line").attr("class",F.ygrid);r.ygrid=L.merge(m),r.ygrid.attr("x1",o.axis_rotated?r.y:0).attr("x2",o.axis_rotated?r.y:r.width).attr("y1",o.axis_rotated?0:r.y).attr("y2",o.axis_rotated?r.height:r.y),m.exit().remove(),r.smoothLines(r.ygrid,"grid")},n.prototype.gridTextAnchor=function(r){return r.position?r.position:"end"},n.prototype.gridTextDx=function(r){return r.position==="start"?4:r.position==="middle"?0:-4},n.prototype.xGridTextX=function(r){return r.position==="start"?-this.height:r.position==="middle"?-this.height/2:0},n.prototype.yGridTextX=function(r){return r.position==="start"?0:r.position==="middle"?this.width/2:this.width},n.prototype.updateGrid=function(r){var o=this,h=o.main,m=o.config,L,N,G,H,W=o.xv.bind(o),z=o.yv.bind(o),Q=o.xGridTextX.bind(o),Z=o.yGridTextX.bind(o);o.grid.style("visibility",o.hasArcType()?"hidden":"visible"),h.select("line."+F.xgridFocus).style("visibility","hidden"),m.grid_x_show&&o.updateXGrid(),L=h.select("."+F.xgridLines).selectAll("."+F.xgridLine).data(m.grid_x_lines),N=L.enter().append("g").attr("class",function(ot){return F.xgridLine+(ot.class?" "+ot.class:"")}),N.append("line").attr("x1",m.axis_rotated?0:W).attr("x2",m.axis_rotated?o.width:W).attr("y1",m.axis_rotated?W:0).attr("y2",m.axis_rotated?W:o.height).style("opacity",0),N.append("text").attr("text-anchor",o.gridTextAnchor).attr("transform",m.axis_rotated?"":"rotate(-90)").attr("x",m.axis_rotated?Z:Q).attr("y",W).attr("dx",o.gridTextDx).attr("dy",-5).style("opacity",0),o.xgridLines=N.merge(L),L.exit().transition().duration(r).style("opacity",0).remove(),m.grid_y_show&&o.updateYGrid(),G=h.select("."+F.ygridLines).selectAll("."+F.ygridLine).data(m.grid_y_lines),H=G.enter().append("g").attr("class",function(ot){return F.ygridLine+(ot.class?" "+ot.class:"")}),H.append("line").attr("x1",m.axis_rotated?z:0).attr("x2",m.axis_rotated?z:o.width).attr("y1",m.axis_rotated?0:z).attr("y2",m.axis_rotated?o.height:z).style("opacity",0),H.append("text").attr("text-anchor",o.gridTextAnchor).attr("transform",m.axis_rotated?"rotate(-90)":"").attr("x",m.axis_rotated?Q:Z).attr("y",z).attr("dx",o.gridTextDx).attr("dy",-5).style("opacity",0),o.ygridLines=H.merge(G),o.ygridLines.select("line").transition().duration(r).attr("x1",m.axis_rotated?z:0).attr("x2",m.axis_rotated?z:o.width).attr("y1",m.axis_rotated?0:z).attr("y2",m.axis_rotated?o.height:z).style("opacity",1),o.ygridLines.select("text").transition().duration(r).attr("x",m.axis_rotated?o.xGridTextX.bind(o):o.yGridTextX.bind(o)).attr("y",z).text(function(ot){return ot.text}).style("opacity",1),G.exit().transition().duration(r).style("opacity",0).remove()},n.prototype.redrawGrid=function(r,o){var h=this,m=h.config,L=h.xv.bind(h),N=h.xgridLines.select("line"),G=h.xgridLines.select("text");return[(r?N.transition(o):N).attr("x1",m.axis_rotated?0:L).attr("x2",m.axis_rotated?h.width:L).attr("y1",m.axis_rotated?L:0).attr("y2",m.axis_rotated?L:h.height).style("opacity",1),(r?G.transition(o):G).attr("x",m.axis_rotated?h.yGridTextX.bind(h):h.xGridTextX.bind(h)).attr("y",L).text(function(H){return H.text}).style("opacity",1)]},n.prototype.showXGridFocus=function(r){var o=this,h=o.config,m=r.filter(function(G){return G&&R(G.value)}),L=o.main.selectAll("line."+F.xgridFocus),N=o.xx.bind(o);h.tooltip_show&&(o.hasType("stanford")||o.hasArcType()||(L.style("visibility","visible").data([m[0]]).attr(h.axis_rotated?"y1":"x1",N).attr(h.axis_rotated?"y2":"x2",N),o.smoothLines(L,"grid")))},n.prototype.hideXGridFocus=function(){this.main.select("line."+F.xgridFocus).style("visibility","hidden")},n.prototype.updateXgridFocus=function(){var r=this,o=r.config;r.main.select("line."+F.xgridFocus).attr("x1",o.axis_rotated?0:-10).attr("x2",o.axis_rotated?r.width:-10).attr("y1",o.axis_rotated?-10:0).attr("y2",o.axis_rotated?-10:r.height)},n.prototype.generateGridData=function(r,o){var h=this,m=[],L,N,G,H,W=h.main.select("."+F.axisX).selectAll(".tick").size();if(r==="year")for(L=h.getXDomain(),N=L[0].getFullYear(),G=L[1].getFullYear(),H=N;H<=G;H++)m.push(new Date(H+"-01-01 00:00:00"));else m=o.ticks(10),m.length>W&&(m=m.filter(function(z){return(""+z).indexOf(".")<0}));return m},n.prototype.getGridFilterToRemove=function(r){return r?function(o){var h=!1;return[].concat(r).forEach(function(m){("value"in m&&o.value===m.value||"class"in m&&o.class===m.class)&&(h=!0)}),h}:function(){return!0}},n.prototype.removeGridLines=function(r,o){var h=this,m=h.config,L=h.getGridFilterToRemove(r),N=function(W){return!L(W)},G=o?F.xgridLines:F.ygridLines,H=o?F.xgridLine:F.ygridLine;h.main.select("."+G).selectAll("."+H).filter(L).transition().duration(m.transition_duration).style("opacity",0).remove(),o?m.grid_x_lines=m.grid_x_lines.filter(N):m.grid_y_lines=m.grid_y_lines.filter(N)},n.prototype.initEventRect=function(){var r=this,o=r.config;r.main.select("."+F.chart).append("g").attr("class",F.eventRects).style("fill-opacity",0),r.eventRect=r.main.select("."+F.eventRects).append("rect").attr("class",F.eventRect),o.zoom_enabled&&r.zoom&&(r.eventRect.call(r.zoom).on("dblclick.zoom",null),o.zoom_initialRange&&r.eventRect.transition().duration(0).call(r.zoom.transform,r.zoomTransform(o.zoom_initialRange)))},n.prototype.redrawEventRect=function(){var r=this,o=r.d3,h=r.config;function m(){r.svg.select("."+F.eventRect).style("cursor",null),r.hideXGridFocus(),r.hideTooltip(),r.unexpandCircles(),r.unexpandBars()}var L=function(G,H){return H&&(r.isBarType(H.id)||r.dist(H,G)<h.point_sensitivity)},N=function(G){return G?r.addName(Object.assign({},G)):null};r.main.select("."+F.eventRects).style("cursor",h.zoom_enabled?h.axis_rotated?"ns-resize":"ew-resize":null),r.eventRect.attr("x",0).attr("y",0).attr("width",r.width).attr("height",r.height).on("mouseout",h.interaction_enabled?function(){h&&(r.hasArcType()||(r.mouseover&&(h.data_onmouseout.call(r.api,r.mouseover),r.mouseover=void 0),m()))}:null).on("mousemove",h.interaction_enabled?function(){if(!r.dragging){var G=r.getTargetsToShow();if(!r.hasArcType(G)){var H=o.mouse(this),W=N(r.findClosestFromTargets(G,H)),z=L(H,W);r.mouseover&&(!W||W.id!==r.mouseover.id||W.index!==r.mouseover.index)&&(h.data_onmouseout.call(r.api,r.mouseover),r.mouseover=void 0),W&&!r.mouseover&&(h.data_onmouseover.call(r.api,W),r.mouseover=W),r.svg.select("."+F.eventRect).style("cursor",z?"pointer":null);var Q=!h.tooltip_grouped||r.hasType("stanford",G),Z;if(Q)W&&(Z=[W]);else{var ot=void 0;if(W)ot=W;else{var J=h.axis_rotated?H[1]:H[0];ot=r.findClosestFromTargetsByX(G,r.x.invert(J))}ot&&(Z=r.filterByX(G,ot.x))}if(!Z||Z.length===0)return m();Z=Z.map(N),r.showTooltip(Z,this),h.point_focus_expand_enabled&&(r.unexpandCircles(),Z.forEach(function(ht){r.expandCircles(ht.index,ht.id,!1)})),r.unexpandBars(),Z.forEach(function(ht){r.expandBars(ht.index,ht.id,!1)}),r.showXGridFocus(Z)}}}:null).on("click",h.interaction_enabled?function(){var G=r.getTargetsToShow();if(!r.hasArcType(G)){var H=o.mouse(this),W=N(r.findClosestFromTargets(G,H));if(L(H,W)){var z;if(!h.data_selection_grouped||r.isStanfordType(W)?z=[W]:z=r.filterByX(G,W.x),z.forEach(function(Z){r.main.selectAll("."+F.shapes+r.getTargetSelectorSuffix(Z.id)).selectAll("."+F.shape+"-"+Z.index).each(function(){(h.data_selection_grouped||r.isWithinShape(this,Z))&&r.toggleShape(this,Z,Z.index)})}),W){var Q=r.main.selectAll("."+F.shapes+r.getTargetSelectorSuffix(W.id)).select("."+F.shape+"-"+W.index);h.data_onclick.call(r.api,W,Q.node())}}}}:null).call(h.interaction_enabled&&h.data_selection_draggable&&r.drag?o.drag().on("drag",function(){r.drag(o.mouse(this))}).on("start",function(){r.dragstart(o.mouse(this))}).on("end",function(){r.dragend()}):function(){})},n.prototype.getMousePosition=function(r){var o=this;return[o.x(r.x),o.getYScale(r.id)(r.value)]},n.prototype.dispatchEvent=function(r,o){var h=this,m="."+F.eventRect,L=h.main.select(m).node(),N=L.getBoundingClientRect(),G=N.left+(o?o[0]:0),H=N.top+(o?o[1]:0),W=document.createEvent("MouseEvents");W.initMouseEvent(r,!0,!0,window,0,G,H,G,H,!1,!1,!1,!1,0,null),L.dispatchEvent(W)},n.prototype.initLegend=function(){var r=this;if(r.legendItemTextBox={},r.legendHasRendered=!1,r.legend=r.svg.append("g").attr("transform",r.getTranslate("legend")),!r.config.legend_show){r.legend.style("visibility","hidden"),r.hiddenLegendIds=r.mapToIds(r.data.targets);return}r.updateLegendWithDefaults()},n.prototype.updateLegendWithDefaults=function(){var r=this;r.updateLegend(r.mapToIds(r.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},n.prototype.updateSizeForLegend=function(r,o){var h=this,m=h.config,L={top:h.isLegendTop?h.getCurrentPaddingTop()+m.legend_inset_y+5.5:h.currentHeight-r-h.getCurrentPaddingBottom()-m.legend_inset_y,left:h.isLegendLeft?h.getCurrentPaddingLeft()+m.legend_inset_x+.5:h.currentWidth-o-h.getCurrentPaddingRight()-m.legend_inset_x+.5};h.margin3={top:h.isLegendRight?0:h.isLegendInset?L.top:h.currentHeight-r,right:NaN,bottom:0,left:h.isLegendRight?h.currentWidth-o:h.isLegendInset?L.left:0}},n.prototype.transformLegend=function(r){var o=this;(r?o.legend.transition():o.legend).attr("transform",o.getTranslate("legend"))},n.prototype.updateLegendStep=function(r){this.legendStep=r},n.prototype.updateLegendItemWidth=function(r){this.legendItemWidth=r},n.prototype.updateLegendItemHeight=function(r){this.legendItemHeight=r},n.prototype.getLegendWidth=function(){var r=this;return r.config.legend_show?r.isLegendRight||r.isLegendInset?r.legendItemWidth*(r.legendStep+1):r.currentWidth:0},n.prototype.getLegendHeight=function(){var r=this,o=0;return r.config.legend_show&&(r.isLegendRight?o=r.currentHeight:o=Math.max(20,r.legendItemHeight)*(r.legendStep+1)),o},n.prototype.opacityForLegend=function(r){return r.classed(F.legendItemHidden)?null:1},n.prototype.opacityForUnfocusedLegend=function(r){return r.classed(F.legendItemHidden)?null:.3},n.prototype.toggleFocusLegend=function(r,o){var h=this;r=h.mapToTargetIds(r),h.legend.selectAll("."+F.legendItem).filter(function(m){return r.indexOf(m)>=0}).classed(F.legendItemFocused,o).transition().duration(100).style("opacity",function(){var m=o?h.opacityForLegend:h.opacityForUnfocusedLegend;return m.call(h,h.d3.select(this))})},n.prototype.revertLegend=function(){var r=this,o=r.d3;r.legend.selectAll("."+F.legendItem).classed(F.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return r.opacityForLegend(o.select(this))})},n.prototype.showLegend=function(r){var o=this,h=o.config;h.legend_show||(h.legend_show=!0,o.legend.style("visibility","visible"),o.legendHasRendered||o.updateLegendWithDefaults()),o.removeHiddenLegendIds(r),o.legend.selectAll(o.selectorLegends(r)).style("visibility","visible").transition().style("opacity",function(){return o.opacityForLegend(o.d3.select(this))})},n.prototype.hideLegend=function(r){var o=this,h=o.config;h.legend_show&&I(r)&&(h.legend_show=!1,o.legend.style("visibility","hidden")),o.addHiddenLegendIds(r),o.legend.selectAll(o.selectorLegends(r)).style("opacity",0).style("visibility","hidden")},n.prototype.clearLegendItemTextBoxCache=function(){this.legendItemTextBox={}},n.prototype.updateLegend=function(r,o,h){var m=this,L=m.config,N,G,H,W,z,Q,Z,ot,J,ht=4,ft=10,vt=0,xt=0,Tt=10,St=L.legend_item_tile_width+5,Pt,Lt=0,tt={},rt={},at={},dt=[0],pt={},gt=0,bt,Ct,Mt,kt,It,Rt;r=r.filter(function(_t){return!p(L.data_names[_t])||L.data_names[_t]!==null}),o=o||{},bt=g(o,"withTransition",!0),Ct=g(o,"withTransitionForTransform",!0);function Nt(_t,At){return m.legendItemTextBox[At]||(m.legendItemTextBox[At]=m.getTextRect(_t.textContent,F.legendItem,_t)),m.legendItemTextBox[At]}function Et(_t,At,Ot){var Vt=Ot===0,Yt=Ot===r.length-1,Ft=Nt(_t,At),Gt=Ft.width+St+(Yt&&!(m.isLegendRight||m.isLegendInset)?0:ft)+L.legend_padding,Dt=Ft.height+ht,Ht=m.isLegendRight||m.isLegendInset?Dt:Gt,Xt=m.isLegendRight||m.isLegendInset?m.getLegendHeight():m.getLegendWidth(),zt,qt;function Ut(Bt,Wt){Wt||(zt=(Xt-Lt-Ht)/2,zt<Tt&&(zt=(Xt-Ht)/2,Lt=0,gt++)),pt[Bt]=gt,dt[gt]=m.isLegendInset?10:zt,tt[Bt]=Lt,Lt+=Ht}if(Vt&&(Lt=0,gt=0,vt=0,xt=0),L.legend_show&&!m.isLegendToShow(At)){rt[At]=at[At]=pt[At]=tt[At]=0;return}rt[At]=Gt,at[At]=Dt,(!vt||Gt>=vt)&&(vt=Gt),(!xt||Dt>=xt)&&(xt=Dt),qt=m.isLegendRight||m.isLegendInset?xt:vt,L.legend_equally?(Object.keys(rt).forEach(function(Bt){rt[Bt]=vt}),Object.keys(at).forEach(function(Bt){at[Bt]=xt}),zt=(Xt-qt*r.length)/2,zt<Tt?(Lt=0,gt=0,r.forEach(function(Bt){Ut(Bt)})):Ut(At,!0)):Ut(At)}m.isLegendInset&&(gt=L.legend_inset_step?L.legend_inset_step:r.length,m.updateLegendStep(gt)),m.isLegendRight?(N=function(_t){return vt*pt[_t]},W=function(_t){return dt[pt[_t]]+tt[_t]}):m.isLegendInset?(N=function(_t){return vt*pt[_t]+10},W=function(_t){return dt[pt[_t]]+tt[_t]}):(N=function(_t){return dt[pt[_t]]+tt[_t]},W=function(_t){return xt*pt[_t]}),G=function(_t,At){return N(_t,At)+4+L.legend_item_tile_width},z=function(_t,At){return W(_t,At)+9},H=function(_t,At){return N(_t,At)},Q=function(_t,At){return W(_t,At)-5},Z=function(_t,At){return N(_t,At)-2},ot=function(_t,At){return N(_t,At)-2+L.legend_item_tile_width},J=function(_t,At){return W(_t,At)+4},Pt=m.legend.selectAll("."+F.legendItem).data(r).enter().append("g").attr("class",function(_t){return m.generateClass(F.legendItem,_t)}).style("visibility",function(_t){return m.isLegendToShow(_t)?"visible":"hidden"}).style("cursor",function(){return L.interaction_enabled?"pointer":"auto"}).on("click",L.interaction_enabled?function(_t){L.legend_item_onclick?L.legend_item_onclick.call(m,_t):m.d3.event.altKey?(m.api.hide(),m.api.show(_t)):(m.api.toggle(_t),m.isTargetToShow(_t)?m.api.focus(_t):m.api.revert())}:null).on("mouseover",L.interaction_enabled?function(_t){L.legend_item_onmouseover?L.legend_item_onmouseover.call(m,_t):(m.d3.select(this).classed(F.legendItemFocused,!0),!m.transiting&&m.isTargetToShow(_t)&&m.api.focus(_t))}:null).on("mouseout",L.interaction_enabled?function(_t){L.legend_item_onmouseout?L.legend_item_onmouseout.call(m,_t):(m.d3.select(this).classed(F.legendItemFocused,!1),m.api.revert())}:null),Pt.append("text").text(function(_t){return p(L.data_names[_t])?L.data_names[_t]:_t}).each(function(_t,At){Et(this,_t,At)}).style("pointer-events","none").attr("x",m.isLegendRight||m.isLegendInset?G:-200).attr("y",m.isLegendRight||m.isLegendInset?-200:z),Pt.append("rect").attr("class",F.legendItemEvent).style("fill-opacity",0).attr("x",m.isLegendRight||m.isLegendInset?H:-200).attr("y",m.isLegendRight||m.isLegendInset?-200:Q),Pt.append("line").attr("class",F.legendItemTile).style("stroke",m.color).style("pointer-events","none").attr("x1",m.isLegendRight||m.isLegendInset?Z:-200).attr("y1",m.isLegendRight||m.isLegendInset?-200:J).attr("x2",m.isLegendRight||m.isLegendInset?ot:-200).attr("y2",m.isLegendRight||m.isLegendInset?-200:J).attr("stroke-width",L.legend_item_tile_height),Rt=m.legend.select("."+F.legendBackground+" rect"),m.isLegendInset&&vt>0&&Rt.size()===0&&(Rt=m.legend.insert("g","."+F.legendItem).attr("class",F.legendBackground).append("rect")),Mt=m.legend.selectAll("text").data(r).text(function(_t){return p(L.data_names[_t])?L.data_names[_t]:_t}).each(function(_t,At){Et(this,_t,At)}),(bt?Mt.transition():Mt).attr("x",G).attr("y",z),kt=m.legend.selectAll("rect."+F.legendItemEvent).data(r),(bt?kt.transition():kt).attr("width",function(_t){return rt[_t]}).attr("height",function(_t){return at[_t]}).attr("x",H).attr("y",Q),It=m.legend.selectAll("line."+F.legendItemTile).data(r),(bt?It.transition():It).style("stroke",m.levelColor?function(_t){return m.levelColor(m.cache[_t].values.reduce(function(At,Ot){return At+Ot.value},0))}:m.color).attr("x1",Z).attr("y1",J).attr("x2",ot).attr("y2",J),Rt&&(bt?Rt.transition():Rt).attr("height",m.getLegendHeight()-12).attr("width",vt*(gt+1)+10),m.legend.selectAll("."+F.legendItem).classed(F.legendItemHidden,function(_t){return!m.isTargetToShow(_t)}),m.updateLegendItemWidth(vt),m.updateLegendItemHeight(xt),m.updateLegendStep(gt),m.updateSizes(),m.updateScales(),m.updateSvgSize(),m.transformAll(Ct,h),m.legendHasRendered=!0},n.prototype.initRegion=function(){var r=this;r.region=r.main.append("g").attr("clip-path",r.clipPath).attr("class",F.regions)},n.prototype.updateRegion=function(r){var o=this,h=o.config;o.region.style("visibility",o.hasArcType()?"hidden":"visible");var m=o.main.select("."+F.regions).selectAll("."+F.region).data(h.regions),L=m.enter().append("g");L.append("rect").attr("x",o.regionX.bind(o)).attr("y",o.regionY.bind(o)).attr("width",o.regionWidth.bind(o)).attr("height",o.regionHeight.bind(o)).style("fill-opacity",function(N){return R(N.opacity)?N.opacity:.1}),L.append("text").text(o.labelRegion.bind(o)),o.mainRegion=L.merge(m).attr("class",o.classRegion.bind(o)),m.exit().transition().duration(r).style("opacity",0).remove()},n.prototype.redrawRegion=function(r,o){var h=this,m=h.mainRegion,L=h.mainRegion.selectAll("text");return[(r?m.transition(o):m).attr("x",h.regionX.bind(h)).attr("y",h.regionY.bind(h)).attr("width",h.regionWidth.bind(h)).attr("height",h.regionHeight.bind(h)).style("fill-opacity",function(N){return R(N.opacity)?N.opacity:.1}),(r?L.transition(o):L).attr("x",h.labelOffsetX.bind(h)).attr("y",h.labelOffsetY.bind(h)).attr("transform",h.labelTransform.bind(h)).attr("style","text-anchor: left;")]},n.prototype.regionX=function(r){var o=this,h=o.config,m,L=r.axis==="y"?o.y:o.y2;return r.axis==="y"||r.axis==="y2"?m=h.axis_rotated&&"start"in r?L(r.start):0:m=h.axis_rotated?0:"start"in r?o.x(o.isTimeSeries()?o.parseDate(r.start):r.start):0,m},n.prototype.regionY=function(r){var o=this,h=o.config,m,L=r.axis==="y"?o.y:o.y2;return r.axis==="y"||r.axis==="y2"?m=h.axis_rotated?0:"end"in r?L(r.end):0:m=h.axis_rotated&&"start"in r?o.x(o.isTimeSeries()?o.parseDate(r.start):r.start):0,m},n.prototype.regionWidth=function(r){var o=this,h=o.config,m=o.regionX(r),L,N=r.axis==="y"?o.y:o.y2;return r.axis==="y"||r.axis==="y2"?L=h.axis_rotated&&"end"in r?N(r.end):o.width:L=h.axis_rotated?o.width:"end"in r?o.x(o.isTimeSeries()?o.parseDate(r.end):r.end):o.width,L<m?0:L-m},n.prototype.regionHeight=function(r){var o=this,h=o.config,m=this.regionY(r),L,N=r.axis==="y"?o.y:o.y2;return r.axis==="y"||r.axis==="y2"?L=h.axis_rotated?o.height:"start"in r?N(r.start):o.height:L=h.axis_rotated&&"end"in r?o.x(o.isTimeSeries()?o.parseDate(r.end):r.end):o.height,L<m?0:L-m},n.prototype.isRegionOnX=function(r){return!r.axis||r.axis==="x"},n.prototype.labelRegion=function(r){return"label"in r?r.label:""},n.prototype.labelTransform=function(r){return"vertical"in r&&r.vertical?"rotate(90)":""},n.prototype.labelOffsetX=function(r){var o="paddingX"in r?r.paddingX:3,h="paddingY"in r?r.paddingY:3;return"vertical"in r&&r.vertical?this.regionY(r)+h:this.regionX(r)+o},n.prototype.labelOffsetY=function(r){var o="paddingX"in r?r.paddingX:3,h="paddingY"in r?r.paddingY:3;return"vertical"in r&&r.vertical?-(this.regionX(r)+o):this.regionY(r)+10+h};function yt(r,o,h){var m=[.01,10];o||(o=r.scaleLinear(),o.range(m)),h||(h=r.scaleLog(),h.domain(m),h.nice());function L(G,H,W){var z,Q,Z,ot;if(arguments.length<3)W=10;else if(W===0)return[];Q=W-1,ot=(H-G)/Q,z=new Array(W),Z=G,z[0]=Math.pow(10,Z);for(var J=1;J<Q;J++)Z+=ot,z[J]=Math.pow(10,Z);return z[Q]=Math.pow(10,H),z}function N(G){return h(o(G))}return N.domain=function(G){return arguments.length?(o.domain(G),N):o.domain()},N.range=function(G){return arguments.length?(h.range(G),N):h.range()},N.ticks=function(G){return L(-2,1,G||10).map(function(H){return o.invert(H)})},N.copy=function(){return yt(r,o.copy(),h.copy())},N}n.prototype.getScale=function(r,o,h){return(h?this.d3.scaleTime():this.d3.scaleLinear()).range([r,o])},n.prototype.getX=function(r,o,h,m){var L=this,N=L.getScale(r,o,L.isTimeSeries()),G=h?N.domain(h):N,H;L.isCategorized()?(m=m||function(){return 0},N=function(W,z){var Q=G(W)+m(W);return z?Q:Math.ceil(Q)}):N=function(W,z){var Q=G(W);return z?Q:Math.ceil(Q)};for(H in G)N[H]=G[H];return N.orgDomain=function(){return G.domain()},L.isCategorized()&&(N.domain=function(W){return arguments.length?(G.domain(W),N):(W=this.orgDomain(),[W[0],W[1]+1])}),N},n.prototype.getY=function(r,o,h){var m;if(r==="timeseries"||r==="time")m=this.d3.scaleTime();else if(r==="log")m=yt(this.d3);else if(r==="linear"||r===void 0)m=this.d3.scaleLinear();else throw new Error('Invalid Y axis type: "'+r+'"');return o&&m.domain(o),h&&m.range(h),m},n.prototype.getYScale=function(r){return this.axis.getId(r)==="y2"?this.y2:this.y},n.prototype.getSubYScale=function(r){return this.axis.getId(r)==="y2"?this.subY2:this.subY},n.prototype.updateScales=function(){var r=this,o=r.config,h=!r.x;r.xMin=o.axis_rotated?1:0,r.xMax=o.axis_rotated?r.height:r.width,r.yMin=o.axis_rotated?0:r.height,r.yMax=o.axis_rotated?r.width:1,r.subXMin=r.xMin,r.subXMax=r.xMax,r.subYMin=o.axis_rotated?0:r.height2,r.subYMax=o.axis_rotated?r.width2:1,r.x=r.getX(r.xMin,r.xMax,h?void 0:r.x.orgDomain(),function(){return r.xAxis.tickOffset()}),r.y=r.getY(o.axis_y_type,h?o.axis_y_default:r.y.domain(),[r.yMin,r.yMax]),r.y2=r.getY(o.axis_y2_type,h?o.axis_y2_default:r.y2.domain(),[r.yMin,r.yMax]),r.subX=r.getX(r.xMin,r.xMax,r.orgXDomain,function(m){return m%1?0:r.subXAxis.tickOffset()}),r.subY=r.getY(o.axis_y_type,h?o.axis_y_default:r.subY.domain(),[r.subYMin,r.subYMax]),r.subY2=r.getY(o.axis_y2_type,h?o.axis_y2_default:r.subY2.domain(),[r.subYMin,r.subYMax]),r.xAxisTickFormat=r.axis.getXAxisTickFormat(),r.xAxisTickValues=r.axis.getXAxisTickValues(),r.yAxisTickValues=r.axis.getYAxisTickValues(),r.y2AxisTickValues=r.axis.getY2AxisTickValues(),r.xAxis=r.axis.getXAxis(r.x,r.xOrient,r.xAxisTickFormat,r.xAxisTickValues,o.axis_x_tick_outer),r.subXAxis=r.axis.getXAxis(r.subX,r.subXOrient,r.xAxisTickFormat,r.xAxisTickValues,o.axis_x_tick_outer),r.yAxis=r.axis.getYAxis("y",r.y,r.yOrient,r.yAxisTickValues,o.axis_y_tick_outer),r.y2Axis=r.axis.getYAxis("y2",r.y2,r.y2Orient,r.y2AxisTickValues,o.axis_y2_tick_outer),h||r.brush&&r.brush.updateScale(r.subX),r.updateArc&&r.updateArc()},n.prototype.selectPoint=function(r,o,h){var m=this,L=m.config,N=(L.axis_rotated?m.circleY:m.circleX).bind(m),G=(L.axis_rotated?m.circleX:m.circleY).bind(m),H=m.pointSelectR.bind(m);L.data_onselected.call(m.api,o,r.node()),m.main.select("."+F.selectedCircles+m.getTargetSelectorSuffix(o.id)).selectAll("."+F.selectedCircle+"-"+h).data([o]).enter().append("circle").attr("class",function(){return m.generateClass(F.selectedCircle,h)}).attr("cx",N).attr("cy",G).attr("stroke",function(){return m.color(o)}).attr("r",function(W){return m.pointSelectR(W)*1.4}).transition().duration(100).attr("r",H)},n.prototype.unselectPoint=function(r,o,h){var m=this;m.config.data_onunselected.call(m.api,o,r.node()),m.main.select("."+F.selectedCircles+m.getTargetSelectorSuffix(o.id)).selectAll("."+F.selectedCircle+"-"+h).transition().duration(100).attr("r",0).remove()},n.prototype.togglePoint=function(r,o,h,m){r?this.selectPoint(o,h,m):this.unselectPoint(o,h,m)},n.prototype.selectPath=function(r,o){var h=this;h.config.data_onselected.call(h,o,r.node()),h.config.interaction_brighten&&r.transition().duration(100).style("fill",function(){return h.d3.rgb(h.color(o)).brighter(.75)})},n.prototype.unselectPath=function(r,o){var h=this;h.config.data_onunselected.call(h,o,r.node()),h.config.interaction_brighten&&r.transition().duration(100).style("fill",function(){return h.color(o)})},n.prototype.togglePath=function(r,o,h,m){r?this.selectPath(o,h,m):this.unselectPath(o,h,m)},n.prototype.getToggle=function(r,o){var h=this,m;return r.nodeName==="circle"?h.isStepType(o)?m=function(){}:m=h.togglePoint:r.nodeName==="path"&&(m=h.togglePath),m},n.prototype.toggleShape=function(r,o,h){var m=this,L=m.d3,N=m.config,G=L.select(r),H=G.classed(F.SELECTED),W=m.getToggle(r,o).bind(m);N.data_selection_enabled&&N.data_selection_isselectable(o)&&(N.data_selection_multiple||m.main.selectAll("."+F.shapes+(N.data_selection_grouped?m.getTargetSelectorSuffix(o.id):"")).selectAll("."+F.shape).each(function(z,Q){var Z=L.select(this);Z.classed(F.SELECTED)&&W(!1,Z.classed(F.SELECTED,!1),z,Q)}),G.classed(F.SELECTED,!H),W(!H,G,o,h))},n.prototype.initBar=function(){var r=this;r.main.select("."+F.chart).append("g").attr("class",F.chartBars)},n.prototype.updateTargetsForBar=function(r){var o=this,h=o.config,m,L,N=o.classChartBar.bind(o),G=o.classBars.bind(o),H=o.classFocus.bind(o);m=o.main.select("."+F.chartBars).selectAll("."+F.chartBar).data(r).attr("class",function(W){return N(W)+H(W)}),L=m.enter().append("g").attr("class",N).style("pointer-events","none"),L.append("g").attr("class",G).style("cursor",function(W){return h.data_selection_isselectable(W)?"pointer":null})},n.prototype.updateBar=function(r){var o=this,h=o.barData.bind(o),m=o.classBar.bind(o),L=o.initialOpacity.bind(o),N=function(W){return o.color(W.id)},G=o.main.selectAll("."+F.bars).selectAll("."+F.bar).data(h),H=G.enter().append("path").attr("class",m).style("stroke",N).style("fill",N);o.mainBar=H.merge(G).style("opacity",L),G.exit().transition().duration(r).style("opacity",0)},n.prototype.redrawBar=function(r,o,h){var m=this;return[(o?this.mainBar.transition(h):this.mainBar).attr("d",r).style("stroke",this.color).style("fill",this.color).style("opacity",function(L){return m.isTargetToShow(L.id)?1:0})]},n.prototype.getBarW=function(r,o){var h=this,m=h.config,L=typeof m.bar_width=="number"?m.bar_width:o?r.tickInterval()*m.bar_width_ratio/o:0;return m.bar_width_max&&L>m.bar_width_max?m.bar_width_max:L},n.prototype.getBars=function(r,o){var h=this;return(o?h.main.selectAll("."+F.bars+h.getTargetSelectorSuffix(o)):h.main).selectAll("."+F.bar+(R(r)?"-"+r:""))},n.prototype.expandBars=function(r,o,h){var m=this;h&&m.unexpandBars(),m.getBars(r,o).classed(F.EXPANDED,!0)},n.prototype.unexpandBars=function(r){var o=this;o.getBars(r).classed(F.EXPANDED,!1)},n.prototype.generateDrawBar=function(r,o){var h=this,m=h.config,L=h.generateGetBarPoints(r,o);return function(N,G){var H=L(N,G),W=m.axis_rotated?1:0,z=m.axis_rotated?0:1,Q="M "+H[0][W]+","+H[0][z]+" L"+H[1][W]+","+H[1][z]+" L"+H[2][W]+","+H[2][z]+" L"+H[3][W]+","+H[3][z]+" z";return Q}},n.prototype.generateGetBarPoints=function(r,o){var h=this,m=o?h.subXAxis:h.xAxis,L=r.__max__+1,N=h.getBarW(m,L),G=h.getShapeX(N,L,r,!!o),H=h.getShapeY(!!o),W=h.getShapeOffset(h.isBarType,r,!!o),z=N*(h.config.bar_space/2),Q=o?h.getSubYScale:h.getYScale;return function(Z,ot){var J=Q.call(h,Z.id)(0),ht=W(Z,ot)||J,ft=G(Z),vt=H(Z);return h.config.axis_rotated&&(0<Z.value&&vt<J||Z.value<0&&J<vt)&&(vt=J),vt-=J-ht,[[ft+z,ht],[ft+z,vt],[ft+N-z,vt],[ft+N-z,ht]]}},n.prototype.isWithinBar=function(r,o){return et(r,b(o),2)},n.prototype.getShapeIndices=function(r){var o=this,h=o.config,m={},L=0,N,G;return o.filterTargetsToShow(o.data.targets.filter(r,o)).forEach(function(H){for(N=0;N<h.data_groups.length;N++)if(!(h.data_groups[N].indexOf(H.id)<0)){for(G=0;G<h.data_groups[N].length;G++)if(h.data_groups[N][G]in m){m[H.id]=m[h.data_groups[N][G]];break}}P(m[H.id])&&(m[H.id]=L++)}),m.__max__=L-1,m},n.prototype.getShapeX=function(r,o,h,m){var L=this,N=m?L.subX:L.x;return function(G){var H=G.id in h?h[G.id]:0;return G.x||G.x===0?N(G.x)-r*(o/2-H):0}},n.prototype.getShapeY=function(r){var o=this;return function(h){var m=r?o.getSubYScale(h.id):o.getYScale(h.id);return m(o.isTargetNormalized(h.id)?o.getRatio("index",h,!0):h.value)}},n.prototype.getShapeOffset=function(r,o,h){var m=this,L=m.orderTargets(m.filterTargetsToShow(m.data.targets.filter(r,m))),N=L.map(function(G){return G.id});return function(G,H){var W=h?m.getSubYScale(G.id):m.getYScale(G.id),z=W(0),Q=z;return L.forEach(function(Z){var ot=m.isStepType(G)?m.convertValuesToStep(Z.values):Z.values,J=m.isTargetNormalized(G.id),ht=ot.map(function(ft){return J?m.getRatio("index",ft,!0):ft.value});Z.id===G.id||o[Z.id]!==o[G.id]||N.indexOf(Z.id)<N.indexOf(G.id)&&((P(ot[H])||+ot[H].x!=+G.x)&&(H=-1,ot.forEach(function(ft,vt){var xt=ft.x.constructor===Date?+ft.x:ft.x,Tt=G.x.constructor===Date?+G.x:G.x;xt===Tt&&(H=vt)})),H in ot&&ot[H].value*G.value>=0&&(Q+=W(ht[H])-z))}),Q}},n.prototype.isWithinShape=function(r,o){var h=this,m=h.d3.select(r),L;return h.isTargetToShow(o.id)?r.nodeName==="circle"?L=h.isStepType(o)?h.isWithinStep(r,h.getYScale(o.id)(o.value)):h.isWithinCircle(r,h.pointSelectR(o)*1.5):r.nodeName==="path"&&(L=m.classed(F.bar)?h.isWithinBar(h.d3.mouse(r),r):!0):L=!1,L},n.prototype.getInterpolate=function(r){var o=this,h=o.d3,m={linear:h.curveLinear,"linear-closed":h.curveLinearClosed,basis:h.curveBasis,"basis-open":h.curveBasisOpen,"basis-closed":h.curveBasisClosed,bundle:h.curveBundle,cardinal:h.curveCardinal,"cardinal-open":h.curveCardinalOpen,"cardinal-closed":h.curveCardinalClosed,monotone:h.curveMonotoneX,step:h.curveStep,"step-before":h.curveStepBefore,"step-after":h.curveStepAfter},L;return o.isSplineType(r)?L=m[o.config.spline_interpolation_type]||m.cardinal:o.isStepType(r)?L=m[o.config.line_step_type]:L=m.linear,L},n.prototype.initLine=function(){var r=this;r.main.select("."+F.chart).append("g").attr("class",F.chartLines)},n.prototype.updateTargetsForLine=function(r){var o=this,h=o.config,m,L,N=o.classChartLine.bind(o),G=o.classLines.bind(o),H=o.classAreas.bind(o),W=o.classCircles.bind(o),z=o.classFocus.bind(o);m=o.main.select("."+F.chartLines).selectAll("."+F.chartLine).data(r).attr("class",function(Q){return N(Q)+z(Q)}),L=m.enter().append("g").attr("class",N).style("opacity",0).style("pointer-events","none"),L.append("g").attr("class",G),L.append("g").attr("class",H),L.append("g").attr("class",function(Q){return o.generateClass(F.selectedCircles,Q.id)}),L.append("g").attr("class",W).style("cursor",function(Q){return h.data_selection_isselectable(Q)?"pointer":null}),r.forEach(function(Q){o.main.selectAll("."+F.selectedCircles+o.getTargetSelectorSuffix(Q.id)).selectAll("."+F.selectedCircle).each(function(Z){Z.value=Q.values[Z.index].value})})},n.prototype.updateLine=function(r){var o=this,h=o.main.selectAll("."+F.lines).selectAll("."+F.line).data(o.lineData.bind(o)),m=h.enter().append("path").attr("class",o.classLine.bind(o)).style("stroke",o.color);o.mainLine=m.merge(h).style("opacity",o.initialOpacity.bind(o)).style("shape-rendering",function(L){return o.isStepType(L)?"crispEdges":""}).attr("transform",null),h.exit().transition().duration(r).style("opacity",0)},n.prototype.redrawLine=function(r,o,h){return[(o?this.mainLine.transition(h):this.mainLine).attr("d",r).style("stroke",this.color).style("opacity",1)]},n.prototype.generateDrawLine=function(r,o){var h=this,m=h.config,L=h.d3.line(),N=h.generateGetLinePoints(r,o),G=o?h.getSubYScale:h.getYScale,H=function(z){return(o?h.subxx:h.xx).call(h,z)},W=function(z,Q){return m.data_groups.length>0?N(z,Q)[0][1]:G.call(h,z.id)(z.value)};return L=m.axis_rotated?L.x(W).y(H):L.x(H).y(W),m.line_connectNull||(L=L.defined(function(z){return z.value!=null})),function(z){var Q=m.line_connectNull?h.filterRemoveNull(z.values):z.values,Z=o?h.subX:h.x,ot=G.call(h,z.id),J=0,ht=0,ft;return h.isLineType(z)?m.data_regions[z.id]?ft=h.lineWithRegions(Q,Z,ot,m.data_regions[z.id]):(h.isStepType(z)&&(Q=h.convertValuesToStep(Q)),ft=L.curve(h.getInterpolate(z))(Q)):(Q[0]&&(J=Z(Q[0].x),ht=ot(Q[0].value)),ft=m.axis_rotated?"M "+ht+" "+J:"M "+J+" "+ht),ft||"M 0 0"}},n.prototype.generateGetLinePoints=function(r,o){var h=this,m=h.config,L=r.__max__+1,N=h.getShapeX(0,L,r,!!o),G=h.getShapeY(!!o),H=h.getShapeOffset(h.isLineType,r,!!o),W=o?h.getSubYScale:h.getYScale;return function(z,Q){var Z=W.call(h,z.id)(0),ot=H(z,Q)||Z,J=N(z),ht=G(z);return m.axis_rotated&&(0<z.value&&ht<Z||z.value<0&&Z<ht)&&(ht=Z),[[J,ht-(Z-ot)],[J,ht-(Z-ot)],[J,ht-(Z-ot)],[J,ht-(Z-ot)]]}},n.prototype.lineWithRegions=function(r,o,h,m){var L=this,N=L.config,G,H,W="M",z,Q,Z,ot,J,ht,ft,vt,xt=L.isCategorized()?.5:0,Tt,St,Pt=[];function Lt(rt,at){var dt;for(dt=0;dt<at.length;dt++)if(at[dt].start<rt&&rt<=at[dt].end)return!0;return!1}if(p(m))for(G=0;G<m.length;G++)Pt[G]={},P(m[G].start)?Pt[G].start=r[0].x:Pt[G].start=L.isTimeSeries()?L.parseDate(m[G].start):m[G].start,P(m[G].end)?Pt[G].end=r[r.length-1].x:Pt[G].end=L.isTimeSeries()?L.parseDate(m[G].end):m[G].end;Tt=N.axis_rotated?function(rt){return h(rt.value)}:function(rt){return o(rt.x)},St=N.axis_rotated?function(rt){return o(rt.x)}:function(rt){return h(rt.value)};function tt(rt){return"M"+rt[0][0]+" "+rt[0][1]+" "+rt[1][0]+" "+rt[1][1]}for(L.isTimeSeries()?z=function(rt,at,dt,pt){var gt=rt.x.getTime(),bt=at.x-rt.x,Ct=new Date(gt+bt*dt),Mt=new Date(gt+bt*(dt+pt)),kt;return N.axis_rotated?kt=[[h(Z(dt)),o(Ct)],[h(Z(dt+pt)),o(Mt)]]:kt=[[o(Ct),h(Z(dt))],[o(Mt),h(Z(dt+pt))]],tt(kt)}:z=function(rt,at,dt,pt){var gt;return N.axis_rotated?gt=[[h(Z(dt),!0),o(Q(dt))],[h(Z(dt+pt),!0),o(Q(dt+pt))]]:gt=[[o(Q(dt),!0),h(Z(dt))],[o(Q(dt+pt),!0),h(Z(dt+pt))]],tt(gt)},G=0;G<r.length;G++){if(P(Pt)||!Lt(r[G].x,Pt))W+=" "+Tt(r[G])+" "+St(r[G]);else for(Q=L.getScale(r[G-1].x+xt,r[G].x+xt,L.isTimeSeries()),Z=L.getScale(r[G-1].value,r[G].value),ot=o(r[G].x)-o(r[G-1].x),J=h(r[G].value)-h(r[G-1].value),ht=Math.sqrt(Math.pow(ot,2)+Math.pow(J,2)),ft=2/ht,vt=ft*2,H=ft;H<=1;H+=vt)W+=z(r[G-1],r[G],H,ft);r[G].x}return W},n.prototype.updateArea=function(r){var o=this,h=o.d3,m=o.main.selectAll("."+F.areas).selectAll("."+F.area).data(o.lineData.bind(o)),L=m.enter().append("path").attr("class",o.classArea.bind(o)).style("fill",o.color).style("opacity",function(){return o.orgAreaOpacity=+h.select(this).style("opacity"),0});o.mainArea=L.merge(m).style("opacity",o.orgAreaOpacity),m.exit().transition().duration(r).style("opacity",0)},n.prototype.redrawArea=function(r,o,h){return[(o?this.mainArea.transition(h):this.mainArea).attr("d",r).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},n.prototype.generateDrawArea=function(r,o){var h=this,m=h.config,L=h.d3.area(),N=h.generateGetAreaPoints(r,o),G=o?h.getSubYScale:h.getYScale,H=function(Q){return(o?h.subxx:h.xx).call(h,Q)},W=function(Q,Z){return m.data_groups.length>0?N(Q,Z)[0][1]:G.call(h,Q.id)(h.getAreaBaseValue(Q.id))},z=function(Q,Z){return m.data_groups.length>0?N(Q,Z)[1][1]:G.call(h,Q.id)(Q.value)};return L=m.axis_rotated?L.x0(W).x1(z).y(H):L.x(H).y0(m.area_above?0:W).y1(z),m.line_connectNull||(L=L.defined(function(Q){return Q.value!==null})),function(Q){var Z=m.line_connectNull?h.filterRemoveNull(Q.values):Q.values,ot=0,J=0,ht;return h.isAreaType(Q)?(h.isStepType(Q)&&(Z=h.convertValuesToStep(Z)),ht=L.curve(h.getInterpolate(Q))(Z)):(Z[0]&&(ot=h.x(Z[0].x),J=h.getYScale(Q.id)(Z[0].value)),ht=m.axis_rotated?"M "+J+" "+ot:"M "+ot+" "+J),ht||"M 0 0"}},n.prototype.getAreaBaseValue=function(){return 0},n.prototype.generateGetAreaPoints=function(r,o){var h=this,m=h.config,L=r.__max__+1,N=h.getShapeX(0,L,r,!!o),G=h.getShapeY(!!o),H=h.getShapeOffset(h.isAreaType,r,!!o),W=o?h.getSubYScale:h.getYScale;return function(z,Q){var Z=W.call(h,z.id)(0),ot=H(z,Q)||Z,J=N(z),ht=G(z);return m.axis_rotated&&(0<z.value&&ht<Z||z.value<0&&Z<ht)&&(ht=Z),[[J,ot],[J,ht-(Z-ot)],[J,ht-(Z-ot)],[J,ot]]}},n.prototype.updateCircle=function(r,o){var h=this,m=h.main.selectAll("."+F.circles).selectAll("."+F.circle).data(h.lineOrScatterOrStanfordData.bind(h)),L=m.enter().append("circle").attr("shape-rendering",h.isStanfordGraphType()?"crispEdges":"").attr("class",h.classCircle.bind(h)).attr("cx",r).attr("cy",o).attr("r",h.pointR.bind(h)).style("color",h.isStanfordGraphType()?h.getStanfordPointColor.bind(h):h.color);h.mainCircle=L.merge(m).style("opacity",h.isStanfordGraphType()?1:h.initialOpacityForCircle.bind(h)),m.exit().style("opacity",0)},n.prototype.redrawCircle=function(r,o,h,m){var L=this,N=L.main.selectAll("."+F.selectedCircle);return[(h?L.mainCircle.transition(m):L.mainCircle).style("opacity",this.opacityForCircle.bind(L)).style("color",L.isStanfordGraphType()?L.getStanfordPointColor.bind(L):L.color).attr("cx",r).attr("cy",o),(h?N.transition(m):N).attr("cx",r).attr("cy",o)]},n.prototype.circleX=function(r){return r.x||r.x===0?this.x(r.x):null},n.prototype.updateCircleY=function(){var r=this,o,h;r.config.data_groups.length>0?(o=r.getShapeIndices(r.isLineType),h=r.generateGetLinePoints(o),r.circleY=function(m,L){return h(m,L)[0][1]}):r.circleY=function(m){return r.getYScale(m.id)(m.value)}},n.prototype.getCircles=function(r,o){var h=this;return(o?h.main.selectAll("."+F.circles+h.getTargetSelectorSuffix(o)):h.main).selectAll("."+F.circle+(R(r)?"-"+r:""))},n.prototype.expandCircles=function(r,o,h){var m=this,L=m.pointExpandedR.bind(m);h&&m.unexpandCircles(),m.getCircles(r,o).classed(F.EXPANDED,!0).attr("r",L)},n.prototype.unexpandCircles=function(r){var o=this,h=o.pointR.bind(o);o.getCircles(r).filter(function(){return o.d3.select(this).classed(F.EXPANDED)}).classed(F.EXPANDED,!1).attr("r",h)},n.prototype.pointR=function(r){var o=this,h=o.config;return o.isStepType(r)?0:v(h.point_r)?h.point_r(r):h.point_r},n.prototype.pointExpandedR=function(r){var o=this,h=o.config;return h.point_focus_expand_enabled?v(h.point_focus_expand_r)?h.point_focus_expand_r(r):h.point_focus_expand_r?h.point_focus_expand_r:o.pointR(r)*1.75:o.pointR(r)},n.prototype.pointSelectR=function(r){var o=this,h=o.config;return v(h.point_select_r)?h.point_select_r(r):h.point_select_r?h.point_select_r:o.pointR(r)*4},n.prototype.isWithinCircle=function(r,o){var h=this.d3,m=h.mouse(r),L=h.select(r),N=+L.attr("cx"),G=+L.attr("cy");return Math.sqrt(Math.pow(N-m[0],2)+Math.pow(G-m[1],2))<o},n.prototype.isWithinStep=function(r,o){return Math.abs(o-this.d3.mouse(r)[1])<30},n.prototype.getCurrentWidth=function(){var r=this,o=r.config;return o.size_width?o.size_width:r.getParentWidth()},n.prototype.getCurrentHeight=function(){var r=this,o=r.config,h=o.size_height?o.size_height:r.getParentHeight();return h>0?h:320/(r.hasType("gauge")&&!o.gauge_fullCircle?2:1)},n.prototype.getCurrentPaddingTop=function(){var r=this,o=r.config,h=R(o.padding_top)?o.padding_top:0;return r.title&&r.title.node()&&(h+=r.getTitlePadding()),h},n.prototype.getCurrentPaddingBottom=function(){var r=this.config;return R(r.padding_bottom)?r.padding_bottom:0},n.prototype.getCurrentPaddingLeft=function(r){var o=this,h=o.config;return R(h.padding_left)?h.padding_left:h.axis_rotated?!h.axis_x_show||h.axis_x_inner?1:Math.max(l(o.getAxisWidthByAxisId("x",r)),40):!h.axis_y_show||h.axis_y_inner?o.axis.getYAxisLabelPosition().isOuter?30:1:l(o.getAxisWidthByAxisId("y",r))},n.prototype.getCurrentPaddingRight=function(){var r=this,o=r.config,h=0,m=10,L=r.isLegendRight?r.getLegendWidth()+20:0;return R(o.padding_right)?h=o.padding_right+1:o.axis_rotated?h=m+L:!o.axis_y2_show||o.axis_y2_inner?h=2+L+(r.axis.getY2AxisLabelPosition().isOuter?20:0):h=l(r.getAxisWidthByAxisId("y2"))+L,r.colorScale&&r.colorScale.node()&&(h+=r.getColorScalePadding()),h},n.prototype.getParentRectValue=function(r){for(var o=this.selectChart.node(),h;o&&o.tagName!=="BODY";){try{h=o.getBoundingClientRect()[r]}catch(m){r==="width"&&(h=o.offsetWidth)}if(h)break;o=o.parentNode}return h},n.prototype.getParentWidth=function(){return this.getParentRectValue("width")},n.prototype.getParentHeight=function(){var r=this.selectChart.style("height");return r.indexOf("px")>0?+r.replace("px",""):0},n.prototype.getSvgLeft=function(r){var o=this,h=o.config,m=h.axis_rotated||!h.axis_rotated&&!h.axis_y_inner,L=h.axis_rotated?F.axisX:F.axisY,N=o.main.select("."+L).node(),G=N&&m?N.getBoundingClientRect():{right:0},H=o.selectChart.node().getBoundingClientRect(),W=o.hasArcType(),z=G.right-H.left-(W?0:o.getCurrentPaddingLeft(r));return z>0?z:0},n.prototype.getAxisWidthByAxisId=function(r,o){var h=this,m=h.axis.getLabelPositionById(r);return h.axis.getMaxTickWidth(r,o)+(m.isInner?20:40)},n.prototype.getHorizontalAxisHeight=function(r,o){var h=this,m=h.config,L=30;return r==="x"&&!(p(o)&&o?m.subchart_axis_x_show:m.axis_x_show)?8:r==="x"&&m.axis_x_height?m.axis_x_height:r==="y"&&!m.axis_y_show?m.legend_show&&!h.isLegendRight&&!h.isLegendInset?10:1:r==="y2"&&!m.axis_y2_show?h.rotated_padding_top:(r==="x"&&!m.axis_rotated&&m.axis_x_tick_rotate&&(L=30+h.axis.getMaxTickWidth(r)*Math.cos(Math.PI*(90-Math.abs(m.axis_x_tick_rotate))/180)),r==="y"&&m.axis_rotated&&m.axis_y_tick_rotate&&(L=30+h.axis.getMaxTickWidth(r)*Math.cos(Math.PI*(90-Math.abs(m.axis_y_tick_rotate))/180)),L+(h.axis.getLabelPositionById(r).isInner?0:10)+(r==="y2"?-10:0))},n.prototype.initBrush=function(r){var o=this,h=o.d3;return o.brush=(o.config.axis_rotated?h.brushY():h.brushX()).on("brush",function(){var m=h.event.sourceEvent;m&&m.type==="zoom"||o.redrawForBrush()}).on("end",function(){var m=h.event.sourceEvent;m&&m.type==="zoom"||o.brush.empty()&&m&&m.type!=="end"&&o.brush.clear()}),o.brush.updateExtent=function(){var m=this.scale.range(),L;return o.config.axis_rotated?L=[[0,m[0]],[o.width2,m[1]]]:L=[[m[0],0],[m[1],o.height2]],this.extent(L),this},o.brush.updateScale=function(m){return this.scale=m,this},o.brush.update=function(m){this.updateScale(m||o.subX).updateExtent(),o.context.select("."+F.brush).call(this)},o.brush.clear=function(){o.context.select("."+F.brush).call(o.brush.move,null)},o.brush.selection=function(){return h.brushSelection(o.context.select("."+F.brush).node())},o.brush.selectionAsValue=function(m,L){var N,G;return m?(o.context&&(N=[this.scale(m[0]),this.scale(m[1])],G=o.context.select("."+F.brush),L&&(G=G.transition()),o.brush.move(G,N)),[]):(N=o.brush.selection()||[0,0],[this.scale.invert(N[0]),this.scale.invert(N[1])])},o.brush.empty=function(){var m=o.brush.selection();return!m||m[0]===m[1]},o.brush.updateScale(r)},n.prototype.initSubchart=function(){var r=this,o=r.config,h=r.context=r.svg.append("g").attr("transform",r.getTranslate("context"));h.style("visibility","visible"),h.append("g").attr("clip-path",r.clipPathForSubchart).attr("class",F.chart),h.select("."+F.chart).append("g").attr("class",F.chartBars),h.select("."+F.chart).append("g").attr("class",F.chartLines),h.append("g").attr("clip-path",r.clipPath).attr("class",F.brush),r.axes.subx=h.append("g").attr("class",F.axisX).attr("transform",r.getTranslate("subx")).attr("clip-path",o.axis_rotated?"":r.clipPathForXAxis).style("visibility",o.subchart_axis_x_show?"visible":"hidden")},n.prototype.initSubchartBrush=function(){var r=this;r.initBrush(r.subX).updateExtent(),r.context.select("."+F.brush).call(r.brush)},n.prototype.updateTargetsForSubchart=function(r){var o=this,h=o.context,m=o.config,L,N,G,H,W=o.classChartBar.bind(o),z=o.classBars.bind(o),Q=o.classChartLine.bind(o),Z=o.classLines.bind(o),ot=o.classAreas.bind(o);H=h.select("."+F.chartBars).selectAll("."+F.chartBar).data(r),G=H.enter().append("g").style("opacity",0),G.merge(H).attr("class",W),G.append("g").attr("class",z),N=h.select("."+F.chartLines).selectAll("."+F.chartLine).data(r),L=N.enter().append("g").style("opacity",0),L.merge(N).attr("class",Q),L.append("g").attr("class",Z),L.append("g").attr("class",ot),h.selectAll("."+F.brush+" rect").attr(m.axis_rotated?"width":"height",m.axis_rotated?o.width2:o.height2)},n.prototype.updateBarForSubchart=function(r){var o=this,h=o.context.selectAll("."+F.bars).selectAll("."+F.bar).data(o.barData.bind(o)),m=h.enter().append("path").attr("class",o.classBar.bind(o)).style("stroke","none").style("fill",o.color);h.exit().transition().duration(r).style("opacity",0).remove(),o.contextBar=m.merge(h).style("opacity",o.initialOpacity.bind(o))},n.prototype.redrawBarForSubchart=function(r,o,h){(o?this.contextBar.transition(Math.random().toString()).duration(h):this.contextBar).attr("d",r).style("opacity",1)},n.prototype.updateLineForSubchart=function(r){var o=this,h=o.context.selectAll("."+F.lines).selectAll("."+F.line).data(o.lineData.bind(o)),m=h.enter().append("path").attr("class",o.classLine.bind(o)).style("stroke",o.color);h.exit().transition().duration(r).style("opacity",0).remove(),o.contextLine=m.merge(h).style("opacity",o.initialOpacity.bind(o))},n.prototype.redrawLineForSubchart=function(r,o,h){(o?this.contextLine.transition(Math.random().toString()).duration(h):this.contextLine).attr("d",r).style("opacity",1)},n.prototype.updateAreaForSubchart=function(r){var o=this,h=o.d3,m=o.context.selectAll("."+F.areas).selectAll("."+F.area).data(o.lineData.bind(o)),L=m.enter().append("path").attr("class",o.classArea.bind(o)).style("fill",o.color).style("opacity",function(){return o.orgAreaOpacity=+h.select(this).style("opacity"),0});m.exit().transition().duration(r).style("opacity",0).remove(),o.contextArea=L.merge(m).style("opacity",0)},n.prototype.redrawAreaForSubchart=function(r,o,h){(o?this.contextArea.transition(Math.random().toString()).duration(h):this.contextArea).attr("d",r).style("fill",this.color).style("opacity",this.orgAreaOpacity)},n.prototype.redrawSubchart=function(r,o,h,m,L,N,G){var H=this,W=H.d3,z,Q,Z;W.event&&W.event.type==="zoom"&&H.brush.selectionAsValue(H.x.orgDomain()),r&&(H.brush.empty()||H.brush.selectionAsValue(H.x.orgDomain()),z=H.generateDrawArea(L,!0),Q=H.generateDrawBar(N,!0),Z=H.generateDrawLine(G,!0),H.updateBarForSubchart(h),H.updateLineForSubchart(h),H.updateAreaForSubchart(h),H.redrawBarForSubchart(Q,h,h),H.redrawLineForSubchart(Z,h,h),H.redrawAreaForSubchart(z,h,h))},n.prototype.redrawForBrush=function(){var r=this,o=r.x,h=r.d3,m;r.redraw({withTransition:!1,withY:r.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withEventRect:!1,withDimension:!1}),m=h.event.selection||r.brush.scale.range(),r.main.select("."+F.eventRect).call(r.zoom.transform,h.zoomIdentity.scale(r.width/(m[1]-m[0])).translate(-m[0],0)),r.config.subchart_onbrush.call(r.api,o.orgDomain())},n.prototype.transformContext=function(r,o){var h=this,m;o&&o.axisSubX?m=o.axisSubX:(m=h.context.select("."+F.axisX),r&&(m=m.transition())),h.context.attr("transform",h.getTranslate("context")),m.attr("transform",h.getTranslate("subx"))},n.prototype.getDefaultSelection=function(){var r=this,o=r.config,h=v(o.axis_x_selection)?o.axis_x_selection(r.getXDomain(r.data.targets)):o.axis_x_selection;return r.isTimeSeries()&&(h=[r.parseDate(h[0]),r.parseDate(h[1])]),h},n.prototype.removeSubchart=function(){var r=this;r.brush=null,r.context.remove(),r.context=null},n.prototype.initText=function(){var r=this;r.main.select("."+F.chart).append("g").attr("class",F.chartTexts),r.mainText=r.d3.selectAll([])},n.prototype.updateTargetsForText=function(r){var o=this,h=o.classChartText.bind(o),m=o.classTexts.bind(o),L=o.classFocus.bind(o),N=o.main.select("."+F.chartTexts).selectAll("."+F.chartText).data(r),G=N.enter().append("g").attr("class",h).style("opacity",0).style("pointer-events","none");G.append("g").attr("class",m),G.merge(N).attr("class",function(H){return h(H)+L(H)})},n.prototype.updateText=function(r,o,h){var m=this,L=m.config,N=m.barOrLineData.bind(m),G=m.classText.bind(m),H=m.main.selectAll("."+F.texts).selectAll("."+F.text).data(N),W=H.enter().append("text").attr("class",G).attr("text-anchor",function(z){return L.axis_rotated?z.value<0?"end":"start":"middle"}).style("stroke","none").attr("x",r).attr("y",o).style("fill",function(z){return m.color(z)}).style("fill-opacity",0);m.mainText=W.merge(H).text(function(z,Q,Z){return m.dataLabelFormat(z.id)(z.value,z.id,Q,Z)}),H.exit().transition().duration(h).style("fill-opacity",0).remove()},n.prototype.redrawText=function(r,o,h,m,L){return[(m?this.mainText.transition(L):this.mainText).attr("x",r).attr("y",o).style("fill",this.color).style("fill-opacity",h?0:this.opacityForText.bind(this))]},n.prototype.getTextRect=function(r,o,h){var m=this.d3.select("body").append("div").classed("c3",!0),L=m.append("svg").style("visibility","hidden").style("position","fixed").style("top",0).style("left",0),N=this.d3.select(h).style("font"),G;return L.selectAll(".dummy").data([r]).enter().append("text").classed(o||"",!0).style("font",N).text(r).each(function(){G=b(this)}),m.remove(),G},n.prototype.generateXYForText=function(r,o,h,m){var L=this,N=L.generateGetAreaPoints(r,!1),G=L.generateGetBarPoints(o,!1),H=L.generateGetLinePoints(h,!1),W=m?L.getXForText:L.getYForText;return function(z,Q){var Z=L.isAreaType(z)?N:L.isBarType(z)?G:H;return W.call(L,Z(z,Q),z,this)}},n.prototype.getXForText=function(r,o,h){var m=this,L=b(h),N,G;return m.config.axis_rotated?(G=m.isBarType(o)?4:6,N=r[2][1]+G*(o.value<0?-1:1)):N=m.hasType("bar")?(r[2][0]+r[0][0])/2:r[0][0],o.value===null&&(N>m.width?N=m.width-L.width:N<0&&(N=4)),N},n.prototype.getYForText=function(r,o,h){var m=this,L=b(h),N;return m.config.axis_rotated?N=(r[0][0]+r[2][0]+L.height*.6)/2:(N=r[2][1],o.value<0||o.value===0&&!m.hasPositiveValue?(N+=L.height,m.isBarType(o)&&m.isSafari()?N-=3:!m.isBarType(o)&&m.isChrome()&&(N+=3)):N+=m.isBarType(o)?-3:-6),o.value===null&&!m.config.axis_rotated&&(N<L.height?N=L.height:N>this.height&&(N=this.height-4)),N},n.prototype.initTitle=function(){var r=this;r.title=r.svg.append("text").text(r.config.title_text).attr("class",r.CLASS.title)},n.prototype.redrawTitle=function(){var r=this;r.title.attr("x",r.xForTitle.bind(r)).attr("y",r.yForTitle.bind(r))},n.prototype.xForTitle=function(){var r=this,o=r.config,h=o.title_position||"left",m;return h.indexOf("right")>=0?m=r.currentWidth-r.getTextRect(r.title.node().textContent,r.CLASS.title,r.title.node()).width-o.title_padding.right:h.indexOf("center")>=0?m=Math.max((r.currentWidth-r.getTextRect(r.title.node().textContent,r.CLASS.title,r.title.node()).width)/2,0):m=o.title_padding.left,m},n.prototype.yForTitle=function(){var r=this;return r.config.title_padding.top+r.getTextRect(r.title.node().textContent,r.CLASS.title,r.title.node()).height},n.prototype.getTitlePadding=function(){var r=this;return r.yForTitle()+r.config.title_padding.bottom};function ut(r){return r/Math.pow(10,Math.ceil(Math.log(r)/Math.LN10-1e-12))===1}n.prototype.drawColorScale=function(){var r=this,o=r.d3,h=r.config,m=r.data.targets[0],L,N,G,H,W,z,Q,Z;if(L=isNaN(h.stanford_scaleWidth)?20:h.stanford_scaleWidth,N=5,N<0||L<0)throw Error("Colorscale's barheight and barwidth must be greater than 0.");Z=r.height-h.stanford_padding.bottom-h.stanford_padding.top,H=o.range(h.stanford_padding.bottom,Z,N),Q=o.scaleSequential(m.colors).domain([H[H.length-1],H[0]]),r.colorScale&&r.colorScale.remove(),r.colorScale=r.svg.append("g").attr("width",50).attr("height",Z).attr("class",F.colorScale),r.colorScale.append("g").attr("transform","translate(0, "+h.stanford_padding.top+")").selectAll("bars").data(H).enter().append("rect").attr("y",function(ot,J){return J*N}).attr("x",0).attr("width",L).attr("height",N).attr("fill",function(ot){return Q(ot)}),z=o.scaleLog().domain([m.minEpochs,m.maxEpochs]).range([H[0]+h.stanford_padding.top+H[H.length-1]+N-1,H[0]+h.stanford_padding.top]),W=o.axisRight(z),h.stanford_scaleFormat==="pow10"?W.tickValues([1,10,100,1e3,1e4,1e5,1e6,1e7]):v(h.stanford_scaleFormat)?W.tickFormat(h.stanford_scaleFormat):W.tickFormat(o.format("d")),v(h.stanford_scaleValues)&&W.tickValues(h.stanford_scaleValues(m.minEpochs,m.maxEpochs)),G=r.colorScale.append("g").attr("class","legend axis").attr("transform","translate("+L+",0)").call(W),h.stanford_scaleFormat==="pow10"&&G.selectAll(".tick text").text(null).filter(ut).text(10).append("tspan").attr("dy","-.7em").text(function(ot){return Math.round(Math.log(ot)/Math.LN10)}),r.colorScale.attr("transform","translate("+(r.currentWidth-r.xForColorScale())+", 0)")},n.prototype.xForColorScale=function(){var r=this;return r.config.stanford_padding.right+b(r.colorScale.node()).width},n.prototype.getColorScalePadding=function(){var r=this;return r.xForColorScale()+r.config.stanford_padding.left+20},n.prototype.isStanfordGraphType=function(){var r=this;return r.config.data_type==="stanford"},n.prototype.initStanfordData=function(){var r=this,o=r.d3,h=r.config,m=r.data.targets[0],L,N,G;if(m.values.sort(wt),L=m.values.map(function(H){return H.epochs}),G=isNaN(h.stanford_scaleMin)?o.min(L):h.stanford_scaleMin,N=isNaN(h.stanford_scaleMax)?o.max(L):h.stanford_scaleMax,G>N)throw Error("Number of minEpochs has to be smaller than maxEpochs");m.colors=v(h.stanford_colors)?h.stanford_colors:o.interpolateHslLong(o.hsl(250,1,.5),o.hsl(0,1,.5)),m.colorscale=o.scaleSequentialLog(m.colors).domain([G,N]),m.minEpochs=G,m.maxEpochs=N},n.prototype.getStanfordPointColor=function(r){var o=this,h=o.data.targets[0];return h.colorscale(r.epochs)},n.prototype.getCentroid=function(r){var o=mt(r),h=0,m=0,L,N,G,H,W;for(L=0,N=r.length-1;L<r.length;N=L,L+=1)H=r[L],W=r[N],G=H.x*W.y-W.x*H.y,h+=(H.x+W.x)*G,m+=(H.y+W.y)*G;return G=o*6,{x:h/G,y:m/G}},n.prototype.getStanfordTooltipTitle=function(r){var o=this,h=o.axis.getLabelText("x"),m=o.axis.getLabelText("y");return`
      <tr><th>`+(h?V(h):"x")+"</th><th class='value'>"+r.x+`</th></tr>
      <tr><th>`+(m?V(m):"y")+"</th><th class='value'>"+r.value+`</th></tr>
    `},n.prototype.countEpochsInRegion=function(r){var o=this,h=o.data.targets[0],m,L;return m=h.values.reduce(function(N,G){return N+Number(G.epochs)},0),L=h.values.reduce(function(N,G){return $t(G,r)?N+Number(G.epochs):N},0),{value:L,percentage:L!==0?(L/m*100).toFixed(1):0}};var mt=function(r){var o=0,h,m,L,N;for(h=0,m=r.length-1;h<r.length;m=h,h+=1)L=r[h],N=r[m],o+=L.x*N.y,o-=L.y*N.x;return o/=2,o},$t=function(r,o){for(var h,m,L,N,G,H=r.x,W=r.value,z=!1,Q=0,Z=o.length-1;Q<o.length;Z=Q++)h=o[Q].x,m=o[Q].y,N=o[Z].x,L=o[Z].y,G=m>W!=L>W&&H<(N-h)*(W-m)/(L-m)+h,G&&(z=!z);return z},wt=function(r,o){return r.epochs<o.epochs?-1:r.epochs>o.epochs?1:0};return n.prototype.initStanfordElements=function(){var r=this;r.stanfordElements=r.main.select("."+F.chart).append("g").attr("class",F.stanfordElements),r.stanfordElements.append("g").attr("class",F.stanfordLines),r.stanfordElements.append("g").attr("class",F.stanfordTexts),r.stanfordElements.append("g").attr("class",F.stanfordRegions)},n.prototype.updateStanfordElements=function(r){var o=this,h=o.main,m=o.config,L,N,G,H,W,z,Q=o.xvCustom.bind(o),Z=o.yvCustom.bind(o),ot=o.countEpochsInRegion.bind(o);L=h.select("."+F.stanfordLines).style("shape-rendering","geometricprecision").selectAll("."+F.stanfordLine).data(m.stanford_lines),N=L.enter().append("g").attr("class",function(J){return F.stanfordLine+(J.class?" "+J.class:"")}),N.append("line").attr("x1",function(J){return m.axis_rotated?Z(J,"value_y1"):Q(J,"value_x1")}).attr("x2",function(J){return m.axis_rotated?Z(J,"value_y2"):Q(J,"value_x2")}).attr("y1",function(J){return m.axis_rotated?Q(J,"value_x1"):Z(J,"value_y1")}).attr("y2",function(J){return m.axis_rotated?Q(J,"value_x2"):Z(J,"value_y2")}).style("opacity",0),o.stanfordLines=N.merge(L),o.stanfordLines.select("line").transition().duration(r).attr("x1",function(J){return m.axis_rotated?Z(J,"value_y1"):Q(J,"value_x1")}).attr("x2",function(J){return m.axis_rotated?Z(J,"value_y2"):Q(J,"value_x2")}).attr("y1",function(J){return m.axis_rotated?Q(J,"value_x1"):Z(J,"value_y1")}).attr("y2",function(J){return m.axis_rotated?Q(J,"value_x2"):Z(J,"value_y2")}).style("opacity",1),L.exit().transition().duration(r).style("opacity",0).remove(),W=h.select("."+F.stanfordTexts).selectAll("."+F.stanfordText).data(m.stanford_texts),z=W.enter().append("g").attr("class",function(J){return F.stanfordText+(J.class?" "+J.class:"")}),z.append("text").attr("x",function(J){return m.axis_rotated?Z(J,"y"):Q(J,"x")}).attr("y",function(J){return m.axis_rotated?Q(J,"x"):Z(J,"y")}).style("opacity",0),o.stanfordTexts=z.merge(W),o.stanfordTexts.select("text").transition().duration(r).attr("x",function(J){return m.axis_rotated?Z(J,"y"):Q(J,"x")}).attr("y",function(J){return m.axis_rotated?Q(J,"x"):Z(J,"y")}).text(function(J){return J.content}).style("opacity",1),W.exit().transition().duration(r).style("opacity",0).remove(),G=h.select("."+F.stanfordRegions).selectAll("."+F.stanfordRegion).data(m.stanford_regions),H=G.enter().append("g").attr("class",function(J){return F.stanfordRegion+(J.class?" "+J.class:"")}),H.append("polygon").attr("points",function(J){return J.points.map(function(ht){return[m.axis_rotated?Z(ht,"y"):Q(ht,"x"),m.axis_rotated?Q(ht,"x"):Z(ht,"y")].join(",")}).join(" ")}).style("opacity",0),H.append("text").attr("x",function(J){return o.getCentroid(J.points).x}).attr("y",function(J){return o.getCentroid(J.points).y}).style("opacity",0),o.stanfordRegions=H.merge(G),o.stanfordRegions.select("polygon").transition().duration(r).attr("points",function(J){return J.points.map(function(ht){return[m.axis_rotated?Z(ht,"y"):Q(ht,"x"),m.axis_rotated?Q(ht,"x"):Z(ht,"y")].join(",")}).join(" ")}).style("opacity",function(J){return J.opacity?J.opacity:.2}),o.stanfordRegions.select("text").transition().duration(r).attr("x",function(J){return m.axis_rotated?Z(o.getCentroid(J.points),"y"):Q(o.getCentroid(J.points),"x")}).attr("y",function(J){return m.axis_rotated?Q(o.getCentroid(J.points),"x"):Z(o.getCentroid(J.points),"y")}).text(function(J){if(J.text){var ht,ft,vt;return o.isStanfordGraphType()&&(vt=ot(J.points),ht=vt.value,ft=vt.percentage),J.text(ht,ft)}return""}).attr("text-anchor","middle").attr("dominant-baseline","middle").style("opacity",1),G.exit().transition().duration(r).style("opacity",0).remove()},n.prototype.initTooltip=function(){var r=this,o=r.config,h;if(r.tooltip=r.selectChart.style("position","relative").append("div").attr("class",F.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),o.tooltip_init_show){if(r.isTimeSeries()&&S(o.tooltip_init_x)){for(o.tooltip_init_x=r.parseDate(o.tooltip_init_x),h=0;h<r.data.targets[0].values.length&&r.data.targets[0].values[h].x-o.tooltip_init_x!==0;h++);o.tooltip_init_x=h}r.tooltip.html(o.tooltip_contents.call(r,r.data.targets.map(function(m){return r.addName(m.values[o.tooltip_init_x])}),r.axis.getXAxisTickFormat(),r.getYFormat(r.hasArcType()),r.color)),r.tooltip.style("top",o.tooltip_init_position.top).style("left",o.tooltip_init_position.left).style("display","block")}},n.prototype.getTooltipSortFunction=function(){var r=this,o=r.config;if(o.data_groups.length===0||o.tooltip_order!==void 0){var h=o.tooltip_order;h===void 0&&(h=o.data_order);var m=function(G){return G?G.value:null};if(S(h)&&h.toLowerCase()==="asc")return function(G,H){return m(G)-m(H)};if(S(h)&&h.toLowerCase()==="desc")return function(G,H){return m(H)-m(G)};if(v(h)){var L=h;return o.tooltip_order===void 0&&(L=function(G,H){return h(G?{id:G.id,values:[G]}:null,H?{id:H.id,values:[H]}:null)}),L}else if(w(h))return function(G,H){return h.indexOf(G.id)-h.indexOf(H.id)}}else{var N=r.orderTargets(r.data.targets).map(function(G){return G.id});return(r.isOrderAsc()||r.isOrderDesc())&&(N=N.reverse()),function(G,H){return N.indexOf(G.id)-N.indexOf(H.id)}}},n.prototype.getTooltipContent=function(r,o,h,m){var L=this,N=L.config,G=N.tooltip_format_title||o,H=N.tooltip_format_name||function(vt){return vt},W,z,Q,Z,ot,J,ht=N.tooltip_format_value;ht||(ht=L.isTargetNormalized(r.id)?function(vt,xt){return(xt*100).toFixed(2)+"%"}:h);var ft=this.getTooltipSortFunction();for(ft&&r.sort(ft),z=0;z<r.length;z++)if(r[z]&&(r[z].value||r[z].value===0)){if(L.isStanfordGraphType())W||(Q=L.getStanfordTooltipTitle(r[z]),W="<table class='"+L.CLASS.tooltip+"'>"+Q),J=L.getStanfordPointColor(r[z]),ot=V(N.data_epochs),Z=r[z].epochs;else if(W||(Q=V(G?G(r[z].x,r[z].index):r[z].x),W="<table class='"+L.CLASS.tooltip+"'>"+(Q||Q===0?"<tr><th colspan='2'>"+Q+"</th></tr>":"")),Z=V(ht(r[z].value,r[z].ratio,r[z].id,r[z].index,r)),Z!==void 0){if(r[z].name===null)continue;ot=V(H(r[z].name,r[z].ratio,r[z].id,r[z].index)),J=L.levelColor?L.levelColor(r[z].value):m(r[z].id)}Z!==void 0&&(W+="<tr class='"+L.CLASS.tooltipName+"-"+L.getTargetSelectorSuffix(r[z].id)+"'>",W+="<td class='name'><span style='background-color:"+J+"'></span>"+ot+"</td>",W+="<td class='value'>"+Z+"</td>",W+="</tr>")}return W+"</table>"},n.prototype.tooltipPosition=function(r,o,h,m){var L=this,N=L.config,G=L.d3,H,W,z,Q,Z,ot=L.hasArcType(),J=G.mouse(m);return ot?(W=(L.width-(L.isLegendRight?L.getLegendWidth():0))/2+J[0],Q=(L.hasType("gauge")?L.height:L.height/2)+J[1]+20):(H=L.getSvgLeft(!0),N.axis_rotated?(W=H+J[0]+100,z=W+o,Z=L.currentWidth-L.getCurrentPaddingRight(),Q=L.x(r[0].x)+20):(W=H+L.getCurrentPaddingLeft(!0)+L.x(r[0].x)+20,z=W+o,Z=H+L.currentWidth-L.getCurrentPaddingRight(),Q=J[1]+15),z>Z&&(W-=z-Z+20),Q+h>L.currentHeight&&(Q-=h+30)),Q<0&&(Q=0),{top:Q,left:W}},n.prototype.showTooltip=function(r,o){var h=this,m=h.config,L,N,G,H=h.hasArcType(),W=r.filter(function(Q){return Q&&R(Q.value)}),z=m.tooltip_position||n.prototype.tooltipPosition;if(W.length===0||!m.tooltip_show){h.hideTooltip();return}h.tooltip.html(m.tooltip_contents.call(h,r,h.axis.getXAxisTickFormat(),h.getYFormat(H),h.color)).style("display","block"),L=h.tooltip.property("offsetWidth"),N=h.tooltip.property("offsetHeight"),G=z.call(this,W,L,N,o),h.tooltip.style("top",G.top+"px").style("left",G.left+"px")},n.prototype.hideTooltip=function(){this.tooltip.style("display","none")},n.prototype.setTargetType=function(r,o){var h=this,m=h.config;h.mapToTargetIds(r).forEach(function(L){h.withoutFadeIn[L]=o===m.data_types[L],m.data_types[L]=o}),r||(m.data_type=o)},n.prototype.hasType=function(r,o){var h=this,m=h.config.data_types,L=!1;return o=o||h.data.targets,o&&o.length?o.forEach(function(N){var G=m[N.id];(G&&G.indexOf(r)>=0||!G&&r==="line")&&(L=!0)}):Object.keys(m).length?Object.keys(m).forEach(function(N){m[N]===r&&(L=!0)}):L=h.config.data_type===r,L},n.prototype.hasArcType=function(r){return this.hasType("pie",r)||this.hasType("donut",r)||this.hasType("gauge",r)},n.prototype.isLineType=function(r){var o=this.config,h=S(r)?r:r.id;return!o.data_types[h]||["line","spline","area","area-spline","step","area-step"].indexOf(o.data_types[h])>=0},n.prototype.isStepType=function(r){var o=S(r)?r:r.id;return["step","area-step"].indexOf(this.config.data_types[o])>=0},n.prototype.isSplineType=function(r){var o=S(r)?r:r.id;return["spline","area-spline"].indexOf(this.config.data_types[o])>=0},n.prototype.isAreaType=function(r){var o=S(r)?r:r.id;return["area","area-spline","area-step"].indexOf(this.config.data_types[o])>=0},n.prototype.isBarType=function(r){var o=S(r)?r:r.id;return this.config.data_types[o]==="bar"},n.prototype.isScatterType=function(r){var o=S(r)?r:r.id;return this.config.data_types[o]==="scatter"},n.prototype.isStanfordType=function(r){var o=S(r)?r:r.id;return this.config.data_types[o]==="stanford"},n.prototype.isPieType=function(r){var o=S(r)?r:r.id;return this.config.data_types[o]==="pie"},n.prototype.isGaugeType=function(r){var o=S(r)?r:r.id;return this.config.data_types[o]==="gauge"},n.prototype.isDonutType=function(r){var o=S(r)?r:r.id;return this.config.data_types[o]==="donut"},n.prototype.isArcType=function(r){return this.isPieType(r)||this.isDonutType(r)||this.isGaugeType(r)},n.prototype.lineData=function(r){return this.isLineType(r)?[r]:[]},n.prototype.arcData=function(r){return this.isArcType(r.data)?[r]:[]},n.prototype.barData=function(r){return this.isBarType(r)?r.values:[]},n.prototype.lineOrScatterOrStanfordData=function(r){return this.isLineType(r)||this.isScatterType(r)||this.isStanfordType(r)?r.values:[]},n.prototype.barOrLineData=function(r){return this.isBarType(r)||this.isLineType(r)?r.values:[]},n.prototype.isSafari=function(){var r=window.navigator.userAgent;return r.indexOf("Safari")>=0&&r.indexOf("Chrome")<0},n.prototype.isChrome=function(){var r=window.navigator.userAgent;return r.indexOf("Chrome")>=0},n.prototype.initZoom=function(){var r=this,o=r.d3,h=r.config,m;return r.zoom=o.zoom().on("start",function(){if(h.zoom_type==="scroll"){var L=o.event.sourceEvent;L&&L.type==="brush"||(m=L,h.zoom_onzoomstart.call(r.api,L))}}).on("zoom",function(){if(h.zoom_type==="scroll"){var L=o.event.sourceEvent;L&&L.type==="brush"||(r.redrawForZoom(),h.zoom_onzoom.call(r.api,r.x.orgDomain()))}}).on("end",function(){if(h.zoom_type==="scroll"){var L=o.event.sourceEvent;L&&L.type==="brush"||L&&m.clientX===L.clientX&&m.clientY===L.clientY||h.zoom_onzoomend.call(r.api,r.x.orgDomain())}}),r.zoom.updateDomain=function(){return o.event&&o.event.transform&&(h.axis_rotated&&h.zoom_type==="scroll"&&o.event.sourceEvent.type==="mousemove"?r.x.domain(o.event.transform.rescaleY(r.subX).domain()):r.x.domain(o.event.transform.rescaleX(r.subX).domain())),this},r.zoom.updateExtent=function(){return this.scaleExtent([1,1/0]).translateExtent([[0,0],[r.width,r.height]]).extent([[0,0],[r.width,r.height]]),this},r.zoom.update=function(){return this.updateExtent().updateDomain()},r.zoom.updateExtent()},n.prototype.zoomTransform=function(r){var o=this,h=[o.x(r[0]),o.x(r[1])];return o.d3.zoomIdentity.scale(o.width/(h[1]-h[0])).translate(-h[0],0)},n.prototype.initDragZoom=function(){var r=this,o=r.d3,h=r.config,m=r.context=r.svg,L=r.margin.left+20.5,N=r.margin.top+.5;if(h.zoom_type==="drag"&&h.zoom_enabled){var G=function(W){return W&&W.map(function(z){return r.x.invert(z)})},H=r.dragZoomBrush=o.brushX().on("start",function(){r.api.unzoom(),r.svg.select("."+F.dragZoom).classed("disabled",!1),h.zoom_onzoomstart.call(r.api,o.event.sourceEvent)}).on("brush",function(){h.zoom_onzoom.call(r.api,G(o.event.selection))}).on("end",function(){if(o.event.selection!=null){var W=G(o.event.selection);h.zoom_disableDefaultBehavior||r.api.zoom(W),r.svg.select("."+F.dragZoom).classed("disabled",!0),h.zoom_onzoomend.call(r.api,W)}});m.append("g").classed(F.dragZoom,!0).attr("clip-path",r.clipPath).attr("transform","translate("+L+","+N+")").call(H)}},n.prototype.getZoomDomain=function(){var r=this,o=r.config,h=r.d3,m=h.min([r.orgXDomain[0],o.zoom_x_min]),L=h.max([r.orgXDomain[1],o.zoom_x_max]);return[m,L]},n.prototype.redrawForZoom=function(){var r=this,o=r.d3,h=r.config,m=r.zoom,L=r.x;h.zoom_enabled&&r.filterTargetsToShow(r.data.targets).length!==0&&(m.update(),!h.zoom_disableDefaultBehavior&&(r.isCategorized()&&L.orgDomain()[0]===r.orgXDomain[0]&&L.domain([r.orgXDomain[0]-1e-10,L.orgDomain()[1]]),r.redraw({withTransition:!1,withY:h.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),o.event.sourceEvent&&o.event.sourceEvent.type==="mousemove"&&(r.cancelClick=!0)))},st}))})(c3$3)),c3$3.exports}var c3Exports=requireC3();const c3=getDefaultExportFromCjs(c3Exports),c3$1=_mergeNamespaces({__proto__:null,default:c3},[c3Exports]);/*!
 * d3pie
 * @author Ben Keen
 * @version 0.1.8
 * @date May 1st, 2015
 * @repo http://github.com/benkeen/d3pie
 */(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof exports=="object"?module.exports=e(require()):t.d3pie=e(t)})(void 0,function(){var t="d3pie",e="0.1.6",n=0,i={header:{title:{text:"",color:"#333333",fontSize:18,font:"arial"},subtitle:{text:"",color:"#666666",fontSize:14,font:"arial"},location:"top-center",titleSubtitlePadding:8},footer:{text:"",color:"#666666",fontSize:14,font:"arial",location:"left"},size:{canvasHeight:500,canvasWidth:500,pieInnerRadius:"0%",pieOuterRadius:null},data:{sortOrder:"none",ignoreSmallSegments:{enabled:!1,valueType:"percentage",value:null},smallSegmentGrouping:{enabled:!1,value:1,valueType:"percentage",label:"Other",color:"#cccccc"},content:[]},labels:{outer:{format:"label",hideWhenLessThanPercentage:null,pieDistance:30},inner:{format:"percentage",hideWhenLessThanPercentage:null},mainLabel:{color:"#333333",font:"arial",fontSize:10},percentage:{color:"#dddddd",font:"arial",fontSize:10,decimalPlaces:0},value:{color:"#cccc44",font:"arial",fontSize:10},lines:{enabled:!0,style:"curved",color:"segment"},truncation:{enabled:!1,truncateLength:30},formatter:null},effects:{load:{effect:"default",speed:1e3},pullOutSegmentOnClick:{effect:"bounce",speed:300,size:10},highlightSegmentOnMouseover:!0,highlightLuminosity:-.2},tooltips:{enabled:!1,type:"placeholder",string:"",placeholderParser:null,styles:{fadeInSpeed:250,backgroundColor:"#000000",backgroundOpacity:.5,color:"#efefef",borderRadius:2,font:"arial",fontSize:10,padding:4}},misc:{colors:{background:null,segments:["#2484c1","#65a620","#7b6888","#a05d56","#961a1a","#d8d23a","#e98125","#d0743c","#635222","#6ada6a","#0c6197","#7d9058","#207f33","#44b9b0","#bca44a","#e4a14b","#a3acb2","#8cc3e9","#69a6f9","#5b388f","#546e91","#8bde95","#d2ab58","#273c71","#98bf6e","#4daa4b","#98abc5","#cc1010","#31383b","#006391","#c2643f","#b0a474","#a5a39c","#a9c2bc","#22af8c","#7fcecf","#987ac6","#3d3b87","#b77b1c","#c9c2b6","#807ece","#8db27c","#be66a2","#9ed3c6","#00644b","#005064","#77979f","#77e079","#9c73ab","#1f79a7"],segmentStroke:"#ffffff"},gradient:{enabled:!1,percentage:95,color:"#000000"},canvasPadding:{top:5,right:5,bottom:5,left:5},pieCenterOffset:{x:0,y:0},cssPrefix:null},callbacks:{onload:null,onMouseoverSegment:null,onMouseoutSegment:null,onClickSegment:null}},u={initialCheck:function(v){var T=v.cssPrefix,S=v.element,P=v.options;if(!window.d3||!window.d3.hasOwnProperty("version"))return console.error("d3pie error: d3 is not available"),!1;if(!(S instanceof HTMLElement||S instanceof SVGElement))return console.error("d3pie error: the first d3pie() param must be a valid DOM element (not jQuery) or a ID string."),!1;if(!/[a-zA-Z][a-zA-Z0-9_-]*$/.test(T))return console.error("d3pie error: invalid options.misc.cssPrefix"),!1;if(!l.isArray(P.data.content))return console.error("d3pie error: invalid config structure: missing data.content property."),!1;if(P.data.content.length===0)return console.error("d3pie error: no data supplied."),!1;for(var R=[],O=0;O<P.data.content.length;O++){if(typeof P.data.content[O].value!="number"||isNaN(P.data.content[O].value)){console.log("not valid: ",P.data.content[O]);continue}if(P.data.content[O].value<=0){console.log("not valid - should have positive value: ",P.data.content[O]);continue}R.push(P.data.content[O])}return v.options.data.content=R,!0}},l={addSVGSpace:function(v){var T=v.element,S=v.options.size.canvasWidth,P=v.options.size.canvasHeight,R=v.options.misc.colors.background,O=d3.select(T).append("svg:svg").attr("width",S).attr("height",P);return R!=="transparent"&&O.style("background-color",function(){return R}),O},whenIdExists:function(v,T){var S=1,P=1e3,R=setInterval(function(){document.getElementById(v)&&(clearInterval(R),T()),S>P&&clearInterval(R),S++},1)},whenElementsExist:function(v,T){var S=1,P=1e3,R=setInterval(function(){for(var O=!0,V=0;V<v.length;V++)if(!document.getElementById(v[V])){O=!1;break}O&&(clearInterval(R),T()),S>P&&clearInterval(R),S++},1)},shuffleArray:function(v){for(var T=v.length,S,P;T!==0;)P=Math.floor(Math.random()*T),T-=1,S=v[T],v[T]=v[P],v[P]=S;return v},processObj:function(v,T,S){return typeof T=="string"?l.processObj(v,T.split("."),S):T.length===1&&S!==void 0?(v[T[0]]=S,v[T[0]]):T.length===0?v:l.processObj(v[T[0]],T.slice(1),S)},getDimensions:function(v){var T=document.getElementById(v),S=0,P=0;if(T){var R=T.getBBox();S=R.width,P=R.height}else console.log("error: getDimensions() "+v+" not found.");return{w:S,h:P}},rectIntersect:function(v,T){var S=T.x>v.x+v.w||T.x+T.w<v.x||T.y+T.h<v.y||T.y>v.y+v.h;return!S},getColorShade:function(v,T){v=String(v).replace(/[^0-9a-f]/gi,""),v.length<6&&(v=v[0]+v[0]+v[1]+v[1]+v[2]+v[2]),T=T||0;for(var S="#",P=0;P<3;P++){var R=parseInt(v.substr(P*2,2),16);R=Math.round(Math.min(Math.max(0,R+R*T),255)).toString(16),S+=("00"+R).substr(R.length)}return S},initSegmentColors:function(v){for(var T=v.options.data.content,S=v.options.misc.colors.segments,P=[],R=0;R<T.length;R++)T[R].hasOwnProperty("color")?P.push(T[R].color):P.push(S[R]);return P},applySmallSegmentGrouping:function(v,T){var S;T.valueType==="percentage"&&(S=g.getTotalPieSize(v));for(var P=[],R=[],O=0,V=0;V<v.length;V++)if(T.valueType==="percentage"){var q=v[V].value/S*100;if(q<=T.value){R.push(v[V]),O+=v[V].value;continue}v[V].isGrouped=!1,P.push(v[V])}else{if(v[V].value<=T.value){R.push(v[V]),O+=v[V].value;continue}v[V].isGrouped=!1,P.push(v[V])}return R.length&&P.push({color:T.color,label:T.label,value:O,isGrouped:!0,groupedData:R}),P},showPoint:function(v,T,S){v.append("circle").attr("cx",T).attr("cy",S).attr("r",2).style("fill","black")},isFunction:function(v){var T={};return v&&T.toString.call(v)==="[object Function]"},isArray:function(v){return Object.prototype.toString.call(v)==="[object Array]"}},d=function(){var v,T,S,P,R,O,V=arguments[0]||{},q=1,et=arguments.length,nt=!1,lt=Object.prototype.toString,it=Object.prototype.hasOwnProperty,F={"[object Boolean]":"boolean","[object Number]":"number","[object String]":"string","[object Function]":"function","[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object"},ct={isFunction:function(U){return ct.type(U)==="function"},isArray:Array.isArray||function(U){return ct.type(U)==="array"},isWindow:function(U){return U!==null&&U===U.window},isNumeric:function(U){return!isNaN(parseFloat(U))&&isFinite(U)},type:function(U){return U===null?String(U):F[lt.call(U)]||"object"},isPlainObject:function(U){if(!U||ct.type(U)!=="object"||U.nodeType)return!1;try{if(U.constructor&&!it.call(U,"constructor")&&!it.call(U.constructor.prototype,"isPrototypeOf"))return!1}catch(yt){return!1}var st;for(st in U);return st===void 0||it.call(U,st)}};for(typeof V=="boolean"&&(nt=V,V=arguments[1]||{},q=2),typeof V!="object"&&!ct.isFunction(V)&&(V={}),et===q&&(V=this,--q),q;q<et;q++)if((v=arguments[q])!==null)for(T in v)S=V[T],P=v[T],V!==P&&(nt&&P&&(ct.isPlainObject(P)||(R=ct.isArray(P)))?(R?(R=!1,O=S&&ct.isArray(S)?S:[]):O=S&&ct.isPlainObject(S)?S:{},V[T]=d(nt,O,P)):P!==void 0&&(V[T]=P));return V},g={toRadians:function(v){return v*(Math.PI/180)},toDegrees:function(v){return v*(180/Math.PI)},computePieRadius:function(v){var T=v.options.size,S=v.options.misc.canvasPadding,P=T.canvasWidth-S.left-S.right,R=T.canvasHeight-S.top-S.bottom;v.options.header.location!=="pie-center"&&(R-=v.textComponents.headerHeight),v.textComponents.footer.exists&&(R-=v.textComponents.footer.h),R=R<0?0:R;var O=(P<R?P:R)/3,V,q;if(T.pieOuterRadius!==null)if(/%/.test(T.pieOuterRadius)){q=parseInt(T.pieOuterRadius.replace(/[\D]/,""),10),q=q>99?99:q,q=q<0?0:q;var et=P<R?P:R;if(v.options.labels.outer.format!=="none"){var nt=parseInt(v.options.labels.outer.pieDistance,10)*2;et-nt>0&&(et-=nt)}O=Math.floor(et/100*q)/2}else O=parseInt(T.pieOuterRadius,10);/%/.test(T.pieInnerRadius)?(q=parseInt(T.pieInnerRadius.replace(/[\D]/,""),10),q=q>99?99:q,q=q<0?0:q,V=Math.floor(O/100*q)):V=parseInt(T.pieInnerRadius,10),v.innerRadius=V,v.outerRadius=O},getTotalPieSize:function(v){for(var T=0,S=0;S<v.length;S++)T+=v[S].value;return T},sortPieData:function(v){var T=v.options.data.content,S=v.options.data.sortOrder;switch(S){case"none":break;case"random":T=l.shuffleArray(T);break;case"value-asc":T.sort(function(P,R){return P.value<R.value?-1:1});break;case"value-desc":T.sort(function(P,R){return P.value<R.value?1:-1});break;case"label-asc":T.sort(function(P,R){return P.label.toLowerCase()>R.label.toLowerCase()?1:-1});break;case"label-desc":T.sort(function(P,R){return P.label.toLowerCase()<R.label.toLowerCase()?1:-1});break}return T},getPieTranslateCenter:function(v){return"translate("+v.x+","+v.y+")"},calculatePieCenter:function(v){var T=v.options.misc.pieCenterOffset,S=v.textComponents.title.exists&&v.options.header.location!=="pie-center",P=v.textComponents.subtitle.exists&&v.options.header.location!=="pie-center",R=v.options.misc.canvasPadding.top;S&&P?R+=v.textComponents.title.h+v.options.header.titleSubtitlePadding+v.textComponents.subtitle.h:S?R+=v.textComponents.title.h:P&&(R+=v.textComponents.subtitle.h);var O=0;v.textComponents.footer.exists&&(O=v.textComponents.footer.h+v.options.misc.canvasPadding.bottom);var V=(v.options.size.canvasWidth-v.options.misc.canvasPadding.left-v.options.misc.canvasPadding.right)/2+v.options.misc.canvasPadding.left,q=(v.options.size.canvasHeight-O-R)/2+R;V+=T.x,q+=T.y,v.pieCenter={x:V,y:q}},rotate:function(v,T,S,P,R){R=R*Math.PI/180;var O=Math.cos,V=Math.sin,q=(v-S)*O(R)-(T-P)*V(R)+S,et=(v-S)*V(R)+(T-P)*O(R)+P;return{x:q,y:et}},translate:function(v,T,S,P){var R=g.toRadians(P);return{x:v+S*Math.sin(R),y:T-S*Math.cos(R)}},pointIsInArc:function(v,T,S){var P=S.innerRadius()(T),R=S.outerRadius()(T),O=S.startAngle()(T),V=S.endAngle()(T),q=v.x*v.x+v.y*v.y,et=Math.atan2(v.x,-v.y);return et=et<0?et+Math.PI*2:et,P*P<=q&&q<=R*R&&O<=et&&et<=V}},_={add:function(v,T,S){var P=_.getIncludes(S),R=v.options.labels,O=v.svg.insert("g","."+v.cssPrefix+"labels-"+T).attr("class",v.cssPrefix+"labels-"+T),V=O.selectAll("."+v.cssPrefix+"labelGroup-"+T).data(v.options.data.content).enter().append("g").attr("id",function(et,nt){return v.cssPrefix+"labelGroup"+nt+"-"+T}).attr("data-index",function(et,nt){return nt}).attr("class",v.cssPrefix+"labelGroup-"+T).style("opacity",0),q={section:T,sectionDisplayType:S};P.mainLabel&&V.append("text").attr("id",function(et,nt){return v.cssPrefix+"segmentMainLabel"+nt+"-"+T}).attr("class",v.cssPrefix+"segmentMainLabel-"+T).text(function(et,nt){var lt=et.label;return R.formatter?(q.index=nt,q.part="mainLabel",q.value=et.value,q.label=lt,lt=R.formatter(q)):R.truncation.enabled&&et.label.length>R.truncation.truncateLength&&(lt=et.label.substring(0,R.truncation.truncateLength)+"..."),lt}).style("font-size",R.mainLabel.fontSize+"px").style("font-family",R.mainLabel.font).style("fill",R.mainLabel.color),P.percentage&&V.append("text").attr("id",function(et,nt){return v.cssPrefix+"segmentPercentage"+nt+"-"+T}).attr("class",v.cssPrefix+"segmentPercentage-"+T).text(function(et,nt){var lt=b.getPercentage(v,nt,v.options.labels.percentage.decimalPlaces);return R.formatter?(q.index=nt,q.part="percentage",q.value=et.value,q.label=lt,lt=R.formatter(q)):lt+="%",lt}).style("font-size",R.percentage.fontSize+"px").style("font-family",R.percentage.font).style("fill",R.percentage.color),P.value&&V.append("text").attr("id",function(et,nt){return v.cssPrefix+"segmentValue"+nt+"-"+T}).attr("class",v.cssPrefix+"segmentValue-"+T).text(function(et,nt){return q.index=nt,q.part="value",q.value=et.value,q.label=et.value,R.formatter?R.formatter(q,et.value):et.value}).style("font-size",R.value.fontSize+"px").style("font-family",R.value.font).style("fill",R.value.color)},positionLabelElements:function(v,T,S){_["dimensions-"+T]=[];var P=d3.selectAll("."+v.cssPrefix+"labelGroup-"+T);P.each(function(V,q){var et=d3.select(this).selectAll("."+v.cssPrefix+"segmentMainLabel-"+T),nt=d3.select(this).selectAll("."+v.cssPrefix+"segmentPercentage-"+T),lt=d3.select(this).selectAll("."+v.cssPrefix+"segmentValue-"+T);_["dimensions-"+T].push({mainLabel:et.node()!==null?et.node().getBBox():null,percentage:nt.node()!==null?nt.node().getBBox():null,value:lt.node()!==null?lt.node().getBBox():null})});var R=5,O=_["dimensions-"+T];switch(S){case"label-value1":d3.selectAll("."+v.cssPrefix+"segmentValue-"+T).attr("dx",function(V,q){return O[q].mainLabel.width+R});break;case"label-value2":d3.selectAll("."+v.cssPrefix+"segmentValue-"+T).attr("dy",function(V,q){return O[q].mainLabel.height});break;case"label-percentage1":d3.selectAll("."+v.cssPrefix+"segmentPercentage-"+T).attr("dx",function(V,q){return O[q].mainLabel.width+R});break;case"label-percentage2":d3.selectAll("."+v.cssPrefix+"segmentPercentage-"+T).attr("dx",function(V,q){return O[q].mainLabel.width/2-O[q].percentage.width/2}).attr("dy",function(V,q){return O[q].mainLabel.height});break}},computeLabelLinePositions:function(v){v.lineCoordGroups=[],d3.selectAll("."+v.cssPrefix+"labelGroup-outer").each(function(T,S){return _.computeLinePosition(v,S)})},computeLinePosition:function(v,T){var S=b.getSegmentAngle(T,v.options.data.content,v.totalSize,{midpoint:!0}),P=g.rotate(v.pieCenter.x,v.pieCenter.y-v.outerRadius,v.pieCenter.x,v.pieCenter.y,S),R=v.outerLabelGroupData[T].h/5,O=6,V=Math.floor(S/90),q=4,et,nt,lt,it;switch(V===2&&S===180&&(V=1),V){case 0:et=v.outerLabelGroupData[T].x-O-(v.outerLabelGroupData[T].x-O-P.x)/2,nt=v.outerLabelGroupData[T].y+(P.y-v.outerLabelGroupData[T].y)/q,lt=v.outerLabelGroupData[T].x-O,it=v.outerLabelGroupData[T].y-R;break;case 1:et=P.x+(v.outerLabelGroupData[T].x-P.x)/q,nt=P.y+(v.outerLabelGroupData[T].y-P.y)/q,lt=v.outerLabelGroupData[T].x-O,it=v.outerLabelGroupData[T].y-R;break;case 2:var F=v.outerLabelGroupData[T].x+v.outerLabelGroupData[T].w+O;et=P.x-(P.x-F)/q,nt=P.y+(v.outerLabelGroupData[T].y-P.y)/q,lt=v.outerLabelGroupData[T].x+v.outerLabelGroupData[T].w+O,it=v.outerLabelGroupData[T].y-R;break;case 3:var ct=v.outerLabelGroupData[T].x+v.outerLabelGroupData[T].w+O;et=ct+(P.x-ct)/q,nt=v.outerLabelGroupData[T].y+(P.y-v.outerLabelGroupData[T].y)/q,lt=v.outerLabelGroupData[T].x+v.outerLabelGroupData[T].w+O,it=v.outerLabelGroupData[T].y-R;break}v.options.labels.lines.style==="straight"?v.lineCoordGroups[T]=[{x:P.x,y:P.y},{x:lt,y:it}]:v.lineCoordGroups[T]=[{x:P.x,y:P.y},{x:et,y:nt},{x:lt,y:it}]},addLabelLines:function(v){var T=v.svg.insert("g","."+v.cssPrefix+"pieChart").attr("class",v.cssPrefix+"lineGroups").style("opacity",0),S=T.selectAll("."+v.cssPrefix+"lineGroup").data(v.lineCoordGroups).enter().append("g").attr("class",v.cssPrefix+"lineGroup"),P=d3.svg.line().interpolate("basis").x(function(R){return R.x}).y(function(R){return R.y});S.append("path").attr("d",P).attr("stroke",function(R,O){return v.options.labels.lines.color==="segment"?v.options.colors[O]:v.options.labels.lines.color}).attr("stroke-width",1).attr("fill","none").style("opacity",function(R,O){var V=v.options.labels.outer.hideWhenLessThanPercentage,q=b.getPercentage(v,O,v.options.labels.percentage.decimalPlaces),et=V!==null&&q<V||v.options.data.content[O].label==="";return et?0:1})},positionLabelGroups:function(v,T){v.options.labels[T].format!=="none"&&d3.selectAll("."+v.cssPrefix+"labelGroup-"+T).style("opacity",0).attr("transform",function(S,P){var R,O;if(T==="outer")R=v.outerLabelGroupData[P].x,O=v.outerLabelGroupData[P].y;else{var V=d(!0,{},v.pieCenter);if(v.innerRadius>0){var q=b.getSegmentAngle(P,v.options.data.content,v.totalSize,{midpoint:!0}),et=g.translate(v.pieCenter.x,v.pieCenter.y,v.innerRadius,q);V.x=et.x,V.y=et.y}var nt=l.getDimensions(v.cssPrefix+"labelGroup"+P+"-inner"),lt=nt.w/2,it=nt.h/4;R=V.x+(v.lineCoordGroups[P][0].x-V.x)/1.8,O=V.y+(v.lineCoordGroups[P][0].y-V.y)/1.8,R=R-lt,O=O+it}return"translate("+R+","+O+")"})},fadeInLabelsAndLines:function(v){var T=v.options.effects.load.effect==="default"?v.options.effects.load.speed:1;setTimeout(function(){var S=v.options.effects.load.effect==="default"?400:1;d3.selectAll("."+v.cssPrefix+"labelGroup-outer").transition().duration(S).style("opacity",function(P,R){var O=v.options.labels.outer.hideWhenLessThanPercentage,V=b.getPercentage(v,R,v.options.labels.percentage.decimalPlaces);return O!==null&&V<O?0:1}),d3.selectAll("."+v.cssPrefix+"labelGroup-inner").transition().duration(S).style("opacity",function(P,R){var O=v.options.labels.inner.hideWhenLessThanPercentage,V=b.getPercentage(v,R,v.options.labels.percentage.decimalPlaces);return O!==null&&V<O?0:1}),d3.selectAll("g."+v.cssPrefix+"lineGroups").transition().duration(S).style("opacity",1),l.isFunction(v.options.callbacks.onload)&&setTimeout(function(){try{v.options.callbacks.onload()}catch(P){}},S)},T)},getIncludes:function(v){var T=!1,S=!1,P=!1;switch(v){case"label":T=!0;break;case"value":S=!0;break;case"percentage":P=!0;break;case"label-value1":case"label-value2":T=!0,S=!0;break;case"label-percentage1":case"label-percentage2":T=!0,P=!0;break}return{mainLabel:T,value:S,percentage:P}},computeOuterLabelCoords:function(v){v.svg.selectAll("."+v.cssPrefix+"labelGroup-outer").each(function(T,S){return _.getIdealOuterLabelPositions(v,S)}),_.resolveOuterLabelCollisions(v)},resolveOuterLabelCollisions:function(v){if(v.options.labels.outer.format!=="none"){var T=v.options.data.content.length;_.checkConflict(v,0,"clockwise",T),_.checkConflict(v,T-1,"anticlockwise",T)}},checkConflict:function(v,T,S,P){var R,O;if(!(P<=1)){var V=v.outerLabelGroupData[T].hs;if(!(S==="clockwise"&&V!=="right")&&!(S==="anticlockwise"&&V!=="left")){var q=S==="clockwise"?T+1:T-1,et=v.outerLabelGroupData[T],nt=v.outerLabelGroupData[q],lt={labelHeights:v.outerLabelGroupData[0].h,center:v.pieCenter,lineLength:v.outerRadius+v.options.labels.outer.pieDistance,heightChange:v.outerLabelGroupData[0].h+1};if(S==="clockwise"){for(R=0;R<=T;R++)if(O=v.outerLabelGroupData[R],l.rectIntersect(O,nt)){_.adjustLabelPos(v,q,et,lt);break}}else for(R=P-1;R>=T;R--)if(O=v.outerLabelGroupData[R],l.rectIntersect(O,nt)){_.adjustLabelPos(v,q,et,lt);break}_.checkConflict(v,q,S,P)}}},adjustLabelPos:function(v,T,S,P){var R,O,V,q;q=S.y+P.heightChange,O=P.center.y-q,Math.abs(P.lineLength)>Math.abs(O)?R=Math.sqrt(P.lineLength*P.lineLength-O*O):R=Math.sqrt(O*O-P.lineLength*P.lineLength),S.hs==="right"?V=P.center.x+R:V=P.center.x-R-v.outerLabelGroupData[T].w,v.outerLabelGroupData[T].x=V,v.outerLabelGroupData[T].y=q},getIdealOuterLabelPositions:function(v,T){var S=d3.select("#"+v.cssPrefix+"labelGroup"+T+"-outer").node();if(S){var P=S.getBBox(),R=b.getSegmentAngle(T,v.options.data.content,v.totalSize,{midpoint:!0}),O=v.pieCenter.x,V=v.pieCenter.y-(v.outerRadius+v.options.labels.outer.pieDistance),q=g.rotate(O,V,v.pieCenter.x,v.pieCenter.y,R),et="right";R>180?(q.x-=P.width+8,et="left"):q.x+=8,v.outerLabelGroupData[T]={x:q.x,y:q.y,w:P.width,h:P.height,hs:et}}}},b={create:function(v){var T=v.pieCenter,S=v.options.colors,P=v.options.effects.load,R=v.options.misc.colors.segmentStroke,O=v.svg.insert("g","#"+v.cssPrefix+"title").attr("transform",function(){return g.getPieTranslateCenter(T)}).attr("class",v.cssPrefix+"pieChart"),V=d3.svg.arc().innerRadius(v.innerRadius).outerRadius(v.outerRadius).startAngle(0).endAngle(function(nt){return nt.value/v.totalSize*2*Math.PI}),q=O.selectAll("."+v.cssPrefix+"arc").data(v.options.data.content).enter().append("g").attr("class",v.cssPrefix+"arc"),et=P.speed;P.effect==="none"&&(et=0),q.append("path").attr("id",function(nt,lt){return v.cssPrefix+"segment"+lt}).attr("fill",function(nt,lt){var it=S[lt];return v.options.misc.gradient.enabled&&(it="url(#"+v.cssPrefix+"grad"+lt+")"),it}).style("stroke",R).style("stroke-width",1).transition().ease("cubic-in-out").duration(et).attr("data-index",function(nt,lt){return lt}).attrTween("d",function(nt){var lt=d3.interpolate({value:0},nt);return function(it){return v.arc(lt(it))}}),v.svg.selectAll("g."+v.cssPrefix+"arc").attr("transform",function(nt,lt){var it=0;return lt>0&&(it=b.getSegmentAngle(lt-1,v.options.data.content,v.totalSize)),"rotate("+it+")"}),v.arc=V},addGradients:function(v){var T=v.svg.append("defs").selectAll("radialGradient").data(v.options.data.content).enter().append("radialGradient").attr("gradientUnits","userSpaceOnUse").attr("cx",0).attr("cy",0).attr("r","120%").attr("id",function(S,P){return v.cssPrefix+"grad"+P});T.append("stop").attr("offset","0%").style("stop-color",function(S,P){return v.options.colors[P]}),T.append("stop").attr("offset",v.options.misc.gradient.percentage+"%").style("stop-color",v.options.misc.gradient.color)},addSegmentEventHandlers:function(v){var T=d3.selectAll("."+v.cssPrefix+"arc,."+v.cssPrefix+"labelGroup-inner,."+v.cssPrefix+"labelGroup-outer");T.on("click",function(){var S=d3.select(this),P;if(S.attr("class")===v.cssPrefix+"arc")P=S.select("path");else{var R=S.attr("data-index");P=d3.select("#"+v.cssPrefix+"segment"+R)}var O=P.attr("class")===v.cssPrefix+"expanded";b.onSegmentEvent(v,v.options.callbacks.onClickSegment,P,O),v.options.effects.pullOutSegmentOnClick.effect!=="none"&&(O?b.closeSegment(v,P.node()):b.openSegment(v,P.node()))}),T.on("mouseover",function(){var S=d3.select(this),P,R;if(S.attr("class")===v.cssPrefix+"arc"?P=S.select("path"):(R=S.attr("data-index"),P=d3.select("#"+v.cssPrefix+"segment"+R)),v.options.effects.highlightSegmentOnMouseover){R=P.attr("data-index");var O=v.options.colors[R];P.style("fill",l.getColorShade(O,v.options.effects.highlightLuminosity))}v.options.tooltips.enabled&&(R=P.attr("data-index"),w.showTooltip(v,R));var V=P.attr("class")===v.cssPrefix+"expanded";b.onSegmentEvent(v,v.options.callbacks.onMouseoverSegment,P,V)}),T.on("mousemove",function(){w.moveTooltip(v)}),T.on("mouseout",function(){var S=d3.select(this),P,R;if(S.attr("class")===v.cssPrefix+"arc"?P=S.select("path"):(R=S.attr("data-index"),P=d3.select("#"+v.cssPrefix+"segment"+R)),v.options.effects.highlightSegmentOnMouseover){R=P.attr("data-index");var O=v.options.colors[R];v.options.misc.gradient.enabled&&(O="url(#"+v.cssPrefix+"grad"+R+")"),P.style("fill",O)}v.options.tooltips.enabled&&(R=P.attr("data-index"),w.hideTooltip(v,R));var V=P.attr("class")===v.cssPrefix+"expanded";b.onSegmentEvent(v,v.options.callbacks.onMouseoutSegment,P,V)})},onSegmentEvent:function(v,T,S,P){if(l.isFunction(T)){var R=parseInt(S.attr("data-index"),10);T({segment:S.node(),index:R,expanded:P,data:v.options.data.content[R]})}},openSegment:function(v,T){v.isOpeningSegment||(v.isOpeningSegment=!0,d3.selectAll("."+v.cssPrefix+"expanded").length>0&&b.closeSegment(v,d3.select("."+v.cssPrefix+"expanded").node()),d3.select(T).transition().ease(v.options.effects.pullOutSegmentOnClick.effect).duration(v.options.effects.pullOutSegmentOnClick.speed).attr("transform",function(S,P){var R=v.arc.centroid(S),O=R[0],V=R[1],q=Math.sqrt(O*O+V*V),et=parseInt(v.options.effects.pullOutSegmentOnClick.size,10);return"translate("+O/q*et+","+V/q*et+")"}).each("end",function(S,P){v.currentlyOpenSegment=T,v.isOpeningSegment=!1,d3.select(this).attr("class",v.cssPrefix+"expanded")}))},closeSegment:function(v,T){d3.select(T).transition().duration(400).attr("transform","translate(0,0)").each("end",function(S,P){d3.select(this).attr("class",""),v.currentlyOpenSegment=null})},getCentroid:function(v){var T=v.getBBox();return{x:T.x+T.width/2,y:T.y+T.height/2}},getSegmentAngle:function(v,T,S,P){var R=d({compounded:!0,midpoint:!1},P),O=T[v].value,V;if(R.compounded){V=0;for(var q=0;q<=v;q++)V+=T[q].value}typeof V=="undefined"&&(V=O);var et=V/S*360;if(R.midpoint){var nt=O/S*360;et-=nt/2}return et},getPercentage:function(v,T,S){var P=v.options.data.content[T].value/v.totalSize;return S<=0?Math.round(P*100):(P*100).toFixed(S)}},$={offscreenCoord:-1e4,addTitle:function(v){v.svg.selectAll("."+v.cssPrefix+"title").data([v.options.header.title]).enter().append("text").text(function(T){return T.text}).attr({id:v.cssPrefix+"title",class:v.cssPrefix+"title",x:$.offscreenCoord,y:$.offscreenCoord}).attr("text-anchor",function(){var T;return v.options.header.location==="top-center"||v.options.header.location==="pie-center"?T="middle":T="left",T}).attr("fill",function(T){return T.color}).style("font-size",function(T){return T.fontSize+"px"}).style("font-family",function(T){return T.font})},positionTitle:function(v){var T=v.textComponents,S=v.options.header.location,P=v.options.misc.canvasPadding,R=v.options.size.canvasWidth,O=v.options.header.titleSubtitlePadding,V;S==="top-left"?V=P.left:V=(R-P.right)/2+P.left,V+=v.options.misc.pieCenterOffset.x;var q=P.top+T.title.h;if(S==="pie-center")if(q=v.pieCenter.y,T.subtitle.exists){var et=T.title.h+O+T.subtitle.h;q=q-et/2+T.title.h}else q+=T.title.h/4;v.svg.select("#"+v.cssPrefix+"title").attr("x",V).attr("y",q)},addSubtitle:function(v){var T=v.options.header.location;v.svg.selectAll("."+v.cssPrefix+"subtitle").data([v.options.header.subtitle]).enter().append("text").text(function(S){return S.text}).attr("x",$.offscreenCoord).attr("y",$.offscreenCoord).attr("id",v.cssPrefix+"subtitle").attr("class",v.cssPrefix+"subtitle").attr("text-anchor",function(){var S;return T==="top-center"||T==="pie-center"?S="middle":S="left",S}).attr("fill",function(S){return S.color}).style("font-size",function(S){return S.fontSize+"px"}).style("font-family",function(S){return S.font})},positionSubtitle:function(v){var T=v.options.misc.canvasPadding,S=v.options.size.canvasWidth,P;v.options.header.location==="top-left"?P=T.left:P=(S-T.right)/2+T.left,P+=v.options.misc.pieCenterOffset.x;var R=$.getHeaderHeight(v);v.svg.select("#"+v.cssPrefix+"subtitle").attr("x",P).attr("y",R)},addFooter:function(v){v.svg.selectAll("."+v.cssPrefix+"footer").data([v.options.footer]).enter().append("text").text(function(T){return T.text}).attr("x",$.offscreenCoord).attr("y",$.offscreenCoord).attr("id",v.cssPrefix+"footer").attr("class",v.cssPrefix+"footer").attr("text-anchor",function(){var T="left";return v.options.footer.location==="bottom-center"?T="middle":v.options.footer.location==="bottom-right"&&(T="left"),T}).attr("fill",function(T){return T.color}).style("font-size",function(T){return T.fontSize+"px"}).style("font-family",function(T){return T.font})},positionFooter:function(v){var T=v.options.footer.location,S=v.textComponents.footer.w,P=v.options.size.canvasWidth,R=v.options.size.canvasHeight,O=v.options.misc.canvasPadding,V;T==="bottom-left"?V=O.left:T==="bottom-right"?V=P-S-O.right:V=P/2,v.svg.select("#"+v.cssPrefix+"footer").attr("x",V).attr("y",R-O.bottom)},getHeaderHeight:function(v){var T;if(v.textComponents.title.exists){var S=v.textComponents.title.h+v.options.header.titleSubtitlePadding+v.textComponents.subtitle.h;v.options.header.location==="pie-center"?T=v.pieCenter.y-S/2+S:T=S+v.options.misc.canvasPadding.top}else if(v.options.header.location==="pie-center"){var P=v.options.misc.canvasPadding.bottom+v.textComponents.footer.h;T=(v.options.size.canvasHeight-P)/2+v.options.misc.canvasPadding.top+v.textComponents.subtitle.h/2}else T=v.options.misc.canvasPadding.top+v.textComponents.subtitle.h;return T}},w={addTooltips:function(v){var T=v.svg.insert("g").attr("class",v.cssPrefix+"tooltips");T.selectAll("."+v.cssPrefix+"tooltip").data(v.options.data.content).enter().append("g").attr("class",v.cssPrefix+"tooltip").attr("id",function(S,P){return v.cssPrefix+"tooltip"+P}).style("opacity",0).append("rect").attr({rx:v.options.tooltips.styles.borderRadius,ry:v.options.tooltips.styles.borderRadius,x:-v.options.tooltips.styles.padding,opacity:v.options.tooltips.styles.backgroundOpacity}).style("fill",v.options.tooltips.styles.backgroundColor),T.selectAll("."+v.cssPrefix+"tooltip").data(v.options.data.content).append("text").attr("fill",function(S){return v.options.tooltips.styles.color}).style("font-size",function(S){return v.options.tooltips.styles.fontSize}).style("font-family",function(S){return v.options.tooltips.styles.font}).text(function(S,P){var R=v.options.tooltips.string;return v.options.tooltips.type==="caption"&&(R=S.caption),w.replacePlaceholders(v,R,P,{label:S.label,value:S.value,percentage:b.getPercentage(v,P,v.options.labels.percentage.decimalPlaces)})}),T.selectAll("."+v.cssPrefix+"tooltip rect").attr({width:function(S,P){var R=l.getDimensions(v.cssPrefix+"tooltip"+P);return R.w+2*v.options.tooltips.styles.padding},height:function(S,P){var R=l.getDimensions(v.cssPrefix+"tooltip"+P);return R.h+2*v.options.tooltips.styles.padding},y:function(S,P){var R=l.getDimensions(v.cssPrefix+"tooltip"+P);return-(R.h/2)+1}})},showTooltip:function(v,T){var S=v.options.tooltips.styles.fadeInSpeed;w.currentTooltip===T&&(S=1),w.currentTooltip=T,d3.select("#"+v.cssPrefix+"tooltip"+T).transition().duration(S).style("opacity",function(){return 1}),w.moveTooltip(v)},moveTooltip:function(v){d3.selectAll("#"+v.cssPrefix+"tooltip"+w.currentTooltip).attr("transform",function(T){var S=d3.mouse(this.parentNode),P=S[0]+v.options.tooltips.styles.padding+2,R=S[1]-2*v.options.tooltips.styles.padding-2;return"translate("+P+","+R+")"})},hideTooltip:function(v,T){d3.select("#"+v.cssPrefix+"tooltip"+T).style("opacity",function(){return 0}),d3.select("#"+v.cssPrefix+"tooltip"+w.currentTooltip).attr("transform",function(S,P){var R=v.options.size.canvasWidth+1e3,O=v.options.size.canvasHeight+1e3;return"translate("+R+","+O+")"})},replacePlaceholders:function(v,T,S,P){l.isFunction(v.options.tooltips.placeholderParser)&&v.options.tooltips.placeholderParser(S,P);var R=function(){return function(O){var V=arguments[1];return P.hasOwnProperty(V)?P[arguments[1]]:arguments[0]}};return T.replace(/\{(\w+)\}/g,R())}},p=function(v,T){if(this.element=v,typeof v=="string"){var S=v.replace(/^#/,"");this.element=document.getElementById(S)}var P={};d(!0,P,i,T),this.options=P,this.options.misc.cssPrefix!==null?this.cssPrefix=this.options.misc.cssPrefix:(this.cssPrefix="p"+n+"_",n++),u.initialCheck(this)&&(d3.select(this.element).attr(t,e),this.options.data.content=g.sortPieData(this),this.options.data.smallSegmentGrouping.enabled&&(this.options.data.content=l.applySmallSegmentGrouping(this.options.data.content,this.options.data.smallSegmentGrouping)),this.options.colors=l.initSegmentColors(this),this.totalSize=g.getTotalPieSize(this.options.data.content),I.call(this))};p.prototype.recreate=function(){u.initialCheck(this)&&(this.options.data.content=g.sortPieData(this),this.options.data.smallSegmentGrouping.enabled&&(this.options.data.content=l.applySmallSegmentGrouping(this.options.data.content,this.options.data.smallSegmentGrouping)),this.options.colors=l.initSegmentColors(this),this.totalSize=g.getTotalPieSize(this.options.data.content),I.call(this))},p.prototype.redraw=function(){this.element.innerHTML="",I.call(this)},p.prototype.destroy=function(){this.element.innerHTML="",d3.select(this.element).attr(t,null)},p.prototype.getOpenSegment=function(){var v=this.currentlyOpenSegment;if(v!==null&&typeof v!="undefined"){var T=parseInt(d3.select(v).attr("data-index"),10);return{element:v,index:T,data:this.options.data.content[T]}}else return null},p.prototype.openSegment=function(v){v=parseInt(v,10),!(v<0||v>this.options.data.content.length-1)&&b.openSegment(this,d3.select("#"+this.cssPrefix+"segment"+v).node())},p.prototype.closeSegment=function(){var v=this.currentlyOpenSegment;v&&b.closeSegment(this,v)},p.prototype.updateProp=function(v,T){switch(v){case"header.title.text":var S=l.processObj(this.options,v);l.processObj(this.options,v,T),d3.select("#"+this.cssPrefix+"title").html(T),(S===""&&T!==""||S!==""&&T==="")&&this.redraw();break;case"header.subtitle.text":var P=l.processObj(this.options,v);l.processObj(this.options,v,T),d3.select("#"+this.cssPrefix+"subtitle").html(T),(P===""&&T!==""||P!==""&&T==="")&&this.redraw();break;case"callbacks.onload":case"callbacks.onMouseoverSegment":case"callbacks.onMouseoutSegment":case"callbacks.onClickSegment":case"effects.pullOutSegmentOnClick.effect":case"effects.pullOutSegmentOnClick.speed":case"effects.pullOutSegmentOnClick.size":case"effects.highlightSegmentOnMouseover":case"effects.highlightLuminosity":l.processObj(this.options,v,T);break;default:l.processObj(this.options,v,T),this.destroy(),this.recreate();break}};var I=function(){this.svg=l.addSVGSpace(this),this.textComponents={headerHeight:0,title:{exists:this.options.header.title.text!=="",h:0,w:0},subtitle:{exists:this.options.header.subtitle.text!=="",h:0,w:0},footer:{exists:this.options.footer.text!=="",h:0,w:0}},this.outerLabelGroupData=[],this.textComponents.title.exists&&$.addTitle(this),this.textComponents.subtitle.exists&&$.addSubtitle(this),$.addFooter(this);var v=this;l.whenIdExists(this.cssPrefix+"footer",function(){$.positionFooter(v);var S=l.getDimensions(v.cssPrefix+"footer");v.textComponents.footer.h=S.h,v.textComponents.footer.w=S.w});var T=[];this.textComponents.title.exists&&T.push(this.cssPrefix+"title"),this.textComponents.subtitle.exists&&T.push(this.cssPrefix+"subtitle"),this.textComponents.footer.exists&&T.push(this.cssPrefix+"footer"),l.whenElementsExist(T,function(){if(v.textComponents.title.exists){var S=l.getDimensions(v.cssPrefix+"title");v.textComponents.title.h=S.h,v.textComponents.title.w=S.w}if(v.textComponents.subtitle.exists){var P=l.getDimensions(v.cssPrefix+"subtitle");v.textComponents.subtitle.h=P.h,v.textComponents.subtitle.w=P.w}if(v.textComponents.title.exists||v.textComponents.subtitle.exists){var R=0;v.textComponents.title.exists&&(R+=v.textComponents.title.h,v.textComponents.subtitle.exists&&(R+=v.options.header.titleSubtitlePadding)),v.textComponents.subtitle.exists&&(R+=v.textComponents.subtitle.h),v.textComponents.headerHeight=R}g.computePieRadius(v),g.calculatePieCenter(v),$.positionTitle(v),$.positionSubtitle(v),v.options.misc.gradient.enabled&&b.addGradients(v),b.create(v),_.add(v,"inner",v.options.labels.inner.format),_.add(v,"outer",v.options.labels.outer.format),_.positionLabelElements(v,"inner",v.options.labels.inner.format),_.positionLabelElements(v,"outer",v.options.labels.outer.format),_.computeOuterLabelCoords(v),_.positionLabelGroups(v,"outer"),_.computeLabelLinePositions(v),v.options.labels.lines.enabled&&v.options.labels.outer.format!=="none"&&_.addLabelLines(v),_.positionLabelGroups(v,"inner"),_.fadeInLabelsAndLines(v),v.options.tooltips.enabled&&w.addTooltips(v),b.addSegmentEventHandlers(v)})};return p});(function(t){t.fn.qrcode=function(e){var n;function i(w){this.mode=n,this.data=w}function u(w,p){this.typeNumber=w,this.errorCorrectLevel=p,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function l(w,p){if(w.length==null)throw Error(w.length+"/"+p);for(var I=0;I<w.length&&w[I]==0;)I++;this.num=Array(w.length-I+p);for(var v=0;v<w.length-I;v++)this.num[v]=w[v+I]}function d(w,p){this.totalCount=w,this.dataCount=p}function g(){this.buffer=[],this.length=0}i.prototype={getLength:function(){return this.data.length},write:function(w){for(var p=0;p<this.data.length;p++)w.put(this.data.charCodeAt(p),8)}},u.prototype={addData:function(w){this.dataList.push(new i(w)),this.dataCache=null},isDark:function(w,p){if(0>w||this.moduleCount<=w||0>p||this.moduleCount<=p)throw Error(w+","+p);return this.modules[w][p]},getModuleCount:function(){return this.moduleCount},make:function(){if(1>this.typeNumber){for(var w=1,w=1;40>w;w++){for(var p=d.getRSBlocks(w,this.errorCorrectLevel),I=new g,v=0,T=0;T<p.length;T++)v+=p[T].dataCount;for(T=0;T<this.dataList.length;T++)p=this.dataList[T],I.put(p.mode,4),I.put(p.getLength(),_.getLengthInBits(p.mode,w)),p.write(I);if(I.getLengthInBits()<=8*v)break}this.typeNumber=w}this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(w,p){this.moduleCount=4*this.typeNumber+17,this.modules=Array(this.moduleCount);for(var I=0;I<this.moduleCount;I++){this.modules[I]=Array(this.moduleCount);for(var v=0;v<this.moduleCount;v++)this.modules[I][v]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(w,p),7<=this.typeNumber&&this.setupTypeNumber(w),this.dataCache==null&&(this.dataCache=u.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,p)},setupPositionProbePattern:function(w,p){for(var I=-1;7>=I;I++)if(!(-1>=w+I||this.moduleCount<=w+I))for(var v=-1;7>=v;v++)-1>=p+v||this.moduleCount<=p+v||(this.modules[w+I][p+v]=0<=I&&6>=I&&(v==0||v==6)||0<=v&&6>=v&&(I==0||I==6)||2<=I&&4>=I&&2<=v&&4>=v)},getBestMaskPattern:function(){for(var w=0,p=0,I=0;8>I;I++){this.makeImpl(!0,I);var v=_.getLostPoint(this);(I==0||w>v)&&(w=v,p=I)}return p},createMovieClip:function(w,p,I){for(w=w.createEmptyMovieClip(p,I),this.make(),p=0;p<this.modules.length;p++)for(var I=1*p,v=0;v<this.modules[p].length;v++){var T=1*v;this.modules[p][v]&&(w.beginFill(0,100),w.moveTo(T,I),w.lineTo(T+1,I),w.lineTo(T+1,I+1),w.lineTo(T,I+1),w.endFill())}return w},setupTimingPattern:function(){for(var w=8;w<this.moduleCount-8;w++)this.modules[w][6]==null&&(this.modules[w][6]=w%2==0);for(w=8;w<this.moduleCount-8;w++)this.modules[6][w]==null&&(this.modules[6][w]=w%2==0)},setupPositionAdjustPattern:function(){for(var w=_.getPatternPosition(this.typeNumber),p=0;p<w.length;p++)for(var I=0;I<w.length;I++){var v=w[p],T=w[I];if(this.modules[v][T]==null)for(var S=-2;2>=S;S++)for(var P=-2;2>=P;P++)this.modules[v+S][T+P]=S==-2||S==2||P==-2||P==2||S==0&&P==0}},setupTypeNumber:function(w){for(var p=_.getBCHTypeNumber(this.typeNumber),I=0;18>I;I++){var v=!w&&(p>>I&1)==1;this.modules[Math.floor(I/3)][I%3+this.moduleCount-8-3]=v}for(I=0;18>I;I++)v=!w&&(p>>I&1)==1,this.modules[I%3+this.moduleCount-8-3][Math.floor(I/3)]=v},setupTypeInfo:function(w,p){for(var I=_.getBCHTypeInfo(this.errorCorrectLevel<<3|p),v=0;15>v;v++){var T=!w&&(I>>v&1)==1;6>v?this.modules[v][8]=T:8>v?this.modules[v+1][8]=T:this.modules[this.moduleCount-15+v][8]=T}for(v=0;15>v;v++)T=!w&&(I>>v&1)==1,8>v?this.modules[8][this.moduleCount-v-1]=T:9>v?this.modules[8][15-v-1+1]=T:this.modules[8][15-v-1]=T;this.modules[this.moduleCount-8][8]=!w},mapData:function(w,p){for(var I=-1,v=this.moduleCount-1,T=7,S=0,P=this.moduleCount-1;0<P;P-=2)for(P==6&&P--;;){for(var R=0;2>R;R++)if(this.modules[v][P-R]==null){var O=!1;S<w.length&&(O=(w[S]>>>T&1)==1),_.getMask(p,v,P-R)&&(O=!O),this.modules[v][P-R]=O,T--,T==-1&&(S++,T=7)}if(v+=I,0>v||this.moduleCount<=v){v-=I,I=-I;break}}}},u.PAD0=236,u.PAD1=17,u.createData=function(w,p,I){for(var p=d.getRSBlocks(w,p),v=new g,T=0;T<I.length;T++){var S=I[T];v.put(S.mode,4),v.put(S.getLength(),_.getLengthInBits(S.mode,w)),S.write(v)}for(T=w=0;T<p.length;T++)w+=p[T].dataCount;if(v.getLengthInBits()>8*w)throw Error("code length overflow. ("+v.getLengthInBits()+">"+8*w+")");for(v.getLengthInBits()+4<=8*w&&v.put(0,4);v.getLengthInBits()%8!=0;)v.putBit(!1);for(;!(v.getLengthInBits()>=8*w)&&(v.put(u.PAD0,8),!(v.getLengthInBits()>=8*w));)v.put(u.PAD1,8);return u.createBytes(v,p)},u.createBytes=function(w,p){for(var I=0,v=0,T=0,S=Array(p.length),P=Array(p.length),R=0;R<p.length;R++){var O=p[R].dataCount,V=p[R].totalCount-O,v=Math.max(v,O),T=Math.max(T,V);S[R]=Array(O);for(var q=0;q<S[R].length;q++)S[R][q]=255&w.buffer[q+I];for(I+=O,q=_.getErrorCorrectPolynomial(V),O=new l(S[R],q.getLength()-1).mod(q),P[R]=Array(q.getLength()-1),q=0;q<P[R].length;q++)V=q+O.getLength()-P[R].length,P[R][q]=0<=V?O.get(V):0}for(q=R=0;q<p.length;q++)R+=p[q].totalCount;for(I=Array(R),q=O=0;q<v;q++)for(R=0;R<p.length;R++)q<S[R].length&&(I[O++]=S[R][q]);for(q=0;q<T;q++)for(R=0;R<p.length;R++)q<P[R].length&&(I[O++]=P[R][q]);return I},n=4;for(var _={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(w){for(var p=w<<10;0<=_.getBCHDigit(p)-_.getBCHDigit(_.G15);)p^=_.G15<<_.getBCHDigit(p)-_.getBCHDigit(_.G15);return(w<<10|p)^_.G15_MASK},getBCHTypeNumber:function(w){for(var p=w<<12;0<=_.getBCHDigit(p)-_.getBCHDigit(_.G18);)p^=_.G18<<_.getBCHDigit(p)-_.getBCHDigit(_.G18);return w<<12|p},getBCHDigit:function(w){for(var p=0;w!=0;)p++,w>>>=1;return p},getPatternPosition:function(w){return _.PATTERN_POSITION_TABLE[w-1]},getMask:function(w,p,I){switch(w){case 0:return(p+I)%2==0;case 1:return p%2==0;case 2:return I%3==0;case 3:return(p+I)%3==0;case 4:return(Math.floor(p/2)+Math.floor(I/3))%2==0;case 5:return p*I%2+p*I%3==0;case 6:return(p*I%2+p*I%3)%2==0;case 7:return(p*I%3+(p+I)%2)%2==0;default:throw Error("bad maskPattern:"+w)}},getErrorCorrectPolynomial:function(w){for(var p=new l([1],0),I=0;I<w;I++)p=p.multiply(new l([1,b.gexp(I)],0));return p},getLengthInBits:function(w,p){if(1<=p&&10>p)switch(w){case 1:return 10;case 2:return 9;case n:return 8;case 8:return 8;default:throw Error("mode:"+w)}else if(27>p)switch(w){case 1:return 12;case 2:return 11;case n:return 16;case 8:return 10;default:throw Error("mode:"+w)}else if(41>p)switch(w){case 1:return 14;case 2:return 13;case n:return 16;case 8:return 12;default:throw Error("mode:"+w)}else throw Error("type:"+p)},getLostPoint:function(w){for(var p=w.getModuleCount(),I=0,v=0;v<p;v++)for(var T=0;T<p;T++){for(var S=0,P=w.isDark(v,T),R=-1;1>=R;R++)if(!(0>v+R||p<=v+R))for(var O=-1;1>=O;O++)0>T+O||p<=T+O||R==0&&O==0||P==w.isDark(v+R,T+O)&&S++;5<S&&(I+=3+S-5)}for(v=0;v<p-1;v++)for(T=0;T<p-1;T++)S=0,w.isDark(v,T)&&S++,w.isDark(v+1,T)&&S++,w.isDark(v,T+1)&&S++,w.isDark(v+1,T+1)&&S++,(S==0||S==4)&&(I+=3);for(v=0;v<p;v++)for(T=0;T<p-6;T++)w.isDark(v,T)&&!w.isDark(v,T+1)&&w.isDark(v,T+2)&&w.isDark(v,T+3)&&w.isDark(v,T+4)&&!w.isDark(v,T+5)&&w.isDark(v,T+6)&&(I+=40);for(T=0;T<p;T++)for(v=0;v<p-6;v++)w.isDark(v,T)&&!w.isDark(v+1,T)&&w.isDark(v+2,T)&&w.isDark(v+3,T)&&w.isDark(v+4,T)&&!w.isDark(v+5,T)&&w.isDark(v+6,T)&&(I+=40);for(T=S=0;T<p;T++)for(v=0;v<p;v++)w.isDark(v,T)&&S++;return w=Math.abs(100*S/p/p-50)/5,I+10*w}},b={glog:function(w){if(1>w)throw Error("glog("+w+")");return b.LOG_TABLE[w]},gexp:function(w){for(;0>w;)w+=255;for(;256<=w;)w-=255;return b.EXP_TABLE[w]},EXP_TABLE:Array(256),LOG_TABLE:Array(256)},$=0;8>$;$++)b.EXP_TABLE[$]=1<<$;for($=8;256>$;$++)b.EXP_TABLE[$]=b.EXP_TABLE[$-4]^b.EXP_TABLE[$-5]^b.EXP_TABLE[$-6]^b.EXP_TABLE[$-8];for($=0;255>$;$++)b.LOG_TABLE[b.EXP_TABLE[$]]=$;return l.prototype={get:function(w){return this.num[w]},getLength:function(){return this.num.length},multiply:function(w){for(var p=Array(this.getLength()+w.getLength()-1),I=0;I<this.getLength();I++)for(var v=0;v<w.getLength();v++)p[I+v]^=b.gexp(b.glog(this.get(I))+b.glog(w.get(v)));return new l(p,0)},mod:function(w){if(0>this.getLength()-w.getLength())return this;for(var p=b.glog(this.get(0))-b.glog(w.get(0)),I=Array(this.getLength()),v=0;v<this.getLength();v++)I[v]=this.get(v);for(v=0;v<w.getLength();v++)I[v]^=b.gexp(b.glog(w.get(v))+p);return new l(I,0).mod(w)}},d.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],d.getRSBlocks=function(w,p){var I=d.getRsBlockTable(w,p);if(I==null)throw Error("bad rs block @ typeNumber:"+w+"/errorCorrectLevel:"+p);for(var v=I.length/3,T=[],S=0;S<v;S++)for(var P=I[3*S+0],R=I[3*S+1],O=I[3*S+2],V=0;V<P;V++)T.push(new d(R,O));return T},d.getRsBlockTable=function(w,p){switch(p){case 1:return d.RS_BLOCK_TABLE[4*(w-1)+0];case 0:return d.RS_BLOCK_TABLE[4*(w-1)+1];case 3:return d.RS_BLOCK_TABLE[4*(w-1)+2];case 2:return d.RS_BLOCK_TABLE[4*(w-1)+3]}},g.prototype={get:function(w){return(this.buffer[Math.floor(w/8)]>>>7-w%8&1)==1},put:function(w,p){for(var I=0;I<p;I++)this.putBit((w>>>p-I-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(w){var p=Math.floor(this.length/8);this.buffer.length<=p&&this.buffer.push(0),w&&(this.buffer[p]|=128>>>this.length%8),this.length++}},typeof e=="string"&&(e={text:e}),e=t.extend({},{render:"canvas",width:256,height:256,typeNumber:-1,correctLevel:2,background:"#ffffff",foreground:"#000000"},e),this.each(function(){var w;if(e.render=="canvas"){w=new u(e.typeNumber,e.correctLevel),w.addData(e.text),w.make();var p=document.createElement("canvas");p.width=e.width,p.height=e.height;for(var I=p.getContext("2d"),v=e.width/w.getModuleCount(),T=e.height/w.getModuleCount(),S=0;S<w.getModuleCount();S++)for(var P=0;P<w.getModuleCount();P++){I.fillStyle=w.isDark(S,P)?e.foreground:e.background;var R=Math.ceil((P+1)*v)-Math.floor(P*v),O=Math.ceil((S+1)*v)-Math.floor(S*v);I.fillRect(Math.round(P*v),Math.round(S*T),R,O)}}else for(w=new u(e.typeNumber,e.correctLevel),w.addData(e.text),w.make(),p=t("<table></table>").css("width",e.width+"px").css("height",e.height+"px").css("border","0px").css("border-collapse","collapse").css("background-color",e.background),I=e.width/w.getModuleCount(),v=e.height/w.getModuleCount(),T=0;T<w.getModuleCount();T++)for(S=t("<tr></tr>").css("height",v+"px").appendTo(p),P=0;P<w.getModuleCount();P++)t("<td></td>").css("width",I+"px").css("background-color",w.isDark(T,P)?e.foreground:e.background).appendTo(S);w=p,jQuery(w).appendTo(this)})}})(jQuery);(function(t){t.fn.autogrow=function(e){return this.filter("textarea").each(function(){var n=this,i=t(n),u=16,l=i.hasClass("autogrow-short")?0:parseInt(i.css("lineHeight"))||0,d=t.extend({preGrowCallback:null,postGrowCallback:null,enterPressed:null,shiftEnterPressed:null},e),g=t("<div></div>").css({position:"absolute",top:-1e4,left:-1e4,width:i.width(),fontSize:i.css("fontSize"),fontFamily:i.css("fontFamily"),fontWeight:i.css("fontWeight"),lineHeight:i.css("lineHeight"),resize:"none","word-wrap":"break-word"}).appendTo(document.body),_=function(b){var $=function(T,S){for(var P=0,R="";P<S;P++)R+=T;return R},w=n.value.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(/ {2,}/g,function(T){return $("&nbsp;",T.length-1)+" "});if(b&&b.data&&b.data.event==="keydown"&&b.keyCode===13&&b.shiftKey)w+="<br />",d.shiftEnterPressed!=null&&d.shiftEnterPressed(i);else if(b&&b.data&&b.data.event==="keydown"&&b.keyCode===13){var p=w;return i.val(""),w="",i.height(Math.max(g.height()+l,u)),d.enterPressed!=null&&d.enterPressed(i,p),!1}g.css("width",i.width()),g.html(w+(l===0?"...":""));var I=i.height(),v=Math.max(g.height()+l,u);d.preGrowCallback!=null&&(v=d.preGrowCallback(i,g,v,u)),i.height(v),d.postGrowCallback!=null&&d.postGrowCallback(i,I,v)};i.change(_).keyup(_).keydown({event:"keydown"},_),t(window).resize(_),_()})}})(jQuery);/*!
 * jQuery Steps v1.1.0 - 09/04/2014
 * Copyright (c) 2014 Rafael Staib (http://www.jquery-steps.com)
 * Licensed under MIT http://www.opensource.org/licenses/MIT
 */(function(t,e){t.fn.extend({_aria:function(tt,rt){return this.attr("aria-"+tt,rt)},_removeAria:function(tt){return this.removeAttr("aria-"+tt)},_enableAria:function(tt){return tt==null||tt?this.removeClass("disabled")._aria("disabled","false"):this.addClass("disabled")._aria("disabled","true")},_showAria:function(tt){return tt==null||tt?this.show()._aria("hidden","false"):this.hide()._aria("hidden","true")},_selectAria:function(tt){return tt==null||tt?this.addClass("current")._aria("selected","true"):this.removeClass("current")._aria("selected","false")},_id:function(tt){return tt?this.attr("id",tt):this.attr("id")}}),String.prototype.format||(String.prototype.format=function(){for(var tt=arguments.length===1&&t.isArray(arguments[0])?arguments[0]:arguments,rt=this,at=0;at<tt.length;at++){var dt=new RegExp("\\{"+at+"\\}","gm");rt=rt.replace(dt,tt[at])}return rt});var n=0,i="jQu3ry_5teps_St@te_",u="-t-",l="-p-",d="-h-",g="Index out of range.",_="One or more corresponding step {0} are missing.";function b(tt,rt){q(tt).push(rt)}function $(tt,rt,at){var dt=tt.children(rt.headerTag),pt=tt.children(rt.bodyTag);dt.length>pt.length?ft(_,"contents"):dt.length<pt.length&&ft(_,"titles");var gt=rt.startIndex;if(at.stepCount=dt.length,rt.saveState&&t.cookie){var bt=t.cookie(i+nt(tt)),Ct=parseInt(bt,0);!isNaN(Ct)&&Ct<at.stepCount&&(gt=Ct)}at.currentIndex=gt,dt.each(function(Mt){var kt=t(this),It=pt.eq(Mt),Rt=It.data("mode"),Nt=Rt==null?xt.html:lt(xt,/^\s*$/.test(Rt)||isNaN(Rt)?Rt:parseInt(Rt,0)),Et=Nt===xt.html||It.data("url")===e?"":It.data("url"),_t=Nt!==xt.html&&It.data("loaded")==="1",At=t.extend({},Pt,{title:kt.html(),content:Nt===xt.html?It.html():"",contentUrl:Et,contentMode:Nt,contentLoaded:_t});b(tt,At)})}function w(tt){tt.triggerHandler("canceled")}function p(tt,rt){return tt.currentIndex-rt}function I(tt,rt){var at=T(tt);tt.unbind(at).removeData("uid").removeData("options").removeData("state").removeData("steps").removeData("eventNamespace").find(".actions a").unbind(at),tt.removeClass(rt.clearFixCssClass+" vertical");var dt=tt.find(".content > *");dt.removeData("loaded").removeData("mode").removeData("url"),dt.removeAttr("id").removeAttr("role").removeAttr("tabindex").removeAttr("class").removeAttr("style")._removeAria("labelledby")._removeAria("hidden"),tt.find(".content > [data-mode='async'],.content > [data-mode='iframe']").empty();var pt=t('<{0} class="{1}"></{0}>'.format(tt.get(0).tagName,tt.attr("class"))),gt=tt._id();return gt!=null&&gt!==""&&pt._id(gt),pt.html(tt.find(".content").html()),tt.after(pt),tt.remove(),pt}function v(tt,rt){var at=tt.find(".steps li").eq(rt.currentIndex);tt.triggerHandler("finishing",[rt.currentIndex])?(at.addClass("done").removeClass("error"),tt.triggerHandler("finished",[rt.currentIndex])):at.addClass("error")}function T(tt){var rt=tt.data("eventNamespace");return rt==null&&(rt="."+nt(tt),tt.data("eventNamespace",rt)),rt}function S(tt,rt){var at=nt(tt);return tt.find("#"+at+u+rt)}function P(tt,rt){var at=nt(tt);return tt.find("#"+at+l+rt)}function R(tt,rt){var at=nt(tt);return tt.find("#"+at+d+rt)}function O(tt){return tt.data("options")}function V(tt){return tt.data("state")}function q(tt){return tt.data("steps")}function et(tt,rt){var at=q(tt);return(rt<0||rt>=at.length)&&ft(g),at[rt]}function nt(tt){var rt=tt.data("uid");return rt==null&&(rt=tt._id(),rt==null&&(rt="steps-uid-".concat(n),tt._id(rt)),n++,tt.data("uid",rt)),rt}function lt(tt,rt){if(vt("enumType",tt),vt("keyOrValue",rt),typeof rt=="string"){var at=tt[rt];return at===e&&ft("The enum key '{0}' does not exist.",rt),at}else if(typeof rt=="number"){for(var dt in tt)if(tt[dt]===rt)return rt;ft("Invalid enum value '{0}'.",rt)}else ft("Invalid key or value type.")}function it(tt,rt,at){return wt(tt,rt,at,U(at,1))}function F(tt,rt,at){return wt(tt,rt,at,p(at,1))}function ct(tt,rt,at,dt){if((dt<0||dt>=at.stepCount)&&ft(g),!(rt.forceMoveForward&&dt<at.currentIndex)){var pt=at.currentIndex;return tt.triggerHandler("stepChanging",[at.currentIndex,dt])?(at.currentIndex=dt,ot(tt,rt,at),h(tt,rt,at,pt),o(tt,rt,at),$t(tt,rt,at),J(tt,rt,at,dt,pt,function(){tt.triggerHandler("stepChanged",[dt,pt])})):tt.find(".steps li").eq(pt).addClass("error"),!0}}function U(tt,rt){return tt.currentIndex+rt}function st(tt){var rt=t.extend(!0,{},Lt,tt);return this.each(function(){var at=t(this),dt={currentIndex:rt.startIndex,currentStep:null,stepCount:0,transitionElement:null};at.data("options",rt),at.data("state",dt),at.data("steps",[]),$(at,rt,dt),H(at,rt,dt),L(at,rt),rt.autoFocus&&n===0&&S(at,rt.startIndex).focus(),at.triggerHandler("init",[rt.startIndex])})}function yt(tt,rt,at,dt,pt){(dt<0||dt>at.stepCount)&&ft(g),pt=t.extend({},Pt,pt),ut(tt,dt,pt),at.currentIndex!==at.stepCount&&at.currentIndex>=dt&&(at.currentIndex++,ot(tt,rt,at)),at.stepCount++;var gt=tt.find(".content"),bt=t("<{0}>{1}</{0}>".format(rt.headerTag,pt.title)),Ct=t("<{0}></{0}>".format(rt.bodyTag));return(pt.contentMode==null||pt.contentMode===xt.html)&&Ct.html(pt.content),dt===0?gt.prepend(Ct).prepend(bt):P(tt,dt-1).after(Ct).after(bt),W(tt,at,Ct,dt),Z(tt,rt,at,bt,dt),m(tt,rt,at,dt),dt===at.currentIndex&&h(tt,rt,at),o(tt,rt,at),tt}function ut(tt,rt,at){q(tt).splice(rt,0,at)}function mt(tt){var rt=t(this),at=O(rt),dt=V(rt);if(at.suppressPaginationOnFocus&&rt.find(":focus").is(":input"))return tt.preventDefault(),!1;var pt={left:37,right:39};tt.keyCode===pt.left?(tt.preventDefault(),F(rt,at,dt)):tt.keyCode===pt.right&&(tt.preventDefault(),it(rt,at,dt))}function $t(tt,rt,at){if(at.stepCount>0){var dt=at.currentIndex,pt=et(tt,dt);if(!rt.enableContentCache||!pt.contentLoaded)switch(lt(xt,pt.contentMode)){case xt.iframe:tt.find(".content > .body").eq(at.currentIndex).empty().html('<iframe src="'+pt.contentUrl+'" frameborder="0" scrolling="no" />').data("loaded","1");break;case xt.async:var gt=P(tt,dt)._aria("busy","true").empty().append(Q(rt.loadingTemplate,{text:rt.labels.loading}));t.ajax({url:pt.contentUrl,cache:!1}).done(function(bt){gt.empty().html(bt)._aria("busy","false").data("loaded","1"),tt.triggerHandler("contentLoaded",[dt])});break}}}function wt(tt,rt,at,dt){var pt=at.currentIndex;if(dt>=0&&dt<at.stepCount&&!(rt.forceMoveForward&&dt<at.currentIndex)){var gt=S(tt,dt),bt=gt.parent(),Ct=bt.hasClass("disabled");return bt._enableAria(),gt.click(),pt===at.currentIndex&&Ct?(bt._enableAria(!1),!1):!0}return!1}function r(tt){tt.preventDefault();var rt=t(this),at=rt.parent().parent().parent().parent(),dt=O(at),pt=V(at),gt=rt.attr("href");if(rt.parent().hasClass("disabled"))return!1;switch(gt.substring(gt.lastIndexOf("#")+1)){case"cancel":w(at);break;case"finish":v(at,pt);break;case"next":it(at,dt,pt);break;case"previous":F(at,dt,pt);break}return!1}function o(tt,rt,at){if(rt.enablePagination){var dt=tt.find(".actions a[href$='#finish']").parent(),pt=tt.find(".actions a[href$='#next']").parent();if(!rt.forceMoveForward){var gt=tt.find(".actions a[href$='#previous']").parent();gt._enableAria(at.currentIndex>0)}rt.enableFinishButton&&rt.showFinishButtonAlways?(dt._enableAria(at.stepCount>0),pt._enableAria(at.stepCount>1&&at.stepCount>at.currentIndex+1)):(dt._showAria(rt.enableFinishButton&&at.stepCount===at.currentIndex+1),pt._showAria(at.stepCount===0||at.stepCount>at.currentIndex+1)._enableAria(at.stepCount>at.currentIndex+1||!rt.enableFinishButton))}}function h(tt,rt,at,dt){var pt=S(tt,at.currentIndex),gt=t('<span class="current-info audible">'+rt.labels.current+" </span>"),bt=tt.find(".content > .title");if(dt!=null){var Ct=S(tt,dt);Ct.parent().addClass("done").removeClass("error")._selectAria(!1),bt.eq(dt).removeClass("current").next(".body").removeClass("current"),gt=Ct.find(".current-info"),pt.focus()}pt.prepend(gt).parent()._selectAria().removeClass("done")._enableAria(),bt.eq(at.currentIndex).addClass("current").next(".body").addClass("current")}function m(tt,rt,at,dt){for(var pt=nt(tt),gt=dt;gt<at.stepCount;gt++){var bt=pt+u+gt,Ct=pt+l+gt,Mt=pt+d+gt,kt=tt.find(".title").eq(gt)._id(Mt);tt.find(".steps a").eq(gt)._id(bt)._aria("controls",Ct).attr("href","#"+Mt).html(Q(rt.titleTemplate,{index:gt+1,title:kt.html()})),tt.find(".body").eq(gt)._id(Ct)._aria("labelledby",Mt)}}function L(tt,rt){var at=T(tt);tt.bind("canceled"+at,rt.onCanceled),tt.bind("contentLoaded"+at,rt.onContentLoaded),tt.bind("finishing"+at,rt.onFinishing),tt.bind("finished"+at,rt.onFinished),tt.bind("init"+at,rt.onInit),tt.bind("stepChanging"+at,rt.onStepChanging),tt.bind("stepChanged"+at,rt.onStepChanged),rt.enableKeyNavigation&&tt.bind("keyup"+at,mt),tt.find(".actions a").bind("click"+at,r)}function N(tt,rt,at,dt){return dt<0||dt>=at.stepCount||at.currentIndex===dt?!1:(G(tt,dt),at.currentIndex>dt&&(at.currentIndex--,ot(tt,rt,at)),at.stepCount--,R(tt,dt).remove(),P(tt,dt).remove(),S(tt,dt).parent().remove(),dt===0&&tt.find(".steps li").first().addClass("first"),dt===at.stepCount&&tt.find(".steps li").eq(dt).addClass("last"),m(tt,rt,at,dt),o(tt,rt,at),!0)}function G(tt,rt){q(tt).splice(rt,1)}function H(tt,rt,at){var dt='<{0} class="{1}">{2}</{0}>',pt=lt(Tt,rt.stepsOrientation),gt=pt===Tt.vertical?" vertical":"",bt=t(dt.format(rt.contentContainerTag,"content "+rt.clearFixCssClass,tt.html())),Ct=t(dt.format(rt.stepsContainerTag,"steps "+rt.clearFixCssClass,'<ul role="tablist"></ul>')),Mt=bt.children(rt.headerTag),kt=bt.children(rt.bodyTag);tt.attr("role","application").empty().append(Ct).append(bt).addClass(rt.cssClass+" "+rt.clearFixCssClass+gt),kt.each(function(It){W(tt,at,t(this),It)}),Mt.each(function(It){Z(tt,rt,at,t(this),It)}),h(tt,rt,at),z(tt,rt,at)}function W(tt,rt,at,dt){var pt=nt(tt),gt=pt+l+dt,bt=pt+d+dt;at._id(gt).attr("role","tabpanel")._aria("labelledby",bt).addClass("body step-"+dt).attr("data-step",dt)._showAria(rt.currentIndex===dt)}function z(tt,rt,at){if(rt.enablePagination){var dt='<{0} class="actions no-ajaxy {1}"><ul role="menu" aria-label="{2}">{3}</ul></{0}>',pt='<li class="button_{0} no-ajaxy"><a href="#{0}" role="menuitem" class="no-ajaxy">{1}</a></li>',gt="";rt.forceMoveForward||(gt+=pt.format("previous",rt.labels.previous)),gt+=pt.format("next",rt.labels.next),rt.enableFinishButton&&(gt+=pt.format("finish",rt.labels.finish)),rt.enableCancelButton&&(gt+=pt.format("cancel",rt.labels.cancel)),tt.append(dt.format(rt.actionContainerTag,rt.clearFixCssClass,rt.labels.pagination,gt)),o(tt,rt,at),$t(tt,rt,at)}}function Q(tt,rt){for(var at=tt.match(/#([a-z]*)#/gi),dt=0;dt<at.length;dt++){var pt=at[dt],gt=pt.substring(1,pt.length-1);rt[gt]===e&&ft("The key '{0}' does not exist in the substitute collection!",gt),tt=tt.replace(pt,rt[gt])}return tt}function Z(tt,rt,at,dt,pt){var gt=nt(tt),bt=gt+u+pt,Ct=gt+l+pt,Mt=gt+d+pt,kt=tt.find(".steps > ul"),It=Q(rt.titleTemplate,{index:pt+1,title:dt.html()}),Rt=t('<li role="tab"><a id="'+bt+'" href="#'+Mt+'" aria-controls="'+Ct+'" class="no-ajaxy">'+It+"</a></li>");Rt._enableAria(rt.enableAllSteps||at.currentIndex>pt),at.currentIndex>pt&&Rt.addClass("done"),dt._id(Mt).attr("tabindex","-1").addClass("title"),pt===0?kt.prepend(Rt):kt.find("li").eq(pt-1).after(Rt),pt===0&&kt.find("li").removeClass("first").eq(pt).addClass("first"),pt===at.stepCount-1&&kt.find("li").removeClass("last").eq(pt).addClass("last"),Rt.children("a").bind("click"+T(tt),ht)}function ot(tt,rt,at){rt.saveState&&t.cookie&&t.cookie(i+nt(tt),at.currentIndex)}function J(tt,rt,at,dt,pt,gt){var bt=tt.find(".content > .body"),Ct=lt(St,rt.transitionEffect),Mt=rt.transitionEffectSpeed,kt=bt.eq(dt),It=bt.eq(pt);switch(Ct){case St.fade:case St.slide:var Rt=Ct===St.fade?"fadeOut":"slideUp",Nt=Ct===St.fade?"fadeIn":"slideDown";at.transitionElement=kt,It[Rt](Mt,function(){var Ot=t(this)._showAria(!1).parent().parent(),Vt=V(Ot);Vt.transitionElement&&(Vt.transitionElement[Nt](Mt,function(){t(this)._showAria()}).promise().done(gt),Vt.transitionElement=null)});break;case St.slideLeft:var Et=It.outerWidth(!0),_t=dt>pt?-Et:Et,At=dt>pt?Et:-Et;t.when(It.animate({left:_t},Mt,function(){t(this)._showAria(!1)}),kt.css("left",At+"px")._showAria().animate({left:0},Mt)).done(gt);break;default:t.when(It._showAria(!1),kt._showAria()).done(gt);break}}function ht(tt){tt.preventDefault();var rt=t(this),at=rt.parent().parent().parent().parent(),dt=O(at),pt=V(at),gt=pt.currentIndex;if(rt.parent().is(":not(.disabled):not(.current)")){var bt=rt.attr("href"),Ct=parseInt(bt.substring(bt.lastIndexOf("-")+1),0);ct(at,dt,pt,Ct)}return gt===pt.currentIndex&&S(at,gt).focus(),!1}function ft(tt){throw arguments.length>1&&(tt=tt.format(Array.prototype.slice.call(arguments,1))),new Error(tt)}function vt(tt,rt){rt==null&&ft("The argument '{0}' is null or undefined.",tt)}t.fn.steps=function(tt){if(t.fn.steps[tt])return t.fn.steps[tt].apply(this,Array.prototype.slice.call(arguments,1));if(typeof tt=="object"||!tt)return st.apply(this,arguments);t.error("Method "+tt+" does not exist on jQuery.steps")},t.fn.steps.add=function(tt){var rt=V(this);return yt(this,O(this),rt,rt.stepCount,tt)},t.fn.steps.count=function(){var tt=V(this);return tt.stepCount},t.fn.steps.destroy=function(){return I(this,O(this))},t.fn.steps.finish=function(){v(this,V(this))},t.fn.steps.getCurrentIndex=function(){return V(this).currentIndex},t.fn.steps.getCurrentStep=function(){return et(this,V(this).currentIndex)},t.fn.steps.getStep=function(tt){return et(this,tt)},t.fn.steps.insert=function(tt,rt){return yt(this,O(this),V(this),tt,rt)},t.fn.steps.next=function(){return it(this,O(this),V(this))},t.fn.steps.previous=function(){return F(this,O(this),V(this))},t.fn.steps.remove=function(tt){return N(this,O(this),V(this),tt)},t.fn.steps.setStep=function(tt){var rt=O(this),at=V(this);return ct(this,rt,at,tt)},t.fn.steps.skip=function(tt){throw new Error("Not yet implemented!")};var xt=t.fn.steps.contentMode={html:0,iframe:1,async:2},Tt=t.fn.steps.stepsOrientation={horizontal:0,vertical:1},St=t.fn.steps.transitionEffect={none:0,fade:1,slide:2,slideLeft:3},Pt=t.fn.steps.stepModel={title:"",content:"",contentUrl:"",contentMode:xt.html,contentLoaded:!1},Lt=t.fn.steps.defaults={headerTag:"h1",bodyTag:"div",contentContainerTag:"div",actionContainerTag:"div",stepsContainerTag:"div",cssClass:"wizard",clearFixCssClass:"clearfix",stepsOrientation:Tt.horizontal,titleTemplate:`<span class="number">#index#</span> <span class='title'>#title#</span>`,loadingTemplate:'<span class="spinner"></span> #text#',autoFocus:!1,enableAllSteps:!1,enableKeyNavigation:!0,enablePagination:!0,suppressPaginationOnFocus:!0,enableContentCache:!0,enableCancelButton:!1,enableFinishButton:!0,preloadContent:!1,showFinishButtonAlways:!1,forceMoveForward:!1,saveState:!1,startIndex:0,transitionEffect:St.none,transitionEffectSpeed:280,onStepChanging:function(tt,rt,at){return!0},onStepChanged:function(tt,rt,at){},onCanceled:function(tt){},onFinishing:function(tt,rt){return!0},onFinished:function(tt,rt){},onContentLoaded:function(tt,rt){},onInit:function(tt,rt){},labels:{cancel:"Cancel",current:"current step:",pagination:"Pagination",finish:"Finish",next:"Next <i class='material-icons'>&#xE315;</i>",previous:"<i class='material-icons'>&#xE314;</i> Previous",loading:"Loading ..."}}})(jQuery);/*! Copyright 2012, Ben Lin (http://dreamerslab.com/)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 1.0.19
 *
 * Requires: jQuery >= 1.2.3
 */(function(t){typeof define=="function"&&define.amd?define(["jquery"],t):t(jQuery)})(function(t){t.fn.addBack=t.fn.addBack||t.fn.andSelf,t.fn.extend({actual:function(e,n){if(!this[e])throw'$.actual => The jQuery method "'+e+'" you called does not exist';var i={absolute:!1,clone:!1,includeMargin:!1,display:"block"},u=t.extend(i,n),l=this.eq(0),d,g;if(u.clone===!0)d=function(){var p="position: absolute !important; top: -1000 !important; ";l=l.clone().attr("style",p).appendTo("body")},g=function(){l.remove()};else{var _=[],b="",$;d=function(){$=l.parents().addBack().filter(":hidden"),b+="visibility: hidden !important; display: "+u.display+" !important; ",u.absolute===!0&&(b+="position: absolute !important; "),$.each(function(){var p=t(this),I=p.attr("style");_.push(I),p.attr("style",I?I+";"+b:b)})},g=function(){$.each(function(p){var I=t(this),v=_[p];v===void 0?I.removeAttr("style"):I.attr("style",v)})}}d();var w=/(outer)/.test(e)?l[e](u.includeMargin):l[e]();return g(),w}})});export{Transform$1 as A,cubicInOut$1 as B,Color$1 as C,cubicIn$1 as D,cubicOut$1 as E,basis$4 as F,basisClosed$2 as G,rgbBasisClosed$1 as H,interpolateTransformCss$1 as I,interpolateTransformSvg$1 as J,matcher$1 as K,namespace$1 as L,namespaces$1 as M,selection$1 as N,selector$1 as O,selectorAll$1 as P,styleValue$1 as Q,Rgb$1 as R,Selection$3 as S,Timer$1 as T,timeout$2 as U,timerFlush$1 as V,transition$1 as W,defaultView$1 as X,transform$2 as Y,c3$1 as Z,c3Exports as _,array$4 as a,rgbConvert$1 as b,creator$1 as c,dispatch$1 as d,define$2 as e,extend$1 as f,darker$1 as g,brighter$1 as h,constant$e as i,interpolateNumber$1 as j,interpolateRgb$1 as k,interpolateString$1 as l,color$1 as m,hue$2 as n,hsl$3 as o,nogamma$1 as p,now$1 as q,root$2 as r,select$1 as s,SCHEDULED$1 as t,Transition$1 as u,interrupt$1 as v,timer$1 as w,rgbBasis$1 as x,rgb$1 as y,identity$a as z};
//# sourceMappingURL=jquery.actual-BVEmWd6u.js.map
